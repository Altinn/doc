[
{
	"uri": "https://altinn.github.io/docs/roadmap/2019/",
	"title": "Altinn roadmap 2019",
	"tags": [],
	"description": "Overordnet roadmap for videreutvikling av Altinn i 2019.",
	"content": " Overordnet roadmap for videreutvikling av Altinn i 2019.\nQ1 - 2019 ✔️ Tilby bruker mulighet til å definere \u0026ldquo;mine favoritt-aktører\u0026rdquo; for å lette aktørvalg i pålogging I dag får bruker med mange aktører presentert alle aktører hvor de mest brukte aktørene står øverst. Konseptet \u0026ldquo;mest brukte aktører\u0026rdquo; skal fjernes og i stedet vil det tilbys funksjonalitet for å legge til - og fjerne favorittaktører. Dette ble levert i release 19.3.\nQ2 - 2019 ✔️ Nasjonal tjeneste for dokumentasjonsbevis - eBevis Det skal etableres en løsning for innhenting av dokumentasjonsbevis fra leverandør. Denne ble produksjonssatt 4. april se artikkel i digi.no Altinn skytjenester Det skal etableres Altinn testmiljø i sky. Miljøene skal benyttes til å teste tjenester utviklet i Altinn Studio, samt endringer i sluttbrukerløsningen.\nForenkle administrasjon av lokal rolle med mange rettigheter Prosessen med å legge til nye tjenester i en lokal rolle forenkles. I stedet for å måtte legge til en og en tjeneste skal administrator kunne legge til flere tjenester i en operasjon. Det vil også bli mulig å administrere flere tjenester i samme skjermbilde. Eier av tjenesten skal også vises i søkevinduet slik at det er lettere å velge riktig tjeneste.\nNy innlesing av Enhetsregisteret Følgende skal utføres:\n Tilpasning/utvidelse av Enhetsregisteret i Altinn Full re-innlesing av Enhetsregisteret i Altinn  Sanering i tjenesteeieres arkiv Tjenesteeieres arkiv er der tjenesteeiere i Altinn kan se elementer som tilhører egen virksomhet. Det skal gjennomføres en revisjon av lagringstid for tjenester i dette arkivet. Det er sendt ut varsel om dette til tjenesteeiere.\nOpprette rolle for hovedadministrator Det blir nå mulig for daglig leder/styrets leder eller tilsvarende rolleinnehaver i Enhetsregisteret å peke ut en eller flere tiltrodde medarbeidere i organisasjonen som hovedadministrator for å håndtere all tilgangsstyring i Altinn på vegne av virksomheten. Disse personene vil kunne delegere roller og rettigheter de selv ikke innehar til andre og til seg selv. Dette gjelder også fremtidige roller og rettigheter som opprettes.\nDet vil også være mulig for privatpersoner å utnevne en hovedadministrator på vegne av seg selv.\nHåndtering av meldinger og skjema med særlig sensitivt innhold til organisasjoner I dag må alle tjenester knyttes til roller som daglig leder i virksomheten har. Dette resulterer i at daglig leder får automatisk innsyn i alle meldinger som sendes virksomheten. Det blir nå mulig å sende meldinger/opprette skjema til virksomheten som ingen i utgangspunktet får innsyn i. Daglig leder eller hovedadministrator kan fortsatt gi tilgang til disse meldingene til utvalgt medarbeider eller seg selv.\nNy brukerdialog for å be om - og gi rettighet Det blir nå mulig for sluttbruker å \u0026ldquo;be om tilgang\u0026rdquo; til en bestemt rolle eller utføre en bestemt tjeneste. En forespørsel vil da gå til de i virksomheten som har administratormyndighet og som kan ta stilling til om rettighet skal innvilges eller ikke. Endringen omfatter ny dialog og brukergrensesnitt som skal brukes for de som ber om rettighet samt for de som skal gi rettighet.\nTa i bruk AA registeret for å registrere ansatt relasjon til virksomhet AA registeret skal tas i bruk som et hjelpemiddel i tilgangsstyring i Altinn. Det blir nå mulig ved bruk av AA-registeret som autorisasjonskilde å forenkle tilgangsstyring ved å:\n gi bedre oversikt over hvem som har tilganger (er vedkommende ansatt/ikke ansatt) finne og velge rettighetsmottaker fra en liste over ansatte i stedet for å spørre den ansatte etter fødselsnummer gi varsling hvis ansatt slutter legge til rette for at ansatte selv kan be om rettigheter  Autorisasjon for Tjenester 3.0 Det skal etableres støtte for å kunne autorisere applikasjoner utviklet i Tjenester 3.0. Altinn Autorisasjon skal forholde seg til Tjenester 3.0 som en ekstern ressurs (på lik linje med andre typer ressurser som skal kunne tilgangsstyres i Altinn). Dette gjør det enklere å introdusere nye typer ressurser.\nTilby mulighet for å opprette persistent samtykkeforespørsel samt bedre løsning for å oppdatere tjenesteeierstyrt rettighetsregister (SRR) Det blir nå mulig å ta i bruk en mer robust løsning for å be om - og gi samtykke.\nDagens løsning for å opprette et samtykke benytter url for å sende parametre til en samtykkeside som skal vises for den som skal gi samtykke. Tjenesteeier må bruke webService for å registre regler knyttet til bruk av samtykke. Denne tjenesten er konstruert slik at det er lett for Tjenesteeier å gjøre feil.\nMed denne endringen tilbys to nye REST-tjenester:\n REST for å opprette samtykkeforespørsel. Aktør som ønsker samtykke kaller en REST-tjeneste med nødvendige parametre for å registrere en samtykkeforespørsel. Altinn returnerer en GUID som senere brukes for å sende bruker videre til samtykkedialogen. REST for å oppdatere tjenesteeierstyrt rettighetsregister (SRR) hvor regler endres ved å sende verdier i en godt definert liste  Q3 - 2019 Utfasing av støtte for TLS 1.1 og 1.0 Transport Layer Security (TLS) er kryptografiske protokoller som tilbyr sikker kommunikasjon på Internett. Støtte for TLS 1.0 og 1.1 skal fjernes for all inngående trafikk til Altinn. Altinn vil kun støtte inngående trafikk basert på TLS 1.2. Driftsvarsling er sendt ut til tjenesteeiere og sluttbrukersystemleverandører.\nKonsolidering av brukere med D-nummer Et D-nummer er et midlertidig ID-nummer. Det skal etableres en løsning slik at bruker med D-nummer som har fått fødselsnummer skal kunne få tilgang til det som lå i innboks/arkiv på D-nummer samt kunne videreføre en skattedialog som ble startet på D-nummer.\nOppgradering av Biztalk Biztalk skal oppgraderes til nyere versjon. Dette er et produkt som anvendes til forsendelse og mottak av data mellom Altinn og tjenesteeiere. Oppgraderingen planlegges gjennomført slik at eksisterende tjenester ikke skal påvirkes.\nBedre oversikt over rettigheter Det blir nå mulig å tilby bruker bedre og mer tilgjengelig oversikt over rettigheter. Det kan oppleves som vanskelig for sluttbruker å skaffe oversikt hva man selv kan gjøre og hva andre kan gjøre på vegene av valgt aktør.\nDet skal etableres løsning som gir bruker bedre oversikt over hva:\n JEG har og kan gjøre, dvs \u0026ldquo;Min oversikt\u0026rdquo; andre har og kan gjøre på vegne av valgt aktør, dvs tilgangsstyrers oversikt  Sikkerhet i eOppslag - felles tjeneste fra Maskinporten og Altinn autorisasjon Det blir nå mulig å bruke Altinns autorisasjonsløsning for å kunne gi tilgang til andre løsninger utenfor Altinn. I samarbeid med DIFI skal Altinn Autorisasjon nå tilby autorisasjonsløsning for tilgangsstyring til trydeopplysninger fra NAV sitt API.\nTjenester 3.0 Det vil etableres tre nye løsninger:\n Altinn Studio anvendes til å utvikle nye container-baserte applikasjoner (\u0026ldquo;apps\u0026rdquo;). Denne løsningen vil overta for dagens tjenesteutviklingsløsning (TUL). Altinn Apps er container-infrastrukturen som vil kjøre og tilgjengeliggjøre applikasjonene for brukerne. Hver organisasjon vil ha sin helt egen infrastruktur. Altinn Platform vil tilby APIer for felles funksjonalitet som f.eks. registre, grensesnitt, autorisasjon og datalagring.  Vi utvikler smidig og endringer gjøres fortløpende tilgjengelig på https://altinn.studio.\nAlle de nye løsningene etableres i public cloud. Funksjonalitet for å utvikle en applikasjon og teste den i et testmiljø vil komme i Q2, og mulighet for å produksjonssette applikasjoner vil komme i Q3.\n Tjenesteutvikler utvikler tjenester i Altinnstudio. Tjenesteutvikler migrerer tjenestene selv til Altinn Apps I Altinn Apps vil sluttbrukere få tilgang til og kunne arbeide med tjenester utviklet i Altinnstudio Altinn Plattform inneholder fellesfunksjoner og data/registre som deles på tvers av alle tjenester i Altinn Apps Tjenesteutvikler vil fortsatt kunne utvikle tjenester i TUL i en periode fremover. Det er kun leverandør som kan migrere disse tjenestene til produksjonsmiljøet Sluttbruker går inn på vanlige måte på www.altinn.no. Når bruker arbeider med en tjeneste utviklet i TUL vil dette skje på samme måte som tidligere. Denne tjenesten kjøres i sluttbrukerløsningen (SBL). Men, når bruker velger å arbeide med en tjeneste som er utviklet i Altinnstudio vil bruker kjøre denne tjenesten i skymiljøet Altinn Apps. Brukere vil oppleve en annen interaksjon og layout på tjenester som kjører i Altinn Apps vs en tjeneste som kjører direkte i sluttbrukerløsningen. Skjermbilder og brukergrensesnitt vil oppleves mer moderne og fremtidsrettet i Altinn Apps  All kode og backlog for utvikling ligger åpent på GitHub. Alle kan dermed enkelt opprette en issue, f.eks. bug, spørsmål eller et forbedringsforslag.\nDe nye løsningene vil eksistere i parallell med TUL og dagens Altinn sluttbrukerløsning (SBL). Når alle tjenester fra TUL er flyttet over til Altinn Studio vil både TUL og tilhørende funksjonalitet i SBL fases ut.\nMer detaljerte arkitekturtegninger finnes på docs.altinn.studio, f.eks. løsningsarkitektur og infrastruktur.\nSe også https://www.altinndigital.no/studio.\nErstatte /api/help med dokumentasjon på Altinn docs altinn.no/api/help for REST-APIet skal avvikles. I stedet skal dokumentasjon av REST-APIet legges ut på Altinn docs. Dette vil blir tilrettelagt gjennom at det skal etableres en offentlig tilgjengelig OpenAPI 3.0-spesifikasjon som blir lagt til grunn for å generere dokumentasjon.\nMålsetning med endringen er å oppnå bedre dokumentasjon samt enklere vedlikehold av dokumentasjon av REST-API.\nQ4 - 2019 Forbedre logging av tjenesteeiers bruk av løsningen For å støtte opp under en evt. ny forretningsmodell for Altinn vil vi få på plass en bedre logging av tjenesteeiers bruk av løsningen. Dette omfatter bruk av melding-, skjema-, innsyn-, autorisasjon/lenke-, integrasjons- og varslingstjeneste.\n\u0026ldquo;Proffversjon\u0026rdquo; av innboks Som proffbruker av Altinn skal det kunne være mulig å tilpasse innboksen slik at den bedre ivaretar behovene, samt legger til rette for at en skal kunne gjøre fleksible søk på tvers av aktører.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/a/",
	"title": "A: Skjemautvikling i InfoPath",
	"tags": [],
	"description": "Dette vedlegget tar for seg hvordan man stegvis utvikler et Altinn-skjema / innsendingstjeneste i InfoPath.",
	"content": " Dette vedlegget tar for seg hvordan man stegvis utvikler et Altinn-skjema / innsendingstjeneste i InfoPath. For informasjon om mer generell InfoPath funksjonalitet, henvises til standard dokumentasjon for Microsoft InfoPath. Denne kan bl.a. finnes ved hjelp av hjelp-funksjonen (trykk F1) i InfoPath eller på http://office.microsoft.com/nb-no/infopath/default.aspx\nDet forventes at den som skal bruke dette dokumentet har bakgrunn fra bruk av dataverktøy og helst også fra programmering. Kjennskap til hva en XSD er, og hvor den kommer fra er en betingelse for å utvikle skjemaer. Som en tommelfingerregel, er det anbefalt at alle skjema bygges på en XSD, og det er XSD’en som angir hvilke felter som skjemaet skal bestå av. Samme XSD vil også bli benyttet senere for validering av skjema ved innsending av sluttbruker.\nVidere for de som skal programmere, forlanges kompetanse i bruk av Visual Studio.\nFør oppstart av InfoPath I eksemplet beskrevet i dette dokumentet, skal det lages utvalgte deler av skjema RF-1189 og RF-1113.\nFørst bør det lages en egen katalog for lagring av filer knyttet til utvikling av skjemaet. Det skal her benyttes TUL-share. P.t. er det \\\\alt-tul-db-c02\\tulshare\\Infopath\\etater og hvilken tjenesteeier man utvikler for. Det bør lages én katalog pr. utgave.\nPå denne katalogen bør også datakilde (XSD) lagres. XSD kan hentes fra SERES før et skjema kan utvikles i InfoPath (inneholder definisjon av hvilke felt som skal være med i skjema). Det er også mulig å lage XSD selv, eller lage XSD på bakgrunn av InfoPato-skjemaet i InfoPath.\nAltinn-definerte inputfelt Ut av boksen lar ikke InfoPath deg benytte egendefinerte inputfelter i en repeterende gruppe. Dette er ønsket løst uten at hjelpefeltene må legges til i skjemaets opprinnelige datakilde, i tidligere løsning omtalt som OR-spesifikasjon.\nFor å løse dette problemet må man benytte et Altinn-definert input felt. Et altinn-definert felt er et felt som er definert i en egen datakilde, hvor datakilden enten er importert til eller refererer til hoveddatakilden. Dette gjøres ved å først lage datakilden hvor hjelpefeltene skal ligge. Disse vil da ligge i et eget navnerom (namespace). Dette navnerommet må begynne med altinn i alle tilfeller.\nVidere følger et eksempel på bruk av Altinn-definerte inputfelt i RF-1037. RF-1037 inneholder en tabell for arbeidsgiveravgift hvor bruker skal velge en komunne fra en nedtrekksliste, hvorpå arbeidsgiveravgiftsone og komunnenummer skal vises automatisk. For å få dette til, må man velge å legge arbeidsgiveravgiftsone og en radindeks (som ikke vises i skjema) i altinn-navnerommet. Dermed må man definere disse to feltene i en egen datakilde, altinn_namespace.xsd:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;xs:schema xmlns:xs=\u0026quot;http://www.w3.org/2001/XMLSchema\u0026quot; xmlns:or=\u0026quot;http://www.brreg.no/or\u0026quot; xmlns=\u0026quot;http://www.brreg.no/seres\u0026quot; xmlns:altinn=\u0026quot;www.altinn.no/infopath-extensions\u0026quot; targetNamespace=\u0026quot;www.altinn.no/infopath-extensions\u0026quot; elementFormDefault=\u0026quot;qualified\u0026quot; attributeFormDefault=\u0026quot;unqualified\u0026quot;\u0026gt; \u0026lt;xs:element name=\u0026quot;AltinnField_kommunenavn_grp_4953\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:element name=\u0026quot;AltinnField_sone_grp_4953\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:element name=\u0026quot;AltinnField_rowindex_grp_4953\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;/xs:schema\u0026gt;  Som man ser over er det angitt tre felter i altinn-datakilden. Nå må man i hovedkilden angi at denne datakilden skal kunne benyttes. Dette gjøres ved å inkludere en import-statement i toppen av datakilden:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot; standalone=\u0026quot;no\u0026quot;?\u0026gt; \u0026lt;xs:schema attributeFormDefault=\u0026quot;unqualified\u0026quot; elementFormDefault=\u0026quot;qualified\u0026quot; xmlns:brreg=\u0026quot;http://www.brreg.no/or\u0026quot; xmlns:xs=\u0026quot;http://www.w3.org/2001/XMLSchema\u0026quot; xmlns:altinn=\u0026quot;www.altinn.no/infopath-extensions\u0026quot;\u0026gt; \u0026lt;xs:import namespace=\u0026quot;www.altinn.no/infopath-extensions\u0026quot; schemaLocation=\u0026quot;altinn_namespace.xsd\u0026quot;/\u0026gt;  Merk at begge datakildene må ligge i samme katalog slik at InfoPath finner de.\nVidere må man så i hoveddatakilden legge til de feltene man vil benytte fra altinn-navnerommet:\n\u0026lt;xs:element name=\u0026quot;TabellArbeidsgiveravgift-grp-4953\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;AvgiftsbetalerOrganisasjonsnummer-datadef-27605\u0026quot;/\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;KommuneNummer-datadef-5950\u0026quot;/\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;ArbeidsgiveravgiftGrunnlagSpesifisert-datadef-27607\u0026quot;/\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;RefusjonGrunnlagSpesifisert-datadef-27608\u0026quot;/\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;PensjonPremieTilskuddSpesifisert-datadef-27611\u0026quot;/\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;altinn:AltinnField_kommunenavn_grp_4953\u0026quot;/\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;altinn:AltinnField_sone_grp_4953\u0026quot;/\u0026gt; \u0026lt;xs:element minOccurs=\u0026quot;0\u0026quot; ref=\u0026quot;altinn:AltinnField_rowindex_grp_4953\u0026quot;/\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;xs:attribute fixed=\u0026quot;4953\u0026quot; name=\u0026quot;gruppeid\u0026quot; type=\u0026quot;xs:positiveInteger\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt;  Som vist over er det lagt til tre altinn-definerte felter i gruppen TabellArbeidsgiveravgift-grp-4953. Merk at disse tre nye feltene er prefixet med navnerommet altinn. Disse feltene vil da vises i InfoPath etter at datakilden (XSD) er importert.\nSe også beskrivelse av skjemasett.\nDermed kan de ”nye” feltene fritt benyttes hvor som helst i skjema, og i motsetning til vanlig egendefinerte hjelpefelter som man oppretter direkte i InfoPath (typisk my:felter), kan disse feltene også benyttes i repeterende grupper. Merk at altinn-definerte felter ikke sendes med til tjenesteier.\nI og med at dette er vanlig tekst, kan f.eks. Notepad++ benyttes som editeringsverktøy.\nOppstart av InfoPath, Import av XSD-fil og generell oppsett av skjema og layout Start InfoPath, og velg ”Ny” fra Fil-menyen. Følgende skjermbildet vil vises.\n Figur 143 – InfoPath, utform skjemamal   Dobbelklikk på ikonet ”XML eller XML-skjema”. I neste skjermbilde angis navnet på datakilden (XSD) som skal benyttes, og velg å ikke benytte flere datakilder. Fullfør. Husk å benytte den rettede datakilden hvis den kommer fra brreg. Skjemaet er nå klart til utvikles videre.\n Figur 144 – Oversikt over alle grupper/felter som finnes i datakilden   Som vist i figuren over, er det på høyre side i InfoPath en oversikt over alle grupper/felter som finnes i datakilden. På venstre side er det et tomt område, hvor skjema skal bygges. Hit skal sidemal fra tjenesteier kopieres til på følgende vis:\n I Windows Utforsker, høyreklikk ”sidemal_skd-pmh2009-05-18.xsn” (gjelder for SKD, for andre etater kan man bruke andre maler med andre navn) og velg ”Design” fra meny. Klikk \u0026ldquo;OK\u0026rdquo; på evt feilmelding som dukker opp. Kopier hele sidemal over i i det nye skjema (skjermbilde ovenfor) vha standard kopier/lim inn (eksempel Ctrl-A, Ctrl-C og Ctrl-V (i nytt skjema)):  En sidemal lages som et normalt InfoPath-skjema uten datakilde og kan benyttes som grunnlag for nye skjemaer. En sidemal bør kun inneholde et absolutt minimum av funksjonalitet, og heller fokusere på riktig bakgrunnsfarge, skrifttyper, størrelser, logoer osv. Det anbefales at alle elementer som for eksempel uttrykksbokser, tekstbokser, ikon o.l bør legges inn i egne tabeller slik at elementene blir ”låst fast” i skjemaet som vist på figur under. Elementene i skjemaet vil da bli riktig posisjonert uavhengig av nettlesere som blir bruk i portalen. På denne måten sikrer man en konform layout innenfor en tjenesteeier.\nSe også oppdatering av datakilde for å bytte ut datakilde i et ekstisterende skjema.\nDet anbefales forøvrig at sidemalen lagres på arbeidsflate for tjenesteeier.\nFor at skjemaet ikke skal få horisontal scroll i SBL, er det viktig at bredden ikke overstiger 630px. Denne bredden tar da høyde for bredden på en evt. vertikal scrollbar, og det anbefales at det tas høyde for dette uansett om siden forventer vertikal scroll eller ikke.\n Figur 145 – Sidemal   Tilpass bilde til mal for det aktuelle skjema ved å evt fjerne felter og ledetekster. Marker felter og ledetekst samt tekstene ”Skjematittel” og ”Framskutt ledetekst”, og trykk ”Slett”.\nLegg inn ny tekst for skjemaet. Alle tekster skal defineres i beregnet verdi kontroller. Velges fra ” kontroller” under menylinjen Hjem.\n Figur 146 – InfoPath, uttrykksboks   Legg inn tittelen på utgaven i hermeteng (”RF-1189 Årsoppgjør for utleie mv. fast eiendom 2008”). Se også fargekoder Altinn. (foreløpig utgave pr 2009-05-18) for definering av riktig fargekode, font og størrelse for teksten. Dermed har vi en sidemal for kopiering til øvrige sider i skjemaet ved og opprette sider og bruker utklippstavlefunksjonalitet.\nAlternativer for skjema Før man laster opp Infopath skjema i TUL er det noen viktige innstillinger som må settes ellers vil man få problemer når man skal migrere skjema. Man må gå inn på «Fil» på menylinjen og velg «alternativer for skjema». Gå deretter inn på «Sikkerhet og klarering» og velg fullstendig klarering\n Figur 147 –InfoPath, Alternativer for skjema, sikkerhet og klarering   Deretter må man gå inn på kompatibilitet i kategorien under alternativ for skjema. Velg webleserskjema som skjematype.\nHvis man skal bruke C# kode i skjemaet sitt så må man også huske på å angi programmeringsspråk og plassering av prosjektkoden. Da går man inn på «programmering» under kategorien, velger C# som kodespråk og angir stien til en egen mappe under TUL share (G:)\n Figur 148 – InfoPath, Alternativer for skjema: programmeringsspråk   Oppdatering av (hoved)datakilde Det kan i enkelte tilfeller være ønskelig å bytte ut hoveddatakilden med en ny, hvis for\neksempel det har tilkommet nye felter osv. Dette gjøres ved å velge ”Oppdater felt” under ”Data” på menylinjen . Du velger da den nye XSD’en og angir at du ikke skal benytte flere kilder. Deretter er det viktig at man kjører ”Regelinspeksjon” fra samme Data-menylinje. Grunnen til dette er at felter som eksisterte i den gamle datakilden, men er fjernet fra den, nye kan være benyttet i xPath-uttrykk. Dette må rettes opp før utgaven kan migreres.\nDefinisjon av sider i InfoPath skjema (Views) Under menylinjen Sideutforming. ”Visning 1” vises som default. Visning betegner side i skjema. Velg ”Ny visning” og skriv navn. Man bør definere beskrivende sidenavn for hver visning/side i InfoPath. Dette er ikke nødvendig, ettersom sidensidenavn og rekkefølge må oppgis i TUL. Men det anbefales å gi navn med løpenummeret slik at sidene kan sees i riktig rekkefølge i InfoPath under utvikling. VITKIG: Sidenavn kan ikke inneholde spesialtegn eller nasjonale tegn.\nFra Visning 1 kopieres det oppsettet man lagde (Ctrl A, Ctrl C) og limes inn på alle sider som skal finnes i skjema.\nInnlegging av felt fra Datakilde (fra XSD) Velg side 1 (Visning 1) og bytt til Datakilde. Legg til Uttrykksbokser for tekstene ”Innledning” og ”Avgiver” som vist under. Husk å sjekke fonter, farger etc. i henhold til sidemal.\nVelg gruppe som skal være på denne siden, ved å markere ”Avgiver-grp-231” under ”GenerellInformasjon-grp-959”, som vist i eksemplet under. Dra den fra Datakilde til punktet under overskriftslinje i skjema og velg Kontroller i oppsettstabell fra popup meny (merk at man ikke kan velge hele siden – dvs gruppe med undergrupper, man må velge gruppe som kun inneholder orid’er. Er det flere slike grupper på side, må alle dras inn på siden enkeltvis).\nDet er også mulig å dra inn enkeltfelter ved å ikke markere hele gruppen, men markere enkeltfelter i datakilden.\n Figur 149 – Innlegging av felt fra datakilde   Linje med ”Gruppeid” skal ikke vises, og fjernes ved å markere linjen, høyreklikke og velge ”Slett rader”. Erstatt alle ledetekster i layouttabellen med Uttrykksbokser og tekster som vist i eksempel under, i henhold til standard font/farge. Vær nøye med riktig ledetekst til riktig felt. For å skape ”litt luft” i venstre kant av layout tabellen, anbefales det å legge inn en smal kolonne til venstre. Dette kan gjøres ved markere tabellen, høyreklikke, og velge Sett inn -\u0026gt; Kolonne til venstre fra popup. Denne vil være del av tabellen og det er tabellen som må få riktig avstand til venstre marg.\nSett bakgrunnsfarge på grupperammen (layout tabellen), ved å markere gruppen, høyreklikk og velge Kantlinjer og skygger. Velg flipp Skygger og sett riktig farge (ref avsnitt Fargekoder Altinn).\nFeltene for fødselsnummer og organisasjonsnummer skal være skrivebeskyttet og ha bakgrunnsfarge for skrivebeskyttet felt. Marker felt og velg bakgrunnsfarge fra verktøylinja. For å skrivebeskytte felt, dobbeltklikk på feltet, og Egenskaper for tekstboks vises. Grunnen er at disse feltene skal preutfylles i sluttbrukerløsningen, og vil derfor inneha korrekt data iht folkeregisteret eller enhetsregisteret, og skal dermed ikke kunne endres av utfyller.\nVelg flipp Visning og marker Skrivebeskyttet:\n Figur 150 – InfoPath, tekstboks   Sett riktig størrelse på feltet i forhold til antall tegn, ved å velge flipp Størrelse, velg riktig enhet og bredde:\n Figur 151 – InfoPath, tekstboks, størrelse   Hvis det ikke er et vanlig tekstfelt man ønsker, men en annen type kontroll (radioknapp, nedtrekksliste osv) skal man høyreklikke på feltet Endre til -\u0026gt; og velge ønsket kontroll type:\nVed å høyreklikke på feltet og velge egenskaper kan man velge forskjellige innstillinger som: skrivebeskyttet, max antall tegn i feltet, justering på innholdet, formatet på numerisk felt osv.\nFor å kunne tabulere i riktig rekkefølge, må man velge avanserte egenskaper og sette ønsket tabulatorindeks. Om feltet ikke skal være tabulerbart så skal tabulatorindeks settes til -1.\nKalkyler, eksempel på repeterende gruppe og radioknapper Siden som nå er laget inneholder ikke kalkyler. Det er derfor behov for å bygge en side til, for eksempel side 3 i RF-1189. Vha. ”Legg til visning …”-funksjonen nevnt ovenfor, vil vi kalle siden for ”View 3”. Denne inneholder også en repeterende gruppe (enten tabell for innlegging av flere rader eller seksjon som kan også legges inn flere ganger etter hverandre), knapp (ikon) for hjelpetekst, samt kontroller for radioknapp, nedtrekksliste og datovalg.\n Figur 152 – Skjema RF-1189. Visning 3.   I utgangspunktet benyttes samme fremgangsmåte som for første side i skjemaet. Ledetekster skal settes i hver sin uttrykksboks og feltene som skal benyttes finnes i datakilde under hovedgruppen ”InntekterUtleieverdi-grp-960”. Legg inn den repeterende gruppen for utleieinntekter ved å markere ”Utleie-grp-4939” i datakilden, og dra den inn på skjema. Du får nå 3 valg fra popupmeny, velg ”Gjentatt tabell” og følgende utgangspunkt for videre redigering vil vises:\n Figur 153 - Gjentatt tabell   Hvis repeterende gruppe er veldig stor med lange overskrifter kan det være lurt å velge ”Gjentatt inndeling”, da vil feltene med tilhørende ledetekster bli plassert under hverandre.\nSlett kolonne for ”Gruppeid”, erstatt hver enkelt standard ledetekst med uttryksboks og ledetekst som vist i det ferdige sideeksempel. Husk også å tilpasse bredden slik at den passer med mal-bredden for skjema.\nFortsett med gruppe for kårbolig (Kar-grp-4942), som legges inn med valg ”kontroller i layouttabell”. For de tre siste feltene i denne gruppen, må presentasjon endres til radioknapper. Høyreklikk på feltene, i popup-meny velges ”Endre til” og deretter ”Alternativknapp”. For hver av radioknappene vil det vises en ledetekst på høyre side. Disse må erstattes av de vanlige uttrykksboksene, en for hver tekst. Legg merke til at teksten som skal vises ikke alltid er helt identisk med den genererte fra datakilden (xsd).\nTil sist legges feltene for post 1.3 til post 1.5 inn. Disse feltene ligger i datakilden rett under hovedgruppen ”InntekterUtleieverdi-grp-960”, derfor er det denne som skal markeres som vist under:\n Figur 154 – RF-1189 visning 3   Før kalkylearbeidet kan starte, må feltet for post 1.5 ”Samlet bruttoinntekt” settes til skrivebeskyttet, og layouttabellen tilpasses med blanke kolonner for luft på venstre side, samt plass til å kunne sette inn hjelpeikon senere, som vist i det ferdige sideeksempelet, figur 152.\nDet skal nå legges inn en kalkyle i post 1.5, som skal summere ”Beløp” fra tabellen i post 1.1, samt postene 1.2, 1.3 og 1.4.\nKalkylen skal dermed inneholde følgende elementer og orid’er:\n:22033 = sum(:22014) + :22032 + :22101 + :22026\nEksempel skjermbildene for denne seansen vises samlet under teksten. Høyreklikke på orid :22033 (post 1.5 ”Samlet bruttoinntekt” ), velge ”Egenskaper for tekstboks” (1) og flipp ”Data”. Her vises ”Verdi”-feltet hvor kalkylen skal legges inn.\nKlikk videre på knappen ”fx” til venstre for ”Verdi”-feltet for å komme inn ”Sett inn formel” vinduet (2). Her kan en skrive inn kalkylen. Skriv inn funksjonsnavn og operatorer og velg felt som skal inngå vha. knappen ”Sett inn fellt eller gruppe …” (3). Funksjonsnavn med syntaks kan også velges vha. knappen ”Sett inn funksjon …”.\nKalkylen skal se slik ut når den er ferdig, og inneholder en funksjon ”sum()” som summerer alle rader med angitt felt fra den repeterende gruppen i post 1.1:\nsum(UtleieInntektSpesifisertEiendom-datadef-22014) + VedlikeholdskostnaderMvLeietakere-datadef-22032 + InntekterAndre-datadef-22101 + sum(UtleieInntektSpesifisertEiendom-datadef-22014) + EgenleieKarInntekt-datadef-22026  Skjermbilder henvist til i beskrivelsen over:\n  Figur 155a – Egenskaper tekstboks    Figur 155b – Sett inn formel    Figur 155c – Velg et felt eller en gruppe   Merk at summeringsfeltet får verdi 0 hvis alle feltene som inngår i kalkyle er tomme. Om dette ikke er ønskelig kan det løses på 2 måter.\nEn er med ”Regler …” funksjonen og en annen er ved å omskrive kalkylen.\nHvis man benytter seg av ”Regler …” funksjonen må man være klar over at et stort antall regler for å tømme summeringsfelter i skjema, kan forårsake dårligere ytelse i skjema. Alternativet omskrivning av kalkyler er da aktuelt.\n”Regler …” funksjonen:\n Høyreklikk på feltet for post 1.5 ”Samlet bruttoinntekt” og velg ”Regler …”   Figur 156 – Regler    Her kan det legges inn regler tilknyttet feltet ved å trykke på “Ny”-knappen   Figur 157 – Regler, Legg til    Velg så “Angi verdien …” for å sette opp kriteriene:   Figur 158 – Angi betingelse    Det første kriteriet er at selve summeringsfeltet skal ha verdi 0. Dette må settes eksplisitt som standardverdi i feltet man sjekker på. Velg deretter de feltene som inngår i kalkylen. For disse velges ”Er tomt”. Alle felt i kalkylen må være med, ellers risikeres at summeringsfeltet blir blanket ut selv om deler av kalkylen har verdi.\n Trykk OK for å returnere til forige vindu. Til sist må ”Legg til handlig …”-knappen benyttes fra ”Regler”-vinduet. Velg ”Angi verdien for et felt” som aksjon og så feltet som skal settes. ”Felt” vises som et punktum, siden der dette feltet det ble klikket på ved inngang til regeldefinisjonen.\n   Figur 159 – Handling   Merk at man ikke får skrevet mer enn fem if-setninger i betingelsene. Hvis man vil implementere det for kalkyler med flere felter så må man bruke uttrykksbokser. Dette gjøres ved å ”mellomlagre” deler på den måten at man tar f.eks. to if-setninger og lagrer resultatet av denne i en uttrykksboks og benytter da den aggregerte verdien inn i den betingelsen det ikke var plass.\nOmskrivning av kalkyle:\nDenne metoden kan sees på som et alternativ til ”Regler …” metoden.\nIstedenfor å bruke regler til å tømme summeringsfeltene på hvert av feltene som inngår i kalkylen, vil vi nå kun bruke en formel i summeringsfeltes standardverdi.\nVi bruker en string metode for å bestemme om kalkylen skal vises eller ikke:\nsubstring(Kalkyle, 1, (Betingelse) * (1 div 0))  Hvor ”Kalkyle” byttes ut med kalkylen og ”Betingelse” byttes ut med en eller-sjekk på om alle feltene som ingår i kalkylen er tomme.\n Høyre klikk på summeringsfeltet og velg ”Egenskaper” Trykk deretter på ”fx” knappen til høyre for ”verdi” feltet Med utgangspunkt i malen overfor, fyll ut formelen, erstatt ”Kalkyle” med:  sum(UtleieInntektSpesifisertEiendom-datadef-22014) + VedlikeholdskostnaderMvLeietakere-datadef-22032 + InntekterAndre-datadef-22101 + sum(UtleieInntektSpesifisertEiendom-datadef-22014) + EgenleieKarInntekt-datadef-22026   Erstatt ”Betingelse” med:  (count(UtleieInntektSpesifisertEiendom-datadef-22014[. != \u0026quot;\u0026quot;]) \u0026gt; 0 or VedlikeholdskostnaderMvLeietakere-datadef-22032 != \u0026quot;\u0026quot; or InntekterAndre-datadef-22101 != \u0026quot;\u0026quot; or count(UtleieInntektSpesifisertEiendom-datadef-22014[. != \u0026quot;\u0026quot;]) \u0026gt; 0 or EgenleieKarInntekt-datadef-22026 != \u0026quot;\u0026quot;)   Dermed vil resulatet som vises i tekstboksen bli summen av kalkylen hvis en eller flere av feltene som inngår i kalkylen er ikke-tomme.  Kalkyler i repeterende gruppe legges inn på samme måte. Hvis noen repeterende felter skal summeres opp i feltet som er utenfor repeterende gruppe så skal man bruke funksjon SUM og sette inn feltet som skal summeres.\nFlere tips:\n Man har tilgang til alle variabler fra alle sider Man kan kopiere enkelte regler ved å velge \u0026ldquo;Kopier regel\u0026rdquo;-ikonet, eller man kan velge og kopiere alle regler for et felt ved å velge \u0026ldquo;Kopier alle\u0026rdquo;-ikonet. For å skrive kompliserte kalkyler i C#, kan man under Utvikler menylinjen velge Visning byttet-hendelse For å telle antall ikke-tomme felt skal man bruke formel count(felt_xxx[text() != \u0026quot;\u0026quot;]) For å sette in formel med betingelse bruk (field1 | field2)[condition]. For eksempel se http://blogs.msdn.com/infopath/archive/2006/11/27/conditional-default-values.aspx Hvis man skal summere det totale, f.eks pris*antall som repeteres bruk: sum(eval(grp-3455; \u0026quot; datadef-17677 * datadef-23949\u0026quot;)) Ref. http://blogs.msdn.com/infopath/archive/2006/12/04/xpath-powers-calculating-totals.aspx I noen tilfeller vil det ikke være mulig å sette inn feltnavn ved å peke på feltene, og man får gjerne en feilmelding når en prøver på det. I så fall kan man kopiere XPath (for å få tak i XPath så skal man finne feltet i datakilden, høyreklikke og velge kopier XPath) og fjerne stien slik at det kun feltenavn står igjen. For å summere det totale som ovenfor (pris*antall som repeteres bruk) men kun ved spesielle betingelser bruker man formel under. Eksempel gjelder summering kun de tilfellene der valget i en nedtrekksliste ikke er lik ”S”)  sum(eval(NyutstedteAksjerOmfordeling-grp-3455[AksjerNyutstedteFondsemisjonMvType-datadef-17679 != \u0026quot;S\u0026quot;]; \u0026quot;AksjerNyutstedteFondsemisjonMvAntall-datadef-17677 * AksjerNyutstedteFondsemisjonMvPalydende-datadef-23949\u0026quot;))  Valideringer Valideringen forhindrer bruker fra å levere feilaktige data eller f.eks data som ikke kan leveres sammen eller ikke stemmer med hverandre. Valideringen kjøres uansett om feltet er tomt (forskjell fra Altinn I løsning).\nValideringer som gjør bruk av verdier i felles datakilde (skjemasett) må bruke disse verdiene direkte og ikke mellomlagre de i hjelpefelter. Hvis hjelpefelter benyttes så vil ikke valideringene fungere ved innsending fra SBS.\nI versjon 2 er det mulig å legge til valideringer som varsler bruker om potensielle feil, men som ikke forhindrer bruker fra å levere tjenesten, dette kalles myke kontroller. Myke kontroller kan sees på som veiledning til sluttbruker og kan for eksempel gi brukeren beskjed om at han eller hun har skrevet inn en verdi i et felt som virker usannsynlig for et felt eller en kombinasjon av felter.\nFor å legge inn valideringer i RF-1189, er det behov for å legge inn nok en side. Med bakgrunn i tidligere avsnitt, kan denne nå lages som vist under, med unntak av hjelpeikonet. På denne siden inngår layout tabellene ”Nettoinntekt-grp-4945” og \u0026ldquo;OmfatterKostnadeneNoeAvFolgende-grp-2330\u0026rdquo; som ligger under gruppe \u0026ldquo;Kontrollsporsmal-grp-239\u0026rdquo;:\n Figur 160 – Skjema RF1189. Visning 6   For å legge inn validering på et felt skal man høyreklikke på dette, velge Datavalidering-\u0026gt;Legg til og legge inn betingelser og feilmelding.\nLegg inn følgende validering i RF-1189 for post 3.1 og radioknapp med orid :7911:\nTabell 7 – Validering i RF-1189\n   Skjema involvert Kontroll Formel Utslagstekst i Altinn     RF-1189 Må svare på kontrollspørsmål om skatter Utslag_hvis ikke felt_utfylt(:7911); NOB:Vennligst svar på kontrollspørsmålet om skatter i post 3.1. NON:Ver gild og svar på kontrollspørsmålet om skattar i post 3.1.    Dette betyr at det er obligatorisk å velge enten Ja eller Nei ved hjelp av radioknappene; feltet kan ikke være ubesvart.\nHøyreklikk radioknappen i post 3.1 og velg kommando ”Regler”. Velg her ”Behandle regler…” Velg så å legge til en ny validering:\n Figur 161 – Datavalidering   Under ”Hvis betingelsen oppfylles:” velges UtgifterSkattFormueInntekt-datadef-7911 (radioknapp-feltet) og med operand ”er ikke lik” og verdi ”Ja”. Velg ”og” og legg til samme operand for samme felt, men denne gang med verdi ”Nei”. Med andre ord sjekker vi på om feltet har enten verdi Ja eller Nei. I skjermtips kan for eksempel legges inn ”Post 3.1” mens feilmelding på bokmål skal være ” Vennligst svar på kontrollspørsmålet om skatter i post 3.1.”. Trykk OK for å returnere til datavalideringsvinduet, og ”OK” for å returnere til skjermbildet.\n Figur 162 – Datavalidering, betingelse   Tilsvarende valideringer skal legges inn på de to øvrige radioknappfeltene for post 3.2 og 3.3. Sjekk detaljert design for nærmere spesifikasjoner.\nFlere tips:\n Merk at man ikke får lagt inn mer enn 5 betingelser samt at det ikke er mulig å sette parentes mellom OG’er og ELLER’er For å skrive kompliserte valideringer i C#, kan man høyreklikke på et felt og velge Programming-\u0026gt;Validating event. I så fall må Visual Studio være installert. I InfoPath må en huske på å velge aktuell mappe fra skjemaet i Verktøy-\u0026gt;Alternativer for skjema-\u0026gt;Programmering-\u0026gt;Project location for Visual Basic and C# code Ved store valideringer, må en benytte uttrykksbokser.  InfoPath har ikke funksjonalitet for å støtte myke kontroller. Siden myke kontroller vil bli håndtert forskjellig fra feilvalideringer i SBL er det nødvendit å skille mellom myke kontroller og feilvalideringer i InfoPath. Dette gjøres ved å benytte et prefiks før selve meldingen. Alle myke kontroller som defineres i InfoPath-skjemaet skal ha prefikset _MYK_. Meldingen får dermed følgende format _MYK_[meldingstekst], som for eksempel _MYK_Ugyldig postnummer. Teksten _MYK_ blir fjernet før meldingen vises til bruker i SBL.\nAvansert eksempel på validering For de mer viderekomne, gis her et litt mer avansert eksempel på store valideringer med bruk av expression. Det anbefales å sjekke eksemplet i RF-1086.\nImplementering av følgende betingete validering i RF-1086:\n   BOH_10:1 17677, 17678, 17679, 17680, 23949 10 HVIS (orid 17677 eller orid 17678 eller orid 17679 eller orid 17680 eller orid 23949 er blanke) SÅ utslag.  I post 10 mangler ett eller flere av de følgende feltene utfylling: Antall nyutstedte aksjer, Antall aksjer etter, Hendelsestype, Tidspunkt eller Pålydende per utstedt aksje.     Dvs. hvis noen av disse 5 felter av fylt ut skal alle være fylt ut.\nNedenfor følger en anbefaling på hvordan dette kan implementeres:\n Opprette hjelpefelt BOH_10_1 med default value 1. Kopiere Xpath til alle de 5 feltene (med å høyreklikke på feltene i Data source og velge ”Kopier Xpath”). Opprette validering med 2 if-setninger, der det ene sjekker om noen av disse feltene er fylt ut og det andre skjekker om noen av feltene er blank – da skal man få feilmelding, fordi enten alle skal være tomme eller alle skal være utfylt. For å skrive if-setningene, velger man uttrykk og skriver følgene to linjer: Den første linjen/valideringen sjekker om noe er tomt:  /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntall-datadef-17677 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntallEtter-datadef-17678 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvType-datadef-17679 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvTidspunkt-datadef-17680 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvPalydende-datadef-23949 = \u0026quot;\u0026quot;   Videre, følger her den andre som sjekker om noe er fylt ut:  /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntall-datadef-17677 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntallEtter-datadef-17678 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvType-datadef-17679 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvTidspunkt-datadef-17680 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvPalydende-datadef-23949 != \u0026quot;\u0026quot;  På grunna av at InfoPath har relativt små vinduer som ikke gir god oversikt, anbefales det å skrive alt dette i et tekst-verktøy som for eksempel Notepad og lime inn i InfoPath etterpå. Om alt legges inn korrekt vil Datavalideringsvinduet få ut noe sånt:\n Figur 163 – Datavalidering   Pattern validering For å legge på sjekk av gyldig verdi, for eksempel for og epost, kan man i InfoPath matche verdien mot et pattern. Et pattern er en generisk måte å uttrykke en gitt seksvens og sammensetning av tegn. Dette er også kalt regulæruttrykk. Dette gjøres også vha Datavalideringskommandoen. Eksempel på setting av mønster for epost i skjema RF-1086:\n Figur 164 – Eksempel på validering av gyldig verdi i et felt vha pattern   I tillegg til de valideringene som legges inn av skjemautvikler så vil InfoPath/Forms Server utføre ”xsd valideringer”, dvs restriksjoner som er lagt på feltene i xsd spesifikasjonen til skjemaet. Rekkefølgen på disse feilmeldingene styres av InfoPath/FormServer, og det er ikke mulig å endre denne rekkefølgen. Microsoft har valgt å gi xsd-valideringer (f.eks sjekk på lengde, maks/min verdi og regulære uttrykk) presidens foran valideringen som sier at feltet er påkrevd. Dette er årsaken til at meldinger som f.eks. ”Only spesific pattern allowed” vises før ”Cannot be blank”.\nHvis man velger å benytte pattern validering, så vil man kunne se at regulæruttrykket vises i høyrekolonnen i SBL ved validering. For å komme rundt dette, må man gjøre følgende:\n Legg inn et hjelpefelt istedenfor feltet som har pattern validering. Feltet som kommer fra datakilde skal da ikke dras inn i skjemaet. Legg inn en egen pattern validering på hjelpefeltet med en egen feilmelding slik at denne vises istedenfor pattern valideringsmeldingen fra xsd’en. Overfør verdien til det egentlige feltet fra hjelpefeltet. Hvis dette gjelder felter i en repeterende gruppe så må hjelpefeltet ligge i en altinn xsd, ellers samme prinsipp.  Hvis denne metodikken benyttes vil man unngå at regulæruttrykkene vises i SBL.\nValidering fra VSTA / C#-kode I enkelte tilfeller ønsker man også å kunne produsere valideringsmeldinger fra C#-koden.\nDette gjøres ved at man i koden har følgende kode for hver valideringsmelding:\npublic void InnsenderHvitvaskingAnsvarligFornavn_2D_datadef_2D_33869_Validating(object sender, XmlValidatingEventArgs e) { if (e.Site.Value.Equals(\u0026quot;123\u0026quot;)) { e.ReportError(e.Site, true, \u0026quot;Feilmelding\u0026quot;); } }  Merk at man også her, hvis ønskelig, benytter ressurstekster (ref. kap 21.1.1) til å kunne vise feilmeldingen på språket som sluttbruker har valgt i portalen (SBL). Man trenger ikke gjøre noe annet enn å hente inn teksten fra ressurstekstens datakilde. Bl.a. språk trenger man ikke ta hensyn til da ressurstekstene er allerede knyttet til skjema på riktig språk.\nAltinn portalen er utvidet med funksjonalitet for å trigge validering av hovedskjema (HS) når et underskjema (US) valideres.\nHvis man legger inn et hjelpefelt som heter ValidateMainForm, som ligger i my namespacet (my:ValidateMainForm), og som har verdien \u0026ldquo;true\u0026rdquo;, så vil Altinn portalen gjøre en validering av HS hvis HS allerede er validert OK.\nDynamikk Dynamikk går ut på at utseende/oppførsel til et felt i skjermbildet, er avhengig av en betingelse knyttet til informasjon i et annet felt. Utfra de sidene som nå er laget i skjema RF-1189, kan det legges inn dynamikk for følgende spesifikasjon fra detaljert design:\nTabell 8 – Dynamikk\n   Feltnavn (Datadef/orid) Post i skjema Beskrivelse av dynamikk     7911/ 7912 3.1 Beløpsfelt skal gråes ut hvis svar er nei   7913/ 7914 3.2 Beløpsfelt skal gråes ut hvis svar er nei   7915/ 7916 3.3 Beløpsfelt skal gråes ut hvis svar er nei    Dette er en vanlig form for dynamikk, som altså går ut på å ”disable” et felt ved inntreff av en betingelse. Normalt ønskes det at både feltet og ledeteksten blir ”grået ut”, og at det ikke er mulig å klikke inn i feltet. I tillegg skal feltet her blankes ut. Denne dynamikken skal inn på samme skjemaside som også vist i ”Figur 1189 View 6” i forrige avsnitt (Valideringer):\n Figur 165 – RF-1189   Som spesifikasjonen viser, gjelder dynamikken alle de 3 siste postene. Her nøyer vi oss med å legge den inn for Post 3.1, vha følgende framgangsmåte:\n Høyreklikke på feltet 7912 (”Ev. beløp”) og velge ”Betinget formattering…”. Først skal vi sette feltet vårt til Skrivebeskyttet. Trykk knappen ”Legg til…” for å legge inn betingelsen på samme vis som ved valideringer (opp til 5 linjer) som vist under:  Figur 166 – Betinget formattering   Det er her kun behov for en linje i betingelsen. I første nedtrekkslisteboksen velges radioknappfeltet ”UtgifterSkattFormueInntekt-datadef-7911”, i neste ”er ikke lik” og verdien i det siste skal være ”Nei”. Til slutt klikkes det på ”skrivebeskyttet” og ”OK”. I dette tilfellet velger vi ikke at feltet skal skjules, noe som kan ellers kan være aktuelt. For de andre radioknappene i samme ”gruppe” vil det være vice versa.\n Merk at feltet ikke blir tømt selv når det er skrivebeskyttet eller skjult. Derfor må verdien fjernes manuelt ved å opprette en regel (Rule) på det feltet som styrer dynamikken (radioknapp feltet 7911). Det er verdt å merke seg at reglene kjøres kun når feltene er blitt valgt og gitt en verdi. Regel opprettes ved å:\n Høyreklikke radioknapp feltet 7911. Velge ”Regler…”. Klikk på ”Legg til…” knappen for å legge til en ny regel. Klikk ”Angi betingelse …” for å sette opp betingelse for når regelen skal kjøres (”UtgifterSkattFormueInntekt-datadef-7911” ”is equal to” ”Nei”). Trykk OK for å returnere. Til sist settes selve aksjonen opp ved å trykke på ”Legg til handling …”. Handling settes til ”Sett feltverdi”. Felt skal være ” UtgifterSkattFormueInntektBelop-datadef-7912”. Verdi skal være blank.  For å utføre dynamikken også på ledetekst ”Ev. beløp”, må denne være opprettet som uttrykksboks. Uttrykksbokser kan behandles som et vanlig felt og man kan legge på samme betinget formattering på den. Til forskjell fra formatet på feltet, kan det her settes en fargekode som for et felt som er skrivebeskyttet (ref avsnitt Fargekoder Altinn)\n  Avansert eksempel på dynamikk For de mer viderekomne, gis her et noe mer avansert eksempel på dynamikk som krever bruk av expressions. Eksemplet kan sjekkes i RF-1097. Bruk av expressions er nødvendig dersom man må bruke flere enn 5 felt/betingelser. Formelen må da bygges opp ved å bruke XPath på feltene.\nNB! InfoPath bryter automatisk en stor expression i flere. Derfor bør man ikke blande or og and i samme expression\nNedenfor eksempel fra RF-1097:\n/Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;1\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;3\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;5\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;11\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;12\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;14\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;20\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;67\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;68\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;69\u0026quot; or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = \u0026quot;86\u0026quot;  Slik blir eksempelet seende ut i InfoPath:\n Figur 167 – Betingelse   Ressursfiler og tekstfiler I skjemaet kan man komme borti situasjoner hvor man har behov for å oversette tekster som ikke kan puttes inn i uttrykksbokser eller av andre grunner ikke kan oversettes i TUL. For å kunne benytte slike tekster velger man å bruke ressursfiler. En ressursfil kan være en hvilken som helst fil, som InfoPath pakker sammen med skjemaene.\nFor å få ressursfiltekster til oversetting i TUL velger man å lage seg en XML-fil som man kaller Ressurstekster.xml. Denne må være på følgende format og innholdet må være på utgavens hovedspråk:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot;?\u0026gt; \u0026lt;ResourceTexts\u0026gt; \u0026lt;ResourceText name=\u0026quot;orgnr_kan_ikke_brukes\u0026quot;\u0026gt; \u0026lt;Message\u0026gt;Organisasjonsnummer kan ikke brukes\u0026lt;/Message\u0026gt; \u0026lt;MessageDetail\u0026gt;Vennligst korrigèr org.nr.\u0026lt;/MessageDetail\u0026gt; \u0026lt;/ResourceText\u0026gt; \u0026lt;ResourceText name=\u0026quot;fnr_er_ikke_gyldig\u0026quot;\u0026gt; \u0026lt;Message\u0026gt;Fødselsnummeret kan ikke brukes\u0026lt;/Message\u0026gt; \u0026lt;MessageDetail\u0026gt;Vennligst korrigèr fødselsnummer\u0026lt;/MessageDetail\u0026gt; \u0026lt;/ResourceText\u0026gt; \u0026lt;/ResourceTexts\u0026gt;  Som man ser fra XML’en over så har man flere sett med tekster, hvor hver nøkkel ( har to korresponderende tekster. Dette blir på samme måte som med valideringstekster.\nDet er viktig at nøkkelen er unik innad i skjemaet. Man kan ha så mange tekstsett man vil.\nEt sett med tekster er definert vha \u0026lt;ResourceText\u0026gt; -noden.\nNår XML-filen er ferdig, velger man å legge den til i InfoPath. Dette gjøres ved gå til Verktøy på menylinjen og velge Ressursfiler\u0026hellip; Legg deretter til Ressurstekster.xml. Nå er det flere måter å ta i bruk tekstene på, men det letteste er å legge til en datakobling mot denne ressursfilen. Dette gjøres på samme måte som man legger til en kodeliste, men istedenfor å hente data fra en web-service, velger man å hente fra et XML-dokument. På neste side klikker man på Ressursfiler\u0026hellip; og velger Ressurstekster.xml. Nå er disse tekstene klare for å benyttes i skjema, på samme måte som felter fra hoveddatakilden.\nTekstene i filen Ressurstekster.xml vil være tilgjengelig for oversetting i TUL sin oversettingsmodul etter at skjemaet er sjekket inn. På denne måte vil InfoPath-filene på de ulike språkene ha lokaliserte ressurstekster.\nUnder følger et eksempel på hvordan man tar i bruk en ressurstekst i en regel.\nNår man legger til en hendelse på en regel, velger man å sette verdi i et felt. Dette er default-valget i en ny regel. Deretter velger man feltet som skal få en verdi, og så verdien, enten Message eller MessageDetail. For å hente riktig verdi velger man å lage en xPath ved å klikke på funksjonsknappen. Velg så å legg til felt eller gruppe og velg datakilden til ressursfilen. Her velger man feltet Message og så Filtrer Data. Det som er viktig nå, er at man filtrerer på name; velg å legg til ny filtrering og definer at name skal være lik, og så må man angi nøkkelen til tekstsettet man ønsker å benytte.\nPå denne måten vil man kunne bruke tekster fra annet enn uttrykksbokser/skjemaelementer, oversette de i TUL og fylle de inn i inputbokser etc.\nHjelpefelter, verdioverføringer Man kan opprette hjelpefelter som ikke finnes opprinnelig i XSD og bruke dem f.eks for å vise delsummer på andre sider. For å opprette felt eller gruppe skal man velge ”Datakilde”, høyreklikke på ”Skjema” og velge ”Legg til…”. Skriv her inn navn på felt og trykk OK. Feltet vises nå under ”Datakilde” på skjemaets høyeste nivå. Deretter kan man dra feltet fra ”Datakilde” til visning (side) og plassere feltet der man vil og velge ønsket felttype (kontrol).\n Figur 168 – Legg til felt/gruppe   Merk at i ”Datakilde” forblir feltet på øverste nivå, det er ikke mulig å få flyttet det til andre sider eller grupper som er definert i XSD.\nVerdioverføringer For å vise verdien fra et felt på en annen side (view) i skjema, trenger en ikke å opprette duplikate-felt. For dette kan man bare dra det originale feltet fra ”Datakilde” til de stedene man vil ha det (husk at å la alle disse kopiene være skrivebeskyttet).\nEksempel på verdioverføring finnes allerede i skjemaeksemplet vårt. Se ”Figur 1189 visning 6” eller visning 6 i InfoPath. Der viser feltet for samlet bruttoinntekt den overførte verdien fra post 1.5 i visning 3. Dette har skjedd automatisk ved at feltet ”BruttoinntektUtleieMv-datadef-22033” også er blitt opprettet i visning 6.\nMan trenger dermed ikke å overføre verdier av delsummer fra side til side, fordi en i InfoPath har tilgang til alle variabler fra alle steder i skjema.\nMan får ikke opprettet egendefinerte grupper eller repeterende felter, men man kan legge kontrolluttryksboks inn i repeterende gruppe og opprette kalkyler eller dynamikk der.\nNår man oppretter lister, eksempelvis nedtrekkslister, vil verdien denne viser være kodeverdien. For at man skal få frem tekstverdien som svarer til denne koden, må man benytte seg av et hjelpefelt. I hjelpefeltet henter man tekstverdien som svarer til koden ifra listen. Hjelpefeltet defineres så som en presentasjonsfelt istedenfor listen. På denne måten vil tekstverdien og ikke kodeverdien vises i den aktuelle listen.\nWeb-, print- og kvitteringssider For å lage printutgaver basert på skjermbildene på Web, skal man opprette så mange view’er som det er sider i skjema, kalle dem f.eks ”Print view 1” osv. Deretter kopiere og lime innholdet fra hver side til tilhørende print view side.\nPrint view’ene kan settes til å være read-only ved å velge ”Egenskaper” under “Sideutforming” flipp ”Generelt” og krysse av for skrivebeskyttet. I flipp ”utskriftsinnstillinger” kan man også sette formatet på side som skal skrives ut. Benytt gjerne forhåndsvisfunksjonen for å verifisere utskriftversjon.\n Figur 169 – Egenskaper for visning   Hvis man vil ha en annen layout på printutgavene, for eksempel slå sammen flere web sider på samme printside, så er det bare å opprette det nødvendige antall visninger, definere ønsket layout, for eksempel ved å kopiere felter fra andre web sider (views) eller dra dem direkte fra datakilden.\nKvittering opprettes på samme måte. Lag et ekstra view og kall den f.eks ”Receipt”. Definer deretter layout og legge på de feltene som man ønsker å ha på kvitteringen.\nDet er også mulig å definere hjelpefelter og legge dem på print utgaver og kvitteringen\nHjelpetekster (knapper) Svært mange skjermbilder i Altinn er definert med mulighet for å få opp hjelpeinformasjon på skjermen. Til dette benyttes det i InfoPath hjelpeknapper som ser slik ut:\n Hjelpeknapp   Bildefilene vil du finne på \\\\alt-tul-db-c02\\tulshare\\InfoPath\\Etater på TUL-Share.\nFor å plassere en bildeknapp i skjermbildet, klikk på «Picture button» under «Controls» på hjemmefanen. Klikk på knappen for å vise «Button Properties». Her kan knappen tilpasses. Klikk «Picture» for å legge til hovedbildet. Klikk «Hover» for å legge til bilde som skal vises når du holder musen over knappen.\nDeretter kan knappen kopieres til alle stedene i skjema hvor det skal være hjelpeknapper, og det gjenstår bare å endre til respektive Id’er:\n Høyreklipp på bildeknappen og velg egenskaper for bildeknapp. Endre ID fra CTRLXX til HelpText_xxx, hvor xxx er valgfri.   Figur 170 – Egenskaper for knapp   Sporvalg For at sporvalgsfelter skal fungere i InfoPath skjema, er det nødvendig med to handlinger. Først må sporvalgsfeltet settes til å alltid poste tilbake til serveren. Dette gjøres ved å dobbeltklikke feltet, velge flipp Webleserskjemaer og velg radioknapp Alltid, som vist under:\n Figur 171 – Innstillinger for tilbakesending   Det andre er at det må legges inn C# kode for feltets Changed hendelse. Sporvalg er ikke er en del av eksempel skjema RF-1189, men kan enkelt legges til ved å benytte “Utvikler” og “Endret hendelse”:\n Figur 172 – InfoPath, kodeliste   Følgende kode skal legges inn for dette feltet:\nNotifyHost(\u0026quot;TrackFieldChanged_\u0026quot; + e.Site.Name);  Dette skal legges i metoden som automatisk ble lagt til av Visual Studio.\npublic void OppgaveAr_2D_datadef_2D_11236_Changed(object sender, XmlEventArgs e) { NotifyHost(\u0026quot;TrackFieldChanged_\u0026quot; + e.Site.Name); }  Hvis det benyttes avmerkingsbokser for sporvalg, må det håndteres at kombinasjonen av disse angir et spor. Ellers må samme kode legges på Changed hendelsen for avmerkingsbokser.\nInnlegging av kode i et skjema For å kunne legge inn kode i skjema må man gjøre følgende:\n Velg ”Fil”, deretter “Alternativer for skjema” fra verktøymenyen. Velg ”Programmering”. Velge C# som programmerings språk under Kodespråk for skjemamal. Merk at denne kan være grået ut og forhåndsvalgt. I Prosjektplassering, bla til mappe hvor InfoPath skal legge koden, helst i samme mappe som XSN fila (skjemafilen) på TUL-Share.  Merk at når man har kodet ferdig, må man velge Build i Visual Studio for å sikre at koden blir med inn i skjema.\nSe eksempel nedenfor:\n Figur 173 – Alternativer for skjema. Programmering   Forhåndsvisning og enhetstest i InfoPath I InfoPath gis det mulighet til å foreta en enkel inspeksjon av hvordan skjema fungerer, ved å benytte ”Forhåndsvisnings”-valget. Denne finnes i verktøylinja i InfoPath og kan benyttes til enhetstest av skjema. For eksempel kan det legges inn verdier, og en kan verifisere at feltene oppfører seg som de skal. Det samme gjelder for kalkylene som er lagt inn. Eksempel fra RF-1189 View 3:\n Figur 174 – Forhåndsvisning i InfoPath   For å komme tilbake til Design modus, velges ”Lukk forhåndsvisning” fra verktøylinja.\nViktig tips dersom det vises følgende feilmelding når en skal åpne forhåndsvisning:\n \u0026ldquo;InfoPath cannot open the selected form\u0026rdquo;\n I InfoPath må da kommando “Fil -\u0026gt; Alternativer for skjema -\u0026gt; Sikkerhet og klarering” velges, deretter:\n Huk av \u0026ldquo;Bestem sikkerthetsnivå automatisk (anbefales)\u0026rdquo; Velg radioknapp ”Fullstendig klarering” og trykk ”OK”  Dette tipset er for øvrig hentet fra http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/4f497859-b1f7-4498-95cb-bb9903bfaf5c (Gjelder for 2007 versjon, men kan fortsatt være til hjelp i 2010 versjon)\nMerk at det ikke er mulig å teste preutfylling eller uthenting av andre data fra sluttbrukerløsningen. Man får dog testet alle hjelpevariabler, kodeliste etc.\nFargekoder Altinn  Foreløpig utgave pr 2009-05-18\u0026hellip;\n    Fargekode RGB     Bakgrunn side 241,245,247   Bakgrunn grupperamme 226,234,240   Rammestrek rundt grupperamme 212,224,231   Overskrift - skjema (9pt bold) 22,55,68   Strek øverst på siden 223,237,239   Overskrift gruppe (8pt bold) 0,51,102   Ledetekst (8pt) 0,51,102   Felttekst (8pt) 0,51,102   Fremskutt hjelpetekst 112,150,175   Bakgrunn - Skrivebekyttet felt 226,234,240 (samme som bagrunn grupperamme)   Hjelpeikon - bakgrunn 231,226,161   Ramme rundt felt 212,208,200   Ramme rundt web-side 184,203,216 (vises på WEB-PRINT)    I beskrivelsen over vil f.eks. 9ptbold bety skriftstørrelse 9 og fete typer.\nSkrifttyper\nDet er for InfoPath-skjemaer , som for HTML generelt når det gjelder skrifttyper (fonts).\nDet er derfor viktig å velge standardiserte skrifttyper som f.eks. Arial, Verdana, Times New Roman, Lucida etc. Det vil være opp til sidemalen hvilken skrifttype som bør benyttes, samt hvordan denne vises i de ulike browserene/OS’ene.\nSette fargekoder i InfoPath\n Ekspander nedtrekksgardin for farge. Velg More Colors.\n  I vindu \u0026ldquo;Farge\u0026rdquo;:\n Velg en hvit tom rute under seksjon egendefinerte farger. Endre fargekoder for rød, Grønn og Blå (se koder over). Legg til egendefinert farge. Lagre som en egendefinert farge . OK.  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/kom-i-gang/",
	"title": "Kom i gang!",
	"tags": [],
	"description": "Denne guiden vil hjelpe deg med å komme igang med bruk av Altinns REST API.",
	"content": " Denne guiden vil hjelpe deg med å komme igang med bruk av Altinns REST API.\nRegistrer din applikasjon For at vi skal kunne stoppe misbruk og feilbruk må du registrere deg for å kunne bruke Altinn API-et.\nFør du skal bruke APIet må du ta stilling til hvilke ressurser i APIet du skal benytte og på hvilken måte (Read=lesetilgang, Write=skrivetilgang). API-nøkkelen du blir tildelt vil kun være gyldig for de ressursene du har bedt om tilgang til.\n Read på Message gir tilgang til å hente meldinger og skjema. Write gir tilgang til å sende inn skjema, samt slette meldinger og skjema. Read på Profile gir tilgang til å hente brukerens Navn, adresse og kontaktinformasjon, samt kontaktinformasjon for virksomheter brukeren kan representere Read på Organizations gir tilgang til å hente ut virksomhetene pålogget bruker kan representere. Read på Reportee gir tilgang til å hente ut alle avgivere (privatpersoner og virksomheter) pålogget bruker kan representere. Read på Lookup gir tilgang til å aksessere eksponerte innsynstjenester i REST API. Read/Write på Authorization gir tilgang til å se på eller endre delegerte roller og rettigheter på vegne av innlogget bruker eller virksomheter som brukere kan representere.  Send følgende to skjemaer ferdig utfylt i en e-post til api@altinn.no\n Bestillingsskjema Egenerklæringsskjema  Når vi har registrert informasjonen vil vi sende en API-nøkkel som du må benytte i din applikasjon.\nAutentisering med ID-porten Selv om tilgang til Altinn API er åpent, kreves det at brukeren autentiserer seg for at tilgangen til innholdet i brukerens meldingsboks skal gis. Informasjon om hvordan autentisering av brukerne kan utføres i en applikasjon og informasjon om føderering av brukere finner du her. For å teste APIet i en nettleser kan du logge inn i Altinn på vanlig måte.\nRespons formater Alle kall som brukes for å hente ut informasjon fra Altinn API bruker GET-metoden i HTTP. Formatet som returneres bestemmes av HTTP-headeren Accept.\nFølgende kall returnerer innhold fra brukerens meldingsboks i JSON-format.\nGET https://www.altinn.no/api/my/messages HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey  Mens følgende kall returnerer innhold på XML-format:\nGET https://www.altinn.no/api/my/messages HTTP/1.1 Host: www.altinn.no Accept: application/hal+xml ApiKey: myKey  Detaljert teknisk hjelpeside og testklient Altinn API har egne selvdokumenterene hjelpesider (på engelsk) som du finner på https://www.altinn.no/api/help/. Disse hjelpesidene inneholder detaljert teknisk informasjon om de ulike modellene som eksponeres og aksjonene som er mulig å utføre. Hjelpesidene inneholder også en testklient som kan benyttes til å utføre spørringer direkte mot Altinn API fra din nettleser (krever at du er pålogget Altinn).\nFeilsøking Cross-Origin Resource Sharing (CORS) For å kunne gjøre kall mot API\u0026rsquo;et fra en webapp i et annet domene enn altinn.no, så må CORS være satt opp i Altinn.\nØnsket domene som skal benyttes spesifiseres i bestillingsskjema ved registrering av din applikasjon.\nFor å verifisere at CORS er satt opp korrekt i et Altinn-miljø, så kan du benytte f.eks. følgende PowerShell-script:\n$headers = @{} # Sett origin-header med domene som vil gjøre kall mot Altinn API $headers.Add(\u0026quot;Origin\u0026quot;, \u0026quot;https://www.eksempel.no\u0026quot;) # Gjør test-kall i ønsket Altinn-miljø mot metadata-ressursen (som ikke krever pålogging) Invoke-Webrequest -Method Get -Uri https://www.altinn.no/api/metadata/ -Headers $headers  Eventuelt så kan f.eks. curl benyttes:\ncurl -X GET -H \u0026quot;Origin: https://www.eksempel.no\u0026quot; --verbose https://www.altinn.no/api/metadata/  Hvis HTTP-header Access-Control-Allow-Origin returneres med ønsket domene, så betyr det at CORS er satt opp korrekt for det aktuelle Altinn-miljøet.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/generelt/overordnet/",
	"title": "Overordnet",
	"tags": [],
	"description": "Overordnet informasjon om integrasjon mot Altinn.",
	"content": " Implementasjonsdokumentasjonen for integrasjon mot Altinn kan benyttes som veiledning for hvordan eksterne systemer kan integreres mot Altinn.\nHer beskriver den overordnede arkitekturen for integrasjon mot Altinn og sikkerhetsmekanismer som benyttes for kommunikasjon mellom Altinn og eksterne systemer.\nDokumentasjon for:\n Tjenesteiere Sluttbrukere  Målgruppe for denne dokumentasjonen  De som skal utvikle integrasjon mot Altinn og trenger mer kunnskap om formater og teknologier som benyttes i Altinn integrasjon\n Arkitekter med behov for å vite mer hvordan Altinn kan passe inn i en informasjonsarkitektur\n De som har behov for å vite mer om Altinn og integrasjonsmuligheter for eksterne systemer\n  Overordnet prinsipp for dokumentasjonen Innhold og versjonering av dokumentasjonen skal reflektere siste versjon i produksjon. Kun siste versjon av tjenester er dokumentert og beskrevet. Dette støtter opp under prinsippet om at nye tjenesteeiere og nye sluttbrukersystemer bør bruke siste versjon av en tjeneste.\nDefinisjoner    Betegnelse Beskrivelse     Arkiv Komponent som håndterer langtidslagring av data i Altinn   Arbeidsflyt Komponent for styring av arbeidsflyt i Altinn tjenester   Avgiver En juridisk eier av data som sendes inn, f.eks. en bedrift eller person   Base64 Standard for å representere binære data som tekst, slik at binære data kan være en del av f.eks. en XML struktur   EAI Enterprise Application Integration - Mellomvare for å etablere Integrasjon mellom systemer og applikasjoner innad i en organisasjon   ETL Felles betegnelse på produkter som brukes til uthenting og innlesing av store mengder data mot databaser eller filer   FTP File Transfer Protocol – Protokoll for å overføre filer   HTTP Hypertext Transfer Protocol - Protokoll for overføring av data over nettverk og spesielt internett   HTTPS Hypertext Transfer Protocol Secure - Kryptert protokoll for overføring av sensitive data over nettverk og spesielt internett   Innsendingstjeneste En innsendingstjeneste er en eller flere skjema definert av en tjenesteeier som fylles ut i portal eller sluttbrukersystem, evt. signeres, og sendes inn. Påbegynte og innsendte innsendingstjenester kan oppbevares på brukernes hovedside i Altinn. Svardata sendes tjenesteeier   Innsynstjenester Tjenesteeiere kan gjøre informasjon i egne registre (for eksempel saksbehandlingsløsninger eller elektroniske saksarkiv/saksmapper) tilgjengelig for den enkelte brukeren eller dennes representant   MTOM Message Transmission Optimization Mechanism – Metodikk for effektiv forsendelse av binære vedlegg til og fra en web service   Samhandlingstjenster En tjeneste som knytter sammen andre tjenester som for sluttbruker og/eller tjenesteeier hører naturlig sammen   Signering Tjenesteeier kan definere at spesifikke tjenester (for eksempel innsendingstjeneste) må signeres en eller flere ganger av bruker(e) før den aktuelle tjenesten kan ferdigstiller og sendes inn til Altinn   Skjema Formular/dokument definert av en tjenesteeier som inneholder rubrikker som skal besvares av den som bruker formularet. Kan være trykket på papir eller elektronisk – sluttbrukerløsningen benytter elektroniske skjema   Skjemasett En samling skjema som hører sammen. Gyldige kombinasjoner defineres av tjenesteeiere   SFTP Secure File Transfer Protocol - Kryptert filoverføringsforbindelse for sikrere overføring av sensitive data    Sluttbrukersystem   SMTP Simple Mail Transfer Protocol - Standard for sending / transport av E-post på internett   SOA Konseptet tjenesteorientert arkitektur går ut på at applikasjoner og automatiske prosesser aksesserer informasjonsressurser gjennom standard tjenestegrensesnitt   SOAP Uavhengig protokoll spesifikasjon for utveksling av strukturert informasjon gjennom web services   URI Uniform Resource Identifier - En streng som identifiserer en unik ressurs på internett. F.eks. en web side eller et web service endepunkt   Web service Tjeneste på Internet aksessert vha. HTTP/HTTPS som utfører en bestemt oppgave, eller en bestemt type oppgaver   WSDL Web Services Description Language - Teknisk tjenestekontrakt som beskriver hvilke operasjoner som finnes, samt regler for bruk (policies)   WS-* En felles betegnelse for web service standarder som finnes   WS-Security Standard for å tilby sikkerhet for kommunikasjon på en web service   XML EXtended Markup Language - XML er en språkdefinisjon for strukturering og beskrivelse av data   XAML Standardisert format for å kommunisere autorisasjonsregler og forespørsler   XSD XML Schema. Meta beskrivelse for XML data. Beskrivelse av hvordan XML dataene skal være strukturert og beskrivelse av alle data elementene. Blir også brukt til å validere XML data    Overordnet løsning  Overordnet integrasjonsskisse   All kommunikasjon mellom et sluttbrukersystem og et tjenesteeiersystem er ivaretatt ved hjelp av tjeneste og integrasjonsplattformen i Altinn. Dette gjelder uansett om dataflytbehovet er igangsatt fra sluttbruker eller tjenesteeiers side. Altinn plattformen benytter også data fra offentlige register som for eksempel Folkeregisteret eller Enhetsregisteret til å komplettere de data som flyter mellom aktørene som benytter Altinn. For sluttbrukersystemer vil det i all hovedsak være web services som tilbys som integrasjonsgrensesnitt inn mot de tjenester Altinn tilbyr.\nAltinn er en plattform for tjenester og integrasjon Altinn er i tillegg til å være en portal for kommunikasjon mellom det offentlige og bedrifter i Norge også en plattform for å sørge for elektronisk flyt av data og integrasjon. Plattformen er basert på åpne standarder og støtter nyere og eldre teknologier for integrasjon både ved hjelp av web services og filbasert integrasjon. Plattformen skal støtte opp under prinsipper som skal ivareta aktører og dataflyt i forhold til:\n Tilgjengelighet – Plattformen har høy tilgjengelighet og er i praksis ”alltid åpen” for data kommunikasjon. Det er også lagt vekt på å benytte asynkrone mekanismer for leveranse av data der dette er hensiktsmessig, for å kunne tillate at flere systemer leverer i parallell i perioder med høye volumer.\n Sikkerhet – Plattformen tilbyr mekanismer for å sikre både datainnhold og at de som bruker løsningen er identifisert og har rettigheter til å utføre det de forsøker.\n Kryptering og dekryptering av meldinger og transport\n Signering og sjekk av signering\n Autentisering av system og bruker\n Autorisasjon av system og bruker\n  Interoperabilitet – Plattformen baserer seg på åpne standarder innenfor integrasjon med fokus på bruk av REST API, XML og Web Services som er bredt støttet i de fleste teknologier og løsninger. Altinn har en teknisk oppdatert plattform og er i stand til å kommunisere på oppdaterte standarder.\n Sporbarhet – Det finnes kvitteringsmekanismer og sporingsmekanismer som ivaretar behov for tilbakemelding på og sporing av data når dette er utvekslet gjennom plattformen.\n  Sikkerhet Alle integrasjoner i Altinn har som mål å ivareta sikkerheten for de systemene som inngår i integrasjonen. Dette går på sikring og kryptering av data gjennom transport, og sjekking at de som benytter integrasjon for å hente eller levere data har de nødvendige rettigheter (dvs. er autorisert) som må til for å kunne aksessere data og tjenester.\nDet henvises til mer detaljer i implementasjonsguider, for henholdsvis sluttbrukersystemer og tjenesteeiere.\nGrensesnitt Altinn tilbyr tre forskjellige grensesnitt for de fleste funksjonelle integrasjonpunkter\n Integrasjon via Web service\n Tjenestekontrakter (WSDL) beskriver format for data som benyttes.  Integrasjon via XML-filer (batch)\n Altinn har definerte standardformater for alle XML-integrasjoner  Integrasjon via REST API\n Altinn REST API benytter REST arkitekturstil, og baserer seg på en semantisk definisjon av innholdet.   Formater Integrasjon i Altinn gjennom filbasert integrasjon eller web services er nesten utelukkende basert på bruk av XML. XML-spesifikasjonene som benyttes er enten definert som standardformater av Altinn for å integrere mot spesifikk funksjonalitet i løsningen, XML-spesifikasjoner er tilgjengeliggjort fra offentlige metadatakilder som oppgaveregisteret og SERES, eller tjenesteeiers egne spesifikasjoner.\nEksterne systemer vil bruke disse formatene til å levere eller hente data til og fra Altinn.\nVersjonering Altinn standardformater som er definert enten for filbasert integrasjon eller web services benytter versjonering av kontrakter. Versjoneringen er bygget opp rundt en standard som er mye benyttet av alle større premissleverandører for spesifikasjoner. Prinsippet går ut på at navnet på en komponent og entitet i denne er førende for navngiving og deretter benyttes årstall og måned kontrakten ble generert:\nhttp://www.altinn.no/services/\u0026lt;MainComp\u0026gt;[/\u0026lt;SubComp\u0026gt;]/\u0026lt;Year\u0026gt;/\u0026lt;Month\u0026gt;\nEt eksempel på dette er:\nhttp://www.altinn.no/services/ServiceEngine/ReporteeElementList/2009/01ReporteeElementList/2009/10\nNamespace benyttet i Altinns tjenestekontrakter og XML-spesifikasjoner (XSD) benytter denne notasjonen for versjonering.\nBinære vedlegg I Altinn-integrasjoner er muligheten for overføring av binære vedlegg til/fra løsningen mye benyttet. Siden XML og XML i web services er basis for standard integrasjon må det benyttes mekanismer som kan bruke XML som transport for disse data. Altinn tilbyr to muligheter for dette:\n Base64 koding – Her konverteres det binære vedlegget til en tekstbasert streng som lar seg transportere via XML. Base64 benyttes i all filbasert integrasjon til/fra Altinn, men er også en av valgmulighetene for webtjenester.  Web services Web service grensesnittene benyttes fortrinnsvis der det er behov for raske enkeltvise datautvekslinger med Altinn.\nAltinn tilbyr opptil 4 forskjellige internett-adresserbare endepunkter for hver tjeneste (URI). Disse endepunktene støtter opp under forskjellige spesifikasjoner innen web services slik at plattformen er moderne, interoperabel og derfor kan benyttes av alle eksterne systemer som støtter web services\n Basic Http (SOAP 1.1) (Tjenestekontrakter navngitt med ExternalBasic)\n Basis bruk av web services uten særlig støtte for nyere og moderne WS-* standarder. Dette er fortsatt regnet som den standarden flest tekniske plattformer har mulighet til å integrere mot, men mangler en del mekanismer som supporterer web servicen blant annet innen sikkerhet.\n Binære vedlegg benytter Base64 enkoding\n  WS Http (SOAP 1.2) (Tjenestekontrakter navngitt med External)\n Støtter mer avanserte mekanismer og nyere standarder innen web services. Altinn tilbyr dette for å støtte de plattformene som benytter WS-Security.  Støtte for nye web service standarder WS-* og gjør det mulig for Altinn å følge denne utviklingen i takt med systemer som ønsker å bruke Altinn web services.\n Binære vedlegg benytter Base64 enkoding\n  Sertifikater Altinn benytter for web services ikke spesifikke sertifikater for signering eller kryptering av data før de avsendes fra klient side. Krypteringssikkerhet for web services baserer seg på bruk av HTTPS.\nVirksomhetssertifikater kan benyttes for autentisering av virksomhetsbrukere. Virksomhetsbrukere vil benytte seg av brukernavn, passord og virksomhetssertifikat for autentisering.\nFor formidlingstjenester vil bruk av sertifikater for signering og/eller kryptering kunne benyttes. Dette må i så fall settes opp spesifikt for en tjeneste og være avtalt mellom aktørene som inngår i formidlingstjenesten.\nAndre web service standarder Altinn tilbyr per i dag SOAP i forskjellige formater som standarder for web services. Andre standarder for tjenester som for eksempel REST eller XML/HTTP benyttes ikke.\nKontrakter / formater Formater på data som kan sendes til Altinn baserer seg på spesifikasjoner forvaltet av eksterne metadatakilder som Oppgaveregisteret eller SERES.\nKoding av meldinger Altinn baserer seg på bruk av UTF-8 for innsending og uthenting av data gjennom web services.\nFilbasert integrasjon Grensesnitt med filbasert integrasjon benyttes fortrinnsvis for større datamengder, og/eller hvor det ikke er behov for umiddelbar tilbakemelding på datautvekslingen. Det er ingen absoluttgrense i Altinn for hvor store ”større datamengder” er, eller hvor store datamengder som kan sendes via web service, men følgende tommelfingerregel kan benyttes:\nweb service \u0026gt; 30 MB/100 elementer \u0026gt; batch\nVed filbasert integrasjon med Altinn benyttes FTP protokollen, fortrinnsvis SFTP (FTP over SSH), og det finnes to fremgangsmåter:\n Altinn kan hente data fra den eksterne parts system\n Den eksterne parten kan levere data på et definert Altinn område, dvs. SFTP server må etableres av ekstern part.\n  Detaljer og tilpasning av den filbaserte overføringen avklares ved etablering.\nInnpakking av data med CDATA mekanisme Flere av Altinn sine tjenester baserer seg på at strukturert XML skal transporteres i en konvoluttmelding som inneholder metadata om det som transporteres. Et eksempel på dette er innsendingstjenester som leverer et eller flere skjema som hver for seg er i henhold til en XML spesifikasjon levert av en eller flere metadata leverandør som for eksempel oppgaveregisteret.\nFor å gjøre dette må den strukturerte XML-delen pakkes inn i et CDATA-element slik at ikke tjenesten betrakter dette som en pakke med data og ikke som en tjenesteparameter i forhold til kontrakten for operasjonen.\nCDATA er en mekanisme for å overføre data hvor innholdet ikke skal valideres sammen med de data som omslutter den, men håndteres som en streng med data.\nEt CDATA-element defineres inne i et vanlig XML element på følgende måte:\n\u0026lt;Data\u0026gt; \u0026lt;![CDATA[innenfor klammeparenteser angis en streng med data]]\u0026gt;\u0026lt;/Data\u0026gt;\nKvitteringer I Altinn finnes kvitteringer slik at eksterne systemer skal kunne ha innsyn i prosessen med innsending i forhold til mottak, kontroll og prosessering av data som sendes inn. Denne kvitteringsmekanismen er ment å være en teknisk kvitteringsmekanisme som går på logistikk rundt forsendelser og prosessering av data.\nDet vil også være mulig for en integrasjonsaktør å kvittere på kvitteringene som holdes i Altinn slik at en annen avsender kan se at f.eks. en tjenesteeier har mottatt og validert data på sin side.\nKvitteringer brukes og oppdateres for integrasjoner hvor:\n Meldinger / data mottas av Altinn for prosessering. Når meldinger / data er validert og levert videre til prosessering.  Forøvrig henvises det til spesifikk informasjon om hvordan kvitteringer benyttes i de enkelte integrasjonene i underliggende implementasjonsguider.\nAltinn tilbyr to seperate REST-apier - ett for sluttbrukere som alle kan registrere seg for å bruke, og ett som utelukkende kan brukes av tjenesteeiere i Altinn.\nREST API generell oppbygging  API konseptskisse   Altinn API benytter REST arkitekturstil, og baserer seg på en semantisk definisjon av innholdet. Strukturen i responsen fra API-et kan endre seg, men betydningen av elementene er den samme.\nDette blir som når man navigerer seg inn på en vanlig nettside. Da kan en klient navigere seg inn i API-et ved å følge lenker med en definert betydning. Det er ikke sikkert at URL-en man var på sist fortsatt eksisterer, men det vil være mulig å bla eller søke seg tilbake til det samme innholdet fra forsiden.\nFordelen med dette er at Altinn har mulighet til å bygge ut og omstrukturere innholdet i API-et uten at dette hindrer en klient fra å finne frem til innholdet den brukte fra før.\nAPI-et baserer seg på de mekanismene som allerede finnes i HTTP-standarden og meldingshoder som brukes av vanlige nettlesere og webservere i dag. Altinn API støtter følgende formater\n application/HAL+json application/HAL+xml application/xml application/json  Navigasjon og semantikk Navigasjonen foregår ved at man navigerer til https://www.altinn.no/api/my/messages/ og navigerer seg via lenkene som finnes der. Det er mulig å bla seg innover i hierarkiet av meldinger, eller gå rett til en enkelt melding.\nAPI-et gir informasjonen som meldinger på formatene XML eller JSON. Siden XML og JSON mangler semantiske elementer, bruker meldingene i tillegg standarden HAL. HAL-formatet angir en ressurs med innhold og lenker. I tillegg kan hver ressurs inneholde andre ressurser med sine lenker og innhold. Lenkene angir en semantisk relasjon mellom ressursen man er på og ressursen det lenkes til.\nForeløpig er følgende relasjoner definert, og flere relasjoner kan komme etter hvert som API-et bygges ut.\n   Lenke Ressurs Beskrivelse     self Message/Organization/Form URI til representasjon av den enkelte ressursen.   print Message URI til utskriftsversjonen av et arkivert skjema eller et skjema under utfylling. Er kun gyldig for message elementer av typen FormTask. For print relasjoner er \u0026ldquo;mime-type\u0026rdquo; i de fleste tilfeller \u0026ldquo;application/pdf\u0026rdquo; men vil i noen tilfeller også være \u0026ldquo;application/text-html\u0026rdquo;.   attachment Message URI og navn på vedlegg knyttet til message.   form Message URI til skjema knyttet til meldingen av type FormTask.   portalview Message URI til portal-visning av det aktuelle Message-objektet.   formdata Form URI til skjemadata i XML-format.   messages Organization URI til liste over meldinger for den aktuelle organisasjonen.    OData OData kan brukes til filtrering, paging og sortering i lister av elementer av alle typer. Listene er begrenset i kode til å maksimalt inneholde 50 elementer. Det er mulig å utføre paging ved å sende med Odata parameteren skip (for eksempel $skip=50).\nDet er også mulig å filtrere listene som returneres basert på hvilke informasjonselementer de inneholder. For eksempel vil følgende parametere på message elementet $filter=ServiceOwner eq 'Skatteetaten' kun returnere meldinger fra Skatteetaten.\nSe også ytterligere informasjon om OData.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/api/registrering/",
	"title": "Registrering",
	"tags": [],
	"description": "Hvordan registrere din applikasjon.",
	"content": "Registrering gir tilgang alle ressurser under API for tjenesteiere. API-et har inntil videre bare leseoperasjoner (GET).\nSend følgende skjema ferdig utfylt i en e-post til api@altinn.no\n Bestillingsskjema Egenerklæringsskjema  Når vi har registrert informasjonen vil vi sende en API-nøkkel som du må benytte i din applikasjon.\n"
},
{
	"uri": "https://altinn.github.io/docs/roadmap/2018/",
	"title": "Altinn roadmap 2018",
	"tags": [],
	"description": "Overordnet roadmap for videreutvikling av Altinn i 2018.",
	"content": " Overordnet roadmap for videreutvikling av Altinn i 2018.\nQ3 - 2018 ✔️ Tjenester 3.0 - \u0026ldquo;minimum testable product\u0026rdquo; (MTP) Det skal over sommeren etableres en test-løsning for utvikling av tjenester, slik at tjenesteutviklere og andre interesserte kan gi fortløpende feedback og komme med ønsker.\nLøsningen vil videreutvikles smidig og endringer tilgjengeliggjøres fortløpende utover høsten.\nTjenester 3.0 vil på sikt erstatte hele dagens tjenesteutviklingsløsning (TUL).\nMTP ble levert 20. september 2018: https://altinn.studio\n✔️ Lokal rolle som opprettes på juridisk enhet må arves til underenhetene Etablere løsning slik at når en oppretter lokal rolle på juridisk enhet, så vil rollen også gjelde for tilknyttede underenheter. Dette ble levert i release 18.8.\n✔️ Økt sikkerhetsnivå på samtykkesiden Det skal etableres løsning for å kunne anvende sikkerhetsnivå 4 på samtykkesiden. Dette ble levert i release 18.8.\n✔️ Maskering av fødselsnummer for aktører Deler av fødselsnummer skal maskeres når det vises i portalen. Dette ble levert i release 18.8.\n❌ Foreslå mest delegerte rettigheter ved delegering av rettigheter Det skal etableres standard jobb/prosedyre som oppdaterer konfigurasjonen månedlig.\nDette for at brukerene skal få opp mer relevante forslag om å delegere rettigheter på de tjenestene som er mest vanlig å delegere siste måned. Denne funksjonaliteten vil ikke bli levert\nQ4 - 2018 ✔️ Tilgang for utenlandske brukere - eIDAS Det skal etableres støtte for eIDAS slik at brukere fra EU-området med D-nummer i DSF kan foreta pålogging i Altinn via ID-Porten.\nDenne funksjonen er etablert, men ikke gjort tilgjengelig. En avventer ferdigstilling hos våre samarbeidspartnere før denne endringen gjøres tilgjengelig i produksjonsmiljøet.\n✔️ Permanent sletting av elementer i organisasjoners papirkurv Det skal etableres en løsning slik at organisasjoner kan tømme egen papirkurv.\nDette ble levert i release 18.10.\n✔️ Endre avsender for SMS-varsel Det skal etableres løsning for å kunne endre avsender på frittstående SMS-varsel fra Altinn. Dette ble levert i release 18.11.\n✔️ Fjerne basisrollen ALLEA i sin helhet Det skal etableres løsning slik at det fremgår tydeligere for bruker hvilke tilganger som deles ved en delegering. Dette ble levert i release 18.11.\n✔️ Oppdatering av SharePoint og .NET SharePoint skal oppdateres til nyere CU, og .NET til siste versjon i både sluttbrukerløsningen og i tjenesteutviklingsløsningen. Oppdateringene er utført i produksjon: i tjenesteutviklingsløsningen hhv 31. oktober og 6. november og i sluttbrukerløsningen hhv 21. og 22. november 2018\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/b/",
	"title": "B: Utforming av brukergrensesnitt for skjema",
	"tags": [],
	"description": "Dette vedlegget tar for seg retningslinjer/forslag for utforming av sider av skjema i InfoPath.",
	"content": " Dette vedlegget tar for seg retningslinjer/forslag for utforming av sider av skjema i InfoPath. Alle offentlige nettskjemaer for innsendingstjenester skal følge ELMER 2-retningslinjene, dette er nærmere beskrevet i vedlegg C.\nSidestørrelse Standard sidestørrelse for skjema er 630px bredde. Høden til skjemaet vil variere, men skjemautvikler bør splitte sider med mye høyde for å unngå unødvendig vertikal scrollbar. Om bredden er mer enn 630 px vil horisental scrollbar inntreffe. Hvis siden avviker fra standard sidestørrelse må man justere høyde/bredde slik at man ikke får både vertikal og horisontal scrollbar. Det skal være minst mulig scrolling og helst ikke horisontal scrolling. Skjema skal deles over flere sider, men der dataene henger tett sammen skal man heller bruke scrolling vertikalt. Dette kan for eksempel være hvis det er en stor tabell eller utregninger som er avhengig av andre felt. I enkelte tilfeller kan det være nødvendig med horisontal scrolling i forbindelse med store tabeller for ikke å gjøre skjemaet for komplekst for brukeren.\nHvis man må ha scrolling, forsøk å markere at det kommer noe mer på siden, feks ved å legge deler av en ledetekst eller et felt før scrollingen begynner.\nFor å unngå horisontal scrolling, må ikke sidebredden overstige 630px for skjema til innsendingstjenester eller 700px for skjema til innsynstjenester. Denne bredden tar hensyn til vertikal scrollbar.\nSideoverskrift (skjemanavn) Alle sider skal ha en sideoverskrift i form av skjemanavn. Under skjemanavnet skal det være en linje. Linjen skal gå tvers over hele siden som vist i figuren under av etatslogo. Overskriftens posisjonering kan være som eksempelet under.\n Figur 175 – Plassering av overskrift   Etatslogo  Figur 176 – Etatslogo   I Altinn er det obligatorisk med etatslogo på skjemaets første side. Det er valgfritt hvorvidt man også legger inn logo øverst til høyre på øvrige sider i skjemaet.\nLogo for de ulike etatene skjemaene i Altinn skal plasseres øverst til høyre i skjemaene.\nFor å få riktig bakgrunnsfarge på etatens logo må man lage en gif-fil med transparent bakgrunn. Logoens størrelse bør settes som vist under.\n Figur 177 – Etatslogo størrelse   Grupper Grupper er felter som logisk hører sammen, og vil ofte være plassert inne i en ramme. Det kan være flere grupper på én side. En gruppe bør ikke være delt over flere sider. Det anbefales å ha luft mellom ulike grupper på samme side. Disse bør adskilles med minumum en linjeavstand.\nGrupper inne i andre grupper skal ikke ha ramme rundt seg.\nEn gruppe skal ha gruppeoverskrift, hvis den ikke har overskrift skal den heller ikke ha ramme rundt seg.\nKnapper Plassering av knapper i skjema:\nFor knapper som har direkte tilknytning til felter i skjemaet skal knappene plasseres i forhold til disse. Når knapp har tilknytning til ett felt skal knappen som hovedregel plasseres til høyre for inputfeltet, slik:\n Figur 178 – Plassering av knapper i skjema   I situasjoner der dette ikke er gunstig grunnet lengde på ledetekst og feltlengde, kan knapp plasseres under inputfelt:\n Figur 179 – Plassering av knapper i skjema   For knapper med direkte tilknytning til flere felter bestemmes plassering av knapp ut fra plassering av felter. Dersom alle inputfelter ligger på en linje bør også knappen ligge på denne linjen, slik:\n Figur 180 – Plassering av knapper i skjema   I situasjoner der tilknyttede inputfelter er fordelt på flere linjer plasseres knappen under inputfeltene, slik:\n Figur 181 – Plassering av knapper i skjema   Tabeller En tabell vil alltid starte som en rad og antall rader i en tabell kan enkelt genereres automatisk når utvikler trykker på TAB. En tabell kan eventuelt splittes opp ved å trykke på høyre museknapp (split cells) når markøren er inne i tabellen. Utvikler kan da velge hvor mange rader og kolonner tabellen skal inneholde.\n Kolonneoverskrifter skal ”alignes” left med feltene i kolonnene. Kolonneoverskrifter og ledetekstene på rader skal ikke være i fet skrift. Kolonneoverskrifter med ulik antAlle rader i teksten, skal \u0026ldquo;alignes\u0026rdquo; i bunnen (se eksempel nedenfor, i Error! Reference source not found.).  Tabeller og matriser med sumfelt\nTabeller og matriser med ledetekst foran radene skal ha ledeteksten for sum venstrejustert med ledetekstene.\n Figur 182 – Matrise med ledetekst foran rader   Tabeller som ikke har ledetekst foran hver rad skal ha ledeteksten for sum venstrejustert lik tabellens første kolonne.\n Figur 183 – Tabell uten ledetekst foran rader   Vertikale overskrifter\nVertikale overskrifter med flere ledetekster til høyre for seg (se eks. fra RF-1071 under):\n Figur 184 – Vertikale overskrifter   Her er teksten \u0026ldquo;A. Tilgang i året\u0026rdquo; overskrift for postene 101-103.\nLøsning: Del opp i 3 grupper, flytt vertikal tekst opp som gruppetittel - da \u0026ldquo;A. Tilgang i året\u0026rdquo; gruppen seende slik ut:\n Figur 185 – Løsning for A. \u0026#34;Tilgang i året\u0026#34;   Tekstfelter, ledetekster og grafikk.  Redigerbare tekstbokser skal vises med hvit bakgrunn. Ikke-redigerbare data skal vises med grå bakgrunn Ledetekster starter med stor bokstav (må sikres ved registrering i OR) Ledetekster avsluttes uten kolon (må sikres ved registrering i OR).\n(Kolon kan i visse tilfeller føre til feil i skjema) Ledetekster skal venstrejusteres og feltene skal igjen venstrejusteres slik at ledetekst og felt danner to kolonner. Tallet i beløpsfeltet skal høyrejusteres. Alle andre typer tekster skal venstrejusteres i sine felt. Hvis et felt har maks antall tegn, skal ikke feltet være større enn maks antall tegn. Det skal være jevn avstand mellom ledetekstene selv om en ledetekst går over flere linjer. Hvis det ikke er ramme rundt ledetekster, skal det være minst like mye luft mellom siste ledetekst og sideslutt som mellom ledetekstene. Hvis papirskjemaet har spesialtegn som + eller - i feltet, skal dette plasseres på venstre side av feltet, sentrert (vertical center) i det elektroniske skjemaet og ha samme font og farge som ledeteksten. Trekk ledeteksten lengst mulig ut slik at den blir på færrest mulig linjer. Dette begrenses naturligvis av feltenes lengde. Kommentarfelt (som går over flere linjer) skal plasseres under tilhørende ledetekst og være en stor boks. Det skal være samme innrykk på ledeteksten og kommentarfeltet. Ledetekster som er uthevet i papirskjemaet med feks fet skrift, kan også utheves i web-skjemaet hvis skjemaeier ønsker det.  Alle felt er i utgangspunktet redigerbare med unntak av preutfylte og kalkulerte felt.\nPlassering av overskrifter, ledetekster og rammer Sidemalen under er hentet fra Skatteetaten. Denne viser eksempler på overskrifter, ledetekster, rammer, bruk av tabeller og elementer plassert i tabeller.\n Figur 186 – Skatteetatenssidemal   Eksempler på skatteetatens sidemaloppsett:\n Ledetekst med tilhørende felt plasseres likt fra toppen av siden. Marger Innenfor Side er satt opp med:  Venstremarg - 9px Høyremarg - 8px  Innenfor Gruppe:  Venstremarg - 9px Høyremarg - 8px  Kolonnebredde for hjelpetekstikon - 19px Kolonnebredde for fortegn - 13px  Plassering av felt Forsøk å danne kolonner på en side når det står flere felt horisontalt. Felt som står under hverandre skal være venstrejustert.\nHvis felt og ledetekst ikke er så lange at de vil dekke hele siden horisontalt, skal feltene plasseres mot venstre.\nRekkefølgen på felter skal som en hovedregel ha samme rekkefølge som i papirskjemaet. Ett unntak på dette er plassering av avgiver og revisor/regnskapsfører på første side.\nPostnummer og poststed skal som hovedregel plasseres under hverandre og rett etter adressefeltet.\nFelt som inneholder postnummer, Organisasjonsnummer, fødselsnummer, dato o.l bør bli satt opp med bestmet bredde som passer til lengden av data som feltet skal innholde.\nHvis man har noen generelle informasjonsfelt og deretter en del summeringsfelt, kan man unngå fra hovedregelen om at lengste ledetekst bestemmer plassering av alle felter som vist her:\n Figur 187 – Unntak fra regel om lengste ledetekst   Når flere sider i et skjema har samme oppsett, skal feltene på sidene ha samme feltlengde og plassering. Dette gjelder f.eks. årsregnskap fra BR (RR0003).\nPlassering av hjelpe-ikon Hjelp-ikon skal plasseres foran feltet det tilhører, justert midt på. Hjelp-ikon som tilhører hele grupper skal plasseres etter gruppetittelen som vist i eksempletet til Skatteetatens sidemal.\nRadioknapper (radio buttons)  Radioknapper skal benyttes der brukeren må velge fra en gruppe av 6 eller mindre gjensidig utelukkende valg. Hvis det er mer enn 6 valg, bør en rullgardinliste brukes. Hvis radioknapper benyttes i en tabell, skal alltid rullgardinliste brukes uansett antall valg. Tekst tilhørende radioknappene skal stå på høyre side av knappen. Ingen av radioknappene bør være valgt som standard. Radioknapper skal ha spørsmål til venstre og knappene med alternativene ved siden av til høyre. Dette gjelder ikke sporvalg (se under Innledende dialog) Margin på hver radioknapp skal stå til auto (kjent feil i InfoPath Form Services gjør at den må stå til auto) Teksten på øverste alternativ skal stå på linje med ledeteksten.  Avkryssingsbokser (check boxes)  Avkryssingsbokser skal benyttes for binære valg. Avkryssingsboksene skal være uavhengige av hverandre. Tekst tilhørende avkryssingsboksene skal stå på høyre side av avkryssingsboksen. Flere avkryssingsboks skal arrangeres vertikalt. Hvis det er mange avkryssingsbokser, kan de også plasseres horisontalt for å utnytte plassen. Avkryssningsboksen plasseres i en tabell for å låse posisjoneringen. Det er anbefalt å ha litt luft mellom avkryssningsboks og andre elementer. Avkryssingsbokser skal ikke rammes inn. Hvis det er 10 eller færre avkryssingsbokser kan de plasseres i kolonner for å utnytte plassen. Rekkefølgen av alternativene skal følge rekkefølgen i skjemaet. Vi anbefaler skjemaeier å plassere alternativene logisk, feks alfabetisk. Ulike avkryssningsbokser bør knyttes opp til ulike hendelser eller verdier.  Det kan være ønskelig å benytte flere avkrysningsbokser for valg, og dette kan gjøres ved å først sette inn en avkrysningboks og knytte denne til et felt i skjema. Deretter høyreklikker man på feltet man har lagt til, og deretter limer det inn igjen så mange avkrysningsbokser man vil ha. Merk at alle avkrysningsboksene må ha ulik verdi når avsjekket, ellers vil de ikke fungere uavhengig. Det vil også være slik at kun èn avkrysningsboks kan være avsjekket pr. felt i datakilde. Dvs at hvis tre avkrysningsbokser er tilknyttet felt A, vil kun en av de være avsjekket samtidig.\nListebokser (List box)  Listebokser skal brukes for store datamengder. Fra 3 til 9 elementer skal vises av gangen. Bruker skal kunne taste en eller flere bokstaver for å flytte i listene. Dersom brukeren kan velge flere forekomster fra en liste, skal det være en liste til som viser hva som er valgt. Dersom det er aktuelt å velge alle, skal det være en avkryssingsrute eller knapp med Velg alle. Denne må da ha kode for å automatisk velge alle instanser i listen.   Figur 188 – eksempel på listeboks hvor ulike kommuner kan velges.   Ferdig utfylte felt Felt som er ferdig utfylt fra for eksempel SBS skal som hovedregel være utilgjengelige (skrivebeskyttet). Dette markeres med at feltet får grå bakgrunnsfarge.\nDynamiske felt Alle felt som er dynamiske skal være synlige, men utilgjengelige (altså \u0026ldquo;grået ut\u0026rdquo;). Med dynamiske felt menes felt som brukeren skal svare på basert på tidligere svar, f.eks. ved å svare Ja på et felt skal brukeren fylle ut en adresse, mens svarer brukeren nei skal adressen ikke fylles ut.\nHvis du må lage spørsmålet for å få dynamiske felt, skal spørsmålet stilles med radioknapper med ja/nei svaralternativ.\nDynamiske felt vedlikeholdes i InfoPath ved hjelp av betinget formatering, hvor man setter en regel som sier at feltet skal være inaktivt basert på en kondisjon. Denne kondisjonen kan f.eks. være at et annet felt i skjemaet ikke skal være tomt eller inneha en bestemt verdi.\nFremskutt hjelpetekst Generell fremskutt hjelpetekst skal settes i en egen gruppe uten overskrift. Fremskutt hjelpetekst som gjelder hele skjemaet og som brukeren bør lese før hun starter å fylle ut skjemaet skal stå på toppen av første side i skjemaet.\n Figur 189 – Eksempel på fremskutt hjelpetekst fra Skatteetatens sidemal   Fremskutt hjelpetekst som tilhører et felt, skal plasseres tilsvarende som i papirskjemaet. Hvis fremskutt hjelpetekst skal plasseres på linjen etter ledeteksten, men sammen med ledetekst skal de plasseres med rett venstrekant. Eksempel:\n1. Dette er en ledetekst\nOg her er den tilhørende hjelpeteksten\nTab mellom felt Brukeren skal kunne flytte seg mellom felter i et skjema ved bruk av TAB-tasten. TAB skal ikke gå innom hjelp-ikon og heller ikke felt som brukeren ikke kan endre. Standard verdi for tabolatorindeks i tekstbokser er ”0”, og TAB tasten vil da gå inn i feltet. Om verdien blir satt til ”-1” hopper TAB-tasten over dette feltet og går inn i neste felt med verdi ”0”. Figuren under viser en tekstboks med tabulatorindeks ”-1”.\n Figur 190 – Tabulatorindeks   Innledende dialog (sporvalg) Innledende dialog er en egen side før selve skjemautfyllingen begynner for å velge spor. Siden avgjør hvilke deler av skjemaet som blir tilgjengeliggjort for brukeren avhengig av alternativene brukeren velger.\nSiden skal ha:\n Fremskutt hjelpetekst før spørsmålet: ”Dette er spørsmål som vil avklare hvilke deler av skjemaet du skal fylle ut. Velg riktig alternativ for deg og klikk på Neste knappen.” Hvis det er flere spørsmål plasseres de under hverandre tilsvarende som inne i skjemaet. Radioknapper plasseres under spørsmålet (se eksempel under).  Eksempel:\n Figur 191 – Sporvalg i portalen   "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/c/",
	"title": "C: Utforming av brukervennlige tjenester",
	"tags": [],
	"description": "Dette vedlegget tar for seg hvordan man kan lage brukervennlige tjenester.",
	"content": " Dette vedlegget tar for seg hvordan man kan lage brukervennlige tjenester. Brukervennlige tjenester bidrar til at brukeren får en positiv opplevelse av tjenesten, og sikrer at alle brukere kan benytte tjenesten, samt at tjenesten kan benyttes på ulike skjermlesere.\nTjenesteutviklingsløsningen skal legge til rette for å utvikle tjenester som er konforme med WCAG 2.0-standarden på A og AA-nivå.\nI WCAG 2.0 brukes fire prinsipper for tilgjengelig web-innhold:\n Gjenkjennbart – informasjon og brukergrensesnitt må presenteres på måter brukerne kan oppfatte. Anvendelig – brukergrensesnitt og navigasjon må fungere for alle brukere. Forståelig – tekstinnhold må være lesbart og forståelig. Robust – innhold må kunne presenteres på ulike agenter, inkludert hjelpemiddelteknologi.  Tjenesteutvikler bør etterstrebe å lage innhold som følger disse prinsippene. Det er viktig for tjenesteutvikler å sørge for at språket er godt og forståelig. I tillegg bør eventuelle bilder ha beskrivende tekster.\nSkal en tjenesteeier utvikle stilark for bruk ved portaluavhengighet, må det sørges for at stilarkene er konforme med WCAG-krav. Det er viktig at stilark som lastes opp er gyldig CSS som validerer mot CSS 2.1-standarden. Dette valideres ikke av TUL men kan enkelt gjøres med en ekstern CSS-validator av den som har laget stilarket.\nAlle offentlige nettskjemaer for innsendingstjenester skal følge ELMER 2-retningslinjene. ELMER er vedtatt som retningslinjer for brukergrensesnitt i offentlige skjemaer på Internett og skal sikre bedre skjemaer, bedre datakvalitet og raskere saksbehandling.\nVed å benytte InfoPath og påfølgende parametersetting i TUL kan tjenesteutvikler utvikle ELMER-skjema. Altinn II støtter ELMER 2-retningslinjene, med unntak av:\n Utsatt visning av feil/mangler ved kryssvalidering og obligatoriske felt (alle meldinger knyttet til feltvalidering vises fortløpende i informasjonsområdet og deretter på kontrollside, som ved feil utfylling av enkeltfelt). Separate tabellsider i full skjermbredde i skjema som for øvrig benytter ELMER-navigasjon. Hjelpetekst med lenker som leder til andre steder i skjemaet. Gruppering av sider i navigasjonsmenyen med kapitteloverskrifter.  Det vil være mindre unntak mht. nøyaktig hvordan informasjon blir presentert for sluttbruker. For eksempel sier ELMER at bruker kan fjerne fremhentet hjelpetekst ved å klikke på Hjelp-knappen på nytt. I Altinn vil bruker i stedet kunne fjerne hjelpeteksten ved å klikke på et x-symbol ved teksten i informasjonsområdet.\nSiden ELMER 2-retningslinjene fokuserer på enkeltskjema, mens Altinn II også håndterer skjemasett, er det også gjort enkelte justeringer i sideflyten rundt kontroll og innsending i forhold til retningslinjene.\nFor innsynstjenester er det utviklet tre eksempelskjema som er tenkt benyttet som utgangspunkt for utforming av brukergrensesnitt­et, basert på tre ulike interaksjonsmønstre. Skjemaene er ikke ment å bli brukt som gjenbrukbare eksempler eller maler for utvikling av en innsynstjeneste. De er utviklet med fokus på interaksjon og layout som sluttbruker vil se i SBL. Funksjonaliteten og arkitekturen bak, som er nødvendig for at en innsynstjeneste skal virke, er ikke med i disse eksemplene.\nSkjemaene er tilgjengeliggjort i dokumentbiblioteket på startsiden. De er kalt Lookup single view, Lookup left menu og Lookup accordion for å gjenspeile layouten på skjemaene.\nLookup single view består av kun et view (en side), og har et område for header/tittel på toppen, et område for input av data (dette kan sløyfes) og et område for selve resultate av innsynstjenesten (output).\n Figur 192 – Lookup single view   Lookup left menu består av flere views(sider) og en venstremeny der brukeren kan navigere mellom de ulike sidene. Dette eksempelskjemaet har også et et område for header/tittel på toppen. Området for selve resultatet av innsynstjenesten (output) er i midten av siden. Hva som vises her avhenger av hvilken side som er valgt i venstremenyen.\n Figur 193 – Lookup left menu   Lookup accordion består av kun et view (en side), og har et område for header/tittel på toppen. Under header-området er området for selve resultatet av innsynstjenesten (output), og det er bygd opp med en rekke områder som kan ekspanderes og trekkes sammen ved å klikke på pluss- og miustegn.\n Figur 194 – Lookup accordion   Retningslinjer for utforming av innsendingstjenester TUL støtter ELMER for innsendingstjenester ved at tjenesteutvikler kan angi om skjemaet skal presenteres i sluttbrukerløsningen i henhold til ELMER-retningslinjene. I følge ELMER skal skjemasiden være delt i tre områder ved siden av hverandre. Alle ordinære sider i skjemaet består av et utfyllingsområde for selve skjemaet med et navigasjonsområde til venstre og et område for selvvalgt tilleggsinformasjon til høyre. I tillegg skal det være en knapperad med navigasjonsknapper under skjemaet.\nSelve skjemaet bygges i InfoPath og lastes opp på en tjenesteutgaves arbeidsflate i TUL. I skjemadelen presenteres svarfelter som skal fylles ut av sluttbrukeren sammen med ledetekster og eventuelle hjelpeikoner.\nNavigasjonsområdet vil ved bruk av ELMER bli plassert til venstre for selve utfyllingsområdet. Navigasjonsområdet er en meny bygget opp av alle sidene i skjemaet. Skjemaet bør gis forståelige sidenavn som beskriver den enkelte sides temaer. Sidenavnet som skal vises i menyteksten kan være et forenklet kortnavn. Kortnavn kan defineres i parameterseksjonen Sideegenskaper i TUL.\nTjenesteutvikler kan også angi om navigasjonen skal være fri eller styrt. Bruk av ELMER med fri navigasjon er satt som default valg i TUL, og anbefales. Kun i spesielle tilfeller kan det være hensiktsmessig å velge styrt navigasjon, som for eksempel hvis det er nødvendig å lede sluttbrukeren gjennom et bestemt resonnement.\nNår skjemaet åpnes første gang, vil området for tilleggsinformasjon presentere en standardisert oppskrift på hvordan skjemaet skal brukes. Området kan også inneholde meldinger fra systemet eller hjelpetekster. Disse dukker opp ved validering av skjema eller når bruker klikker på et hjelpeikon. Hensikten er å kunne gi individuell støtte for utfyllingen uten å forstyrre selve utfyllingsområdet. Hjelpetekstene defineres i parameterseksjonen Hjelpetekster i TUL. Meldinger til sluttbruker angis i InfoPath (se 6.1.3 Valideringer).\nI følge ELMER skal nettskjemaer benytte svaravhengige spørsmål og sporvalg. Svaravhengige spørsmål defineres i InfoPath, mens sporvalg defineres i TUL, under parameterseksjonen Sporvalg.\nELMER anbefaler at kjente opplysninger forhåndsutfylles hvis det vil være til hjelp for sluttbrukeren (utfylleren). Under parameterseksjonen Preutfylling i TUL kan tjenesteutvikler forhåndsutfylle data fra Det sentrale folkeregister, Enhetsregisteret og Register over deltakerlignede selskap.\nI noen skjemaer kan det være nyttig for brukeren å få en oppsummering av tallstørrelser fra utfylte sider. Hvis det finnes et slikt sammendrag, skal det i følge ELMER presenteres alene på siste side i skjema og hete Sammendrag. Når sluttbrukeren er ferdig med å fylle ut et nettskjema, er det dessuten viktig at han får en klar og tydelig tilbakemelding om at skjemaet er sendt inn. Etter å ha fylt ut et skjema vil sluttbruker bli sendt til en egen kvitteringsside med kvitteringstekst, en oversikt over innsendte skjema og et sammendrag av det enkelte skjema, samt betalingsinformasjon der dette er aktuelt. Hvilke felter som skal med i sammendraget defineres i InfoPath, men i parameterseksjonen Sideegenskaper i TUL må det defineres hvilkne sider i InfoPath-dokumentet som skal brukes til sammendraget.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/profil/",
	"title": "Profil",
	"tags": [],
	"description": "Altinn API tilbyr tilgang til profil-data.",
	"content": " Lese egne profildata (privatperson) Man kan hente ut informasjon fra egen brukerprofil i Altinn, som gir oversikt over hvem som er logget inn (navn, adresse, personnr, etc). Det returneres også en lenke til profilsiden i altinn.no (lenke av type portalview).\nGET operasjon for å lese min Profil:\nGET https://www.altinn.no/api/my/profile HTTP/1.1 ApiKey: myKey Accept: application/hal+json  Respons:\n{ \u0026quot;Name\u0026quot;: \u0026quot;HÅKON TRANA\u0026quot;, \u0026quot;AddressLine1\u0026quot;: \u0026quot;\u0026quot;, \u0026quot;AddressLine2\u0026quot;: \u0026quot;Borgermester Platous gate 7\u0026quot;, \u0026quot;AddressLine3\u0026quot;: \u0026quot;5008 BERGEN\u0026quot;, \u0026quot;UserName\u0026quot;: \u0026quot;haakon@trana.net\u0026quot;, \u0026quot;MobileNumber\u0026quot;: \u0026quot;99988888\u0026quot;, \u0026quot;PreferredLanguage\u0026quot;: \u0026quot;NorwegianNO\u0026quot;, \u0026quot;ShowClientUnits\u0026quot;: true, \u0026quot;PrivateConsent\u0026quot;: true, \u0026quot;ProfessionalConsent\u0026quot;: true, \u0026quot;ContactInformation\u0026quot;: { \u0026quot;Email\u0026quot;: \u0026quot;haakon@trana.net\u0026quot;, \u0026quot;Mobile\u0026quot;: \u0026quot;99988888\u0026quot;, \u0026quot;RequestsEmailReceipts\u0026quot;: false }, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/profile\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages/Profile/MyUserSettings.aspx\u0026quot; } } }  Les kontaktinformasjon for virksomheter Det er mulig å hente ut informasjon fra på virksomheter som brukeren har rettigheter til i Altinn. Organisasjonsnummeret til virksomheten benyttes til adressering.\nGET operasjon for å lese kontaktinformasjon for en virksomhet:\nGET https://www.altinn.no/api/{orgno}/profile HTTP/1.1 ApiKey: myKey Accept: application/hal+json  Respons:\n{ \u0026quot;Entity\u0026quot;: \u0026quot;Altinn testvirksomhet\u0026quot;, \u0026quot;Email\u0026quot;: \u0026quot;test@test.com\u0026quot;, \u0026quot;MobileNumber\u0026quot;: 99988888, \u0026quot;Address\u0026quot;: \u0026quot;Storgata 1\u0026quot;, \u0026quot;PostCode\u0026quot;:\u0026quot;8900\u0026quot;, \u0026quot;City\u0026quot;:\u0026quot;Brønnøysund\u0026quot;, \u0026quot;BusinessAddress\u0026quot;: \u0026quot;Kirkeveien 2\u0026quot;, \u0026quot;BusinessPostCode\u0026quot;:\u0026quot;8800\u0026quot;, \u0026quot;BusinessCity\u0026quot;:\u0026quot;Sandnessjøen\u0026quot;, \u0026quot;LastModifiedBy\u0026quot;: \u0026quot;LANDE JAN ÅGE\u0026quot;, \u0026quot;LastModifiedDate\u0026quot;: \u0026quot;2014-06-14T17:17:11.223\u0026quot;, \u0026quot;IsSelectedForNotification\u0026quot;: false, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/428743989/profile\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages/Profile/UnitProfile.aspx?o=428743989\u0026quot; }, \u0026quot;contactinformation\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/428743989/profile/contactinformation\u0026quot; } } }  Email og MobileNumber og adresse informasjon er registrert på virksomheten i Enhetsregisteret.\nDersom brukere følger lenken til contactinformation vil det bli returnert en liste med kontaktinformasjon registert av brukerne i Altinn. Kontaktinformasjonen blir benyttet til varsling (epost og sms) på vegne av tjenesteeiere i Altinn.\nFølgende er en GET operasjon for å lese kontaktinformasjon for en virksomhet:\nGET https://www.altinn.no/api/{orgno}/profile/contactinformation HTTP/1.1 ApiKey: myKey Accept: application/json  Respons:\n[ { \u0026quot;Id\u0026quot;: 2686, \u0026quot;Name\u0026quot;: \u0026quot;+4799000000\u0026quot;, \u0026quot;Email\u0026quot;: \u0026quot;\u0026quot;, \u0026quot;MobileNumber\u0026quot;: \u0026quot;+4799000000\u0026quot;, \u0026quot;IsSelectedForNotification\u0026quot;: true }, { \u0026quot;Id\u0026quot;: 7960, \u0026quot;Name\u0026quot;: \u0026quot;alfa@beta.no\u0026quot;, \u0026quot;Email\u0026quot;: \u0026quot;alfa@beta.no\u0026quot;, \u0026quot;MobileNumber\u0026quot;: \u0026quot;\u0026quot;, \u0026quot;IsSelectedForNotification\u0026quot;: true } ]  Man kan slette enkelte innlegg av kontakinformasjon ved å sende en DELETE-operasjon på innleggets Id:\nDELETE https://www.altinn.no/api/{orgno}/profile/contactinformation/{Id} HTTP/1.1 ApiKey: myKey  Ved vellykket sletting vil man få tilbake en tom respons av type \u0026ldquo;204 Contact Information Deleted\u0026rdquo;.\nFor å legge inn ny kontaktinformasjon kan man sende en POST-operasjon med enten Email eller MobileNumber fylt ut. Merk at de andre feltene ikke skal ha noen verdier!\nPOST https://www.altinn.no/api/{orgno}/profile/contactinformation HTTP/1.1 Content-Type: application/json Accept: application/json ApiKey: myKey { \u0026quot;Email\u0026quot;: \u0026quot;alfa@beta.no\u0026quot; }  POST https://www.altinn.no/api/{orgno}/profile/contactinformation HTTP/1.1 Content-Type: application/json Accept: application/json ApiKey: myKey { \u0026quot;MobileNumber\u0026quot;: \u0026quot;+4799000000\u0026quot; }  Ved vellykket innlegg vil man få tilbake en tom respons av type \u0026ldquo;204 Contact Information Created\u0026rdquo;.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/d/",
	"title": "D: InfoPath kodestandard",
	"tags": [],
	"description": "Dette vedlegget inneholder en oversikt over kodestandard for InfoPath.",
	"content": "Dette vedlegget inneholder en oversikt over kodestandard for InfoPath. Dette vedlegget bør oppdateres etter hvert som nye skjema blir utviklet i TUL og man kommer fram til standarder på tvers av tjenesteeierne. Det er altså opp til tjenesteeiere å oppdatere dette vedlegget.\nSom et utgangspunkt anbefales Brad Adams sin oppsummering http://blogs.msdn.com/brada/articles/361363.aspx.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/e/",
	"title": "E: InfoPath navnestandard",
	"tags": [],
	"description": "Dette vedlegget inneholder en oversikt over navnestandard for felter, grupper, skript og skjema i InfoPath.",
	"content": "Dette vedlegget inneholder en oversikt over navnestandard for felter, grupper, skript og skjema i InfoPath. Som for kodestandarden er dette vedlegget \u0026ldquo;levende\u0026rdquo; og skal vedlikeholdes av tjenesteeierene. Det er ingen forutsetning av alle tjenesteeiere har lik navne standard, men en felles navnestandard vil lette arbeid og videreutvikling på tvers av personer.\nDet anbefales at felter som ligger i altinn-namespace prefikses med Altinn_Field_. Eks. altinn:Altinn_Field_123.\nMerk at det som står etter kolon-tegnet er valgfritt, og alle felter som benytter altinn-navnerommet, fjernes før oversendelse til etat.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/innledning/",
	"title": "Innledning",
	"tags": [],
	"description": "Oversikt og struktur, forutsetninger, beskrivelse av aktører samt overordnet prosess.",
	"content": " Dette er en brukerveiledning for de som ønsker å utvikle tjenester i Altinns Tjenesteutviklingsløsning (TUL). Målgruppen for dokumentet er fagpersoner, kommunikasjons­medarbeidere og IKT-medarbeidere hos tjenesteeier som benytter TULs verktøy i tjenesteutviklingsprosessen.\nBrukerveiledningen dekker også løsnings­administrators arbeidsoppgaver blant annet knyttet til å tildele/kontrollere brukertilgang i TUL på vegne av tjenesteeier. Informasjon rettet mot den mer tekniske målgruppen som er fortrolig med Visual Studio som arbeidsverktøy, er plassert i vedlegg.\nFølgende tjenestetyper er beskrevet i denne brukerveiledningen; innsending, melding, innsyn, samhandling, lenke og formidling.\nDenne guiden har som målsetning å gi tilstrekkelig beskrivelse av alle arbeidsoppgaver knyttet til tjenesteutvikling i Altinn. Hvis du oppdager mangler eller har innspill om forbedringer kan du enten opprette en pull request med endringer eller opprette en issue på GitHub.\nViktige forkortelser:\n TUL – Tjenesteutviklingsløsningen SBL – Sluttbrukerløsningen SBS – Sluttbrukersystem XSN – Filtypen til InfoPath-skjema  Utover disse finnes flere ord som er verdt å merke seg i begrepslisten.\nDenne guiden tar for seg den delen av tjenesteutviklingsprosessen som foregår i Tjenesteutviklingsløsningen, heretter kalt TUL. I forkant av dette må tjenesteutvikler gjennomføre en jobb knyttet til spesifisering av krav og design for tjenesten. Dette bør resultere i en skisse som beskriver hvordan tjenesten skal se ut i Altinn og sjekkliste for ønskede egenskaper som tjenesten skal ha. Likedan så finnes rutiner for varsling og bestillinger knyttet til testing og produksjonssetting som tjenesteutvikler må forholde seg til. Slik informasjon vil til en hver tid finnes på https://altinn.brreg.no.\nProduktet av TUL kan sies å være en utgave som migreres til Sluttbrukerløsningen, heretter kalt SBL.\nBestanddeler TUL består av en samling flere utviklingsverktøy hvor ulike deler benyttes til å utvikle ulik funksjonalitet i tjenesten i Altinn. Av disse så er følgende relevant for tjenesteutvikler i TUL:\n SharePoint InfoPath (utvikling av skjema) Microsoft Visual Studio Tools for Applications (utvikling av avanserte kontroller og kalkyler) Active Directory Users and Computers Andre hjelpeverktøy som Windows utforsker og andre standardprodukter Visual Studio og utviklingsimage (utvikling av mappere for innsynstjenester)  Forutsetninger Denne brukerveiledningen forutsetter grunnleggende kunnskap om standardproduktene SharePoint og InfoPath, og er ikke en komplett brukermanual for disse verktøyene. Dette gjelder også områdene der Visual Studio må benyttes som verktøy. Det forutsettes også at tjenesteutvikler i TUL har gjennomført tilstrekkelig opplæring/kursing i regi av Altinn Sentralforvaltning før tilgang til TUL gis.\nOversikt og struktur TUL er som nevnt en helhetlig løsning for utvikling av tjenester i Altinn. Her gir vi en enkel beskrivelse av struktur og prinsipper.\nStruktur TUL er designet slik at man har et hierarki mellom tjenesteeier, tjeneste og utgave, som vist i figur 1 under.\nTUL kan brukes av et udefinert antall tjenesteeiere som hver har sin arbeidsflate. En arbeidsflate er en side som viser og gir tilgang til all relevant informasjon for gitt nivå. Hver tjenesteeier kan ha en eller flere tjenester og hver tjeneste er representert ved sin egen arbeidsflate. En tjeneste kan igjen ha en eller flere utgaver og hver utgave er representert ved sin egen arbeidsflate.\n Figur 1 – Struktur i TUL   I figuren over representerer hver boks en arbeidsflate. Det er verdt å merke seg at en tjenesteutgave kan kun tilhøre en tjeneste, og en tjeneste kan kun tilhøre en tjenesteeier.\n Eksempel på tjenesteeier: Skatteetaten / SKD Eksempel på tjeneste: Alminnelig omsetningsoppgave Eksempel på utgave: 2009  I eksempelet over vil man i år 2010 kun opprette en ny utgave under eksisterende tjeneste. På denne måten får man det man ønsker.\nTjenestetyper En tjeneste i Altinn (som også kalles et element, en forekomst eller en instans) er alltid knyttet til én aktør (avgiver). Den oppstår (opprettes eller instansieres) på et bestemt tidspunkt og kan i de aller fleste tilfelle arkiveres i aktørens arkiv.\nI Altinn har vi disse tjenestetypene:\n Innsendingstjeneste: Et skjema eller skjemasett som sendes fra sluttbruker på vegne av en aktør, til en tjenesteeier. Innsendingen kan opprettes av sluttbruker eller tjenesteeier, og det er mulig med forhåndsutfylling med sluttbrukerens data (prefill). Skjemasettet kan følge en prosessflyt som omfatter utfylling, et antall signeringer og innsending.\n Innsynstjeneste: Et skjema som kan åpnes av sluttbruker, og som enten automatisk eller på brukers initiativ gjør oppslag i eksterne systemer og viser informasjon til sluttbruker. Det er mulig med lagring og signering av framhentet informasjon i aktørens arkiv.\n Meldingstjeneste: Informasjon som sendes fra tjenesteeier til en aktør og presenteres i form av HTML, binære vedlegg og/eller skjema. Det er mulig å sende ut varsel om mottatt melding og be om bekreftelse på mottak. Meldinger kan arkiveres i aktørens arkiv.\n Samhandlingstjeneste: En gruppering av underliggende tjenester som inngår i en sammenheng, supplert med støtteinformasjon og statusmerknader som kommuniseres til sluttbruker. Underliggende tjenester kan eies av forskjellige tjenesteeiere. Også sluttbruker selv kan definere grupperinger av tjenester. Samhandlingstjenester følger samme prinsipper for øvrige tjenestetyper for opprettelse og arkivering.\n Lenketjeneste: En lenketjeneste er en lenke fra Altinn til en tjeneste som ligger hos tjenesteeieren. For å få tilgang til tjenesten må sluttbruker være logget inn hos ID-Porten gjennom Altinn. Altinn har lenken til tjenesteeierens tjeneste i sin tjenestekatalog.\n Formidlingstjeneste: Dette er en tjeneste som brukes til å overføre filer fra en avsender til en eller flere mottakere. Tjenesten kan bare brukes via web service eller SFTP.\n  Aktører Det er ønskelig at man innenfor den enkelte tjenesteeier skal kunne utføre betydelige deler av arbeidet knyttet til å etablere og vedlikeholde tjenester i Altinn. Dog er det samtidig enkelte kompliserte oppgaver som krever til dels dyp teknisk kompetanse. De involverte brukerne kan derfor grupperes basert på kompetanse og arbeidsfordeling i tjenesteutviklingen. Dette er ikke en kategorisering uten nyanser, da en og samme person vil kunne falle inn i flere grupper.\nTabellen under viser de ulike brukerne og deres typiske oppgaver.\n    Bruker og egenskaper Typiske oppgaver        Fagperson som forstår kommunikasjonsbehov knyttet til aktuelle offentlig tjenester basert på faglig kompetanse.\nEr opptatt av at tjenester skal være effektive, feilfrie og av høy brukskvalitet; er nøyaktig og ønsker å levere god kvalitet.\nHar et fagområde utenom IKT; bruker IKT-verktøy, men er ingen systemutvikler.\nHar fått grunnopplæring i TUL og evt. InfoPath.\nArbeider med tjenestedefinisjon og vedlikehold generelt, eller er spesialisert inn mot bestemte oppgaver.\n   Opprette tjeneste/tjeneste­utgave Utarbeide design Definere tjeneste inkludert evt. prosessflyt og skjemasett Utvikle tjenesteinnhold inkludert layout, tekster, kalkyler og regler Enhetsteste tjeneste Starte migrering til portalmiljø Systemteste/akseptanseteste tjeneste Publisere informasjon om tjeneste Vedlikeholde og migrere kodeliste        Oversetter som har kompetanse på de aktuelle språkene.\nEr grundig og ønsker å bidra til enkel og forståelig kommunikasjon.\nHar fått grunnopplæring i TUL vinklet mot språkmodulen.\n   Oversette tjeneste Oversette rolle        IKT-person som har erfaring med systemutvikling.\nBehersker InfoPath (inkludert Xpath og C# i Visual Studio for Application) og SharePoint.\nHar fått grunnopplæring i TUL.\n   Utarbeide prosessflytmal Utarbeide komplekse regler/kontroller        Teknisk utvikler med god forståelse av Altinn-løsningen.\nHar spesialisert kompetanse knyttet til verktøyene i Altinn, for eksempel Workflow Foundation eller BizTalk.\nEnkelte har tilgang til å iverksette endringer i produksjonsmiljøet.\nFor øvrig som IKT.\n   Utvikle ny kjøretids­komponent, for eksempel prosessflyt­komponent og tilstandsmodell Produksjonssette komponent Produksjonssette tjeneste Opprette arbeidsområde og database for etat/ny tjenesteeier Opprette nytt integrasjonspunkt mot etat      Løsnings­admin\n  Løsningsadministrator (tjenesteeier­administrator) med god forståelse av Altinn-løsningen, spesielt TUL.\nGir støtte til tjenesteeiere i tjenesteutviklings­arbeidet. Kan være administrator på vegne av en enkelt tjenesteeier eller for hele løsningen.\nBruker IKT-verktøy, men er ingen systemutvikler.\nHar fått opplæring i Active Directory og i SharePoint, vinklet mot bruker­administrasjon og/eller tilpasning av samhandlings­områder i SharePoint.\n   Administrere roller og rettigheter for TUL-brukere Laste opp nyttig og nødvendig informasjon for de som skal jobbe i TUL, for eksempel dokumentmaler, dokumenter og kunngjøringer      Prosess  Opprette overordnet design for tjeneste: Kan gjøres i Tjenesteutviklingsløsningen, men også i egne dokument i forkant av opprettelse av tjeneste. Opprette detaljert design for tjeneste: Opprettelse av tjeneste. Man får da tilgang til arbeidsflaten, dokumentbibliotek, tjenestedefinering og tjenesteutvikling (skjemautvikling). Definere tjeneste: Konfigurering av tjeneste, ved parametersetting. Utvikle tjeneste: Utvikling av skjema/dialogsider, samt:  Konfigurering av innhold Oversette tjeneste. Utvikle og migrere kodeliste. Utvikle og migrere prosessflytmal og komponenter.  Enhetstest tjeneste: Enhetstesting av skjema og kodegjennomgang. Utføres i forkant av systemtest, men kan også utføres iterativt i utviklingsprosessen. Migrere tjeneste til portalmiljø. Systemteste tjeneste: Test av tjeneste i Sluttbrukerløsningen og sluttbrukersystemer. Akseptanseteste tjeneste: Test av tjeneste i Sluttbrukerløsningen og sluttbrukersystemer. Produksjonssette tjeneste: Migrering til Sluttbrukerløsningen. Publisering av tjeneste: Publisering på InfoPortalen   Figur 2 - Prosess for tjenesteutvikling   "
},
{
	"uri": "https://altinn.github.io/docs/guides/kom-i-gang-med-utvikling/",
	"title": "Kom i gang med utvikling",
	"tags": [],
	"description": "Hvordan komme i gang med utvkling i Altinn",
	"content": "Som utvikler trenger du tilgang til våre løsninger. Hvilke tilganger som er nødvendige avhenger av hva du skal utvikle. Du vil også ha behov for å gjøre noen bestillinger til oss, før eller underveis i utviklingsprosessen, for å kunne sende/motta data til/fra ditt system til Altinn.\nBestillinger til Altinn gjøres i vår Selvbetjeningsportal. I portalen velger du hva du skal bestille og legger inn de opplysningene det spørres om. Har du ikke tilgang til portalen kan du be om dette ved å sende en henvendelse til tjenesteeier@altinn.no. Er du innleid konsulent må tilganger bestilles av den etaten/kommunen du jobber for.\nFor utvikling av tjenester trenger du tilgang til:\n Altinn tjenesteutviklingsløsning (TUL) For å utvikle tjenester trenger du skrivetilgang til tjenesteeier sitt område i TUL. Det finnes to ulike nivå for brukertilgang:\n Ordinær tjenesteutvikling Gir tilgang til å utvikle meldingstjenester og innsendingstjenester (skjema) uten avansert funksjonalitet som ikke støttes av Infopath. Gir også tilgang til å sette opp en lenketjeneste (Styring av tilgang). For å få slik tilgang kreves deltakelse på tjenesteutviklingskurs eller tilsvarende opplæring av andre ressurser som har deltatt på kurs Avansert tjenesteutvikling Gir ovennevnte tilganger samt tilgang til å utvikle innsynstjenester (Hente data fra register) og innsendingstjenester (skjema) med oppslag til ekstern web service. Du får tilgang til Team Foundation Server for versjonshåndtering og til utviklingsserver i TUL. Det er her nødvendig med egen lisens til Visual Studio  SERES domeneklient Skal du utvikle en innsynstjeneste eller en innsendingstjeneste/skjema er det også nødvendig med tilgang til tjenesteeier sitt domene i SERES domeneklient. I domeneklienten lager du en meldingsmodell og generer en XSD som benyttes som datamodell i ditt skjema/din innsynstjeneste.\n  For at dine systemer skal kunne sende eller motta data til/fra Altinn vil noen av bestillingene nedenfor være relevante for deg - avhengig av hvordan ditt system skal kommunisere med oss:\n Web servicer For å kunne sende/motta data til/fra Altinn må tjenesteeier registrere sitt system og få passord som skal benyttes i kall mot Altinn. Alle tjenesteeiere har ved opprettelse i Altinn fått tildelt brukernavn og passord, men det er mulig å bestille flere tilganger. Tilgangen er IP-styrt.\n FTP/SFTP grensesnitt For oversendelse av data til/fra Altinn via FTP/SFTP bestilles det et grensesnitt for dette.\n Åpning i brannmur Åpning i brannmurer er nødvendig for grensesnitt med Altinn hvor tjenesteeier skal legge/hente filer på Altinn sin filserver (være aktiv part). Tjenester som gjør oppslag mot eksterne tjenester (Web Services) vil også trenge åpning i brannmurer hos Altinn.\n API-nøkkel Altinns REST-API for tjenesteeiere er bare tilgjengelig med bruk av virksomhetssertifikat og krever at man har en API-nøkkel.\n Testbrukere I Altinn sine testmiljø benyttes fiktive testpersoner og –organisasjoner. Mange av våre eksisterende tjenesteeiere har fått tildelt et sett med testbrukere. Har du ikke tilgang til testbrukere må du bestille dette.\n  Når tjenester og grensesnitt mellom deg og Altinn er ferdig testet må du bestille produksjonssetting:\n Produksjonssetting Bestillinger du har gjort for integrasjon mot Altinn (webservice, åpning i brannmur, grensesnitt over FTP/SFTP osv.) må også bestilles for kommunikasjon mellom ditt og vårt produksjonsmiljø. Tjenester, og eventuelt tilhørende kodelister, må produksjonssettes. Du gjør tjenesten klar for produksjon i tjenesteutviklingsløsningen (TUL). I tillegg må det bestilles en produksjonssetting da det er vår driftsleverandør som legger ut tjenestene i Altinn sitt produksjonsmiljø. For en helt ny tjeneste skal det lages en informasjonsside om tjenesten under \u0026ldquo;alle skjema\u0026rdquo; på altinn.no. Du finner også en bestilling for dette.  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/f/",
	"title": "F: Bruk av Visual Studio",
	"tags": [],
	"description": "Hjelp til å komme i gange med utvikling av mappere i Visual Studio.",
	"content": " For utvikling av Web Service-mappere til innsynstjenester, så er dette kode som tjenesteeier kan utvikle på egen hånd og som deretter kvalitetsikres av ASF, eventuelt også applikasjonsleverandør før driftsleverandør produksjonssetter dette.\nForutsetninger Visual Studio (2015 anbefalt) er installert og C# Development Setting valgt for installasjonen.\nKoble opp mot tjenesteeiers TFS prosjekt Velg Team -\u0026gt; Manage connections…\n Koble til Team Foundation Server   Velg Team -\u0026gt; Manage connections…Connect to team project\n Koble til Team Foundation Server   Velg Servers…\n Koble til Team Project   Velg Add…\n Legg til TFS Server   Kryss av ServDev (inneholder repository for Mapperne )\nTrykk Connect.\n Velg Team Projects   Velg Clone this repository for å hente kildekoden.\n Team Explorer   Angi plassering av lokal arbeidskatalog, og velg Clone\n Opprett workspace-mapping   Åpne\n$/\u0026lt;tjenesteeierforkortelse\u0026gt;/Mappers/\u0026lt;tjenesteeierforkortelse\u0026gt;.sln  (for eksempel $/TTD/Mappers/TTD.sln) for å utvikle mapper.\nÅpne\n$/\u0026lt;tjenesteeierforkortelse\u0026gt;/Conditions/Altinn.SBL.Conditions.sln  (for eksempel $/TTD/Conditions/Altinn.SBL.Conditions.sln) for å utvikle conditions.\n\u0026lt;tjesteeierforkortelse\u0026gt; kan i sin tur være delt opp i \u0026lt;etat\u0026gt;\u0026lt;avdeling\u0026gt;\u0026lt;prosjekt\u0026gt;.\nAlt avhengig av hvordan tjenesteeier er organisert og hvor mange mappere de har.\nFor å referere til Altinn-tjenester må man linke inn proxy dll-er. Disse ligger ferdigkompilert på utviklingsmiljøet, i katalogen c:\\dev\\lib\\\u0026lt;versjon\u0026gt;, for eksempel \u0026ldquo;c:\\dev\\lib\\2.0.5\u0026rdquo;.\nViktig:\nSelv om det er teknisk mulig å benytte vilkårlige proxies og rammeverkmetoder fra dll-er under \u0026ldquo;c:\\dev\\lib\u0026rdquo;, anbefales det å begrense seg til kun å benytte metoder i baseklassene (Altinn.SBL.ServiceEngine.Case.AltinnConditionsBase for conditions og Altinn.SBL.ServiceEngine.Lookup.Mappers.Common.Services.AltinnMapperBase for mappers), da disse er de eneste som garantert vil være bakoverkompatible i fremtidige versjoner.\nForvaltning av kildekode i TFS I TFS vil tjenesteeiers utviklere ha skrivetilgang, og kunne forvalte kildekoden etter eget ønske. Leverandøren besørger drift av TFS (inkludert backup), men vil ikke aktivt forvalte tjenesteeiers kildekode uten at det foreligger en eksplisitt bestilling på dette.\nHvis det ikke er laget mapper eller conditions prosjekt for en tjenesteeier som ønsker dette, så skal dette skallet settes opp av Leverandør. Bruk av TFS og Visual Studio for å sjekke ut/inn er utenfor scope for denne brukerdokumentasjonen.\nProsjektstruktur for mappere  Prosjektstruktur for mappers   Over vises grunnleggende innhold i solution for en mapper åpnet i Visual Studio, og i listen under er forklaring.\n Config\n env_variables.csv\nInneholder substitueringsvariabler som kan ha forskjellige verdier avhengig av til hvilket miljø som mapperen deployes til. Denne definerer variabelnavn og tilhørende variabler ved hjelp av en kommaseparert liste, hvor hver av verdiene tilhører et spesifisert miljø (f.eks. AT/TT/Prod). internal/external.web.config\nKan inneholde diverse konfigurasjonsnøkler og WCF-konfigurasjon (inkludert endepunkt mot tjenesteeiers web services). Setup-prosjektene omdøper internal/external.web.config til web.config for hhv interne og eksterne tjenester.  Services\n Service References\nInneholder genererte proxier til tjenesteeiers Web Services. Proxiene anvendes i Mapper.cs IMapper.cs er Web Services kontrakten for mapper. Mapper.cs er implementasjonen av service kontrakten IMapper.cs. Denne filen har \u0026ldquo;hovedfokus\u0026rdquo; når man utvikler en mapper. Mapper.svc er selve endepunktet, filen som man peker på fra InfoPath. Denne navngis av tjenesteeier. Transfer.cs innholder datakontrakter brukt av mapper. Utility.cs inneholder klasser for logging, objekt konvertering og konfigurasjons uthenting.  Tests\n Services References inneholder proxier til mapper services. Proxiene anvendes i MapperUnitTest.cs. MapperUnitTest.cs inneholder alle enhetstestene av mapper.  Setup-prosjekter\nDisse benyttes til å generere en msi-fil som brukes for å installere mapperen i et miljø. Her adderes alt innhold som skal inngå i installasjonsfil. Den eksterne setup-en er kun nødvendig hvis mapperen skal eksponeres eksternt (mot sluttbrukersystemer).\n  Hensiktsmessig Web Service API for Mappers Da tjenesteutvikler i InfoPath kobler seg mot Web Service mapper er det hensiktsmessig at både input- og output-verdier fra denne Web Servicen er atomiske elemeter som en i InfoPath kan koble direkte mot feltene i InfoPath. Dette bør utvikler ta hensyn til.\nLagre signert kopi TUL har en parameter som sier om det er mulig å lagre en signert kopi av innsynstjenesten. For å minimere vedlikehold kan utvikler velge å gjøre et oppslag mot Service Metadata slik at en evt. endring på denne parameteren dynamisk tas hensyn til av mapperen (IsSigningAllowedForLookupService).\nHensynta sluttbrukersystemer Kun innsynstjenester som kan returnere en ”komplett” xml vil det kunne være hensiktsmessig å tilgjengeliggjøre for sluttbrukersystem. For sluttbrukersystemer må det lages en separat WebService (facade) som har postfix ”External” som er den som skal tilgjengeliggjøres for eksterne systemer. Denne vil så kalle mapperen for å hente data. Dette er helt identisk med hvordan andre interne tjenester i Altinn II er blitt gjort tilgjengelig eksternt.\nKvittering på benyttet innsyn TUL har en parameter som angir om det skal sendes bekreftelse på bruk av tjenesten til tjenesteeier. For å minimere vedlikehold kan utvikler velge å gjøre et oppslag mot Service Metadata slik at en evt. endring på denne parameteren dynamisk tas hensyn til av proxy-tjenesten.\nDeploy av mappers og conditions Mappere for innsynstjenester og conditions for samhandlingstjenester utvikles i Visual Studio og kompileres og pakkes til msi-filer (ved hjelp av et setup-prosjekt i Visual Studio). Det anbefales å pakke generert msi og exe fil i et rar-arkiv før oversendelse til driftsleverandør. Msi-filene kan deretter installeres i de ulike SBL-miljøene av Driftsleverandøren.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/g/",
	"title": "G: Web Service-oppslag fra InfoPath",
	"tags": [],
	"description": "Dette vedlegget inneholder en beskrivelse av hvordan man kan gjøre web service-oppslag fra et InfoPath-skjema.",
	"content": " Dette vedlegget inneholder en beskrivelse av hvordan man kan gjøre web service-oppslag fra et InfoPath-skjema. Web service-oppslag vil være i kjernen i hvordan registeroppslag fungerer. Dette vil fungere på den måten at skjemaet vil kontakte registeret med predefinerte parametere og deretter få et svar som man kan behandle i skjema. Denne veiledningen vil derfor beskrive en generell fremgangsmåte for hvordan gjøre et web service-oppslag i InfoPath-skjema. Eksempeldataene benyttet i fremgangsmåten tilhører Hent arkivreferanse. P.t. er det ikke andre skjemaspesifikke tjenester tilgjengelig.\nHvordan kalle en WebService fra et InfoPath skjema Legg til en datatilkobling ved å tab’en som heter Data i InfoPath. Velg deretter Datatilkoblinger og deretter Legg til…\nMan må så velge å opprette en ny tilkobling for å motta data, og dette via en webtjeneste.\nAdressen som angis for webtjenesten vil kunne variere iht hvilket oppslag som skal gjøres, for eksempel vil adressen for å hente arkivreferanse være\nhttps://infopathservices.altinn.no:87/ServiceEngine/ReporteeElementListInfoPath.svc?WSDL\n Figur 204 – Hent arkivreferanse   Når denne adressen er angitt, vil InfoPath forsøke å kontakte tjensten for å hente en liste over operasjoner. Antall operasjoner og navn vil variere med tjenesten. Velg deretter operasjonen du ønsker å benytte.\nHusk å fjern avkryssning for om data skal hentes når skjema åpnes hvis data ikke skal hentes før man trykker på en knapp i skjemaet.\nAkkurat samme måte benyttes for å koble innsynstjenester mot operasjoner i mappere.\nAdressen for å koble seg mot en gitt mapper vil være:\nhttp://mapperservices.altinn.no:87/ServiceEngine/Mappers/\u0026lt;tjenesteeierkode\u0026gt;/X.svc?WSDL  Der \u0026lt;tjenesteeierkode\u0026gt; er tjenesteeierkode (SKD/NAV/etc) og X styres av tjenesteeier selv.\nNå er datastrukturen fra oppslaget tilgjengelig som en sekundær datakilde og kan derfor benyttes i skjema. Det er verdt å merke seg at for de fleste spesifikke Altinn registeroppslagene vil man måtte autentisere seg, og at enhetstest i InfoPath derfor vil være vanskelig. Se neste kapittel for kode som må legges inn for spesifikke oppslag.\nResultatet fra oppslaget kan vises i skjemaet på mange måter. Et eksempel er en repeterende tabell som populeres på bakgrunn av klikk på knappen Hent arkivreferanser.\n Figur 205 – Registeroppslag inn i repeterende tabell   For å angi registeroppslaget skal utføres eller den eksterne tjensten skal kalles ved trykk på knappen, må det lages en regel på knappen som skal brukes til å kalle Web servicen. Dette gjøres ved å høyreklikke på knappen og velge Egenskaper for knapp\u0026hellip; og deretter klikke på Regler\u0026hellip; og velge Legg til\u0026hellip; Man må nå angi et navn på regelen. Dette navnet kan være selvvalgt. Velg Legg til handling\u0026hellip; og velg Spørring ved hjelp av datatilkobling i nedtrekkslisten for Handling. Nå må den sekundære tilkoblingen velges.\nNå vil oppslaget utføres ved klikk på knappen.\nSom nevnt tidligere vil enkelte mapper/registeroppslag kreve ekstra informasjon fra skjemaet for å kunne autentisere seg, samt vite hvilke brukerspesifikke data som skal hentes ut.\nNeste kapittel vil vise dette for Altinn spesifikke oppslag.\nSjekkpunkter for InfoPath skjemaer for innsynstjenester Forutsetninger for data hentes når skjema åpnes Verdiene for alle sekundære datakilder som benyttes for Web/Utskrift/Signatur visninger, må kopieres til deres tilsvarende motparter i skjemaets hoveddatakilden. Dette må og gjøres for egendefinerte felter som benyttes som presentasjonsfelt. Alternativt kan verdiene fra felter i sekundære data kilder overføres til felter i skjemaet som allerede ligger i hoveddatakilden.\nForutsetninger for at data hentes på forespørsel ved bruk av knapper Disse må og følge forutsetnignene beskrevet ovenfor. Det et ønskelig at data hentes når knappen blir trykket på. Knappene som benyttes ha følgende instillinger:\nHandling settes til “Regler og egendefinert kode”:\n Figur 206 - Regler og egendefinert kode   Etter at “Handling” er satt, må du skrive inn koden som er beskrevet nedenfor:\n Figur 207 - Rediger skjemakode   Vi må legge til en linje i koden for at knappen skal kommunisere med hovedsiden. Følgende kode må da legges til i formcode.cs:\n Figur 208 - FormCode   C# kode for registeroppslag Legg inn C# kode i Loading eventen til skjema. Koden skal hente ut portal parametre som skal benyttes i kallet til web servicen. Dette er data som hentes ut fra FormState under skjemautfylling i portalen.\nEksemplet under viser hvordan dette skal kodes, og legg merke til at det enkelte skjemaspesifikke verdier som må settes, bl.a. ekstern tjenestekode og ekstern utgavekode.\npublic void FormEvents_Loading(object sender, LoadingEventArgs e) { string opensso = FormState[\u0026quot;OpenSSOID\u0026quot;] as string; string userid = FormState[\u0026quot;UserID\u0026quot;] as string; string reporteeElementID = FormState[\u0026quot;ReporteeElementID\u0026quot;] as string; string reporteeID = FormState[\u0026quot;ReporteeID\u0026quot;] as string; string language = FormState[\u0026quot;Language\u0026quot;] as string; XPathNavigator secDS = this.DataSources[\u0026quot;GetArchivedFormTaskList\u0026quot;].CreateNavigator(); XPathNavigator node = secDS.SelectSingleNode( \u0026quot;/dfs:myFields/dfs:queryFields/tns:GetArchivedFormTaskList/tns:userID\u0026quot;, NamespaceManager); if (node != null \u0026amp;\u0026amp; userid != null) { node.SetValue(userid); } node = secDS.SelectSingleNode( \u0026quot;/dfs:myFields/dfs:queryFields/tns:GetArchivedFormTaskList/tns:reporteeID\u0026quot;, NamespaceManager); if (node != null \u0026amp;\u0026amp; reporteeID != null) { node.SetValue(reporteeID); } node = secDS.SelectSingleNode( \u0026quot;/dfs:myFields/dfs:queryFields/tns:GetArchivedFormTaskList/tns:serviceCode\u0026quot;, NamespaceManager); if (node != null) { node.SetValue(\u0026quot;132323\u0026quot;); //Legg inn serviceCode for det aktuelle skjemaet } node = secDS.SelectSingleNode( \u0026quot;/dfs:myFields/dfs:queryFields/tns:GetArchivedFormTaskList/tns:altinnIServiceCode\u0026quot;, NamespaceManager); if (node != null) { node.SetValue(\u0026quot;0\u0026quot;); //Legg inn altinnIServiceCode (OR form nummer) for det aktuelle skjemaet, 0 hvis ikke altinn1 skjema } node = secDS.SelectSingleNode( \u0026quot;/dfs:myFields/dfs:queryFields/tns:GetArchivedFormTaskList/tns:languageID\u0026quot;, NamespaceManager); if (node != null \u0026amp;\u0026amp; language != null) { node.SetValue(language); } }  Dette er et kodeeksempel som er spesifikt for GetArchivedFormTaskList, for andre web service kall så vil navn på sekundær datakilde og Xpath uttrykk endres. For kall til andre (ikke Altinn) tjenester vil det ikke være nødvendig å hente ut parametre fra FormState.\nBruk av AltinnMapperContext AltinnMapperContext er en kontekst XML som du kan bruke i InfoPath skjema og i mapper og som blant annet gir deg tilgang til UserID, Username, Firstname, ReporteeNumber, ServiceOwnerCode etc. I figuren nedenfor ser du alle elementene vi kan hente ut fra AltinnMapperContext\n AltinnMapperContext   Du kan få tilgang til alle parametrene fra AltinnMapperContext direkte i skjema ved å bruke InfoPath regler i motsetning til ved bruk av FormState varibler der man må bruke C# kode for å hente ut opplysninger om innlogget bruker og avgiver.\nMappere som utvikles og deployes til SBL kan rent teknisk kalles av alle InfoPath-skjema i løsningen, også på tvers av tjenesteiere. Dette kan være en sikkerhetsrisiko. Ved å benytte seg av AltinnMapperContext i mapper kan man forsikre seg om at bare de som har authentisert seg og valgt riktig avgiver skal få gjort kall mot gitte eksterne ressurser gjennom mapperen.\nFor å bruke AltinnMapperContext i InfoPath skjema må du legge til fila AltinnMapperContext.xml som en sekundær datakilde. AltinnMapperContext ligger under TULShare her: \\\\alt-tul-db-c02\\tulshare\\InfoPath\\Etater\nFor å legge til AltinnMapperContext som en sekundær datakilde i InfoPath skjema kan du gjøre følgende:\n Åpne InfoPath skjema og gå inn på fanen Data Gå inn på «Fra andre kilder» og velg «Fra XML fil» Bla deg frem til AltinnMapperContext.xml på TULShare (se figur under) og trykk på neste  Veiviser for datatilkobling    Det kommer da opp et vindu med en advarsel om at tilkoblinger til XML filer ikke søttes i en nettverksbane men denne meldingen kan man bare se bort fra og trykke på neste knappen. Dataen vil bli inkludert som en ressursfil i skjema. Tilslutt kommer det opp at vindu der man kan endre navn på datatilkoblingen, vi anbefaler bare at navnet «AltinnMapperContext» bare står Fjern haken for å hente data automatisk når skjemaet åpnes hvis man ikke har et absolutt behov for dette. Åpner man vindu for datatilkoblingene til InfoPath skjema ser man nå at AltinnMapperContext er blitt lagt til som en sekundær datakilde i skjema.  For å teste ut at InfoPath skjema får tak i data fra AltinnMapperContext kan man bruke et felt i hoveddatakilden som skal vise verdien fra et felt i AltinnMapperContext.\nHvis man har behov for å enhetsteste AltinnMapperContext fra InfoPath kan man fylle XML fila med testdata. Det er først når man har migrert skjema til sluttbrukerløsningen at AltinnMapperContext blir fylt med reelle data.\nFor kommunikasjon med mappere så er det spesielt elementet AltinnMapperContext/ContextXml (en Base64 enkodet og signert representasjon av de samme dataene) som er interessant. Denne skal sendes med i forespørselen til mapperen på lik linje med andre funksjonelle felter.»\nTilgjengelige webtjenester og oppslag Sluttbrukerløsningen tilbyr et sett med webtjenester og mapper-operasjoner som kan benyttes i InfoPath-skjema. Disse webtjenestene muliggjør oppslag i sluttbrukerløsningens register over personer og enheter, men også andre komponenter som liste over arbeidselementer til den enkelte avgiver.\nUnder følger en oversikt over webtjenestene. Mapper-implementasjonene utvikles av den enkelte tjenesteeier og listes derfor ikke her.\nSe eksempel i C# kode for registeroppslag for hvordan parameterne skal settes.\nGetArchivedFormTaskList Henter en liste over arkiverte skjemasett/avgiverelementer basert på input parameterne.\n   Input Beskrivelse     int altinnIServiceCode Valgfri: Angir OrFormNumber for den tjenesten som skal hentes fra Altinn1 arkiv.   string serviceCode Valgfri: Angir ServiceCode(ekstern tjenestekode) for den tjenesten som skal hentes fra Altinn2 arkiv.   int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   int reporteeID Kan hentes med FormState[\u0026quot;ReporteeID\u0026quot;] as string   int languageID Kan hentes med FormState[\u0026quot;Language\u0026quot;] as string    Begge de valgfri parameterne er teknisk sett valgfrie, men minst en av de to parameterne må angis.\n Endepunkt: ServiceEngine.ReporteeElementList Returverdi: ArchivedFormTaskIPBEList  GetFormSetElements Henter en liste som inneholder alle elementer i det gjeldende skjemasett/avgiverelement. Listen inneholder tre typer elementer: hovedskjema, vedleggskjema og binære vedlegg.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   int reporteeElementID Kan hentes med FormState[\u0026quot;ReporteeElementID\u0026quot;] as string   int languageID Kan hentes med FormState[\u0026quot;Language\u0026quot;] as string     Endepunkt: ServiceEngine.ReporteeElementList Returverdi: FormSetElementBEList  GetOrganizationRegisterData Henter data om en organisasjon basert på organisasjonsnummer.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   int orgNO Påkrevd: Angir organisasjonsnummer for den organisasjonen som skal hentes.     Endepunkt: Register.RegisterER Returverdi: OrganizationRegisterBE  GetOrganizationRegisterDataV2 Henter data om en organisasjon basert på organisasjonsnummer. Støtter enhetsnavn på mer en 35 tegn.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   int orgNO Påkrevd: Angir organisasjonsnummer for den organisasjonen som skal hentes.     Endepunkt: Register.RegisterER Returverdi: OrganizationRegisterBE  GetOrganizationsOfferingRole Henter liste som inneholder juridiske underenheter av en organisasjon basert på organisasjonsnummer.\n   Input Beskrivelse     string coveredByOrganizationNumber Påkrevd: Angir organisasjonsnummer for den organisasjonen som liste skal hentes fra.   string role Påkrevd: Angir rolle     Endepunkt: Register.RegisterER Returverdi: OrganizationBEList  ValidateEmailAddress Validerer epostadresse.\n   Input Beskrivelse     string verdi Epost     Endepunkt: ServiceEngine.FormsEngineInfoPathCodeLibrary Returverdi: bool (true/false)  ValidateModulus11OrgNumber Validerer organisasjonsnummeret.\n   Input Beskrivelse     string verdi Organisasjonsnummer     Endepunkt: ServiceEngine.FormsEngineInfoPathCodeLibrary Returverdi: bool (true/false)  ValidateModulus11Fnumber Validerer fødselsnummeret.\n   Input Beskrivelse     string verdi Fødselsnummer     Endepunkt: ServiceEngine.FormsEngineInfoPathCodeLibrary Returverdi: bool (true/false)  ValidateModulus11BankAccount Validerer kontonummeret.\n   Input Beskrivelse     string verdi Kontonummer     Endepunkt: ServiceEngine.FormsEngineInfoPathCodeLibrary Returverdi: bool (true/false)  GetPersonRegisterData Henter data om en person, basert på både fødselsnummer og etternavn. Begge parametere må stemme overens for at data skal returneres om en person. Dette er en mekanisme som sørger for at man bare kan hente data for personer som man vet både fødselsnummer og navn på.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   string SSN Påkrevd: Angir fødselsnummer for den personen som skal hentes.   string lastName Påkrevd: Angir etternavn for den personen som skal hentes.     Endepunkt: Register.RegisterDSF Returverdi: PersonRegisterBE  GetPersonRegisterDataV2 Henter data om en person, basert på både fødselsnummer og etternavn. Begge parametere må stemme overens for at data skal returneres om en person. Dette er en mekanisme som sørger for at man bare kan hente data for personer som man vet både fødselsnummer og navn på.\nDenne metoden er utgått og vil bli fjernet fra fremtidige leveranser av SBL og må derfor omgående byttes ut med GetPersonRegisterDataV3.\n   Input Beskrivelse     string SSN Påkrevd: Angir fødselsnummer for den personen som skal hentes.   string lastName Påkrevd: Angir etternavn for den personen som skal hentes.     Endepunkt: Register.RegisterDSF Returverdi: PersonRegisterV2BE  GetPersonRegisterDataV3 Henter data om en person, basert på både fødselsnummer og etternavn. Begge parametere må stemme overens for at data skal returneres om en person. Dette er en mekanisme som sørger for at man bare kan hente data for personer som man vet både fødselsnummer og navn på.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   string SSN Påkrevd: Angir fødselsnummer for den personen som skal hentes.   string lastName Påkrevd: Angir etternavn for den personen som skal hentes.     Endepunkt: Register.RegisterDSF Returverdi: PersonRegisterV2BE  GetFamily Henter resten av familien basert på et fødselsnummer etter de prinsipper som gjelder i dagens flyttemelding:\n Dersom et familioverhode(far eller mor) oppgis, hentes andre familioverhoder og deres barn. Dersom et barn i en familie oppgis, så hentes bare dette barnet.     Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   string fNumber Påkrevd: Angir fødselsnummer for den personen som familie skal hentes for.     Endepunkt: Register.RegisterDSF Returverdi: PersonRegisterBEList  GetCompleteFamily Henter resten av familien basert på et fødselsnummer uavhengig av brukerens rolle i familien.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   string fNumber Påkrevd: Angir fødselsnummer for den personen som familie skal hentes for.     Endepunkt: Register.RegisterDSF Returverdi: PersonRegisterBEList  GetStreetNames Henter en liste med gatenavn som passer med søkeparameterne.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   string municipalNumber Valgfri: Angir kommunen som skal søkes i.   string streetName Valgfri: angir søkestreng for gatenavn.     Endepunkt: Register.RegisterCommon Returverdi: StreetBEList  GetProperty Henter en liste over eiendommer som passer med søkekriteriene som er angitt som innparametere.\n   Input Beskrivelse     int userID Kan hentes med (int)FormState[\u0026quot;UserID\u0026quot;]   string municipalNumber Påkrevd: Kommunenummer   string landNumber Påkrevd: Gårdsnummer   string titleNumber Påkrevd: Bruksnummer   string leaseNumber Valgfri: Festenummer   string subNumber Valgfri: Undernummer     Endepunkt: Register.RegisterCommon Returverdi: PropertyBEList  GetApartmentNumbersForPropertyAddress Henter en liste over bolignummer som er tilgjengelig på en addresse.\n   Input Beskrivelse     string municipalNumber Påkrevd: Kommunenummer   string landNumber Påkrevd: Gårdsnummer   string titleNumber Påkrevd: Bruksnummer   string leaseNumber Påkrevd: Festenummer   string subNumber Påkrevd: Undernummer     Endepunkt: Register.RegisterCommon Returverdi: ApartmentNumberBEList  GetApartmentNumbersForStreetAddress Henter en liste over bolignummer som er tilgjengelig på en addresse.\n   Input Beskrivelse     string municipalNumber Påkrevd: Kommunenummer   string streetCode Påkrevd: Gatekode   string houseNumber Påkrevd: Husnummer   string houseLetter Valgfri: Husbokstav returnerer bare den spesifiserte husbokstaven og dersom den er utelatt leter den bare etter bolignummer for adresser uten husbokstav.     Endepunkt: Register.RegisterCommon Returverdi: ApartmentNumberBEList  Returverdier    Navn Datatype Beskrivelse Eksempel     ArchivedFormTaskIPBEList  Liste med ArchivedFormTaskIPBE    ArchivedFormTaskIPBE      Title string Navn    ArchivedDate DateTime Dato og tidspunkt for når skjemasettet ble arkivert yyyy-MM-ddThh:mm:ss   ArchiveReference string Unik referanse for melding i Altinn arkiv. AR94295 (Altinn2)\nAM11111 (Altinn1)   FormSetElementBEList  Liste med FormSetElementBE    FormSetElementBE      IconFileName AttachmentType Filnavn for ikon    ItemID int ID-en til hovedskjema, underskjema eller binært vedlegg i dette skjemasettet    ItemName string Navn på hovedskjema, underskjema eller binært vedlegg.    ItemURL  URL for å åpne hovedskjema, uinderskjema eller binært vedlegg.    ItemType ItemTypeEnum Hovedskjema, underskjema eller vedlegg. 1: Hovedskjema\n2: Underskjema\n3: Vedlegg   ValidationStatusType FormValidationStatusType Valideringsstatus 1: Gyldig\n2: Ugyldig\n3: Ikke validert   IsSigningMandatory bool Indikerer om hoved- eller underskjemaet må signeres.    CreatedByUserID int ID-en til innlogget bruker.    CreatedDateTime DateTime Opprettelsesdato for vedlegg. yyyy-MM-ddThh:mm:ss   IsAddedAfterFormFillin bool Indikerer om vedlegget er lagt til etter at skjema er utfylt.    DestinationType UserTypeRestriction Destination type for binære vedlegg 0: Default\n1: Bare i portal\n2: Bare sluttbrukersystemer\n3: Alle   IsAssociatedToFormSet bool Indikerer om vedlegget er med i et skjemasett.    OrganizationBEList  Liste av OrganizationBE elementer   OrganizationBE      OrgNumber string Organisasjonsnummer 010008433   UnitName string Navn    EditedName String Endret navn    UnitDescription String Beskrivelse    Established DateTime Etablert    PartyID Int Id for å identifisere party-entitet i Altinn    AdressPostAddress string Postadresse    PostalCodeBusiness string Kontorpostnummer    PostalCityMail string Poststed    BusinessAddress string Kontoradresse    PostalCodeMail string Postnummer, postadresse    MailCountry String Land    BusinessCommunityNumber String Kontorets kommunenummer    PostCommunityNumber String Poststedets kommunenummer    PostalCityBusiness string Poststed, forretningsadresse    TelephoneNumber string Telefon    MobileNumber string Mobil    Fax string Fax    EMailAddress string E-post    InternetAddress string Hjemmeside    UnitStatus string Foretaksstatus N – Ny\nE - endret\nS - slettet\nL - gjenåpnet   UnitType string Type foretak ANNA   UnitTypeFlag string Flagg for type foretak P - produksjon\nT - test   EstablishedDate DateTime Etableringsdato yyyy-MM-ddThh:mm:ss   LastChangedDateTime DateTime Tidspunkt for når organisasjonen var sist endret    SubStatus string Understatus EBTC   TrustedPartner Bool Forteller om organisasjonen er en tiltrodd samarbeidspartner.    LegalEntity Int Organisasjonsnummer for organisasjonens juridiske enhet, kan være det samme som OrgNumber    OrganizationRegisterBE      OrgNumber string Organisasjonsnummer 010008433   Name string Navn    PostAddress string Adresse    PostPostCode string Postnummer    PostPostCity string Poststed    BusinessAddress string Forretningsadresse    BusinessPostCode string Postnummer, forretningsadresse    BusinessPostCity string Poststed, forretningsadresse    TelephoneNumber string Telefon    MobileNumber string Mobil    FaxNumber string Fax    EMailAddress string E-post    InternetAddress string Hjemmeside    UnitStatus string Foretaksstatus N – Ny\nE - endret\nS - slettet\nL - gjenåpnet   UnitType string Type foretak ANNA   EstablishedDate DateTime Etableringsdato yyyy-MM-ddThh:mm:ss   MunicipalNumber string Kommunenummer 0301   SubStatus string Understatus EBTC   CountryCode string Landkode NO, DE   PersonRegisterBEList  Liste med PersonRegisterBE     PersonRegisterBE      SocialSecurityNumber string Fødselsnummer 07037512345   Name string Fullt navn    FirstName string Fornavn    LastName string Etternavn    CommunityNumber String Tilsvarer PropertyBE.MunicipalNumber 0301   HouseLetter string Husbokstav A   HouseNumber string Husnummer 0057, 17   StreetName string Gatenavn MIDDELTHUNS GATE   PostalCode string Postnummer 186   City string Poststed BERGEN   MaritalStatus MaritalStatus Sivilstatus 0 Uoppgitt (D)\n1 Ugift\n2 Gift\n3 Enke(mann)\n4 Skilt\n5 Separert\n6 Partner\n7 Separert partner\n8 Skilt partner\n9 Gjenlevende partner   FamilieNumber string Fødselsnummer/fødselsnummer til referanseperson i familie for personer med familiekode 2 eller 3. 07037512345   FamilyPersonCodeDescription string  1- Referanseperson\n2 - Gift kvinne/yngste partner som bor sammen med ekt\n3 - Barn som bor sammen med foreldre   CitizenshipCountry string Nasjonalitet    SpecialRegType int  0 Vanlig bosatt\n1 Utenriks\n2 Militær\n3 Svalbard\n4 Klientadresse\n5 Uten fast bosted\n6 Sperret adresse, strengt fortrolig\n7 Sperret adresse, fortrolig\n8 Pendlere   IsUnderAge bool Under myndighetsalder    DateOfDeath DateTime Dødsdato yyyy-MM-ddThh:mm:ss   LastChanged DateTime Dato for siste endring yyyy-MM-ddThh:mm:ss   ApartmentNumber string Leilighetsnummer    PIDType string ID-type D – D-nummer\nF - Fødselsnummer   Property PropertyBE (se PropertyBE under)    PersonRegisterV2BE      SocialSecurityNumber string Fødselsnummer 07037512345   Name string Fullt navn    FirstName string Fornavn    MiddleName String Mellomnavn    LastName string Etternavn    MaritalStatus MaritalStatus Sivilstatus 0 Uoppgitt (D)\n1 Ugift\n2 Gift\n3 Enke(mann)\n4 Skilt\n5 Separert\n6 Partner\n7 Separert partner\n8 Skilt partner\n9 Gjenlevende partner   FamilieNumber string Fødselsnummer/fødselsnummer til referanseperson i familie for personer med familiekode 2 eller 3. 07037512345   FamilyPersonCodeDescription string  1- Referanseperson\n2 - Gift kvinne/yngste partner som bor sammen med ektefelle\n3 - Barn som bor sammen med foreldre   SpecialRegType int  0 Vanlig bosatt\n1 Utenriks\n2 Militær\n3 Svalbard\n4 Klientadresse\n5 Uten fast bosted\n6 Sperret adresse, strengt fortrolig\n7 Sperret adresse, fortrolig\n8 Pendlere   IsUnderAge bool Under myndighetsalder    DateOfDeath DateTime Dødsdato yyyy-MM-ddThh:mm:ss   LastChanged DateTime Dato for siste endring yyyy-MM-ddThh:mm:ss   PIDType string ID-type D – D-nummer\nF - Fødselsnummer   PostalAddress PostalAddressBE (se PostalAddressBE under)    ResidentialAddress ResidentialAddressBE (se ResidentialAddressBE under)    StreetBEList  Liste med StreetBE    StreetBE      StreetId int Gate-ID 21644   MunicipalId Int Kommune-ID 220   MunicipalNumber string Kommunenummer 0301   StreetCode string Gatekode 06740   StreetName string Gatenavn ANDEDAMVEIEN   PropertyBEList  Liste med PropertyBE    PropertyBE      PropertyId int Unik identifikator for eiendom    MunicipalName string Kommunenavn HURDAL   LandNumber string Landnummer Fra input   MunicipalNumber string Kommunenummer Fra input   TitleNumber string  Fra input   LeaseNumber string  Fra input, fire tegn, venstrepadding med 0   SubNumber string  Fra input, tre tegn, venstrepadding med 0   AddressName string Adresse VINDALSVEGEN   ApartmentNumberBEList  Liste med ApartmentNumberBE    ApartmentNumberBE      ApartmentNumber string Bolignummer H0101   PostalAddressBE      AddressLine1 string Linje 1 av adresse    AddressLine2 string Linje 2 av adresse    AddressLine3 string Linje 3 av adresse    PostalCode string Postnummer 186   City string Poststed BERGEN   CountryCode string Landkode tre siffer 000   ResidentialAddressBE      StreetCode string Femsifret gatekode    StreetName string Gatenavn    HouseNumber string Husnummer    HouseLetter string Husbokstav    LandNumber string Gårdsnummer    TitleNumber string Bruksnummer    LeaseNumber string Festenummer    SubNumber string Undernummer    AddressName string Adresse    ResidentialAddressLine1 string Linje 1 av bostedsadresse    ResidentialAddressLine2 string Linje 2 av bostedsadresse    PostalCode string Postnummer    City string Sted    ApartmentNumber string Leilighetsnummer    MunicipalNumber string Kommunenummer    MunicipalName string Kommunenavn HURDAL   "
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-12/",
	"title": "18.12",
	"tags": [],
	"description": "Visning av organisasjonsform i REST, styre utsendelse av varsel ved prefill, feilrettinger m.m.",
	"content": " Endringer i portal Filtrering av aktørlisten basert på innstilling angitt i portalen Regnskapsførere og revisorer kan velge bort å se klienter i aktørlisten hvis de ønsker dette ved å gå inn i \u0026ldquo;profil\u0026rdquo; og \u0026ldquo;Avanserte innstillinger\u0026rdquo;. Etter 17.2 releasen fungerte ikke dette selv om man valgte bort å se klienter. Dette er nå korrigert og fungerer som tiltenkt.\n Endringer i REST API Mulighet for delegering av revisor/regnskapsfører rolle i REST API er tatt bort Blir det forsøkt delegert en revisor/regnskapsfører rolle (klientrolle) gjennom rolle og rettighetsdelegering i sluttbrukers REST API, vil delegeringen nå gi feilkode 403 med en beskrivende feilmelding. Disse rollene må delegeres via portalen.\nVisning av organisasjonsform, foreldreorganisasjon og link til Enhetsregisteret via REST API Tidligere var det ikke mulig fra REST responsen å avgjøre hvorvidt en hovedenhet hadde underenheter eller ikke. Endringen medfører at det nå er mulig å se organisasjonsformen til hvert selskap slik at man kan filtrere på hovedenheter, underenheter og indre selskap. I tillegg er det lagt til en lenke som peker til Enhetsregisteret for hvert element.\nLegge til Secure og HttpOnly på .ASPXAUTH ved fornyelse av cookie ved bruk av REST API Ved fornyelse av cookien .ASPXAUTH via REST API ble tidligere ikke “Secure” og “HttpOnly” satt. Dette blir nå gjort.\nEndringer i SOAP API Nytt parameter for å styre utsendelse av varsel ved opprettelse av elementer gjennom Prefill Operasjonen SubmitAndInstantiatePrefilledFormTask har fått et nytt parameter kalt ValidateButDoNotSendNotification. Når dette flagget blir satt til true vil logikken stoppe utsending av varsel selv om alt validerer OK. I tillegg gjør logikken en bedre verifisering av kontaktinformasjon knyttet til avgiver opp mot varsel innstillinger. Flagget er avhengig av at forespørselen inneholder informasjon om varsel utsending, men vil ikke gi noen feil om det skulle mangle.\nDet nye flagget ValidateButDoNotSendNotification skal kunne brukes av tjenesteeiere hvis de ønsker å validere at Altinn har nok informasjon til å kunne sende varsel uten at det faktisk sendes varsel. Dette kan da brukes i de tilfellene hvor de også skal lage et meldingselement (correspondence) og ønsker å knytte varsel til det isteden. Skulle verifisering av kontaktinformasjon resultere i en feil så vil tjenesten returnere en feilmelding om dette. Det blir ikke laget noe skjemaelement i en slik situasjon. Tjenesteeier kan da velge å opprette skjema i en forespørsel uten varselinformasjon eller velge en annen kanal som for eksempel papir.\nEndringen gjelder alle typer avgivere. Utbedringene som nå er gjort kan føre til litt andre feilmeldinger enn tidligere.\nDiverse bugfix Profilsiden - Resultat for tjenestesøk vises ikke på mobil En feil i tjenestesøk komponenten førte til at søkeresultatet ikke ble synlig for mobilvisning for tre visninger i profilsiden:\n Gi og fjerne rettigheter Opprettelse av lokal rolle Din kontaktinformasjon for virksomheten \u0026gt; Varsling kun for enkelttjenester   Feilen er nå rettet\nUtbedret logikk som bestemmer fødselsdatoen ut fra fødselsnummer ved bruk av makroer i varsel maler Altinn benytter per i dag fødselsnummer til å beregne fødselsdato. Logikken som gjør denne beregningen før fødselsdato benyttes i varsel maler hadde 2 feil. Det kunne plassere personer i feil århundre og gi personer med D-nummer ugyldige fødselsdatoer. Dette er nå rettet.\nKlientdelegering - feil i teller på fjern alle klienter I klientrolle administrasjonen for en gitt ansatt er det en link/knapp for å slette alle klienter den ansatte har. Link teksten sin teller er nå endret til å vise oppdatert totalt antall klienter den ansatte har, i stedet for antall klienter visningen inneholdt (visningen var begrenset til å laste 20 om gangen).\nKlientdelegering - Utbedring av feil for klientdelegering på fil for å unngå duplikat utsendelser av epostvarsling For versjon 18.7 av Altinn ble det levert forbedring rundt format på eposter for klientdelegerin på fil. I den sammenheng ble det innført en feil der utsending av epost til de som mottar delegering av en eller flere klientroller kunne motta opptil flere tusen eposter.\nFeilen er nå utbedret så mottaker mottar en epost pr. rolle, pr. klient.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/generelt/api-key/",
	"title": "API-key",
	"tags": [],
	"description": "API-key typer og bruk",
	"content": " API-ene Tjenesteeiere Alle offentlige virksomheter som har tjenester på Altinn-plattformen kalles tjenesteeiere. Disse har mulighet for å få tilgang til en egen del av Altinns REST-api der man kan gjøre oppslag i roller, rettigheter og kontaktinformasjon til bruk i eksterne løsninger.\nDette api-et ligger under /serviceowner/ og er beskrevet under Tjenesteeiere og brukes til oppslag mot Altinn.\nSluttbrukere Altinns REST-api for sluttbruker gir tilgang til meldingsboks, innsendingstjenester og informasjon om en sluttbruker, som enten kan være privatperson eller eller personer med roller/rettigheter til å representere en virksomhet. Det er dette api-et man bruker dersom man skal tilby en nettløsning eller app der sluttbrukere logger på for å utføre operasjoner mot Altinn, selv om eier av løsningen er en tjenesteeier i Altinn.\nNærmere beskrivelse av apiet ligger under Sluttbrukere.\nAPI-key Altinns apikey er definert per api og applikasjonstype.\nApikeys som skal brukes i nettløsninger (typisk javascript) bestilles av type \u0026lsquo;Nettleserapplikasjon\u0026rsquo; og må tilknyttes gyldige domener for å slippe gjennom CORS. Apikeyen blir dermed ingen hemmelighet i så måte, men vil være knyttet opp mot et spesifikt domene. Det er mulig å tillate flere domener, og i test også \u0026ldquo;localhost\u0026rdquo;.\nLøsninger som kaller Altinns REST-api utenfor nettleser, for eksempel fra backend-applikasjoner, desktop-programmer eller mobilapps bruker apikey av typen \u0026ldquo;Annet\u0026rdquo; i bestillingsskjemaet inntil skjemaet blir oppdatert. Dette gjelder uavhengig av om det er apikey som kaller sluttbrukerdelen av api-et eller tjenesteeierdelen.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/arkivere/",
	"title": "Arkivere",
	"tags": [],
	"description": "Operasjoner for å arkivere meldinger",
	"content": " Arkivering utføres med ARCHIVE på message Følgende request arkiverer den aktuelle meldingen eller skjema. Når arkiveringen er utført returneres HTTP 204 - No Content med en Location-header som peker til den nye arkiv-addressen til meldingen.\nArkivering av meldinger av correspondence som krever brekreftelse er ikke mulig.\nPUT https://www.altinn.no/api/{who}/messages/{messageid}/archive HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Responsen indikerer at arkiveringen er utført og den nye arkiv-addressen til meldingen:\nHTTP/1.1 204 Message has been archived Date: Mon, 04 Jun 2018 12:28:53 GMT Location: https://www.altinn.no/api/{who}/messages/{archivedMessageid} \n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/autentisering/",
	"title": "Autentisering",
	"tags": [],
	"description": "For å få tilgang til Altinn API-et må brukeren først autentisere seg. Altinn API støtter tre ulike autentiseringsmetoder.",
	"content": "For å få tilgang til Altinn API-et må brukeren først autentisere seg. Altinn API støtter tre ulike autentiseringsmetoder.\n\rBrukernavn og passord\r\rAltinns REST-API støtter autentisering med bruk av brukernavn og passord registrert i Altinn.\n\rID-porten\r\rDersom brukeren ikke er autentisert vil API-et redirecte applikasjonen din til ID-portens påloggingsside med responsivt design. I en app vil brukeren kunne velge mellom å autentisere seg ved bruk av av MinID eller BankID. Når brukeren er autentisert i ID-porten vil brukeren bli redirected tilbake til opprinnelig URL. Dette vil fungere for alle klienter som støtter cookies og HTTP-redirect.\n\rVirksomhets­sertifikat\r\rDersom brukeren skal representere en virksomhet som har et virksomhetssertifikat, kan dette benyttes sammen med en virksomhetsbruker opprettet på Altinn.no til å autentisere seg mot Altinns REST-api.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/",
	"title": "Autorisasjon",
	"tags": [],
	"description": "For å få tilgang til Altinn API-et må brukeren være autorisert.",
	"content": "\r\rRoller og rettigheter\r\rAPI\u0026#39;er relatert til roller og rettigheter.\n\rRolle­definisjoner\r\rAPI\u0026#39;er relatert til rolledefinisjoner.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/api/autorisasjon/",
	"title": "Autorisasjon",
	"tags": [],
	"description": "Spørringer mot Altinns autorisasjonskomponent",
	"content": " Ved å bruke autorisasjonsdelen av REST-API for tjenesteeier kan man autorisere tilganger og verifisere roller og rettigheter til bruk utenfor Altinn, for eksempel som alternativ til XACML/webservice eller som oppslag i forbindelse med tilgangsstyring.\nHente ut liste over avgivere Hente ut liste over alle avgivere en person eller organisasjon {subject}kan representere, eventuelt spesifisert ned på spesifikk tjeneste eller rolle.\nGET https://www.altinn.no/api/serviceowner/reportees?ForceEIAuthentication\u0026amp;subject={subject}\u0026amp;serviceCode={serviceCode}\u0026amp;serviceEdition={serviceEdition}\u0026amp;roleDefinitionId={roleDefinitionId}\u0026amp;showConsentReportees={showConsentReportees} HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/reportees?subject={subject}\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;reportees\u0026quot;: [ { \u0026quot;Name\u0026quot;: \u0026quot;BIRI OG TORPO REGNSKAP\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Enterprise\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910437127\u0026quot;, \u0026quot;OrganizationForm\u0026quot;: \u0026quot;AS\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Active\u0026quot; }, { \u0026quot;Name\u0026quot;: \u0026quot;EIDSNES OG AUSTRE ÅMØY\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Business\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910521551\u0026quot;, \u0026quot;OrganizationForm\u0026quot;: \u0026quot;ORGL\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Active\u0026quot; }, { \u0026quot;Name\u0026quot;: \u0026quot;FJELL LISA FOS\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Person\u0026quot;, \u0026quot;SocialSecurityNumber\u0026quot;: \u0026quot;13054900281\u0026quot; }, { \u0026quot;Name\u0026quot;: \u0026quot;BARDU OG SØRUM REGNSKAP\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Business\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910441205\u0026quot;, \u0026quot;ParentOrganizationNumber\u0026quot;: \u0026quot;910460048\u0026quot;, \u0026quot;OrganizationForm\u0026quot;: \u0026quot;BEDR\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Active\u0026quot; }, { \u0026quot;Name\u0026quot;: \u0026quot;HOLUM OG SVARSTAD REGNSKAP\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Enterprise\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910460048\u0026quot;, \u0026quot;OrganizationForm\u0026quot;: \u0026quot;FLI\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Active\u0026quot; }, { \u0026quot;Name\u0026quot;: \u0026quot;NICOLINE HANNISDAL\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Person\u0026quot;, \u0026quot;SocialSecurityNumber\u0026quot;: \u0026quot;02066681060\u0026quot; } ] } }  Hente ut rettigheter Hente ut alle rettigheter en person eller organisasjon {subject} har for en annen person eller organisasjon {reportee} på tjenester som tilhører autentisert tjenesteeier.\nGET https://www.altinn.no/api/serviceowner/authorization/rights?ForceEIAuthentication\u0026amp;subject={subject}\u0026amp;reportee={reportee} HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;Subject\u0026quot;: { \u0026quot;Name\u0026quot;: \u0026quot;ROLF BJØRN\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Person\u0026quot;, \u0026quot;SocialSecurityNumber\u0026quot;: \u0026quot;06117701547\u0026quot; }, \u0026quot;Reportee\u0026quot;: { \u0026quot;Name\u0026quot;: \u0026quot;KIRKENES OG AUSTBØ\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Enterprise\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910021451\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Active\u0026quot; }, \u0026quot;Rights\u0026quot;: [ { \u0026quot;RightID\u0026quot;: 1018549, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2480\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 20, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 1018550, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2480\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 20, \u0026quot;Action\u0026quot;: \u0026quot;ArchiveRead\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 1018551, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2480\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 20, \u0026quot;Action\u0026quot;: \u0026quot;ArchiveDelete\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 1222878, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2509\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 201412, \u0026quot;Action\u0026quot;: \u0026quot;Sign\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true } ], \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/authorization/rights?subject={subject}\u0026amp;reportee={reportee}\u0026quot; } } }  Hente ut alle rolledefinisjoner GET https://www.altinn.no/api/serviceowner/roledefinitions?ForceEIAuthentication\u0026amp;language={language} HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;roledefinitions\u0026quot;: [ { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 1, \u0026quot;RoleName\u0026quot;: \u0026quot;Bankruptcy read\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Reading rights for information in the service Konkursbehandling (bankruptcy proceedings)\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;BOBEL\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/1\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 2, \u0026quot;RoleName\u0026quot;: \u0026quot;Bankruptcy write\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Writing rights for information in the service Konkursbehandling (bankruptcy proceedings)\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;BOBES\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/2\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 3, \u0026quot;RoleName\u0026quot;: \u0026quot;Salaries and personnel employee\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Access to services related to salaries and personnel\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;LOPER\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/3\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 4, \u0026quot;RoleName\u0026quot;: \u0026quot;Access manager\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Administration of access\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;ADMAI\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/4\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 5, \u0026quot;RoleName\u0026quot;: \u0026quot;Limited rights for an individual\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Delegable rights to services for individuals\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;PRIUT\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/5\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 6, \u0026quot;RoleName\u0026quot;: \u0026quot;Accounting employee\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Access to accounting related forms and services\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;REGNA\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/6\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 7, \u0026quot;RoleName\u0026quot;: \u0026quot;Auditor's rights\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Delegable auditor's rights\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;REVAI\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/7\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 8, \u0026quot;RoleName\u0026quot;: \u0026quot;Limited signing rights\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Signing access for selected forms and services\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;SISKD\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/8\u0026quot; } } } ] } }  Hente ut én spesifikk rolledefinisjon GET https://www.altinn.no/api/serviceowner/roledefinitions/{roleDefinitionId}?ForceEIAuthentication\u0026amp;language={language} Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 4, \u0026quot;RoleName\u0026quot;: \u0026quot;Tilgangsstyring\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir administratortilgang til å gi videre rettigheter til andre.\\r\\n\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;ADMAI\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/4\u0026quot; } } }  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/confirm/",
	"title": "Bekrefte",
	"tags": [],
	"description": "Operasjoner for å bekrefte mottak av meldinger",
	"content": " Bekreftelse utføres med CONFIRM på message Følgende request bekrefter at den aktuelle meldingen er motatt. Når bekreftelsen er utført returneres HTTP 204 - No Content.\nBekreftelse er kun mulig for correspondence som krever brekreftelse.\nPUT https://www.altinn.no/api/{who}/messages/{messageid}/confirm HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/autentisering/brukernavn-og-passord/",
	"title": "Brukernavn og passord",
	"tags": [],
	"description": "Altinns REST-API støtter autentisering med bruk av brukernavn og passord registrert i Altinn.",
	"content": " Altinn API støtter autentisering med kun brukernavn (eller personnummer) og passord registrert på brukerens profil i Altinn. Registrering av brukernavn og passord gjøres i Altinn portalen under Profil, roller og rettigheter.\nAutentisering med brukernavn og passord gir tilgang til å hente meldinger og sende inn skjema som krever sikkerhetsnivå 1.\n1. Utfør autentisering Send følgende POST-forespørsel mot APIet:\nPOST https://www.altinn.no/api/authentication/authenticatewithpassword HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey { \u0026quot;UserName\u0026quot;: \u0026quot;MyUsername\u0026quot;, \u0026quot;UserPassword\u0026quot;: \u0026quot;MyPassword\u0026quot; }  Ved korrekt autentisering vil du få status 200 OK som respons fra Altinn REST API\n2. Hente ut påloggings-token Etter vellykket pålogging oppretter Altinn et sett med tokens i form av HTTP cookies i Set-Cookie header.\nNår Altinn har opprettet disse token burde din applikasjon hente de ut\nHer er eksempler på hvordan du kan hente ut token i HTTP cookie på de vanligste plattformene:\n Android: CookieManager#getCookie(URL) kan brukes til å hente ut cookien satt av Altinn. Detaljert eksempelkode på denne teknikken kan du finne her. iOS: Din applikasjon kan hente ut cookies satt av Altinn ved å bruke NSHTTPCookieStorage. Dette blir ofte kalt \u0026ldquo;cookie jar.\u0026rdquo;  NSHTTPCookie *cookie; NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (cookie in [cookieJar cookies]) { NSLog(@\u0026quot;%@\u0026quot;, cookie); }  Detaljert eksempelkode på denne teknikken for iOS finner du her.\n3. Videreføre påloggings-token i kall til Altinn API Tokenet .ASPXAUTH legges i HTTP header som \u0026ldquo;Cookie\u0026rdquo; i videre på kall til Altinn API:\nCookie: .ASPXAUTH=2AF7F203...  API nøkkelen må også legges ved i HTTP header slik:\nApiKey: myKey  API nøkkel får du etter registrering av din applikasjon.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/generelt/",
	"title": "Generelt",
	"tags": [],
	"description": "Generelt om Altinns grenesesnitt for integrasjon",
	"content": "Generell info om in tegrasjon, grensesnitt og API\u0026rsquo;er.\n\rOverordnet\r\rOverordnet informasjon om integrasjon mot Altinn.\n\rAPI-key\r\rAPI-key typer og bruk\n\rKjente feil og mangler\r\rKjente feil og funksjonalitet som ikke ennå er implementert i REST-apiet\n\rRetningslinjer\r\rRetningslinjer om bruk av Altinn API\u0026#39;et.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/hente/",
	"title": "Hente",
	"tags": [],
	"description": "Operasjoner for å lese i meldingsboks og arkiv",
	"content": " Hent ut liste med meldinger og finn lenker Det sentrale elementet som tilgjengeliggjøres i APIet er Message. Den representerer et element i sluttbrukerens meldingsboks i Altinn og kan være av typen FormTask og Correspondence og ha ulik status alt etter hvilken tilstand elementet er i.\nVed å gå til rot-ressursen https://www.altinn.no/api/my/messages/ er det mulig å navigere seg fram til elementene i brukerens meldingsboks.\nSend følgende GET-forespørsel mot APIet, og du vil få returnert brukerens innhold i meldingsboksen (resultatet er begrenset til de 50 første elementene, se punkt 7 under for informasjon om hvordan du får fram de 50 neste).\nGET https://www.altinn.no/api/my/messages HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey  Ved korrekt autentisering vil du få følgende svar fra APIet:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages\u0026quot; }, \u0026quot;find\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/{MessageId}\u0026quot;, \u0026quot;isTemplated\u0026quot;: true } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;messages\u0026quot;: [ { \u0026quot;MessageId\u0026quot;: \u0026quot;a385107\u0026quot;, \u0026quot;Subject\u0026quot;: \u0026quot;Vedr. saksnr 201301840, journalnr 2013021622 \u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Ulest\u0026quot;, \u0026quot;LastChangedDateTime\u0026quot;: \u0026quot;2013-11-11T13:41:01.703\u0026quot;, \u0026quot;LastChangedBy\u0026quot;: \u0026quot;Kommunene\u0026quot;, \u0026quot;ServiceOwner\u0026quot;: \u0026quot;Kommunene\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Correspondence\u0026quot;, \u0026quot;MessageSender\u0026quot;: \u0026quot;Brønnøy Kommune\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2479\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 2, \u0026quot;ReplyOptions\u0026quot;: [ { \u0026quot;Type\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;URL\u0026quot;: \u0026quot;http://devenv.altinn.no/api/metadata/formtask/3008/102\u0026quot;, \u0026quot;Text\u0026quot;: \u0026quot;Correspondence Sanity PROD\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;3008\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 102 }, { \u0026quot;Type\u0026quot;: \u0026quot;ArchiveReference\u0026quot;, \u0026quot;URL\u0026quot;: \u0026quot;http://devenv.altinn.no/api/my/messages/b3\u0026quot;, \u0026quot;Text\u0026quot;: \u0026quot;Correspondence Sanity PROD\u0026quot; }, { \u0026quot;Type\u0026quot;: \u0026quot;URL\u0026quot;, \u0026quot;URL\u0026quot;: \u0026quot;http://www.altinn.no\u0026quot;, \u0026quot;Text\u0026quot;: \u0026quot;Klikk her\u0026quot; } ], \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a385107\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/correspondence/2479/2\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages....\u0026quot; } } }, { \u0026quot;MessageId\u0026quot;: \u0026quot;a385103\u0026quot;, \u0026quot;Subject\u0026quot;: \u0026quot;Søknad om tilskudd til lokale samlivskurs\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Utfylling\u0026quot;, \u0026quot;LastChangedDateTime\u0026quot;: \u0026quot;2013-11-11T13:39:22.817\u0026quot;, \u0026quot;LastChangedBy\u0026quot;: \u0026quot;HÅKON TRANA\u0026quot;, \u0026quot;ServiceOwner\u0026quot;: \u0026quot;Barne-, ungdoms- og familiedirektoratet\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;3606\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 130731, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a385103\u0026quot; }, \u0026quot;print\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a385103/print\u0026quot;, \u0026quot;mime-type\u0026quot;: \u0026quot;application/pdf\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/3606/130731\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages.....\u0026quot; } } }, { \u0026quot;MessageId\u0026quot;: \u0026quot;a382871\u0026quot;, \u0026quot;Subject\u0026quot;: \u0026quot;RF-1015 Lønns- og trekkopplysninger for 2012\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Utfylling\u0026quot;, \u0026quot;LastChangedDateTime\u0026quot;: \u0026quot;2013-11-11T13:37:48.093\u0026quot;, \u0026quot;LastChangedBy\u0026quot;: \u0026quot;HÅKON TRANA\u0026quot;, \u0026quot;ServiceOwner\u0026quot;: \u0026quot;Skatteetaten\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2802\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 2203, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a382871\u0026quot; }, \u0026quot;print\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a382871/print\u0026quot;, \u0026quot;mime-type\u0026quot;: \u0026quot;application/pdf\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/2802/2203\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages......\u0026quot; } } } ] } }  Message av typen FormTask En message med type FormTask representerer en innsendingstjeneste (skjema) som ligger i sluttbrukers meldingsboks. Status parameteren angir hvilken tilstand skjemaet har (\u0026ldquo;Utfylling\u0026rdquo;, \u0026ldquo;Signering\u0026rdquo;, \u0026ldquo;Sendt og arkivert\u0026rdquo;).\nMessage av typen Correspondence En message med type Correspondence representerer en meldingstjeneste (melding fra etat til bruker) som ligger i sluttbrukers meldingsboks. Status parameteren angir hvilken tilstand meldingen har (\u0026ldquo;Ulest\u0026rdquo;, \u0026ldquo;Lest\u0026rdquo;, \u0026ldquo;Arkivert\u0026rdquo;).\nSvaralternativer Hvis tjenesteeier har angitt ett eller flere svaralternativ vil disse vises i tabellen \u0026ldquo;ReplyOptions\u0026rdquo;. Svaralternativer kan ha en av tre typer:\n Service - Representerer en tjeneste som må fylles ut i respons til meldingen ArchiveReference - Representerer ett arkivert element som legges ved meldingen URL - Ekstern lenke lagt til meldingen  Alle typer svaralternativer inneholder minst tre elementer:\n Type - Tekst som identifiserer typen svaralternativ. Mulige verdier er \u0026ldquo;Service\u0026rdquo;, \u0026ldquo;ArchiveReference\u0026rdquo; eller \u0026ldquo;URL\u0026rdquo; URL - URI til det aktuelle svaralternativet Text - Tekst som kan brukes til å bygge lenken som vises for sluttbruker  Svaralternativer av typen \u0026ldquo;Service\u0026rdquo; inneholder i tillegg \u0026ldquo;ServiceCode\u0026rdquo; og \u0026ldquo;ServiceEditionCode\u0026rdquo; som kan brukes til å identifisere tjenesten det lenkes til.\nLenker Hvert enkelt message-element inneholder en hash tabell \u0026ldquo;_links\u0026rdquo; som inneholder lenker til beslektede elementer. Det er viktig at din applikasjon aktivt bruker disse lenkene, og ikke hardkoder en rekke URL-er i applikasjonen.\n\u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a382871\u0026quot; }, \u0026quot;print\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a382871/print\u0026quot;, \u0026quot;mime-type\u0026quot;: \u0026quot;application/pdf\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/2802/2203\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages......\u0026quot; } }  Feltene i _links betyr følgende:\n self - URI til representasjon av den enkelte meldingen. print - URI til utskriftsversjonen av et arkivert skjema eller et skjema under utfylling. Er kun gyldig for message elementer av typen FormTask. For print relasjoner er \u0026ldquo;mime-type\u0026rdquo; i de fleste tilfeller \u0026ldquo;application/pdf\u0026rdquo; men vil i noen tilfeller også være \u0026ldquo;application/text-html\u0026rdquo;. metadata - URI til metadata ressurs for den aktuelle meldingen. portalview - URI til portalpresentasjonen av meldingen. Ved å følge lenken får brukeren opp Altinns presentasjon av elementet i portalen. I portalen vil ressursen vises i den status den befinner seg i (Utfylling, Signering, Arkivert).  _links kan bli utvidet med ytterligere relasjoner i fremtidige oppdateringer av APIet.\nHent ut liste med enheter brukeren kan representere \u0026ldquo;Reportee\u0026rdquo; representerer en avgiver den påloggede brukeren har rettighet til å representere. Ved å gå til rot-ressursen https://www.altinn.no/api/reportees/ er det mulig å få en liste over alle avgivere en pålogget bruker kan representere og derfra navigere seg fram til en liste over elementene i avgiverens meldingsboks. Avgivere kan være andre personer (type=person) eller organisasjoner (type=organization) brukeren har rettighet til å representere. For avgivere av typen organization indikerer status parameteren om organisasjonen er slettet eller fremdeles aktiv.\nParameteren ReporteeID angir en unik id for aktuell avgiver, denne IDn kan benyttes i {my} parameteren i URL strukturen i APIet til å angi hvilken avgiver som operasjonen mot APIet utføres for. Eks. https://www.altinn.no/api/{reporteeID}/messages/.\nSend følgende GET-forespørsel mot APIet, og du vil få returnert en liste over avgivere brukeren har rettighet til å representere. Resultatet er begrenset til de 50 første elementene, se punkt 7 under for informasjon om hvordan du får fram de 50 neste)\nGET https://www.altinn.no/api/reportees HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Ved korrekt autentisering vil du få følgende svar fra APIet:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;find\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/reportees/{reporteeId}\u0026quot;, \u0026quot;isTemplated\u0026quot;: true }, \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/reportees\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;reportees\u0026quot;: [ { \u0026quot;ReporteeId\u0026quot;: \u0026quot;r50170460\u0026quot;, \u0026quot;Name\u0026quot;: \u0026quot;DALEKVAM OG BORGEN\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Foretak\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910672991\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Active\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/reportees/r50170460\u0026quot; }, \u0026quot;messages\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/r50170460/messages\u0026quot; } } }, { \u0026quot;ReporteeId\u0026quot;: \u0026quot;r50165842\u0026quot;, \u0026quot;Name\u0026quot;: \u0026quot;FOTLANDSVÅG OG VERMA REGNSKAP\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Foretak\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910454013\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Active\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/reportees/r50165842\u0026quot; }, \u0026quot;messages\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/r50165842/messages\u0026quot; } } }, { \u0026quot;ReporteeId\u0026quot;: \u0026quot;r50019105\u0026quot;, \u0026quot;Name\u0026quot;: \u0026quot;HÅKON TRANA\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Person\u0026quot;, \u0026quot;SocialSecurityNumber\u0026quot;: \u0026quot;05116602352\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/reportees/r50019105\u0026quot; }, \u0026quot;messages\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://altinn.no/api/r50019105/messages\u0026quot; } } } ] } }  Lenker fra reportee Hvert enkelt reportee-element har en hash tabell _links som inneholder lenker til beslektede elementer. Det er viktig at din applikasjon aktivt bruker disse lenkene, og ikke hardkoder en rekke URL-er i applikasjonen.\n_links: { \u0026quot;messages\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/910926551/messages\u0026quot; } }  Feltene i _links betyr følgende:\n messages - URI til liste over meldinger i meldingsboksen til den aktuelle organisasjonen.  _links kan bli utvidet med ytterligere flere relasjoner i fremtidige oppdateringer av APIet.\nHent enkelt melding med vedlegg For å hente ut en enkelt melding kan applikasjonen følge _self lenken som finnnes for hvert message element. Følgende request henter en enkelt melding fra brukerens meldingsboks.\nGET https://www.altinn.no/api/my/messages/a1507495 HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel respons fra API for message av typen FormTask:\n{ \u0026quot;MessageId\u0026quot;: \u0026quot;a1507495\u0026quot;, \u0026quot;Subject\u0026quot;: \u0026quot;RF-1028 Selvangivelse for aksjeselskap mv. 2012, Anonym ASA\u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Utfylling\u0026quot;, \u0026quot;LastChangedDateTime\u0026quot;: \u0026quot;2013-11-20T19:50:54.86\u0026quot;, \u0026quot;LastChangedBy\u0026quot;: \u0026quot;HÅKON TRANA\u0026quot;, \u0026quot;ServiceOwner\u0026quot;: \u0026quot;Skatteetaten\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2933\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 120806, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altin.no/api/my/messages/a1507495\u0026quot; }, \u0026quot;print\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a1507495/print\u0026quot;, \u0026quot;mime-type\u0026quot;: \u0026quot;application/pdf\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/2933/120806\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages......\u0026quot; }, \u0026quot;form\u0026quot;: [ { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760772\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;RF-1028 Selvangivelse for aksjeselskap mv. 2012, Anonym ASA\u0026quot; }, { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760773\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;RF-1016 Formue av skogseiendom 2012\u0026quot; } ], \u0026quot;attachment\u0026quot;: [ { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a1507495/attachments/282783\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;oppgaver\u0026quot;, \u0026quot;fileName\u0026quot;: \u0026quot;oppgaver.txt\u0026quot;, \u0026quot;encrypted\u0026quot;: false, \u0026quot;signinglocked\u0026quot;: false, \u0026quot;signedbydefault\u0026quot;: true, \u0026quot;filesize\u0026quot;: 16027 } ] } }  Eksempel respons fra API for message av typen Correspondence:\n{ \u0026quot;MessageId\u0026quot;: \u0026quot;a385571\u0026quot;, \u0026quot;Subject\u0026quot;: \u0026quot;Vedr. saksnr 201301840, journalnr 2013021622 \u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Ulest\u0026quot;, \u0026quot;LastChangedDateTime\u0026quot;: \u0026quot;2013-11-26T13:58:44.34\u0026quot;, \u0026quot;LastChangedBy\u0026quot;: \u0026quot;Testdepartementet\u0026quot;, \u0026quot;ServiceOwner\u0026quot;: \u0026quot;Testdepartement\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Correspondence\u0026quot;, \u0026quot;MessageSender\u0026quot;: \u0026quot;Brønnøy Kommune\u0026quot;, \u0026quot;Summary\u0026quot;: \u0026quot;Vedr. saksnr 201301840, journalnr 2013021622\u0026quot;, \u0026quot;Body\u0026quot;: \u0026quot;\u0026lt;p\u0026gt;Vedr. saksnr 201301840, journalnr 2013021622\u0026lt;/p\u0026gt;\\n\u0026lt;p\u0026gt;Tillatelse til tiltak. Gnr 127 bnr 506, Skarelien 35.\u0026lt;/p\u0026gt;\\n \\n\u0026lt;p\u0026gt;Klikk under for å åpne dokumentet. \u0026lt;/p\u0026gt;\\n\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2479\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 2, \u0026quot;ArchiveReference\u0026quot;: \u0026quot;AR3513210\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a385571\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/correspondence/2479/2\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/Pages......\u0026quot; }, \u0026quot;attachment\u0026quot;: [ { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a385571/attachments/187938\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;Tiltak_201301840\u0026quot;, \u0026quot;fileName\u0026quot;: \u0026quot;Tiltak_201301840.pdf\u0026quot;, \u0026quot;encrypted\u0026quot;: false, \u0026quot;signinglocked\u0026quot;: false, \u0026quot;signedbydefault\u0026quot;: true, \u0026quot;filesize\u0026quot;: 967038 } ], \u0026quot;archivereference\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/b3513210\u0026quot; }, }  Message lenker Message-element inneholder en hash tabell _links som inneholder lenker til beslektede elementer.\n\u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495\u0026quot; }, \u0026quot;print\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/print\u0026quot;, \u0026quot;mime-type\u0026quot;: \u0026quot;application/pdf\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/metadata/formtask/2933/120806\u0026quot; }, \u0026quot;portalview\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/Pages/.......\u0026quot; }, \u0026quot;attachment\u0026quot;: [ { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/attachments/282783\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;oppgaver\u0026quot;, \u0026quot;fileName\u0026quot;: \u0026quot;oppgaver.txt\u0026quot;, \u0026quot;encrypted\u0026quot;: false, \u0026quot;signinglocked\u0026quot;: false, \u0026quot;signedbydefault\u0026quot;: true, \u0026quot;filesize\u0026quot;: 16027 } ], \u0026quot;form\u0026quot;: [ { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760772\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;RF-1028 Selvangivelse for aksjeselskap mv. 2012, Anonym ASA\u0026quot; }, { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760773\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;RF-1016 Formue av skogseiendom 2012\u0026quot; } ], \u0026quot;archivereference\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/b3513210\u0026quot; }, }  Feltene i _links betyr følgende:\n self - URI til representasjon av den enkelte meldingen. print - URI til utskriftsversjonen av et arkivert skjema eller et skjema under utfylling. Er kun gyldig for message elementer av typen \u0026ldquo;FormTask\u0026rdquo;. For \u0026ldquo;print\u0026rdquo; relasjoner er \u0026ldquo;mime-type\u0026rdquo; i de fleste tilfeller \u0026ldquo;application/pdf\u0026rdquo; men vil i noen tilfeller også være \u0026ldquo;application/text-html\u0026rdquo;. metadata - URI til metadata ressurs for den aktuelle meldingen. portalview - URI til portalpresentasjonen av meldingen. Ved å følge lenken får brukeren opp Altinns presentasjon av elementet i Portalen (www.altinn.no). I portalen vil ressursen vises i den status den befinner seg i (Utfylling, Signering, Arkivert). form - URI til skjema knyttet til message av typen FormTask. attachment - URI til brukeropplastet vedlegg knyttet til skjema under utfylling eller vedlegg knyttet til melding fra etat. encrypted-parameter angir om vedlegget er kryptert. archivereference - URI til en arkiv-referanse for meldingen.  _links kan bli utvidet med ytterligere flere relasjoner i fremtidige oppdateringer av APIet.\nFiltrering av liste OData kan brukes til filtrering, paging og sortering i lister av elementer av alle typer.\nLister i APIet er begrenset i kode til å maksimalt inneholde 50 elementer.\nPaging Det er mulig å utføre paging ved å sende med OData parameteren skip (for eksempel $skip=50).\nGET https://www.altinn.no/api/my/messages?$skip=50 HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Filtrering Det er også mulig å filtrere listene som returneres basert på hvilke informasjonselementer de inneholder. For eksempel vil følgende request med parameterene $filter=ServiceOwner eq 'Skatteetaten'\u0026amp; $top=3 kun returnere de siste 3 meldinger fra Skatteetaten.\nGET https://www.altinn.no/api/my/messages?$filter=ServiceOwner eq 'Skatteetaten'\u0026amp;$top=3 HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Det er også mulig å bygge mer spesifikke filtre, for eksempel større/mindre enn på dato og navn på tjenesteeier.\nGET https://www.altinn.no/api/my/messages?$filter=CreatedDate gt DateTime'2018-01-22T00:00:00' and ServiceOwner eq 'Asker Kommune' HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Laste ned XML payload for skjema (skjemadata) Man kan nå laste ned (lese) XML-representasjon av Skjemadata. Skjemadata er representert i XML og vil være en egen ressurs som er lenket fra Form-ressursen. For å laste ned XML-representasjon av et skjema/underskjema kan man ta utgangspunkt i aktuelt message element og følge lenke form.\nEksempel:\nhttps://www.altinn.no/api/910621211/messages/a1685777\nResponsen på denne vil inneholde lenke\u0026reg; til de faktiske skjema, f.eks:\n\u0026quot;form\u0026quot;: [ { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/910621211/messages/a1685777/forms/1049574\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;RF-0004 Omsetningsoppgave for primærnæringene, Hovedoppgave, Årlig, 2012\u0026quot; } ]  Når du følger denne lenken vil respons inkludere en lenke til selve XML payload i form av lenke formdata:\n{ \u0026quot;Type\u0026quot;: \u0026quot;MainForm\u0026quot;, \u0026quot;DataFormatId\u0026quot;: \u0026quot;213\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: 10422, \u0026quot;ValidationStatus\u0026quot;: \u0026quot;NotValidated\u0026quot;, \u0026quot;Name\u0026quot;: \u0026quot;RF-0004 Omsetningsoppgave for primærnæringene, Hovedoppgave, Årlig, 2012\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/910621211/messages/a1685777/forms/1049574\u0026quot; }, \u0026quot;formdata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/910621211/messages/a1685777/forms/1049574/formdata\u0026quot;, \u0026quot;mime-type\u0026quot;: \u0026quot;application/xml\u0026quot; } } }  Lenken formdata vil returnere XML representasjon av Skjema, f.eks:\n\u0026lt;Skjema\u0026gt; ... \u0026lt;Termin-grp-2591 gruppeid=\u0026quot;2591\u0026quot;\u0026gt; \u0026lt;OppgaveType-datadef-5659 orid=\u0026quot;5659\u0026quot;\u0026gt;1\u0026lt;/OppgaveType-datadef-5659\u0026gt; \u0026lt;TerminType-datadef-20654 orid=\u0026quot;20654\u0026quot;\u0026gt;1\u0026lt;/TerminType-datadef-20654\u0026gt; \u0026lt;Termin-datadef-20655 orid=\u0026quot;20655\u0026quot;\u0026gt;011\u0026lt;/Termin-datadef-20655\u0026gt; \u0026lt;TerminAr-datadef-20656 orid=\u0026quot;20656\u0026quot;\u0026gt;2012\u0026lt;/TerminAr-datadef-20656\u0026gt; \u0026lt;/Termin-grp-2591\u0026gt; ... \u0026lt;/Skjema\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/autentisering/id-porten/",
	"title": "ID-porten",
	"tags": [],
	"description": "Dersom brukeren ikke er autentisert vil API-et redirecte applikasjonen din til ID-portens påloggingsside med responsivt design. I en app vil brukeren kunne velge mellom å autentisere seg ved bruk av av MinID eller BankID. Når brukeren er autentisert i ID-porten vil brukeren bli redirected tilbake til opprinnelig URL. Dette vil fungere for alle klienter som støtter cookies og HTTP-redirect.",
	"content": " Altinn API benytter ID-porten til autentisering av brukere. ID-porten er en felles infrastruktur for å logge inn til offentlige tjenester. I ID-porten er det lagt til rette for at innbyggerene selv kan velge hvilken elektronisk ID de ønsker å benytte. Det er mulig å logge inn med elektronisk ID fra MinID, BankID, Buypass og Commfides.\nID-porten sine autentiseringsløsinger bruker OpenSSO/OpenAM som fødereringsplattform. Fødereringen baserer seg på SAML2 OASIS-standarden.\nSingle Sign-On (SSO) SSO vil si at du sømløst gjenbruker autentiseringen din. Med ID-porten/MinID betyr det i praksis at dersom du har logget inn på en tjeneste hos for eksempel NAV, vil det ikke være nødvendig å gjøre en ny pålogging for å få tilgang til Altinn, eller andre tjenester som benytter ID-porten/MinID. I utgangspunktet er alle tjenester som benytter ID-porten/MinID en del av SSO.\nVi vil nå forklare hvordan du kan implementere støtte for autentisering ved bruk av ID-porten i din applikasjon.\n1. Innebygd nettleser For at din applikasjon skal kunne benytte web-baserte autentiserings protokoller som SAML til autentisering, må du la brukerne logge inn med en innebygd nettleser.\nÅ bygge inn en nettleser i din applikasjon er enkelt på de vanligste plattformene:\n Android: bruk WebView. iOS: bruk UIWebView  Du kan peke nettleseren til starturl for Altinn API: https://www.altinn.no/api/my/messages/\nDa vil brukeren automatisk bli videreført til ID-portens påloggingsside med responsivt design. På denne siden vil brukeren få valget mellom å logge inn med MinID eller BankID. BankID har egne applikasjoner for pålogging (iOS og Android) og disse vil automatisk åpnes og lukkes ved autentisering.\n2. Hente ut påloggings-token Etter vellykket pålogging i ID-porten, vil brukeren bli ført tilbake til Altinn og Altinn oppretter et sett med tokens i form av HTTP cookies i Set-Cookie header.\nNår Altinn har opprettet disse token burde din applikasjon hente de ut og deretter lukke den innebygde nettleseren.\nHer er eksempler på hvordan du kan hente ut token i HTTP cookie på de vanligste plattformene:\n Android: CookieManager#getCookie(URL) kan brukes til å hente ut cookier satt av Altinn. Detaljert eksempelkode på denne teknikken kan du finne her. iOS: Din applikasjon kan hente ut cookies satt av Altinn ved å bruke NSHTTPCookieStorage. Dette blir ofte kalt \u0026ldquo;cookie jar.\u0026rdquo;  NSHTTPCookie *cookie; NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (cookie in [cookieJar cookies]) { NSLog(@\u0026quot;%@\u0026quot;, cookie); }  Detaljert eksempelkode på denne teknikken for iOS finner du her.\n3. Videreføre påloggings-token i kall til Altinn API Tokenet .ASPXAUTH legges i HTTP header som \u0026ldquo;Cookie\u0026rdquo; i videre på kall til Altinn API:\nCookie: .ASPXAUTH=2AF7F203...., etc...  API nøkkelen må også legges ved i HTTP header slik:\nApiKey: myKey  API nøkkel får du etter registrering av din applikasjon.\n4. Autentisering ved integrasjon i andre portaler Det er mulig å integrere innhold i brukernes meldingsboks i Altinn i eksterne portaler ved å bruke Altinn API. Dette krever at den eksterne portalen også fødererer mot ID-porten og er medlem av samme Circle of Trust som Altinn.\nAltinn API benytter også CORS for ekstra sikkerhet ved kryssdomene forespørsler. For å integrere brukerens meldingsboks i Altinn i en ekstern nettside må dermed domenet til denne nettsiden ligge i Altinns CORS whitelist. Det er derfor nødvendig å registrere nettsiden som skal integrere Altinns meldingsboks. Bruk av Altinn API i eksterne nettsider er bare tilgjengelig for offentlige etater/institusjoner som er tjenesteeiere i Altinn.\nFor at kall mot Altinns API skal fungere fra eksterne sider må brukeren ha en sesjon både hos IDporten og hos Altinn. Ved innlogging med IDporten må man derfor benytte følgende redirect-løsning for å sikre at brukeren også har sesjon i Altinn. Om man logger brukeren inn med IDporten og kaller Altinn uten å bruke redirect, vil IDporten fjerne CORS-headerne som følger med, slik at Altinn ikke lenger har mulighet for å verifisere domenet mot de som er registrert hos oss.\nPer nå fungerer redirect bare med IDportens mekanismer, ikke med Altinn-innlogging.\nFlyten for redirect-løsningen for å få sesjon i Altinn: 1. Ekstern portal kontakter https://www.altinn.no/Pages/ExternalAuthentication/Redirect.aspx?returnUrl=https://www.minportal.no/portal\u0026amp;userToken=sha256-hash\n\u0026ldquo;sha256-hash\u0026rdquo; er hash av fødselsnummer på autentisert bruker på ekstern portal.\nUserToken er valgfri og brukes til å sikre at det ikke allerede eksisterer en sesjon i Altinn som tilhører en annen bruker enn den som er autentisert på ekstern portal.\n2. Brukeren blir sendt til Altinn\n2-1a. Med userToken angitt:\nDersom brukeren allerede er logget inn i ID-porten opprettes .ASPXAUTH cookie som inneholder sesjonsopplysninger nødvendige for REST-kall. Om det finnes en sesjon i Altinn for en annen bruker, vil denne logges ut og ny sesjon opprettes for brukeren i userToken.\n2-1b. Dersom bruker ikke er logget inn sendes bruker til innloggingsside og må logge inn.\n2-1c. Dersom samme bruker er logget inn i Altinn fra før valideres sesjon.\n2-2a. Uten userToken:\nDersom bruker allerede er logget inn i ID-porten opprettes .ASPXAUTH cookie som inneholder sesjonsopplysninger nødvendige for REST-kall.\n2-2b. Dersom bruker ikke er logget inn sendes bruker til innloggingsside 2-2c. OBS! Dersom bruker velger Altinn-innlogging vil man bli sendt tilbake til idporten for å autentisere seg med idporten.\n3\na. Bruker logger inn og det opprettes .ASPXAUTH-cookie som inneholder sesjonsopplysningene man trenger for ytterligere REST-kall\nb. Dersom bruker ikke logger inn, blir brukeren stående på innloggingsside\n4. Altinn sjekker om verdien i returnUrl (https://www.minportal.no/portal i dette eksempelet) er gyldig og ligger inne i CORS whitelist\na. Dersom domenet er gyldig gjennomføres redirect til den eksterne adressen\nb. Dersom domenet ikke er gyldig sendes bruker til «Min Meldingsboks» i Altinn Adressen eksterne portaler må bruke blir da:\nhttps://www.altinn.no/Pages/ExternalAuthentication/Redirect.aspx?returnUrl=URL_SOM_BRUKER_SKAL_SENDES_TILBAKE_TIL_ETTER_INNLOGGING  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/innledning/",
	"title": "Innledning",
	"tags": [],
	"description": "Altinns regelmotor tilbyr en alternativ måte å utføre utregning, validering og overføring av verdier mellom skjema.",
	"content": " Altinns regelmotor (Altinn Rule Engine/ARE) tilbyr en alternativ måte å utføre utregning, validering og overføring av verdier mellom skjema. Enkelt sagt er det en «motor» som kan opprette, lese, oppdatere og slette felter på tvers av flere ulike skjema (representert med xml). Samtidig kan den verifisere at skjema (xml-dokumentet) samsvarer med det som er spesifisert som lovlig (xsd-spesifikasjonen).\nRegelmotoren tilbyr et sett med regler som du som tjenesteutvikler kan benytte deg av. Dette gjør du ved å definere hvilke skjema og regler du vil bruke i et xml-dokument. Dokumentet må følge det oppsettet som det er bestemt at enn slik regelfil skal ha.\nTegnveiledning for denne håndboken I eksemplene i denne håndboken bruker vi ellipse-tegnet (…) for å markere at det på denne plasseringen skal være noe mer. Hva som skal stå der blir forklart i andre eksempler. Selve ellipse-tegnet skal ikke være med i regelfilen, og må fjernes dersom eksemplene skal brukes. Dette er gjort for at eksemplene i størst mulig grad skal vise bare det som blir forklart i hver enkelt eksempel.\nTa i bruk regelmotoren Før du kan ta i bruk regelmotoren må du ha opprettet en tjeneste og en utgave for skjemaet du tenker å bruke den på. Du må også ha en tjeneste og en utgave for alle underskjema du har tenkt å bruke. Alle skjema som du gjør bruk av i reglene dine må finnes tilgjengelig i tjenestens skjemasett for at regelen skal kunne slå til. Har du ikke lagt til skjemaet vil ikke regelfilen feile, men regler som bruker skjemaet vil ikke kunne tre i kraft.\nLage regelfil Regelfilen må lages i xml-format. Dersom du ikke kjenner til dette formatet bør du først lese innføring i xml. For at en xml-fil skal kunne godkjennes som en regelfil av Altinn må den følge en rekke regler for hvordan den er satt opp. Disse reglene er definert i Regelmotor.xsd.\nAltinn regelfilen må ha en rotnode med navn AltinnRuleEngine. Denne rotnoden må ha attributtene name og version definert. AltinnRuleEngine-elementet må inneholde nodene «Description», «Configuration» og «Rules» i akkurat den rekkefølgen.\n1. Rammestruktur for regelfilen\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot; ?\u0026gt; \u0026lt;AltinnRuleEngine name=\u0026quot;test\u0026quot; version=\u0026quot;1\u0026quot;\u0026gt; \u0026lt;Description\u0026gt; … \u0026lt;/Description\u0026gt; \u0026lt;Configuration\u0026gt; … \u0026lt;/Configuration\u0026gt; \u0026lt;Rules\u0026gt; … \u0026lt;/Rules\u0026gt; \u0026lt;/AltinnRuleEngine\u0026gt;  Description-noden blir brukt til å gi en beskrivelse av hele regelsettet som er definert i regelfilen. Innholdet her skal være en tekst.\n2. \u0026ldquo;Description\u0026rdquo;-noden\n\u0026lt;Description\u0026gt; This is used to give a description of the rule set. \u0026lt;/Description\u0026gt;  Sette opp hva som skal påvirkes Configuration Configuration-noden blir brukt til å fortelle hvilke skjema som skal brukes i regelsettet. Her kan du også legge til de kodelistene som du har tenkt å bruke.\nNoden kan inneholde fire elementer, Forms, Codelists, AttachmentTypes og FormDependencies.\nForms må alltid være der og må stå først. Codelists, AttachmentTypes og FormDependencies er valgfri. Ingen av disse nodene kan være brukt mer enn en gang.\n3. \u0026ldquo;Configuration\u0026rdquo;-noden\n\u0026lt;Configuration\u0026gt; \u0026lt;Forms\u0026gt; … \u0026lt;/Forms\u0026gt; \u0026lt;AttachmentTypes\u0026gt; … \u0026lt;/AttachmentTypes\u0026gt; \u0026lt;Codelists\u0026gt; … \u0026lt;/Codelists\u0026gt; \u0026lt;FormDependencies\u0026gt; … \u0026lt;/FormDependencies\u0026gt; \u0026lt;/Configuration\u0026gt;  Forms Forms-noden blir brukt til å fortelle hvilke skjemaer som blir brukt i regelsettet. Noden må inneholde minst ett Form-element. Du kan legge inn så mange Form-element du vil. Skjemaene du legger inn her må være inkludert i skjemasettet for hovedutgaven. Merk at regelfilen ikke vil feile om et skjema mangler, men regler som bruker skjemaet vil bli ignorert om skjemaet mangler.\nDersom du har et skjema som blir brukt av mange regler, kan du med fordel legge det til som standard. Dette gjør du ved å legge til attributtet default i Forms-noden med skjema-iden som verdi (se eksempelet over).\n   Figur 1 - Hvordan finne dataFormatId   Form-noden må inneholde attributtene «dataFormatId», «calculationEngine» og «validationEngine» for å være gyldig. DataFormatId er id-en for skjemaet, og denne vil du finne i xsd-en til skjemaet eller i TUL på utgavearbeidsflaten (se figur 1).\nCalculationEngine og validationEngine har begge de samme fire alternativene.\n   Alternativ Beskrivelse     AltinnRuleEngine Skjemaet skal bare bruke Altinns regelmotor   InfoPath Skjemaet skal bare bruke InfoPath   Both Skjemaet skal bruke både InfoPath og Altinn regelmotor   None Skjemaet skal ikke bruke noen av delene    calculationEngine blir brukt til å fortelle om skjemaet skal bruke InfoPath eller Altinns regelmotor for utregninger. validationEngine blir likeledes brukt for å fortelle hva som skal brukes til valideringer.\nI tillegg kan du bruke det valgfrie attributtet name. Dette attributtet vil ikke bli brukt av regelmotoren, men du kan legge inn navnet på skjemaet for å gjøre regelfilen enklere å lese.\n4. \u0026ldquo;Forms\u0026rdquo;- og \u0026ldquo;Form\u0026rdquo;-nodene\n\u0026lt;Forms default=\u0026quot;1\u0026quot;\u0026gt; \u0026lt;Form dataFormatId=\u0026quot;1\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot; validationEngine=\u0026quot;InfoPath\u0026quot; /\u0026gt; \u0026lt;Form dataFormatId=\u0026quot;2\u0026quot; calculationEngine=\u0026quot;Both\u0026quot; validationEngine=\u0026quot;None\u0026quot; /\u0026gt; \u0026lt;/Forms\u0026gt;  AttachmentTypes AttachmentTypes –elementet er valgfritt og brukes til å definere vedleggstyper som kan bli benyttet i tjenesten og som er brukt i regelmotoren for validering. Eksempel:\n\u0026lt;AttachmentTypes\u0026gt; \u0026lt;AttachmentType name=\u0026quot;AT01_Cycle01\u0026quot;/\u0026gt; \u0026lt;AttachmentType name=\u0026quot;AT02_Cycle01\u0026quot;/\u0026gt; \u0026lt;AttachmentType name=\u0026quot;AT03_Cycle01\u0026quot;/\u0026gt; \u0026lt;AttachmentType name=\u0026quot;AT04_Cycle01\u0026quot;/\u0026gt; \u0026lt;AttachmentType name=\u0026quot;AT06_Cycle01\u0026quot;/\u0026gt; \u0026lt;/AttachmentTypes\u0026gt;  Se utvidede beskrivelser for oppsett av vedleggsvalidering\nFormDependencies FormDependencies-noden blir brukt til å fortelle hvilke eksterne skjema som skal lastes inn som en del av skjemasettet (hvis tilgjengelig), og hvordan disse skal lastes. Noden må inneholde minst ett «FormDependency» element, men det er ingen begrensning på hvor mange elementer som kan legges inn.\nEksempel på oppsett:\n\u0026lt;FormDependencies\u0026gt; \u0026lt;FormDependency type=\u0026quot;FirstArchivedForFirstENK\u0026quot;\u0026gt; \u0026lt;Param name=\u0026quot;serviceCode\u0026quot; value=\u0026quot;123\u0026quot; /\u0026gt; \u0026lt;Param name=\u0026quot;serviceEdition\u0026quot; value=\u0026quot;1234\u0026quot; /\u0026gt; \u0026lt;Condition type=\u0026quot;Equals\u0026quot; type=\u0026quot;orid(9999)\u0026quot; value=\u0026quot;myValue\u0026quot; form=\u0026quot;111\u0026quot; /\u0026gt; \u0026lt;/FormDependency\u0026gt; \u0026lt;/FormDependencies\u0026gt;  FormDependency-elementene har et type-attributt som sier hvordan det eksterne skjemaet skal lastes inn. Pr. 30.09.2015 støttes kun FirstArchiveForFirstENK som en gyldig type.\nAvhengighetstypen FirstArchivedForFirstENK laster inn det mest nylig arkiverte elementet av en gitt type for det første enkeltmannsforetaket til den nåværende avgiveren. Hvis de gitte conditions er oppfylt og et gyldig skjema er funnet legges skjemasettet inn den vanlige listen med skjema som om det var en del av skjemasettet det jobbes med – og det kan skrives regler som benytter seg av dette skjema på samme måte som for andre skjema. Det er et krav at skjema som lastes tilhører samme tjenesteeier som tjenesten avhengigheten er definert i.\nFormDependency støtter også conditions på samme måte som øvrige regler i regelfilen.\nCodelists Codelists-elementet er valgfritt, men om du har det med så må det inneholde minst en Codelist-node. Dette elementet må du bruke dersom du vil ta i bruk kodelister i skjemaet. Codelist-noden må ha attributtene name og lang, og kan i tillegg ha det valgfrie attributtet version. Name brukes til å angi navnet på kodelisten, mens lang brukes til å angi hvilken språkversjon av kodelisten som brukes. Version kan brukes dersom du vil bruke en spesiell versjon av kodelisten. Dersom du utelater det attributtet vil siste versjon automatisk bli brukt.\n«Lang» har disse alternativene:\n   lang Språk     1033 Engelsk   1044 Bokmål   2068 Nynorsk    5. \u0026ldquo;Codelists\u0026rdquo;- og \u0026ldquo;Codelist\u0026rdquo;-nodene\n\u0026lt;Codelists\u0026gt; \u0026lt;Codelist name=\u0026quot;ASF_Land\u0026quot; lang=\u0026quot;1044\u0026quot; /\u0026gt; \u0026lt;/Codelists\u0026gt;  Sette opp regler Rules-noden blir brukt til å sette opp de reglene du vil bruke. Denne noden er obligatorisk og det kan bare være en av den. Den må inneholde minst en Rule-node, men det er ingen øvre grense. Det kan være lurt å legge inn en kommentar over hver regel der du forteller hva regelen skal gjøre.\nRule «Rule»-noden må ha det obligatoriske attributtet type og kan i tillegg ha det valgfrie attributtet description. Description-noden blir brukt til å gi en beskrivelse av regelen. Type-noden bruker du til å fortelle hvilken type regel dette er.\n6. \u0026ldquo;Rules\u0026rdquo;- og \u0026ldquo;rule\u0026rdquo;-nodene\n\u0026lt;Rules\u0026gt; \u0026lt;!-- Comments can be useful for explaining what the rule is for --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;This is a rule to set the value of a field\u0026quot;\u0026gt; … \u0026lt;/Rule\u0026gt; \u0026lt;/Rules\u0026gt;  For Rules har type-attributtet disse alternativene:\nOverføringer:\n CalculateResult - Gjør utregninger og overfører resultatet til et felt i skjema. RemoveFieldElement - Fjerner et felt dersom ett eller flere vilkår er til stede. RemoveParentPost - Fjerner foreldreposten til et gitt felt dersom ett eller flere vilkår er til stede. SetFieldValue - Setter verdi til et felt basert på ett eller flere vilkår. TransferResult - Setter resultatet av en utregning som verdi i et felt. TransferValue - Flytter en verdi fra et felt til et annet felt. TransferTransformedResult - Setter sammen verdiene fra flere felter og overføre resultatet til ett enkelt felt som en kommaseparert liste. TransferSingleExternalValue - Overfører en gitt ekstern verdi, dette er verdier som ikke ligger som en del av skjemadataen, men som kan settes eksplisitt i implementasjonen for f.eks lasting eksterne skjema.  Valideringer:\n SimpleValidation - Sjekker at et felt følger de vilkår som du har satt opp.  WebSA-spesifikke regeltyper:\n websa:InternalRF1224Calculations websa:TransferSumToChildcare websa:TransferFromNO1ToRF1224 websa:TransferSumToTravelDeduction websa:TransferFromRF1084ToRF1030 websa:TransferSumToWizard websa:TransferFromRF1084ToRF1175 websa:ValidatePost337StandardDeductionTempStay websa:TransferFromRF1125ToRF1030 websa:ValidateRF1219TransferToWizard websa:TransferSumFrom0402 websa:TransferFromRF1224ToRF1030 websa:ValidateRF1224BelongsToPost0402 websa:ValidateOnePrimaryDwelling  En «Rule»-node og dens innhold definerer en regel, og bestemmer hva denne regelen skal gjøre. Elementene som er tillatt inne i Rule-noden er Source, Target, Param, Condition, Texts, ErrorTextValueFields og caption. Ingen av disse elementene er obligatoriske og foruten «Texts» har de ingen øvre grense på antall. «Texts» kan det bare være en av. Disse elementene bruker du til å fortelle hvordan regelen skal virke. Selv om ingen av dem er obligatoriske, vil det være nødvendig med noen av dem avhengig av regelen du vil lage.\n7. Innhold i «Rule»-noden\n\u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot;\u0026gt; \u0026lt;Source/\u0026gt; \u0026lt;Target/\u0026gt; \u0026lt;Param/\u0026gt; \u0026lt;Condition/\u0026gt; \u0026lt;ErrorTextValueFields/\u0026gt; \u0026lt;caption/\u0026gt; \u0026lt;Texts\u0026gt; … \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt;  Source Source-noden blir brukt til å fortelle om hvilken kilde som skal brukes. «Form»-attributtet forteller hvilket skjema det er snakk om. «Field» forteller hvilket felt det er. Du kan bruke enten OR-id-attributtet, eller XPath for å identifisere feltet. Eventuelt kan du bruke «property(…)» for å hente fra et egendefinert felt («my»-felt). «addFields»-attributtet blir brukt dersom verdien fra felter skal summeres før overføring. «subtractFields»-attributtet blir brukt dersom verdien fra felter skal trekkes fra før overføring. «multiplyFields»-attributtet blir brukt dersom verdien fra felter skal multipliseres før overføring. «divideFields»-attributtet blir brukt dersom verdien fra felter skal divideres før overføring. Funksjonaliteten til addFields, subtractFields, multiplyFields og divideFields er slik at verdien fra alle feltene som ligger i hver liste vil bli «påført» totalverdien før overføring. Det vil si at alle feltene i addFields vil bli summert og så vil alle feltene i subtractFields bli trukket fra summen man fikk fra addFields. Så vil den nye summen bli multiplisert med alle feltene i multiplyFields og så til slutt vil den nye summen bli dividert med alle feltene i divideFields.\nEksempel:\nDet skal overføres en verdi fra felt1 til felt2. Og verdien skal adderes med 2 felter (felt3 og felt4) og multipliseres med 2 felter (felt5 og felt6) og så til slutt divideres med 2 felter (felt7 og felt8). Da vil det matematiske utrykket for denne overføringen bli slik:\nFelt2 = (((felt1 + felt3 + felt4) * felt5 * felt6) / felt7) / felt8\n«SumRecurringFields» forteller om overføringen skal summere repeterende felt eller ikke før overføringen. «Multiple» forteller om modergruppa kan få verdier fra flere kilder. Dersom regelen skal bruke skjemaet du har satt til å være standardskjema i Forms-noden (se Forms side 10), er det ikke nødvendig å oppgi et source-element.\n8. \u0026ldquo;Source\u0026rdquo;-noden\n\u0026lt;Rule type=\u0026quot;TransferResult\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;1\u0026quot; field=\u0026quot;/Skjema/Utregninger/Utregning1/belop1\u0026quot; addFields=\u0026quot;/Skjema/Utregninger/Utregning1/belop2\u0026quot; subtractFields=\u0026quot;/Skjema/Utregninger/Utregning1/belop3\u0026quot; multiplyFields=\u0026quot;/Skjema/Utregninger/Utregning1/belop4\u0026quot; divideFields=\u0026quot;/Skjema/Utregninger/Utregning1/belop5\u0026quot; multiple=\u0026quot;false\u0026quot; sumRecurringFields=\u0026quot;false\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt;  Target Target-noden blir brukt til å fortelle om målet for regelen. «Form»-attributtet forteller hvilket skjema det er snakk om. «Field» forteller hvilket felt det er. «Index» er indeksen til målfeltet. «Value» brukes om du vil sette en fast verdi.\n9. \u0026ldquo;Target\u0026rdquo;-noden\n\u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot;\u0026gt; \u0026lt;Target form=\u0026quot;2\u0026quot; field=\u0026quot;/Skjema/Adresseopplysninger/Postadresse/Adresse2\u0026quot; index=\u0026quot;1\u0026quot; value=\u0026quot;2\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt;  Param Param-noden blir brukt til å gi parameter til regelen. Denne har to attributter, som begge er obligatoriske. «Name»-attributtet blir brukt til å fortelle hva slags parameter dette er. Det er bare et begrenset antall navn som er lovlig å ha her. Se tabellen under for en oversikt. «Value»-attributtet brukes for å fortelle hvilken verdi denne parameteren har.\n10. \u0026ldquo;Param\u0026rdquo;-noden\n\u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot;\u0026gt; \u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt;  Gyldige verdier i name-attributtet til \u0026ldquo;Param\u0026rdquo;:\n IgnoreGUID - Denne bestemmer om regelmotoren skal ta hensyn til sourceFormGuid når den gjør overføringen. RemoveOnMismatch - Forteller om målfeltet skal bli tømt dersom betingelsene ikke inntreffer. RemoveFieldIfConditionsFail - Dette avgjør om felt som ikke innfrir betingelsene for verdioverføring skal slettes. SignStorageHint - Denne forteller om den overførte verdien skal bli lagret spesifikt som en positiv eller negativ verdi. TransferRecurringFields - Avgjør om repeterende felt skal overføres. TransferType - Avgjør typen overføring. AlwaysRun - Bestemmer om en overføringsregel i tillegg til å kjøres i utregningsprosessen også skal kjøres i valideringsprosessen. IgnorePrefill - Avgjør om et felt kan slettes selv om det er merket som pre-utfylt. RemoveDirtyField - Avgjør om såkalte «skitne felt» (felter som har blitt skrevet til i løpet av prosessen) skal fjernes eller ikke. DoNotIgnoreZeroValue - Avgjør om verdien 0 skal overføres eller ikke. InsertEmptyIfNotCalculated - Avgjør om 0 skal brukes som verdi dersom skjemaet ikke inneholder et eller flere felter som er nødvendige for å regne ut verdien i feltet. PercentageTransfer - Denne definerer hvor stor del av verdien som skal overføres. PurgeOldTransfers - Denne brukes når det er ønskelig at gamle overføringer skal slettes før nye gjennomføres. SetValueForMultiplePosts - Denne brukes til å definere om oppdatering av feltverdi skal gjøres til alle målfelter i samme skjema.  WebSA-spesifikke:\n IndustryTypes MaxDeduction\n ValueType MaxDistance\n MinimumTollAndFerryDeduction\n Deductible\n NormalRate\n OverMaxDistanceRate\n BaseRate  For detaljer se Regler.\nCondition «Condition»-noden brukes til å fortelle hvilke betingelser som må være til stede for at regelen skal bli tatt i bruk. «Type»-attributtet er det eneste som er obligatorisk. Her er det et begrenset sett med typer du har lov til å bruke (se tabellen under). «Check»-attributtet bruker du til å fortelle hvilke felt som skal sjekkes. Skal du ha flere felter, må du skille de med komma. «Value»-attributtet brukes i de betingelsene som krever sammenligning med en verdi. «Codelist»-attributtet bruker du til å fortelle hvilke kodelister det er snakk om i de betingelsene som handler om kodelister. «Form»-attributtet skal fortelle hvilket skjema det er snakk om. «FieldIndex» skal du bruke til å legge inn indeks for feltet som betingelsen gjelder.\n11. \u0026ldquo;Condition\u0026rdquo;-noden\n\u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot;\u0026gt; \u0026lt;Condition type=\u0026quot;AnyFieldEquals\u0026quot; check=\u0026quot;/Skjema/Adresseopplysninger/Postadresse/Land\u0026quot; codelist=\u0026quot;ASF_Land\u0026quot; fieldindex=\u0026quot;1\u0026quot; form=\u0026quot;1\u0026quot; value=\u0026quot;NO\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt;  Gyldige verdier i type-attributtet for \u0026ldquo;Condition\u0026rdquo;:\n   Navn Blir sann dersom     AnyFieldEquals Et av de gitte feltene har samme verdi som den gitte verdi   AnyFieldNotEquals Et av de gitte feltene har ikke samme verdi som den gitte verdi   AnyFieldHasValue Et av de gitte feltene har en verdi.   AnyFieldHasValueIgnoreZero Et av de gitte feltene har en verdi, og 0 er ikke en verdi.   AnyFieldIsEmpty Et av de gitte feltene er tomme.   AnyFieldIsMissing Et av de gitte feltene mangler i skjema-xml-en.   AnyFieldIsPositive Et av de gitte feltene har en positiv verdi.   AnyFieldExists Et av de gitte feltene eksisterer.   CodeExistsInCodelist En verdi finnes i en kodeliste.   CodeNotInCodeList Den gitte koden ikke finnes i den gitte kodelisten.   ContainsAny Feltet inneholder en av de gitte verdiene.   Equals Feltet har samme verdi som den gitte verdi.   NotEquals Feltet ikke har samme verdi som den gitte verdi.   Exists Feltet eksisterer i skjema-xml-en.   GreaterThan Feltets verdi er større enn den gitte verdi.   HasAnyForm Skjemasettet har et av de gitte skjemaene.   HasForm Skjemasettet inneholder det gitte skjemaet.   HasValue Feltet har en verdi. Tallet 0 er regnet som en verdi.   HasValueIgnoreZero Feltet har en verdi Tallet 0 er ikke regnet som en verdi.   IsEmpty Feltet er tomt eller har 0 som verdi.   IsEmptyWithZeroValue Et felt er tomt. Tallet 0 blir regnet som en verdi.   IsNegative Feltet har en negativ verdi.   IsNonValidSSN Feltet har en verdi som ikke passer formatet for personnummer. (Sjekker ikke om noen faktisk har dette personnummeret)   IsPositive Feltet har en positiv verdi, og 0 er ikke regnet som positiv verdi.   IsPositiveIncludingZero Feltet har en positiv verdi, og 0 er regnet som positiv verdi.   LessThan Feltets verdi er mindre enn den gitte verdi.   MissingForm Skjemasettet ikke inneholder det gitte skjemaet.   SumEquals Summen av de gitte felt er lik den gitte verdi.   SumNotEquals Summen av de gitte felt ikke er lik den gitte verdi.   SumNotEqualsWithRange Dersom summen av feltene ikke er innenfor et verdiområde.   ValueFoundMoreThanOnceInFields Den gitte verdien finnes i mer enn ett av feltene.   ValueNotInCodeList Feltet har en verdi som ikke er lik en verdi fra den gitte kodelisten.   IsValidSSN Feltet inneholder en verdi som passer til formatet for personnummer. (Sjekker ikke om noen faktisk har dette personnummeret)   IsNonValidSSN Feltet ikke inneholder en verdi som passer til formatet for personnummer.   IsValidOrgNr Feltet inneholder en verdi som passer formatet for organisasjonsnummer.   IsNonValidOrgNr Feltet inneholder en verdi som ikke passer formatet for organisasjonsnummer.   IsNonValidEmail Sjekker om verdien er en gyldig epostadresse.   IsMissing Feltet ikke finnes i skjema-xml-en   IsPrefilled Feltet er forhåndsutfylt.   NotPrefilled Feltet ikke er forhåndsutfylt(virker bare i selvangivelsen [APE-skjema])   AnyFieldNotEquals Et av de gitte feltene ikke har samme verdi som den gitte verdi   AnyFieldExists Et av de gitte feltene eksisterer.   NotExists Feltet ikke eksisterer.   NoneFieldHasValue Ingen av feltene har en verdi.   HasAttachment Sjekker om et gitt vedlegg finnes for et skjema.   HasAnyAttachment Sjekker om noen av vedleggene eksisterer fra en gitt liste av vedlegg   MissingAttachment Sjekker om et gitt vedlegg mangler for et skjema   MatchPattern Feltet matcher et regulært uttrykk.   DoesNotMatchPattern Feltet ikke matcher et regulært uttrykk.   NotEqualAcrossMultipleForms En verdi ikke er lik over flere skjema.    For detaljer se Betingelser.\nTexts Texts-noden blir brukt til å legge inn valideringstekster som skal bli vist dersom valideringen feiler. Texts-noden skal inneholde «Text»-noder med den teksten du vil ha. «Lang»-attributtet er obligatorisk for text-nodene og lovlige verdier er «1033» (engelsk), «1044» (bokmål) og «2068» (nynorsk).\n12. \u0026ldquo;Texts\u0026rdquo;- og \u0026ldquo;Text\u0026rdquo;-nodene\n\u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot;\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;You have not filled out the necessary text.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt;Du har ikke fylt ut nødvendig tekst.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt;Du har ikkje fylt ut nødvendig tekst.\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt;  ErrorTextValueFields ErrorTextValueFields-noden kan du bruke dersom du vil bruke verdier fra felt i feilmeldingsteksten. I denne noden definerer du hvilke felt du vil hente verdier fra. Deretter må du legge inn markør i teksten der du vil ha verdien fra feltet vist. Dette gjør du ved å bruke {0}, der tallet refererer til indeksen for feltet i den kommaseparerte lista du lager i «fields». {0} vil da bety det første feltet du har listet opp, {1} vil bety det andre feltet du har listet opp og så videre.\n13. \u0026ldquo;ErrorTextValueField\u0026rdquo;- og \u0026ldquo;Text\u0026rdquo;-nodene\n\u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot;\u0026gt; \u0026lt;ErrorTextValueFields fields=\u0026quot;/Skjema/Adresseopplysninger/Postadresse/Land\u0026quot;\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;The value {0} is not valid.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt;Verdien {0} er ikke gyldig.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt;Verdien {0} er ikkje gyldig.\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt;  Caption Caption blir brukt til å legge inn hjelpetekst ved valideringer.\n14. \u0026ldquo;Caption\u0026rdquo;-nodene\n\u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot;\u0026gt; \u0026lt;caption\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;The value is not valid.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt;Verdien er ikke gyldig.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt;Verdien er ikkje gyldig.\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/caption\u0026gt; \u0026lt;/Rule\u0026gt;  Kombinere nodene til en regelfil En regelfil får du ved å kombinere alle elementene nevnt over på rett måte i forhold til det du ønsker.\n15. Eksempel på en enkel regelfil\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;AltinnRuleEngine name=\u0026quot;Testtjeneste\u0026quot; version=\u0026quot;Beta\u0026quot;\u0026gt; \u0026lt;Description\u0026gt; Dette er et eksempel på å sette verdi i et felt ved hjelp av en regel. \u0026lt;/Description\u0026gt; \u0026lt;Configuration\u0026gt; \u0026lt;Forms\u0026gt; \u0026lt;Form name=\u0026quot;Testtjenesteskjema\u0026quot; dataFormatId=\u0026quot;1\u0026quot; validationEngine=\u0026quot;AltinnRuleEngine\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot; /\u0026gt; \u0026lt;/Forms\u0026gt; \u0026lt;/Configuration\u0026gt; \u0026lt;Rules\u0026gt; \u0026lt;!-- For å sette verdien 0 i felt «Utbetaling1» dersom felt \u0026quot;Krav1\u0026quot; ikke har noen verdi --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;For å sette verdi om den mangler\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;1\u0026quot; /\u0026gt; \u0026lt;Target form=\u0026quot;1\u0026quot; field=\u0026quot;/Skjema/Tilbakebetaling/Utbetaling/Utbetaling1\u0026quot; value=\u0026quot;0\u0026quot; /\u0026gt; \u0026lt;Condition type=\u0026quot;IsMissing\u0026quot; check=\u0026quot;/Skjema/Tilbakebetaling/Krav/Krav1\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;/Rules\u0026gt; \u0026lt;/AltinnRuleEngine\u0026gt;  Dette eksempelet viser en enkel regelfil som bruker ett enkelt skjema. Den har en regel som setter en verdi i et felt («Utbetaling1») dersom et annet felt mangler («Krav1»).\nEksempel med flere skjema 16. Eksempel på regelfil med to skjema og to regler\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;AltinnRuleEngine name=\u0026quot;TestTjeneste\u0026quot; version=\u0026quot;Beta\u0026quot;\u0026gt; \u0026lt;Description\u0026gt; Dette er et eksempel på å sette verdi i et felt ved hjelp av en regel. Og flytte en verdi fra et skjema til et annet med en annen regel. \u0026lt;/Description\u0026gt; \u0026lt;Configuration\u0026gt; \u0026lt;Forms\u0026gt; \u0026lt;Form name=\u0026quot;Testtjenesteskjema\u0026quot; dataFormatId=\u0026quot;1\u0026quot; validationEngine=\u0026quot;AltinnRuleEngine\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot; /\u0026gt; \u0026lt;Form name=\u0026quot;Testtjeneste underskjema1\u0026quot; dataFormatId=\u0026quot;2\u0026quot; validationEngine=\u0026quot;AltinnRuleEngine\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot; /\u0026gt; \u0026lt;/Forms\u0026gt; \u0026lt;/Configuration\u0026gt; \u0026lt;Rules\u0026gt; \u0026lt;!-- For å sette verdien 0 i felt «Utbetaling1» dersom felt «Krav1» ikke har noen verdi --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;For å sette verdi om den mangler\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;1\u0026quot; /\u0026gt; \u0026lt;Target form=\u0026quot;1\u0026quot; field=\u0026quot;/Skjema/Tilbakebetaling/Utbetaling/Utbetaling1\u0026quot; value=\u0026quot;0\u0026quot; /\u0026gt; \u0026lt;Condition type=\u0026quot;IsMissing\u0026quot; check=\u0026quot;/Skjema/Tilbakebetaling/Krav/Krav1\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- Flytte verdi fra felt «Navn» i skjema 2 til felt «Navn» i skjema 1 --\u0026gt; \u0026lt;Rule type=\u0026quot;TransferValue\u0026quot; description=\u0026quot;\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;2\u0026quot; field=\u0026quot;/Skjema/Personopplysninger/Navn\u0026quot; sumRecurringFields=\u0026quot;false\u0026quot; multiple=\u0026quot;false\u0026quot; /\u0026gt; \u0026lt;Target form=\u0026quot;1\u0026quot; field=\u0026quot;/Skjema/Ansvarlig/Navn\u0026quot; index=\u0026quot;0\u0026quot; /\u0026gt; \u0026lt;Condition type=\u0026quot;HasValue\u0026quot; check=\u0026quot;/Skjema/Personopplysninger/Navn\u0026quot; form=\u0026quot;2\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;/Rules\u0026gt; \u0026lt;/AltinnRuleEngine\u0026gt;  Dette eksempelet viser en regelfil som har fått en regel og et skjema i tillegg til første eksempel. Den nye regelen sjekker først om feltet «Navn» i skjema 2 har en verdi, og dersom den har en verdi blir denne verdien kopiert til felt «Navn» i skjema 1.\nRekkefølge på regler Reglene vil bli utført i den rekkefølgen de står i regelfilen. Derfor er det viktig at du setter de opp i den rekkefølgen som passer for ditt formål. For eksempel er det viktig å tenke på rekkefølgen dersom flere regler bruker verdien fra samme felt. Dersom den ene regelen setter en verdi i feltet og en annen regel bruker verdien fra det samme feltet, kan resultatet bli forskjellig avhengig av rekkefølgen det skjer på. Tenk deg at regel 1 henter verdi fra A og legger den sammen med verdi fra B og legger resultatet i C. Regel 2 trekker 100 fra verdien i B dersom A er større enn 10. Dersom regel 1 kjører først vil ikke regel 2 ha noen innvirkning på summen som blir lagt i C. Dersom regel 2 kjører først vil regel 1 bruke de verdiene som er resultat av regel 2.\nRegel 1 kjører før regel 1:\n   Start Etter at regel 1 er kjørt Etter at regel 2 er kjørt     A = 20\nB = 1800\nC = 0 A = 20\nB = 1800\nC = 1820 A = 20\nB = 1700\nC = 1820    Regel 2 kjører før regel 1:\n   Start Etter at regel 2 er kjørt Etter at regel 1 er kjørt     A = 20\nB = 1800\nC = 0 A = 20\nB = 1700\nC = 0 A = 20\nB = 1700\nC = 1720    Bruke regelfilen i en tjenesteutgave For å ta i bruk regelfilen i en tjenesteutgave må du laste opp filen i utgaven. Dette gjør du ved å gå inn på Metadatafiler-siden.\n Lenke til metadatafiler   Inne på «Metadatafiler»-siden så må du først sjekke ut, velge «Regler og kalkyler (for Altinn regelmotor)» og så klikke på «Browse»-knappen. Du finner så fram til der du har lagret filen og laster den opp. Filen vil da dukke opp under «Metadatafiler» nederst på siden. Deretter må du sjekke inn for å lagre endringen. Neste gang du migrerer tjenesteutgaven vil regelfilen følge med.\n Side for metadatafiler   Det blir ikke gjort noen validering av filen du laster opp. Det er derfor fullt mulig å laste opp en feilaktig regelfil. Vær derfor nøye med å sjekke at regelfilen din er korrekt.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/innsyn/",
	"title": "Innsyns­tjenester",
	"tags": [],
	"description": "Oppslag i datakilder som ligger utenfor Altinn",
	"content": " Hente data ved hjelp av innsynstjeneste URI-en bygges opp ved hjelp av avgiver og tjenestekode/tjenesteutgavekode som unikt identifiserer en spesifikk tjeneste i Altinn. Siden man i teorien kan få ut mange datatyper på mange formater, er responsen definert som streng.\nI praksis er det mulig å angi om man ønsker xml eller json i queryOptions, men det er opp til eier av tjenesten å definere mulighetsrommet siden responsen genereres av kode som tjenestens eier installerer i Altinn.\nGET https://www.altinn.no/api/{who]/lookup/{servicecode}/{serviceeditioncode}?queryOptions={options} HTTP/1.1 ApiKey: myKey  Tom eksempelrespons:\n\u0026lt;xml\u0026gt; ... \u0026lt;/xml\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/",
	"title": "Integrasjon",
	"tags": [],
	"description": "Dokumentasjon for systemintegrasjon mot Altinn.",
	"content": "Implementasjonsguidene for integrasjon kan benyttes som veiledning for hvordan systemer skal integreres mot Altinn.\n\rGenerelt\r\rGenerelt om Altinns grenesesnitt for integrasjon\n\rTjenesteeiere\r\rDokumentasjon for hvordan tjenesteeiere kan ta i bruk Altinn grensesnitt\n\rSluttbrukere\r\rDokumentasjon for hvordan sluttbrukere kan ta i bruk Altinn grensesnitt.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/generelt/feil-og-mangler/",
	"title": "Kjente feil og mangler",
	"tags": [],
	"description": "Kjente feil og funksjonalitet som ikke ennå er implementert i REST-apiet",
	"content": " Kjente feil Mangler  Det er kun mulig å legge meldinger sendt til organisasjoner i søppelbøtten via REST tjenesten. Pr i dag finnes ikke denne muligheten via Webservice   Never gonna give you up!   "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/kom-i-gang/",
	"title": "Kom i gang",
	"tags": [],
	"description": "Installasjon og klargjøring, Citrix, sentral funksjonalitet, statuser og beskrivelse av de ulike arbeidsflatene i TUL.",
	"content": " Forutsetninger og konfigurasjon Tjenesteutviklingsløsningen er basert på SharePoint Server 2013. Du vil kunne nå TUL fra din lokale PC via Citrix fjernstyringsprogram. Citrix er en klient som installeres og lar deg åpne fjernprogrammer som om de skulle ligget på din egen maskin. Dessuten er dette en sikker løsning for fjernarbeid. Citrix vil ha en Office-installasjon med programmer som blant annet InfoPath og Microsoft Visual Studio Tools for Applications (Visual Studio 2008 med .NET 3.5).\nFor å ta i bruk TUL for første gang må du bestille brukertilgang til miljø. Du må også installere en Citrix-klient på din lokale PC.\nBruker bestilles hos tjenesteeier@altinn.no.\nTekniske utviklere med behov for å utvikle mappere, XSLT for splitt/gjenbruk av data eller tilstandsmaskiner, kan få tilgang til et utviklingsmiljø med Visual Studio og TFS via et ikon på Citrix arbeidsflaten. Kun de som er delegert tilgang vil ha dette ikonet tilgjengelig. Tilgang kan bestilles hos tjenesteeier@altinn.no.\nInstallasjon og klargjøring For å ta i bruk TUL må man som nevnt ha installert en Citrix klient.\nInstallasjon av Citrix Dersom Citrix-klient er installert fra før kan dette kapittelet hoppes over. Hvis du har en gammel versjon av Citrix allerede installert, bør denne fjernes før du installerer ny versjon.\nGå til https://tul.altinn.no\nI nettleseren vises bilde for pålogging til TUL. Tast inn brukernavn og passord og klikk på Log on.\n Figur 4 – Innlogging Citrix   Dersom Citrix-klienten ikke er installert på maskinen vil følgende skjermbilde vises:\n Figur 5 – Nedlasting og innstallering av Citrixklient   Klikk på Install for å starte nedlasting og innstallering av Citrix-klient. Får du denne siden og allerede har innstallert denne versjonen av Citrix, klikk «Log on».\nVelg Kjør (Run) i dialogboksen som kommer opp. Velg Kjør (Run) dersom ekstra sikkerhetsvarsel kommer opp. Klienten installeres automatisk.\n Dersom nedlastingen og installasjonen har tatt tid, kan sesjonen din ha gått ut på tid. Velg i så fall å logge på på nytt. Dersom du blir spurt om å laste ned klienten på nytt, velg Log on. Du blir nå tatt til Citrix verktøylinje (antall ikoner varierer fra bruker til bruker):\n Figur 6 - Første gang du kommer inn i Citrix vil skrivebordet være tomt   Første gang du kommer inn i Citrix vil skrivebordet være tomt. Du må legge inn de programmene du ønsker ved å klikke på pluss-tegnet til venstre.\n Figur 7 - Klikk på de programmene du ønsker å legge til skrivebordet.    Figur 8 - De programmene som allerede ligger på skrivebordet vil være market med grønt avkryssing.    Figur 9 – Citrix skriverbord    Start TUL SharePoint   Klikk Internet Explorer for å åpne TUL SharePoint. Dersom en lisensadvarsel viser seg, trykk OK (Allow).\nEt vindu vil åpne seg med Internet Explorer. Dersom ikke nettleseren åpner http://tul.altinn.basefarm.net automatisk må du angi dette i nettleseren.\nDet skal være tilstrekkelig å logge seg på Citrix, men hvis innlogging er påkrevd, benytter du samme bruker som du benyttet tidligere. Husk å benytte prefikset altinntul\\ slik at brukernavn blir f.eks. altinntul\\ola.nordmann. Dette er ikke pråkrevd, men en god vane er å bruke domeneprefiks, da dette er tiltenkt skrudd på etterhvert.\nKontroller at det står Trusted sites nederst i nettleservinduet:\n Figur 10 – Trusted sites   Hvis ikke dette er angitt vil det stå Internet i stedet og du må legge til TUL SharePoint som en sikker side: For å legge til TUL i nettleserens Trusted Sites, velg Tools Internet Options. Et vindu åpnes med innstillinger. Velg skillearket Security. Trykk på Sites-knappen, et nytt vindu åpnes. Fyll inn http://tul.altinn.basefarm.net under Add this website to the zone dersom det ikke er fylt inn allerede, og trykk Add. Avslutt og kontroller at det nå står Trusted sites nederst i nettleservinduet.\nDersom installasjonen har gått smertefritt, vil TUL SharePoint kunne åpnes ved å klikke på Internet Explorer i Citrix arbeidsflaten.\nDet er verdt å merke seg at første gangen man åpner en fildialog i en av applikasjonene i TUL, vil Citrix gi deg et spørsmål om du vil gi tilgang til din lokale disk på datamaskinen du logger på fra. Her kan du velge enten nei, lese eller full tilgang. Hvis du ved et senere tidspunkt vil endre dette, må du høyreklikke på ICA-client ikonet i høyre hjørnet på din lokale datamaskin og velge å endre access-innstillinger.\nCitrix arbeidsflate Etter innlogging i Citrix presenteres du med et antall ikoner. Antall tilgjengelige applikasjoner avhenger av hvilke rettigheter du har i TUL, samt hvilke oppgaver du er tiltenkt å utføre.\n7-zip filemanger Dette er et alternativ til zip-funksjonaliteten i vanlig windows utforsker.\nCommand prompt Dette er kommandolinjeverktøy, som bl.a. kan brukes for å kjøre applikasjonen RequiredFields.exe.\nExcel Denne lar deg åpne Excel-filer i TUL, f.eks. migreringsrapporter etc\nInternet Explorer Dette er inngangsporten til TUL SharePoint og vil åpne en nettleser hvor TUL er satt som startside.\nInfoPath 2010 Dette er skjemaverktøyet i TUL og vil i dette dokumentet kun bli referert til som InfoPath.\nNotepad Lar deg åpne og editere tekstfiler.\nNotepad++ Lar deg åpne og editere tekstfiler. Flere funksjoner enn Notepad.\nUtforsker delt område Dette er standard Windows utforsker som tar deg til det delte området, også referert til som TUL-Share.\nUtforsker lokal PC Dette er standard Windows utforsker som tar deg til din lokale maskin. Det er her viktig at du gir applikasjonen tilgang i vinduet som kan dukke opp med advarsel om at noen prøver å få tilgang til dine lokale filer.\nWord Denne lar deg forhåndsvise Word-filer i TUL, feks. designdokumenter, kokebøker etc.\nUtviklingsimage med Visual Studio og TFS Åpner et fullverdig utviklingsmiljø med Visual Studio 2015 og lesetilgang til mapper-kildekode via TFS. Avhengig av hvilken tjenesteeier bruker tilhører, og hvilke deler av koden som skal endres, så vil områdene med skrivetilgang variere. ”Vanlige” tjenesteutviklere vil typisk ikke ha behov for tilgang.\nSentral funksjonalitet i TUL For å bruke TUL er det en fordel å kjenne til funksjonaliteten i SharePoint, da TUL SharePoint bruker lignede funksjonalitet på en del sentrale funksjoner. Disse gjengis i de følgende delkapitlene.\nStatuser For alle parameterseksjoner på tjeneste- og utgavearbeidsflaten er det brukt symboler for å indikere status for seksjonen. Disse ikonene skal gi bruker et kjapt overblikk over hva som er uferdig, endret eller migrert, samt komplett. Ikoner og status er vist i tabellen under.\n   Ikon Status      Ny, uendret    Endret, ikke komplett    Komplett    Migrert, uendret etter migrering    Veiledning Alle sider i TUL SharePoint (med få unntak) har veiledningskomponenten tilgjengelig på høyre side. Denne vil vise en lenke til den komplette brukerveiledningen for TUL.\nInn- og utsjekking Inn- og utsjekking brukes for å sikre at andre ikke kan gjøre endringer mens du jobber med en parameterseksjon eller et dokument. Mens parameterseksjonen er sjekket ut, kan du redigere den uten at andre brukere kan gjøre endringer. Først når du sjekker inn igjen, vil andre kunne gå inn og gjøre endringer.\nDu vil ha tilgang til å sjekke ut innhold som ligger under din egen tjenesteeier, inkludert tjenester og utgaver. For andre tjenesteeiere, tjenester og utgaver vil du kun ha lesetilgang. Inn- og utsjekking av parameterseksjoner gjøres via knappene som finnes øverst og nederst på siden, som vist i figur 11, under. Ved innsjekk har man også mulighet for å angi en kommentar som blir lagret. Ved å benytte lenken Vis versjonslogg kan man se historikk over ulike innsjekkinger og kommentarer.\nDet er ikke mulig å hente fram tidligere versjoner av enkeltsider. Derfor er det hensiktsmessig å skrive konkrete kommentarer ved innsjekking, i tilfelle du ønsker å fjerne utførte endringer. Versjonshåndtering skjer for utgaven som helhet i forbindelse med migrering.\nDet er verdt å merke seg at hvis man har sjekket ut, og så trykker på avbryt, vil det være det samme som å angre utsjekking; endringer man har gjort blir ikke lagret og parameterseksjonen vil ikke lengre være utsjekket. Man returneres til arbeidsflaten.\n Figur 11 – Knapper for å sjekke ut/inn og avbrytes   Sortering og filtrering Som ellers i SharePoint, vil man også i TUL SharePoint ha filtrering og sortering på de viktige listene. Et utvalg av disse listene er:\n Liste over tjenesteeiere. Liste over tjenester. Liste over utgaver. Liste over kodelister.  Det fungerer på den måten at man for hver kolonneoverskrift har en meny som vist i figur 12.\n Figur 12 - Sortering og filtrering i lister   Merk at ikke alle kolonner kan filtreres da disse kun kan inneholde unike verdier.\nPåkrevde felter og røde stjerner For mange av metadatasidene i TUL, vil det være felter som må fylles ut før seksjonen kan lagres og sjekkes inn. Disse er markert med røde stjerner, som vist i figuren nedenfor.\n Figur 13 – Røde stjerner   Det er viktig at det skilles på hva som er påkrevd for at utgaven skal migreres, og hva som er påkrevd for å sjekke inn/lagre. Røde stjerner angir kun sistnevnte.\nFelles kodebibliotek I TUL vil man kunne oppleve at mange skjemaer krever mye av samme funksjonaliteten, som f.eks. å validere fødselsnummer, org.nr, epostadresser etc. Dette er tiltenkt å legges i et felles (C#) kodebibliotek i dokumentbiblioteket på forsiden. Dette er ment som et levende sett av funksjonalitet og vedlikeholdes av tjenesteutviklerne. Det vil være opp til dem å utvikle de gjenbrukbare valideringene/kodesnuttene. Dette kodebiblioteket vil være kildekode pluss et kompilert bibliotek som man kan ta i bruk i C#-koden til ethvert skjema.\nTekstsøk Tekstsøk er laget for å gjøre det enklere å standardisere språk og begreper i tjenestene som tilbys sluttbrukerne. Det er mulig å søke på all tekst som er registrert i TUL på tvers av tjenesteeiere, tjenestetyper osv. Tekstsøk finnes i to varianter: En helsides søkefunksjon som kan startes fra startsiden eller tjenesteeiers arbeidsflate, og et popup-vindu som kan startes fra alle parameterfelt som har språkstøtte, dvs. som kan oversettes.\n Figur 14 – Tekstsøk   Et parameterfelt du kan søke fra, har lenken Søk tekst til høyre for feltet. Hvis du først skriver inn en tekst i feltet og trykker på denne lenken, vil det åpnes et popup-vindu med søkeresultatet. Da benyttes et sett med default søkekriterier. Kriteriene er plassert over resulatlisten. Her kan du begrense eller utvide søket ved å velge tjenesteeier, tjenestetype, språk og teksttype. I tillegg kan du skive inn ønsket søkestreng.\nFor å velge en bestemt tekst klikker du på lenken Bruk på den aktuelle linjen i resultatlisten. Du kan også holde musepekeren over en av linjene for å få fram en tooltip med mer informasjon om hvor denne teksten er benyttet.\n Figur 15 – Valg av tekst   I helsides-versjonen av søk er grunnfunksjonaliteten lik. For å velge en tekst må du imidlertid bruke klipp og lim. Du velger teksten med musepekeren, kopierer teksten og limer den inn der den skal brukes, for eksempel i InfoPath. Ved å klikke OK kommer du tilbake til siden du kom fra.\nStartsiden i TUL Startsiden, som vist i figur 16, er det første skjermbildet du kommer til når du logger inn i TUL.\nHer kan du utføre følgende aktiviteter:\n Navigere til tjenesteeiernes arbeidsflater.  I utgangspunktet vil du bare se de tjenesteeierne som du tilhører Du vil kunne få listet opp alle tjenesteeierne som du har lesetilgang til ved å klikke på «Alle tjenesteeiere»  Navigere direkte til de sju siste tjenesteutgavene du har redigert Navigere direkte til tjenesten til en av disse utgavene Navigere til kodelistene som gjelder på tvers av alle tjenesteeiere. Navigere til aktuelle eksterne nettsider gjennom liste med lenker. Navigere til rolleadministrasjon-sidene.  I tillegg vil en administrator kunne utføre følgende aktiviteter:\n Hente frem og lagre prosessflytmaler som gjelder på tvers av alle tjenesteeierne. Disse ligger i et dokumentbibliotek kalt EmptyWorkflowTemplates.   Figur 16 – Startsiden   Tjenesteeiers arbeidsflate Når du har valgt en tjenesteeier på startsiden kommer du til tjenesteeierens arbeidsflate. Dette er en arbeidsflate som er spesifikk for den enkelte tjenesteeier, og kan av tjenesteeier-administrator tilpasses den enkelte tjenesteeiers behov.\nHer kan du:\n Navigere til eksisterende tjenester. Opprette ny tjeneste. Opprette ny tjeneste og utgave basert på mastertjeneste. Lese kunngjøringer som er rettet mot tjenesteeierens tjenesteutviklere i TUL. Finne kontaktinformasjon om deltakere i tjenesteutvikling fra tjenesteeierne dersom denne delen er lagt til arbeidsflaten for tjenesteeier. Navigere til rolleadministrasjon-siden. Navigere til stilark og bildebiblioteker og videre til migrering av stil. Navigere til tekstsøk.  Administrator kan i tillegg:\n Hente frem og lagre prosessflytmaler for den enkelte tjenesteeier. Disse ligger i dokumentbiblioteket PreDefinedWorkflowTemplates. Definere vedleggstyper. Navigere til siden for betalingsleverandøravtaler (gjelder bare betalingsadministrator).   Figur 17 – Tjenesteeiers arbeidsflate   Du kan nå velge en eksisterende tjeneste eller opprette en ny.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/komme-igang/",
	"title": "Komme i gang",
	"tags": [],
	"description": "",
	"content": " Dette er dokumentasjon under arbeid for eBevis-tjenesten som per i dag ikke er produksjonssatt\n\rHvem kan bruke eBevis? eBevis er tilgjengelig for alle offentlige myndigheter og virksomheter og er i seg selv gratis i bruk.\nAvhengig av valgt kommunikasjonskanal kreves det enten et virksomhetssertifikat eller en tilkobling til PEPPOL-nettverket. Sistnevnte er som regel en del av tjenesten leverandører av KGV-er (konkurransegjennomføringsverktøy) og lignende tilbyr.\nTo kanaler eBevis er tilgjengelig i to kanaler som muliggjør både et synkront (oppslagsbasert) og asynkront (meldingsbasert) mønster. Dette er implementert i henholdvis et HTTP REST-grensesnitt og via den europeiske eDelivery-infrastrukturen PEPPOL.\nForuten de iboende forskjellene mellom meldingsbaserte og oppslagsbaserte mønstre, er det ingen funksjonelle forskjeller mellom kanalene - alle beviskoder og dataene de representerer vil være tilgjengelige i begge kanaler. (PEPPOL-grensenittet benytter internt det samme REST-grensenittet gjennom en mellomvare).\n Les mer om bruk av PEPPOL Les mer om bruk av REST-API  Hva passer for meg? HTTP REST-grensesnittet er å regne som noe mer \u0026ldquo;low-level\u0026rdquo; og krever at konsumentene selv implementerer feilhåndteringslogikk og gjenforsøksmekanismer. REST-grensesnittet krever også at konsumenten autentiserer seg med et virksomhetssertifikat, som kan skaffes via tredjepartsleverandører som Buypass og Commfides. Fordelen er at man ikke behøver å ha medlemsskap i PEPPOL-samarbeidet eller være tilknyttet et PEPPOL aksesspunkt, og at HTTP-klienter er bredt tilgjengelig på ulike plattformer og teknologier.\nFor konsumenter med eksisterende verktøy som er tilsluttet PEPPOL-nettverket krever kommunikasjon med eBevis ikke annet enn å bygge støtte for dokumentetformatet EHF Get Evidence, og er således en potensielt raskere måte å komme i gang på.\nMiljøer Begge kanalene har et test-miljø kalt \u0026ldquo;staging\u0026rdquo; som kan benyttes i forbindelse med utvikling og test av implementasjoner. Kun et fåtall beviskoder er implementert på test-miljøet, og disse benytter alle fiktive data. Samtykkeløsningen er integrert mot Altinns TT02 test-miljø.\n Les mer om testing  "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakonsument/komme-i-gang/",
	"title": "Komme i gang",
	"tags": [],
	"description": "Forutsetninger for å ta i bruk samtykketjenesten",
	"content": " Før man kan ta i bruk tjenesten må følgende være på plass:  Aktuell datakilde må ha laget en samtykketjeneste som datakonsument kan benytte. Datakonsument trenger tjenestekode (serviceCode) og tjenesteutgavekode (serviceEditionCode) for gjeldende tjeneste\n Aktuell datakilde må ha registrert organisasjonsnummeret til datakonsument i tjenesteeierstyrt rettighetsregister for ovennevnte tjeneste\u0026reg;. I dette registeret må datakilden også registrere domene som sluttbruker skal returneres til etter å ha gitt sitt samtykke. Det er kun schema/domene/host (ikke path) som legges inn og wildcard (*) kan benyttes for å støtte flere sub-domener. Om schema ikke spesifiseres tillates både HTTP og HTTPS. Egendefinerte schema kan brukes for å sende resultat tilbake til f.eks. mobile applikasjoner. Wildcards må benyttes på sikker måte:\n   Riktig Feil     *.domene.no domene.*   https://domene.no *domene.no   myapp://consent     Det er mulig å legge inn flere domener per org.nr. ved å skille de med semikolon. Domene må legges til både for test- og produksjonsmiljø (disse kan om ønskelig være like).\n For å hente token trenger man ApiKey som er knyttet til datakonsument sitt organisasjonsnummer. Dette kan bestilles hos Altinn ved å sende en hevendelse til servicedesk@altinn.no. Det vil være en ApiKey for test og en for å benytte i produksjonsmiljøet. ( NB! For Samtykkebasert lånesøknad er det Bits som administrerer dette på vegne av bankene. Se https://www.bits.no/project/sbl.)\n Man må ha fiktive testpersoner som kan benyttes i test. Dette må man få hos datakilden da dette må være testbrukere som også er lest inn i deres systemer\n  Hvis en har en policy på å stenge for utgående trafikk i brannmur må en i så fall åpne opp for trafikk mot miljøene listet under.\n   Miljø IP-adresse Navn Port     PROD 89.250.123.0 www.altinn.no 443   TT02 89.250.123.40 tt02.altinn.no 443    DNS må sjekkes. Hvis en hardkoder IP adresser i DNS må en legge inn IP adressene listet over i DNS (en vil typisk få Network error. Connection refused o.l hvis DNS ikke er oppdatert)\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/api/kontaktinformasjon/",
	"title": "Kontaktinformasjon",
	"tags": [],
	"description": "Uthenting og søk i kontaktinformasjon for virksomheter",
	"content": " Hente kontaktinformasjon for alle organisasjoner GET https://www.altinn.no/api/serviceowner/organizations?ForceEIAuthentication HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;organizations\u0026quot;: [ { \u0026quot;Name\u0026quot;: \u0026quot;HERDLA OG SAULAND\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;010000211\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;IS\u0026quot;, \u0026quot;LastChanged\u0026quot;: \u0026quot;2014-11-05T00:00:00\u0026quot;, \u0026quot;LastConfirmed\u0026quot;: null, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/010000211\u0026quot; }, \u0026quot;personalcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/010000211/personalcontacts\u0026quot; }, \u0026quot;officialcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/010000211/officialcontacts\u0026quot; } } } ] } }  Søke opp kontaktpunkt i organisasjoner Søke opp kontaktpunkt i organisasjoner ved hjelp av e-post og/eller telefon.\nGET https://www.altinn.no/api/serviceowner/organizations?ForceEIAuthentication\u0026amp;email={email}\u0026amp;phoneNumber={phonenumber} HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;organizations\u0026quot;: [ { \u0026quot;Name\u0026quot;: \u0026quot;KYSTBASEN ÅGOTNES OG ILSENG REGNSKAP\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;910514318\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;ASA\u0026quot;, \u0026quot;LastChanged\u0026quot;: \u0026quot;2015-10-27T12:43:02.23\u0026quot;, \u0026quot;LastConfirmed\u0026quot;: \u0026quot;2017-03-22T10:42:34.713\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910514318\u0026quot; }, \u0026quot;personalcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910514318/personalcontacts\u0026quot; }, \u0026quot;officialcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910514318/officialcontacts\u0026quot; } } }, { \u0026quot;Name\u0026quot;: \u0026quot;LEINSTRAND OG HOMBORSUND\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;810748532\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;BEDR\u0026quot;, \u0026quot;LastChanged\u0026quot;: null, \u0026quot;LastConfirmed\u0026quot;: null, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/810748532\u0026quot; }, \u0026quot;personalcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/810748532/personalcontacts\u0026quot; }, \u0026quot;officialcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/810748532/officialcontacts\u0026quot; } } } ] } }  Hente kontaktinformasjon for én organisasjon GET https://www.altinn.no/api/serviceowner/organizations/{who}/?ForceEIAuthentication HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;Name\u0026quot;: \u0026quot;HERDLA OG SAULAND\u0026quot;, \u0026quot;OrganizationNumber\u0026quot;: \u0026quot;010000211\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;IS\u0026quot;, \u0026quot;LastChanged\u0026quot;: \u0026quot;2014-11-05T00:00:00\u0026quot;, \u0026quot;LastConfirmed\u0026quot;: null, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/010000211\u0026quot; }, \u0026quot;personalcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/010000211/personalcontacts\u0026quot; }, \u0026quot;officialcontacts\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/010000211/officialcontacts\u0026quot; } } }  Hente offisiell kontaktinformasjon for én organisasjon Dette tilsvarer \u0026ldquo;Felles kontaktinformasjon for virksomheten\u0026rdquo; på altinn.no.\nGET https://www.altinn.no/api/serviceowner/organizations/{who}/officialcontacts/?ForceEIAuthentication HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910021451/officialcontacts\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;officialcontacts\u0026quot;: [ { \u0026quot;MobileNumber\u0026quot;: \u0026quot;22334455\u0026quot;, \u0026quot;MobileNumberChanged\u0026quot;: \u0026quot;2017-06-15T09:07:20.84\u0026quot;, \u0026quot;EMailAddress\u0026quot;: \u0026quot;34234324@gg.com\u0026quot;, \u0026quot;EMailAddressChanged\u0026quot;: \u0026quot;2017-06-15T09:07:20.84\u0026quot; }, { \u0026quot;MobileNumber\u0026quot;: \u0026quot;33445566\u0026quot;, \u0026quot;MobileNumberChanged\u0026quot;: \u0026quot;2017-06-15T09:07:20.84\u0026quot;, \u0026quot;EMailAddress\u0026quot;: \u0026quot;eeee@bb.com\u0026quot;, \u0026quot;EMailAddressChanged\u0026quot;: \u0026quot;2017-06-15T09:07:20.84\u0026quot; } ] } }  Hente personlig kontaktinformasjon for én organisasjon Dette er en liste over det de forskjellige med roller og rettigheter i en organisasjon har registrert under \u0026ldquo;Min kontaktinformasjon for virksomheten\u0026rdquo; på altinn.no.\nGET https://www.altinn.no/api/serviceowner/organizations/{who}/personalcontacts/?ForceEIAuthentication\u0026amp;roleDefinitionCode={roleDefinitionCode}\u0026amp;serviceCode={serviceCode}\u0026amp;serviceEdition={serviceEdition} HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910021451/personalcontacts\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;personalcontacts\u0026quot;: [ { \u0026quot;PersonalContactId\u0026quot;: \u0026quot;r50022994\u0026quot;, \u0026quot;Name\u0026quot;: \u0026quot;ROLF BJØRN \u0026quot;, \u0026quot;SocialSecurityNumber\u0026quot;: \u0026quot;06117701547\u0026quot;, \u0026quot;MobileNumber\u0026quot;: \u0026quot;12345678\u0026quot;, \u0026quot;MobileNumberChanged\u0026quot;: \u0026quot;2017-06-15T09:05:00.86\u0026quot;, \u0026quot;EMailAddress\u0026quot;: \u0026quot;eok@br.no\u0026quot;, \u0026quot;EMailAddressChanged\u0026quot;: \u0026quot;2017-06-15T09:05:00.86\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roles\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910021451/personalcontacts/r50022994/roles\u0026quot; } } }, { \u0026quot;PersonalContactId\u0026quot;: \u0026quot;r50041943\u0026quot;, \u0026quot;Name\u0026quot;: \u0026quot;DRAGE TARALD\u0026quot;, \u0026quot;SocialSecurityNumber\u0026quot;: \u0026quot;11106700992\u0026quot;, \u0026quot;MobileNumber\u0026quot;: \u0026quot;12345678\u0026quot;, \u0026quot;MobileNumberChanged\u0026quot;: \u0026quot;2016-06-22T14:17:11.23\u0026quot;, \u0026quot;EMailAddress\u0026quot;: \u0026quot;pubg@gg.kd\u0026quot;, \u0026quot;EMailAddressChanged\u0026quot;: \u0026quot;2016-06-22T14:17:11.23\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roles\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910021451/personalcontacts/r50041943/roles\u0026quot; } } } ] } }  Hente roller for person {person} med oppført kontaktinformasjon på vegne av {who} Personidentifikatoren er altinn-id-en (r{id}) kalt {PersonalContactId} fra eksempelrespons på personalcontacts.\nGET https://www.altinn.no/api/serviceowner/organizations/{who}/personalcontacts/{person}/roles HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/organizations/910514318/personalcontacts/r50051516/roles\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;roles\u0026quot;: [ { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 89, \u0026quot;RoleName\u0026quot;: \u0026quot;Basisrolle\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Rolle som følger automatisk med når en bruker får en annen Altinn-rolle\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;ALLEA\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/89\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 8, \u0026quot;RoleName\u0026quot;: \u0026quot;Begrenset signeringsrettighet\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til å signere utvalgte skjema og tjenester\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;SISKD\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/8\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 12, \u0026quot;RoleName\u0026quot;: \u0026quot;Energi, miljø og klima\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til tjenester relatert til energi, miljø og klima\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;UTOMR\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/12\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 131, \u0026quot;RoleName\u0026quot;: \u0026quot;Helse-, sosial- og velferdstjenester\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til helse-, sosial- og velferdsrelaterte tjenester\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;UIHTL\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/131\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 15, \u0026quot;RoleName\u0026quot;: \u0026quot;Klientadministrator\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til å administrere klientroller for regnskapsførere og revisorer\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;KLADM\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/15\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 134, \u0026quot;RoleName\u0026quot;: \u0026quot;Kommunale tjenester\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Rolle for kommunale tjenester\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;KOMAB\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/134\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 3, \u0026quot;RoleName\u0026quot;: \u0026quot;Lønn og personalmedarbeider\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til lønns- og personalrelaterte tjenester.\\r\\n\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;LOPER\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/3\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 5576, \u0026quot;RoleName\u0026quot;: \u0026quot;Parallell signering\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til å signere elementer fra andre avgivere.\\r\\n\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;PASIG\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/5576\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 87, \u0026quot;RoleName\u0026quot;: \u0026quot;Patent, varemerke og design\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til tjenester relatert til patent, varemerke og design.\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;PAVAD\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/87\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 5603, \u0026quot;RoleName\u0026quot;: \u0026quot;Post/arkiv\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til å lese meldinger som blir sendt til brukerens meldingsboks.\\r\\n\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;A0236\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/5603\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 272, \u0026quot;RoleName\u0026quot;: \u0026quot;Primærnæring og næringsmiddel\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til tjenester innen import, foredling, produksjon og/eller salg av primærnæringsprodukter og andre næringsmiddel, samt dyrehold, akvakultur, planter og kosmetikk.\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;A0212\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/272\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 6, \u0026quot;RoleName\u0026quot;: \u0026quot;Regnskapsmedarbeider\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til regnskapsrelaterte skjema og tjenester.\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;REGNA\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/6\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 85, \u0026quot;RoleName\u0026quot;: \u0026quot;Revisorattesterer - MVA kompensasjon\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir revisor rettighet til å attestere tjenesten Merverdiavgift - søknad om kompensasjon (RF-0009).\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;ATTST\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/85\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 10, \u0026quot;RoleName\u0026quot;: \u0026quot;Samferdsel\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Rollen gir rettighet til tjenester relatert til samferdsel. For eksempel tjenester fra Statens Vegvesen, Sjøfartsdirektoratet og Luftfartstilsynet.\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;UILUF\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/10\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 130, \u0026quot;RoleName\u0026quot;: \u0026quot;Signerer av Samordnet registermelding\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til tjenester på vegne av enheter/foretak.\\r\\n\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;SIGNE\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/130\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 4, \u0026quot;RoleName\u0026quot;: \u0026quot;Tilgangsstyring\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir administratortilgang til å gi videre rettigheter til andre.\\r\\n\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;ADMAI\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/4\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 11, \u0026quot;RoleName\u0026quot;: \u0026quot;Utfyller/Innsender\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Denne rollen gir rettighet til utvalgte skjema og tjenester.\\r\\n\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;UTINN\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/11\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 86, \u0026quot;RoleName\u0026quot;: \u0026quot;Økokrim rapportering\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til tjenester fra Økokrim\u0026quot;, \u0026quot;RoleDefinitionCode\u0026quot;: \u0026quot;HVASK\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/serviceowner/roledefinitions/86\u0026quot; } } } ] } }  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/",
	"title": "Meldingsboks",
	"tags": [],
	"description": "Operasjoner relatert til meldinger i meldingsboks",
	"content": "\r\rArkivere\r\rOperasjoner for å arkivere meldinger\n\rBekrefte\r\rOperasjoner for å bekrefte mottak av meldinger\n\rHente\r\rOperasjoner for å lese i meldingsboks og arkiv\n\rOppdatere\r\rOperasjoner for å oppdatere meldinger\n\rSende inn\r\rOperasjoner for å sende inn meldinger\n\rSignere\r\rOperasjon for signere meldinger\n\rSlette\r\rOperasjoner for å slette meldinger, underskjema og vedlegg\n\rValidere\r\rOperasjoner for å validere skjemasett\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/metadata/",
	"title": "Metadata",
	"tags": [],
	"description": "Altinn API tilbyr en ressurs som gir tilgang til metadata for tjenester tilgjengelige i Altinn.",
	"content": " Altinn API tilbyr en ressurs som gir tilgang til metadata for tjenester tilgjengelige i Altinn. Metadata ressursen er åpent tilgjengelig og krever ikke autentisering.\nHente metadata for alle tjenester GET https://www.altinn.no/api/metadata HTTP/1.1 Accept: application/hal+json  Respons fra API:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;metadata\u0026quot;: [{ \u0026quot;ServiceOwnerCode\u0026quot;: \u0026quot;BUF\u0026quot;, \u0026quot;ServiceOwnerName\u0026quot;: \u0026quot;Barne-, ungdoms- og familiedirektoratet\u0026quot;, \u0026quot;ServiceName\u0026quot;: \u0026quot;BUF-0021 Søknad om tilskudd til frivillige, landsomfattende barne- og ungdomsorganisasjoner - internasjonal grunnstøtte for partipolitiske ungdomsorganisasjoner\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;3734\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 150114, \u0026quot;ValidFrom\u0026quot;: \u0026quot;2014-05-15T08:00:00\u0026quot;, \u0026quot;ValidTo\u0026quot;: \u0026quot;2099-01-15T00:56:00\u0026quot;, \u0026quot;ServiceType\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/3734/150114\u0026quot; } } }, { \u0026quot;ServiceOwnerCode\u0026quot;: \u0026quot;BUF\u0026quot;, \u0026quot;ServiceOwnerName\u0026quot;: \u0026quot;Barne-, ungdoms- og familiedirektoratet\u0026quot;, \u0026quot;ServiceName\u0026quot;: \u0026quot;Søknad om aktivitetstilskot for å betre levekår og livskvalitet blant lesbiske, homofile, bifile og transpersonar (LHBT)\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;3610\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 130802, \u0026quot;ValidFrom\u0026quot;: \u0026quot;2014-01-16T10:23:50\u0026quot;, \u0026quot;ValidTo\u0026quot;: \u0026quot;2099-02-01T00:51:00\u0026quot;, \u0026quot;ServiceType\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/3610/130802\u0026quot; } } }] } }  Hente metadata for enkelt tjeneste GET https://www.altinn.no/api/metadata/formtask/3734/150114 HTTP/1.1 Accept: application/hal+json  Respons fra API:\n{ \u0026quot;ServiceOwnerCode\u0026quot;: \u0026quot;BUF\u0026quot;, \u0026quot;ServiceOwnerName\u0026quot;: \u0026quot;Barne-, ungdoms- og familiedirektoratet\u0026quot;, \u0026quot;ServiceName\u0026quot;: \u0026quot;BUF-0021 Søknad om tilskudd til frivillige, landsomfattende barne- og ungdomsorganisasjoner - internasjonal grunnstøtte for partipolitiske ungdomsorganisasjoner\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;3734\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 150114, \u0026quot;ValidFrom\u0026quot;: \u0026quot;2014-05-15T08:00:00\u0026quot;, \u0026quot;ValidTo\u0026quot;: \u0026quot;2099-01-15T00:56:00\u0026quot;, \u0026quot;ServiceType\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;RestEnabled\u0026quot;: false, \u0026quot;EUSEnabled\u0026quot;: true, \u0026quot;EnterpriseUserEnabled\u0026quot;: true, \u0026quot;FormsMetaData\u0026quot;: [{ \u0026quot;FormID\u0026quot;: 3686, \u0026quot;FormName\u0026quot;: \u0026quot;BUF-0021 Søknad om tilskudd til frivillige, landsomfattende barne- og ungdomsorganisasjoner - internasjonal grunnstøtte for partipolitiske ungdomsorganisasjoner\u0026quot;, \u0026quot;DataFormatProviderType\u0026quot;: \u0026quot;Seres\u0026quot;, \u0026quot;DataFormatID\u0026quot;: \u0026quot;4362\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: 36770, \u0026quot;IsOnlyXsdValidation\u0026quot;: false, \u0026quot;FormType\u0026quot;: \u0026quot;MainForm\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;schema\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/3734/150114/forms/4362/36770/xsd\u0026quot; } } }], \u0026quot;ProcessSteps\u0026quot;: [{ \u0026quot;Name\u0026quot;: \u0026quot;Innsending\u0026quot;, \u0026quot;SecurityLevel\u0026quot;: 2 },{ \u0026quot;Name\u0026quot;: \u0026quot;Signering\u0026quot;, \u0026quot;SecurityLevel\u0026quot;: 4 }], \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/formtask/3734/150114\u0026quot; } } }  Metadata om den enkelte tjenesten vil for eksempel inkludere informasjon om det er mulig å sende inn skjema via REST API, samt gi tilgang til XSD for skjema (datamodell).\nHente oversikt over kodelister I Altinn ligger det også noe som heter kodelister. Dette er i prinsippet lister med koder hvor hver kode kan ha tre verdier. En navngitt kodeliste kan komme i flere språk og versjoner. Kodelister blir gjerne brukt som oppslagsverk i tjenester.\nMer teknisk informasjon på hjelpesidene for API: https://www.altinn.no/api/Help/Api/GET-metadata-codelists_language\nGET https://www.altinn.no/api/metadata/codelists HTTP/1.1 Accept: application/hal+json  Eksempel på respons fra API (ikke full liste):\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;http://www.altinn.no/api/metadata/codelists?language=1044\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;codelists\u0026quot;: [ { \u0026quot;Name\u0026quot;: \u0026quot;ASF_Land\u0026quot;, \u0026quot;Version\u0026quot;: 404, \u0026quot;Language\u0026quot;: 1044, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;http://www.altinn.no/api/metadata/codelists/ASF_Land/404?language=1044\u0026quot; } } }, { \u0026quot;Name\u0026quot;: \u0026quot;SKD_RF1030_BilSats\u0026quot;, \u0026quot;Version\u0026quot;: 432, \u0026quot;Language\u0026quot;: 1044, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/codelists/SKD_RF1030_BilSats/432?language=1044\u0026quot; } } }, ] } }  Hente detaljer om en kodeliste Dette grensesnittet er laget for å gjøre tilgjengelig detaljene til en kodeliste. Det vil si at i tillegg til navn, versjon og språk får man med de faktiske kodene i listen.\nMer teknisk informasjon på hjelpesidene for API: https://www.altinn.no/api/Help/Api/GET-metadata-codelists-name-version_language\nGET https://www.altinn.no/api/metadata/codelists HTTP/1.1 Accept: application/hal+json  Eksempel på respons fra API (ikke full liste):\n{ \u0026quot;Name\u0026quot;: \u0026quot;ASF_Land\u0026quot;, \u0026quot;Version\u0026quot;: 404, \u0026quot;Language\u0026quot;: 1044, \u0026quot;Codes\u0026quot;: [ { \u0026quot;Code\u0026quot;: \u0026quot;DANMARK\u0026quot;, \u0026quot;Value1\u0026quot;: \u0026quot;DANMARK\u0026quot;, \u0026quot;Value2\u0026quot;: \u0026quot;DK\u0026quot;, \u0026quot;Value3\u0026quot;: \u0026quot;101\u0026quot; }, { \u0026quot;Code\u0026quot;: \u0026quot;NORGE\u0026quot;, \u0026quot;Value1\u0026quot;: \u0026quot;NORGE\u0026quot;, \u0026quot;Value2\u0026quot;: \u0026quot;NO\u0026quot;, \u0026quot;Value3\u0026quot;: \u0026quot;000\u0026quot; }, { \u0026quot;Code\u0026quot;: \u0026quot;USA\u0026quot;, \u0026quot;Value1\u0026quot;: \u0026quot;USA\u0026quot;, \u0026quot;Value2\u0026quot;: \u0026quot;US\u0026quot;, \u0026quot;Value3\u0026quot;: \u0026quot;684\u0026quot; }, ], \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/codelists/ASF_Land/404?language=1044\u0026quot; } } }  Hente metadata om tillatte vedlegg på en innsendingstjeneste Enkelte innsendingstjenester har definert vedleggstyper man kan legge ved. Disse angir blant annet hvilke filtyper, filstørrelser og antall som er tillatt.\nFeltet som brukes for å angi type vedlegg i en innsending er AttachmentTypeName.\nGET https://www.altinn.no/api/metadata/formtask/3734/150114 HTTP/1.1 Accept: application/hal+json  Respons fra API:\n{ \u0026quot;ServiceOwnerCode\u0026quot;: \u0026quot;SKD\u0026quot;, \u0026quot;ServiceOwnerName\u0026quot;: \u0026quot;Skatteetaten\u0026quot;, \u0026quot;ServiceName\u0026quot;: \u0026quot;A02 a-melding innsending fra system\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;3357\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 130815, \u0026quot;ValidFrom\u0026quot;: \u0026quot;2017-08-08T10:21:00\u0026quot;, \u0026quot;ValidTo\u0026quot;: \u0026quot;2999-12-31T13:00:00\u0026quot;, \u0026quot;ServiceType\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;RestEnabled\u0026quot;: false, \u0026quot;AttachmentRules\u0026quot;: [ { \u0026quot;AttachmentRuleId\u0026quot;: 284, \u0026quot;AllowedFileTypes\u0026quot;: \u0026quot;*.xml, zip, enc\u0026quot;, \u0026quot;AttachmentTypeName\u0026quot;: \u0026quot;Amelding\u0026quot;, \u0026quot;AttachmentTypeNameLanguage\u0026quot;: \u0026quot;Amelding\u0026quot;, \u0026quot;IsCheckSumAllowed\u0026quot;: false, \u0026quot;IsXsdValidationRequired\u0026quot;: false, \u0026quot;MaxAttachmentCount\u0026quot;: 1, \u0026quot;MaxFileSize\u0026quot;: 200, \u0026quot;MinAttachmentCount\u0026quot;: 1 } ], \u0026quot;FormsMetaData\u0026quot;: [ { \u0026quot;FormID\u0026quot;: 213428, \u0026quot;FormName\u0026quot;: \u0026quot;A02 a-melding submission from system\u0026quot;, \u0026quot;DataFormatProviderType\u0026quot;: \u0026quot;Seres\u0026quot;, \u0026quot;DataFormatID\u0026quot;: \u0026quot;4166\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: 35895, \u0026quot;IsOnlyXsdValidation\u0026quot;: false, \u0026quot;FormType\u0026quot;: \u0026quot;MainForm\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;schema\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.no/api/metadata/formtask/3357/130815/forms/4166/35895/xsd\u0026quot; } } } ], \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://tt02.altinn.no/api/metadata/formtask/3357/130815\u0026quot; } } }  Metadata om den enkelte tjenesten vil for eksempel inkludere informasjon om det er mulig å sende inn skjema via REST API, samt gi tilgang til XSD for skjema (datamodell).\n"
},
{
	"uri": "https://altinn.github.io/docs/altinncore/goals/",
	"title": "Målsettinger",
	"tags": [],
	"description": "Overordnede målsettinger for 3.0.",
	"content": " En oppsummering av de overordnede hovedmålsettingene for tjenester 3.0.\nBrukervennlige og responsive tjenester  Brukergrensesnitt som er brukervennlig, effektive og moderne (f.eks. som vist på altinn-dagen) Støtte for mobil og ulike skjermstørrelser er innebygd, såkalt responsivt design. Dette gjelder også for utviklingsverktøy. Innebygd universell utforming med støtte for WCAG 2 God ytelse og lav responstid  Effektiv og selvbetjent tjenesteutvikling  Man kan enkelt gjøre alt selv (inkl. prodsetting) når man ønsker det, uten behov for bestillinger, kursing, etc. Flaskehalser elimineres. Effektiv og reell testing, der enhetstest oppfører seg likt som testmiljøer og prod (alle miljøer baseres på samme plattform-kode) Støtte for å lage automatisert testing av tjenester Regler og logikk defineres kun en gang for alle kanaler (portal/WS/API), og på en mer robust måte enn i dag Datamodellering innebygd i det samme web-baserte verktøyet (og støtte for import fra SERES, OR, etc. ) Ikke nødvendig med Citrix for tilgang til utviklingsmiljø  Enkelt for fagpersoner, fleksibelt for utviklere  Fagpersoner har tilgang til nødvendig funksjonalitet direkte i nettleser Man gjenbruker gode og ferdig-testede komponenter/widgets Enkelt å gjøre kall mot API\u0026rsquo;er i andre systemer (hente data, kjøre logikk som ligger i egne fagsystemer) Mer tekniske utviklere kan i tillegg tilpasse alle aspekter hvis man har behov for det ved bruk av kode-editor, f.eks. lage gjenbrukbare widgets, stilark, etc. Gjenbruk av tekster og andre ressurser på det nivået som man ønsker (plattform, tjenesteeier, tjeneste), samt vilkårlig språkstøtte Git (versjonskontroll) benyttes for lagring av tjenestene som utvikles, både fra nettleser og kode-editor.  Åpen kildekode, cross-platform  Tjenester 3.0 skal baseres på åpen kildekode Tjenester 3.0 skal også deles som åpen kildekode Dette betyr at alle kan bidra til å forbedre plattformen. Altinn-organisasjonen blir mao. ikke flaskehals for utvikling. Kan kjøres lokalt på egen maskin, på egne servere og på både Windows, macOS eller Linux Alt baseres på åpne web-standarder og vanlig utviklerkompetanse (ingen \u0026ldquo;sære\u0026rdquo; eller proprietære verktøy innføres)  "
},
{
	"uri": "https://altinn.github.io/docs/helt/goals/",
	"title": "Målsettinger og gevinster",
	"tags": [],
	"description": "Beskrivelse av viktige mål og gevinster for HELT",
	"content": "I «Digital agenda for Norge: IKT for en enklere hverdag» presenterer regjeringen fem prioriteringer for den nasjonale IKT-politikken * Brukeren i sentrum * IKT er vesentlig for innovasjon og produktivitet * Styrket digital kompetanse og deltakelse * Effektiv digitalisering av offentlig sektor * Godt personvern og god informasjonssikkerhet.\nDeling av data på tvers av offentlige virksomheter – gjenbruk av informasjon for å spare brukerne for tidskrevende utfyllinger av informasjon som det offentlige har fra før – inviterer til innovasjon og mer brukersentrerte tjenester, men som stiller store krav til informasjonssikkerhet. Margaret Horn forklarer på forenklingsbloggen \u0026gt; Det er neppe mulig å realisere ambisjonene i Digital agenda uten et krevende arbeid med å etablere helhetlig tilgangsstyring i Altinn. Besparelsene vil til gjengjeld være store, både for innbyggeren, for den som opptrer på vegne av innbyggeren (representanten) og for en rekke instanser i offentlig forvaltning.\nRegjeringen har gitt Altinn oppdrag å etablere helhetlig tilgangsstyring, dette innebærer \u0026gt; å etablere en felles oversikt over hvem som har tillatelse til å bruke data, og funksjonalitet for å ivareta delegering av tilgang og brukerstyrt samtykke. Det innebærer også oversikt over hvem som har brukt ulike data til ulike formål, med mulighet for innsyn i denne.\nHelhetlig tilgangsstyring-prosjektet er blitt iverksatt av Altinn med et mål om at Altinn skal bli en felles autorisasjonsløsning for hele forvaltningen. Løsningen skal 1. Bygge på eksisterende autorisasjonsløsning 2. Kunne benyttes som en selvstendig løsning 3. Ha grensesnitt mot og omfatte flere pågående prosjekter i Altinn.\nHELT er et sentralt tiltak for å kunne oppnå flere gevinster:\n Tidsbesparelser knyttet til utvidet samtykkefunksjonalitet En rekke tjenester som krever samtykke vil kunne realiseres på Altinn-plattformen. Digital samtykkeløsning vil være tidsbesparende for den som gir samtykke og datakonsumenten.\n Redusert tidsbruk på administrasjon av tilganger Brukere trenger riktige tilganger og rettigheter for å kunne utføre ulike oppgaver i Altinn.\n Unngåtte investeringer ved bruk av Altinn som autorisasjonsnav Ved å forbedre autorisasjonskomponenten vil det være aktuelt for et økende antall tjenesteeiere å benytte Altinn til sine autorisasjonsbehov. Tjenesteeierne vil da slippe å investere i egne autorisasjonsløsninger.\n  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/ny/",
	"title": "Ny tjeneste og utgave",
	"tags": [],
	"description": "Hvordan opprette nye tjenester og utgaver.",
	"content": " En tjeneste i TUL SharePoint fungerer som en beholder for utgavene. Med dette menes at man ikke migrerer selve tjenestene til SBL, men utgaver som tilhører tjenesten. Og hver gang den migreres med endret innhold, vil det opprettes en ny versjon av utgaven i SBL.\nEn tjeneste kan ha en eller flere utgaver, for eksempel en utgave per år. I TUL finner du en arbeidsflate for tjeneste og en for utgave. For å identifisere en tjeneste og en utgave har TUL egne parametersider knyttet til tjenesten – tjenesteparametre – og til utgaven – utgaveparametre. Tjenesteparametrene er felles for alle utgaver av tjenesten.\nPå arbeidsflaten for tjeneste ligger det et dokumentbibliotek. Her kan man legge inn relevante dokumenter fra avklaringer før arbeidet starter i TUL, og spesifikasjoner som utarbeides underveis. Det kan være hensiktsmessig å opprette selve tjenesten tidlig, slik at man kan ta i bruk dette designbiblioteket for å dele dokumentasjon.\nLage tjeneste For å lage en ny tjeneste, klikk på Ny i menylinjen til listen over tjenester. Da kommer du først til siden tjenesteparametre, som vist i figur 18.\n Figur 18 - Lage tjeneste   Som vist i figuren over kan man angi fem forskjellige parametere:\n Tjenestenavn: Dette er tjenestens fulle navn og brukes i SBL for avansert søk og i rettighetsvisninger i SBL. Spesialtegn støttes ikke.\n Kortnavn: Dette er tjenestens identifikator i TUL og brukes ikke i SBL. Kortnavnet vil kunne finnes igjen i tjenestens URL. Kortnavnet må også være unikt innad i en tjenesteeier. Spesialtegn og nasjonale tegn (f.eks æ,ø,å) støttes ikke.\n Ekstern tjenestekode: Identifiserer tjenesten i SBL og SBS. Vil være unikt på tvers av alle tjenesteeiere i TUL, og angis automatisk av TUL ved opprettelse av tjenesten.\n Tjenestetype: Dette angir om alle utgavene som lages for denne tjenesten enten er en innsendingstjeneste, meldingstjeneste, innsynstjeneste, samhandlingstjeneste, lenketjeneste eller formidlingstjeneste. Merk at tjenestetype ikke må velges ved opprettelse av tjenesten, men velges før en utgave kan lages. Når en tjenestetype er valgt og man velger OK eller Sjekk inn, vil man ikke kunne endre tjenestetype i ettertid.\n Referanse: Fritt valgt referanse, for eksempel til papirutgave av skjema.\n  Når du har skrevet inn og trykker OK, vil arbeidsflate for tjenesten opprettes.\nLage utgave En utgave kan opprettes på to forskjellige måter; ny tom eller kopi basert på en eksisterende utgave. Begge måter vil resultere at en utgave blir opprettet under valgt tjeneste.\nNy tom lages ved å klikke på Ny i menylinjen i tjenestelisten på arbeidsflaten for tjeneste. Se figuren nedenfor.\n Figur 19 – Ny utgave   Vil man lage en ny utgave basert på en eksisterende velger man Ny kopi basert på denne i kontekstmenyen til utgaven man vil basere seg på. Se figuren nedenfor.\n Figur 20 – Ny utgave, kopi   Begge valgene vil ta deg til samme siden for utgaveparametre, men det er noen forskjeller. Hvis du lager en ny uten å ta kopi av en eksisterende, vil alle felter være tilgjengelig for utfylling. Velger du derimot å lage utgaven som en kopi av en eksisterende, vil kun utgavenavn, kortnavn, tjenesteutgavekode og hovedspråk være mulig å fylle ut. Resten må endres etterpå. Dette fordi det kun er disse verdiene som ville måtte være unike mellom utgavene. Disse parametrene er:\n Utgavenavn: Brukes som beskrivende navn i SBL\n Kortnavn: Brukes kun i TUL som sitenavn og i url\n Tjenesteutgavekode: brukes som unik identifikator i SBL og SBS. Denne behøver kun å være unik innenfor tjenesten. En god regel er å enten gi utgavene kodene 1, 2, 3 osv. 2007, 2008, 2009 osv. Det som er viktig er at på skjemasettsiden og for SBL vil utgaven med høyest kode ansees å være nyest.\n Hovedspråk angir hvilken som blir grunnspråket for utgaven\n  Når du har skrevet inn og trykker OK, vil arbeidsflate for tjenesten opprettes.\nHvis du kopierer utgaven, vil InfoPath-skjema også kopieres. Om ønskelig kan du lage en ny kopi av tilhørende VSTA-kode. Ved endringer i C#-kode for den nye utgaven vil dette være hensiktsmessig. C#-koden vil ligge på TULshare.\nDesignbibliotek i TUL Det er viktig for bruken av tjenesten at du lager en gjennomtenkt design også ut i fra sluttbrukerens ståsted. For innsendingstjenester gir ELMER-retningslinjene føringer for utformingen. For innsynstjenester er det laget tre eksempeldokumenter, InfoPath-designs, som bør danne mønster for utforming av brukerinteraksjon. Se Vedlegg C: Utforming av brukervennlige tjenester.\nDesign kan utføres i TUL, men også i egne dokument i forkant av at tjenesten opprettes. Fra tjenestens arbeidsflate i TUL kan du samle relevant bakgrunnsinformasjon og eksisterende designdokumenter knyttet til tjenesten, i et dokumentbibliotek.\nDokumentbiblioteket har versjonskontroll, så du bør sjekke ut dokumentet for å hindre at andre gjør endringer samtidig.\nDesigndokumentasjonen vil være felles for alle utgavene av tjenesten. Hvis det etter hvert utvikles mange versjoner, kan det være praktisk å lage en katalogstruktur i dokument-biblioteket. Dette gjøres ved å navigere til selve dokumentbiblioteket ved å klikke på overskriften Designdokumenter fra arbeidsflaten for tjenesten. Det som skjer nå er at du ser selve dokumentbiblioteket i SharePoint kontekst/GUI. Her ser du flere knapper som kan benyttes. Velg Ny og så Ny mappe, som vist i figuren nedenfor. Dette er standard og normal SharePoint-oppførsel, og vil være samme for andre dokumentbiblioteker.\n Figur 21 – Lage mappe   På denne måten kan du lage en oversiktlig struktur.\nSkjemadesign i InfoPath InfoPath kan også brukes som designverktøy. Måten dette gjøres på, er å lage skallet til skjemaet uten å basere dette på en datakilde (XSD). Det man gjør da, er å lage en ny tom mal i InfoPath, som vist i figuren under. Skjemaet får da sin egen datakilde, som ikke er basert på en eksisterende XSD.\n Figur 22 – Ny, tom mal i InfoPath   Deretter er det bare å lage utkastet til hvordan skjemaet skal se ut. Dette gjøres ved å dra inn felter og grupper på vanlig måte.\nDet interessante skjer når man vil bruke designet til utvikle selve skjemaet. Det man må gjøre nå, er å konvertere hoveddatakilden til å bruke en ferdig datakilde (XSD), f.eks. meldingsbeskrivelsen fra oppgaveregisteret. Dette gjøres ved å velge Data fra InfoPath sin menylinje, deretter velge Oppdater felt\u0026hellip;, som vist i figuren under.\n Figur 23 – Oppdater felt   Man velger så den hoveddatakilden man vil at skjemaet skal bruke, samt at man ikke vil bruke flere datakilder. Nå har skjemaet den datakilden det skal ha, og designet har blitt tatt i bruk. Det siste som må gjøres, er å endre binding på de brukergrensesnittelementene som allerede er skjemaet. Dette gjøres ved å høyreklikke på valgt element og velge Endre binding\u0026hellip; . Design utarbeidet i andre applikasjoner enn InfoPath vil ikke kunne tas i bruk direkte som skjema eller en del av skjema.\nMERK: Når man utvikler skjemaer hvor man ønsker en betinget formatering basert på en dynamisk verdi, må denne verdien først beregnes, så settes i et hjelpefelt. Betingelsen settes deretter på hjelpefeltet. Et eksempel på dette er hvis man ønsker å sette en betinget formatering på en verdi som er gjennomsnittet av to eller flere felter. Kan man ikke sette betingelsen rett på feltet som utfører denne beregningen. Denne verdien må da først regnes ut, for så å settes i et hjelpefelt, hvor man deretter setter betingelsen på hjelpefeltet som inneholder den ferdig behandlede verdien.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/oppdatere/",
	"title": "Oppdatere",
	"tags": [],
	"description": "Operasjoner for å oppdatere meldinger",
	"content": " Operasjoner for å oppdatere elementer i meldingsboksen.\nPUT på message element Det er mulig å oppdatere skjema med vedlegg som ligger i arbeidslisten til brukeren.\nOppdatering utføres ved å gjøre PUT operasjoner på den enkelte message som skal oppdateres. Alle skjema og vedlegg må inkluderes i hver oppdatering, da tidligere data på message vil overskrives.\nFølgende URL parametere styrer hva som utføres på skjemaet etter oppdatering:\n complete = [true|false] sign = [true|false]  Defaultverdi for complete og sign er true, så om ingen av parameterne er satt til false vil skjemaet signeres og arkiveres etter oppdatering. complete=false vil sette status \u0026ldquo;Utfylling\u0026rdquo; etter oppdatering, mens sign=false sender skjema til signering etter oppdatering.\nHeader\nPUT https://www.altinn.no/api/{who}/messages/{messageid} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;123\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 64, \u0026quot;_embedded\u0026quot; : { \u0026quot;forms\u0026quot; : [{ \u0026quot;Type\u0026quot;: \u0026quot;MainForm\u0026quot;, \u0026quot;DataFormatId\u0026quot;: \u0026quot;1023\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: \u0026quot;1\u0026quot;, \u0026quot;FormData\u0026quot;: \u0026quot;\u0026lt;Skjema\u0026gt;...\u0026lt;/Skjema\u0026gt;\u0026quot; }], \u0026quot;attachments\u0026quot; : [{ \u0026quot;FileName\u0026quot;: \u0026quot;string example 43\u0026quot;, \u0026quot;AttachmentType\u0026quot;: \u0026quot;string example 43\u0026quot;, \u0026quot;Data\u0026quot;: \u0026quot;base64 encoded\u0026quot; }] } }  PUT for å endre et eksisterende underskjema For innsendingstjenester som har er definert med hovedskjema og underskjema kan man legge til underskjema etter at instansen er opprettet. Id-en til skjemaet returneres i location response header.\nHeader\nPUT https://www.altinn.no/api/my/messages/{messageid}/forms/{formid} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;SubForm\u0026quot;, \u0026quot;DataFormatId\u0026quot;: \u0026quot;string example 36\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: \u0026quot;string example 38\u0026quot;, \u0026quot;FormData\u0026quot;: \u0026quot;\u0026lt;Skjema xmlns:xsi=\\\u0026quot;http://www.w3.org/2001/XMLSchema-instance\\\u0026quot;...\u0026gt;...\u0026lt;/Skjema\u0026gt;\u0026quot; }  Vedleggstyper Hva slags vedlegg man kan legge til en tjeneste kan være begrenset av regler definert på tjenesten i Altinn. Disse finner man ved å bruke metadata-ressursen i api-et.\nLegge til vedlegg For å legge til mindre vedlegg til en aktiv skjemainstans kan man poste base64-encodet data direkte mot attachments. Vedleggs-id returneres i location header på responsen.\nHeader\nPOST https://www.altinn.no/api/{who}/messages/{messageid}/attachments/?language={languageid} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;FileName\u0026quot;: \u0026quot;string example 43\u0026quot;, \u0026quot;AttachmentType\u0026quot;: \u0026quot;string example 43\u0026quot;, \u0026quot;Data\u0026quot;: \u0026quot;base64 encoded payload\u0026quot; }  Legge til vedlegg med streaming For å legge til større vedlegg til en aktiv skjemainstans kan man bruke en streamingvariant mot attachment der requestbody er en binær strøm. Vedleggs-id returneres i location header på responsen.\nHeader\nPOST https://www.altinn.no/api/{who}/messages/{messageId}/attachments/streamedattachment?fileName={fileName}\u0026amp;attachmentType={attachmentType}\u0026amp;language={language} HTTP/1.1 Content-Type: application/octet-stream ApiKey: myKey  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/",
	"title": "REST API",
	"tags": [],
	"description": "Dokumentasjon for sluttbrukerdelen av Altinns REST-api",
	"content": "Altinn tilbyr et REST-API med autentisering via ID-porten, brukernavn og passord eller virksomhetssertifikat som gjør det mulig å bruke tjenestene i Altinn i en app eller ekstern nettside. På disse sidene finner du praktisk informasjon om hvordan API-et kan tas i bruk. Altinns REST API er enkelt og gratis å bruke.\nTeknisk dokumentasjon av API for sluttbrukere.\n\rAltinn API-et er ikke en ny tjeneste eller funksjonalitet - det er et nytt grensesnitt mellom brukerne og komponentene som allerede finnes i Altinn.\nDette grensesnittet muliggjør å bruke Altinn-innhold i for eksempel smartphone-apps og andre nettportaler enn altinn.no.\nFor å komme i gang med å bruke API-et må du først registrere løsningen din hos Altinn.\n\rKom i gang!\r\rDenne guiden vil hjelpe deg med å komme igang med bruk av Altinns REST API.\n\rAutentisering\r\rFor å få tilgang til Altinn API-et må brukeren først autentisere seg. Altinn API støtter tre ulike autentiseringsmetoder.\n\rAutorisasjon\r\rFor å få tilgang til Altinn API-et må brukeren være autorisert.\n\rInnsyns­tjenester\r\rOppslag i datakilder som ligger utenfor Altinn\n\rMeldingsboks\r\rOperasjoner relatert til meldinger i meldingsboks\n\rDiverse\r\rForskjellige andre ting man kan benytte API\u0026#39;et til.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/generelt/retningslinjer/",
	"title": "Retningslinjer",
	"tags": [],
	"description": "Retningslinjer om bruk av Altinn API&#39;et.",
	"content": " Krav til merking Merkingen gjelder bruk av Altinn API i web-applikasjoner. Det må komme frem for brukeren at data kommer fra Altinn.\nVi har ikke krav til hvordan teksten skal vises, men den skal være godt synlig for brukeren, når vedkommende tar i bruk eller starter applikasjonen.\nAndre krav  Du har ikke lov til å lage tjenester/applikasjoner som framstår som om de er laget av Altinn. Du kan ikke endre på innholdet i data som leveres. Du har ikke lov til å bruke innholdet på nettsider med pornografisk eller rasistisk innhold, eller på nettsider som bryter norsk lov. Se dokumentasjonen for informasjon om autentisering og sikkerhet. Det kreves at applikasjonsleverandøren fyller ut egenerklæringskjema for bruk av Altinn API. Ved integrasjon av innhold fra Altinn API i andre fødererte portaler er det et krav at brukeren opplyses om bruken av Altinn API og hvilke ressurser i Altinn portalen benytter.  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/roller-og-rettigheter/",
	"title": "Roller og rettigheter",
	"tags": [],
	"description": "API&#39;er relatert til roller og rettigheter.",
	"content": " Hente roller Hente ut roller innlogget bruker har for {who} - kan være my, organisasjonsnummer eller andre privatpersoner der man spør ved hjelp av r{id} som hentes fra api/reportees.\nSe beskrivelse på altinn.no/api/help.\nGET https://www.altinn.no/api/{who}/authorization/roles HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey  Eksempel på respons på rettigheter innlogget bruker har for 910252240:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https:\\/\\/www.altinn.no\\/api\\/910252240\\/authorization\\/roles\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;roles\u0026quot;: [ { \u0026quot;RoleId\u0026quot;: 38069107, \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 3, \u0026quot;RoleName\u0026quot;: \u0026quot;L\\u00f8nn og personalmedarbeider\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til l\\u00f8nns- og personalrelaterte tjenester\u0026quot;, \u0026quot;Delegator\u0026quot;: \u0026quot;ELLEN FISKE\u0026quot;, \u0026quot;DelegatedTime\u0026quot;: \u0026quot;2014-11-19T08:27:40.577\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https:\\/\\/www.altinn.no\\/api\\/910252240\\/authorization\\/roledefinitions\\/3\u0026quot; } } }, { \u0026quot;RoleId\u0026quot;: 38069108, \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 6, \u0026quot;RoleName\u0026quot;: \u0026quot;Regnskapsmedarbeider\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til regnskapsrelaterte skjema og tjenester\u0026quot;, \u0026quot;Delegator\u0026quot;: \u0026quot;ELLEN FISKE\u0026quot;, \u0026quot;DelegatedTime\u0026quot;: \u0026quot;2014-11-19T08:27:40.577\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https:\\/\\/www.altinn.no\\/api\\/910252240\\/authorization\\/roledefinitions\\/6\u0026quot; } } }, { \u0026quot;RoleId\u0026quot;: 38069101, \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 8, \u0026quot;RoleName\u0026quot;: \u0026quot;Begrenset signeringsrettighet\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til \\u00e5 signere utvalgte skjema og tjenester\u0026quot;, \u0026quot;Delegator\u0026quot;: \u0026quot;ELLEN FISKE\u0026quot;, \u0026quot;DelegatedTime\u0026quot;: \u0026quot;2014-11-19T08:22:21.653\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https:\\/\\/www.altinn.no\\/api\\/910252240\\/authorization\\/roledefinitions\\/8\u0026quot; } } }, { \u0026quot;RoleId\u0026quot;: 38069102, \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 11, \u0026quot;RoleName\u0026quot;: \u0026quot;Utfyller\\/Innsender\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Tilgang til utvalgte skjema og tjenester\u0026quot;, \u0026quot;Delegator\u0026quot;: \u0026quot;ELLEN FISKE\u0026quot;, \u0026quot;DelegatedTime\u0026quot;: \u0026quot;2014-11-19T08:22:21.653\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https:\\/\\/www.altinn.no\\/api\\/910252240\\/authorization\\/roledefinitions\\/11\u0026quot; } } }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 89, \u0026quot;RoleName\u0026quot;: \u0026quot;Basisrolle\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Rolle som f\\u00f8lger automatisk med n\\u00e5r en bruker f\\u00e5r en annen Altinn-rolle\u0026quot;, \u0026quot;_links\u0026quot;: { \u0026quot;roledefinition\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https:\\/\\/www.altinn.no\\/api\\/910252240\\/authorization\\/roledefinitions\\/89\u0026quot; } } } ] } }  Hente rettigheter Hente ut rettigheter innlogget bruker har for {who} - kan være my, organisasjonsnummer eller andre privatpersoner der man spør ved hjelp av r{id} som hentes fra api/reportees.\nSe beskrivelse på altinn.no/api/help.\nGET https://www.altinn.no/api/{who}/authorization/rights HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https:\\/\\/www.altinn.no\\/api\\/910252240\\/authorization\\/rights\u0026quot; } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;rights\u0026quot;: [ { \u0026quot;RightID\u0026quot;: 103, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1261\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 1, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 104, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1238\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 3, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: false }, { \u0026quot;RightID\u0026quot;: 10481822, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1051\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 140619, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 10481823, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1051\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 140619, \u0026quot;Action\u0026quot;: \u0026quot;Write\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 10481824, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1051\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 140619, \u0026quot;Action\u0026quot;: \u0026quot;ArchiveRead\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 10481825, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1051\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 140619, \u0026quot;Action\u0026quot;: \u0026quot;ArchiveDelete\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true }, { \u0026quot;RightID\u0026quot;: 10481843, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1051\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 140619, \u0026quot;Action\u0026quot;: \u0026quot;Sign\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: true } ] } }  Slette tildelte roller Sletter en rolle for {who} (r{id} fra api/reportees, organisasjonsnummer eller brukernavn) ved hjelp av roleid fra GET.\nSe beskrivelse på altinn.no/api/help.\nDELETE https://www.altinn.no/api/{who}/authorization/roles/{rolleid} HTTP/1.1 Host: www.altinn.no ApiKey: myKey  Returnerer tom respons og statuskode/-melding.\nSlette tildelte rettigheter Sletter en rettighet for {who} (r{id} fra api/reportees, organisasjonsnummer eller brukernavn) ved hjelp av rightid fra GET rights.\nSe beskrivelse på altinn.no/api/help.\nDELETE https://www.altinn.no/api/{who}/authorization/rights/{rettighetsid} HTTP/1.1 Host: www.altinn.no ApiKey: myKey  Returnerer tom respons og statuskode/-melding.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/rolledefinisjoner/",
	"title": "Rolle­definisjoner",
	"tags": [],
	"description": "API&#39;er relatert til rolledefinisjoner.",
	"content": " Hente rolledefinisjoner Henter ut alle rolledefinisjoner tilgjengelig for {who}.\nSe også altinn.no/api/help.\nGET https://www.altinn.no/api/{who}/authorization/roledefinitions HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons\n[ { \u0026quot;RoleType\u0026quot;: \u0026quot;External\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 82, \u0026quot;RoleName\u0026quot;: \u0026quot;Privatperson\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Privatperson\u0026quot; }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 1525, \u0026quot;RoleName\u0026quot;: \u0026quot;UDI referanseperson\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Videreformidlingstjeneste UDI\u0026quot; }, { \u0026quot;RoleType\u0026quot;: \u0026quot;Altinn\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 2215, \u0026quot;RoleName\u0026quot;: \u0026quot;hildetest\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;testrolle\u0026quot; } ]  Hente ut en enkelt rolle Hente ut alle rettigheter tilknyttet en spesifikk rolle angitt med roledefinitionid fra rollelisten i punktet over.\nSe også altinn.no/api/help.\nGET https://www.altinn.no/api/{who}/authorization/roledefinitions/{roledefinitionid} HTTP/1.1 Accept: application/hal+json ApiKey: myKey  Eksempel på respons:\n{ \u0026quot;RoleType\u0026quot;: \u0026quot;External\u0026quot;, \u0026quot;RoleDefinitionId\u0026quot;: 82, \u0026quot;RoleName\u0026quot;: \u0026quot;Privatperson\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;Privatperson\u0026quot;, \u0026quot;Rights\u0026quot;: [ { \u0026quot;RightID\u0026quot;: 63, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;SKBERG\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 1, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: false }, { \u0026quot;RightID\u0026quot;: 68, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;SKDPSA\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 2, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: false }, { \u0026quot;RightID\u0026quot;: 70, \u0026quot;RightType\u0026quot;: \u0026quot;Service\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;SKDSLN\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: 1, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot;, \u0026quot;RightSourceType\u0026quot;: \u0026quot;RoleTypeRights\u0026quot;, \u0026quot;IsDelegatable\u0026quot;: false } ] }  Opprette lokal rolle Oppretter en egendefinert rolle med de spesifikke rettighetene til tjenester/ressurser som angis i kallet. Språk er valgfri inputparameter.\nTillatte actions er Read, Write, Delete, Sign, ReadArchive, DeleteArchive og disse angir hvilke rettigheter rollen gir for de forskjellige stegene i arbeidsflyten gjennom Altinn. Etter at den er opprettet, må rollen delegeres for faktisk gi rettighetene man har valgt.\nSe også altinn.no/api/help.\nPOST https://www.altinn.no/api/{who}/authorization/roledefinitions/ HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey { \u0026quot;RoleName\u0026quot;: \u0026quot;min egen lokale rolle2\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;en beskrivelse av rollen\u0026quot;, \u0026quot;_embedded\u0026quot;: { \u0026quot;Rights\u0026quot;: [ { \u0026quot;ServiceCode\u0026quot;: \u0026quot;3357\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: \u0026quot;130429\u0026quot;, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot; } ] } }  Eksempel på respons:\nDet returneres en tom respons, men location header angir id på den nye lokale rollen dersom den ble opprettet OK.\nHTTP 201 - Created Location: https://www.altinn.no/api/my/authorization/roledefinitions/13667  Slette lokal rolle Se også altinn.no/api/help.\nDELETE https://www.altinn.no/api/my/authorization/roledefinitions/13667 HTTP/1.1 ApiKey: myKey  Eksempel på respons:\nHTTP 204 - No Content  Oppdatere rolle Oppdaterer angitt rolle for {who}. Språk er valgfri input-parameter\nSe også altinn.no/api/help.\nPUT https://www.altinn.no/api/{who}/authorization/roledefinitions/{roledefinitionid} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey { \u0026quot;RoleName\u0026quot;: \u0026quot;min egen lokale rolle5\u0026quot;, \u0026quot;RoleDescription\u0026quot;: \u0026quot;en beskrivelse av rollen\u0026quot;, \u0026quot;RoleType\u0026quot;: \u0026quot;service\u0026quot;, \u0026quot;_embedded\u0026quot;: { \u0026quot;Rights\u0026quot;: [ { \u0026quot;ServiceCode\u0026quot;: \u0026quot;3357\u0026quot;, \u0026quot;ServiceEditionCode\u0026quot;: \u0026quot;130429\u0026quot;, \u0026quot;Action\u0026quot;: \u0026quot;Read\u0026quot; } ] } }  Eksempel på respons:\nHTTP 204 - No content Location: https://www.altinn.no/api/my/authorization/roledefinitions/13667  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/sende-inn/",
	"title": "Sende inn",
	"tags": [],
	"description": "Operasjoner for å sende inn meldinger",
	"content": " Operasjoner for å sende inn meldinger.\nGenerelt om innsendingstjenester I Altinn er bygget inn mye funksjonalitet får å tilby brukere skjema med ulike behov og krav. Ved bruk av REST-apiet kan man opprette en skjemainstans for å få en messageid, og deretter legge til, endre eller slette underskjema og vedlegg som man ønsker.\nI Altinn kan tjenesteeier selv angi hvilke innsendingskanaler som er gyldige. REST API må derfor angis av tjenesteeier som en gyldig kanal.Metadata ressursen som lister alle produksjonsatte tjenester i Altinn vil indikere om aktuell tjeneste er tilgjengelig for innsending fra REST API.\nSkjema i Altinn er bygget på en XSD datamodell (http://en.wikipedia.org/wiki/XSD), som igjen er knyttet til en overordnet semantisk modell. Denne XSD angir de tekniske valideringene for et skjema. Andre typer valideringsregler (kalkyler, forretningsregler) kan angis som en del av utviklingen av skjema. XSD for aktuell tjeneste kan lastes ned fra metadata ressursen.\nSkjema må sees på som en payload \u0026ldquo;Blob\u0026rdquo; representert i XML, og må representeres som XML også i JSON, se eksempel under.\nPOST på message elementet Man kan sende inn skjema med vedlegg. Skjema er i API-et Message av type FormTask.\nPOST for innsending av skjema til arkiv Følgende request sender inn skjema med vedlegg til Arkivet i brukerens meldingsboks. Merk at AttachmentType på vedlegget indikerer hvilken funksjonell vedleggstype som er lagt ved - ikke mimetype. Hvilke vedleggstyper som er tillatt på forskjellige innsendingstjenester finnes i AttachmentRules.AttachmentTypeName i metadata-tjenesten. Adressen til det arkiverte skjemaet vil returneres i Location response header.\nHeader\nPOST https://www.altinn.no/api/{who}/messages HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1029\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 64, \u0026quot;_embedded\u0026quot; : { \u0026quot;forms\u0026quot; : [ { \u0026quot;Type\u0026quot;: \u0026quot;MainForm\u0026quot;, \u0026quot;DataFormatId\u0026quot;: \u0026quot;1232\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: \u0026quot;10123\u0026quot;, \u0026quot;FormData\u0026quot;: \u0026quot;\u0026lt;Skjema\u0026gt;...\u0026lt;/Skjema\u0026gt;\u0026quot; } ], \u0026quot;attachments\u0026quot; : [ { \u0026quot;FileName\u0026quot;: \u0026quot;string example 43\u0026quot;, \u0026quot;AttachmentType\u0026quot;: \u0026quot;FunksjonellVedleggsType\u0026quot;, \u0026quot;Data\u0026quot;: \u0026quot;base64 encoded\u0026quot; } ] } }  POST for innsending av skjema til arbeidslisten (mellomlagring) Det er også mulig å sende inn skjema til arbeidslisten i Altinn. Da vil skjema få status \u0026ldquo;Utfylling\u0026rdquo;. Skjema kan så fylles ut ferdig i Altinn portal eller fullføres med ny PUT operasjon på meldingen. At skjemaet skal få status \u0026lsquo;Utfylling\u0026rsquo; angis ved å inkludere URL-parameter complete=false. Adressen til skjemaet i arbeidslisten returneres i Location respons header.\nHeader\nPOST https://www.altinn.no/api/{who}/messages?complete=false HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;123\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 64, \u0026quot;_embedded\u0026quot; : { \u0026quot;forms\u0026quot; : [{ \u0026quot;Type\u0026quot;: \u0026quot;MainForm\u0026quot;, \u0026quot;DataFormatId\u0026quot;: \u0026quot;1023\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: \u0026quot;1\u0026quot;, \u0026quot;FormData\u0026quot;: \u0026quot;\u0026lt;Skjema\u0026gt;...\u0026lt;/Skjema\u0026gt;\u0026quot; }], \u0026quot;attachments\u0026quot; : [{ \u0026quot;FileName\u0026quot;: \u0026quot;string example 43\u0026quot;, \u0026quot;AttachmentType\u0026quot;: \u0026quot;Funksjonellvedleggstype\u0026quot;, \u0026quot;Data\u0026quot;: \u0026quot;base64 encoded\u0026quot; }] } }  POST for å opprette preutfylt skjema Det er også mulig å sende tom payload for å opprette et tomt skjema med preutfylling. Da vil skjema bli opprette med data satt av tjenesteeier. Skjemaet vil få status \u0026ldquo;Utfylling\u0026rdquo;, og kan så fylles ut ferdig i Altinn portal eller fullføres med ny PUT operasjon. Den samme operasjonen kan gjenbrukes på underskjema.\nHeader\nPOST https://www.altinn.no/api/{who}/messages?complete=false HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;123\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 64, \u0026quot;_embedded\u0026quot; : { } }  POST for å legge til underskjema til en aktiv skjema-instans For innsendingstjenester som har er definert med hovedskjema og underskjema kan man legge til underskjema etter at instansen er opprettet. Id-en til skjemaet returneres i location response header.\nHeader\nPOST https://www.altinn.no/api/{who}/messages/{messageid}/forms HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;SubForm\u0026quot;, \u0026quot;DataFormatId\u0026quot;: \u0026quot;string example 36\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: \u0026quot;string example 38\u0026quot;, \u0026quot;FormData\u0026quot;: \u0026quot;\u0026lt;Skjema xmlns:xsi=\\\u0026quot;http://www.w3.org/2001/XMLSchema-instance\\\u0026quot;...\u0026gt;...\u0026lt;/Skjema\u0026gt;\u0026quot; }  POST for innsending av skjema til signering Det er også mulig å sende inn skjema til signering i Altinn. Da vil skjema få status \u0026ldquo;Signering\u0026rdquo;. Skjema kan så signeres i Altinn portal eller fullføres med ny PUT operasjon på meldingen. At skjemaet skal få status \u0026lsquo;Signering\u0026rsquo; angis ved å inkludere URL-parameter Sign=false. Adressen til skjemaet i arbeidslisten returneres i Location respons header.\nHeader\nPOST https://www.altinn.no/api/{who}/messages?sign=false HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;123\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 64, \u0026quot;_embedded\u0026quot; : { \u0026quot;forms\u0026quot; : [{ \u0026quot;Type\u0026quot;: \u0026quot;MainForm\u0026quot;, \u0026quot;DataFormatId\u0026quot;: \u0026quot;1023\u0026quot;, \u0026quot;DataFormatVersion\u0026quot;: \u0026quot;1\u0026quot;, \u0026quot;FormData\u0026quot;: \u0026quot;\u0026lt;Skjema\u0026gt;...\u0026lt;/Skjema\u0026gt;\u0026quot; }], \u0026quot;attachments\u0026quot; : [{ \u0026quot;FileName\u0026quot;: \u0026quot;string example 43\u0026quot;, \u0026quot;AttachmentType\u0026quot;: \u0026quot;FunksjonellVedleggsType\u0026quot;, \u0026quot;Data\u0026quot;: \u0026quot;base64 encoded\u0026quot; }] } }  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/signere/",
	"title": "Signere",
	"tags": [],
	"description": "Operasjon for signere meldinger",
	"content": " Signering utføres med PUT operasjoner på Message elementet i Altinn API.\nSkjema med vedlegg kan signeres samlet og det er mulig å signere enkelte skjema/vedlegg enkeltvis.\nPUT for signering av skjema med status signering Følgende request signerer det aktuelle skjemaet og skjemaet blir lagret i Arkivet i brukerens meldingsboks. Adressen til det signerte og arkiverte skjemaet vil returneres i Location respons header.\nHeader\nPUT https://www.altinn.no/api/{who}/messages/{messageid}?complete=true\u0026amp;sign=true HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;1029\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 64 }  PUT for signering av skjema i skjemasett og enkelte vedlegg Det er også mulig å kun signere enkelte skjema i et skjemasett og kun enkelte av vedleggene. Parameteren signinglocked angir om skjemaet/vedlegget må signeres.\nDersom signinglocked=true må det aktuelle skjemaet/vedlegget signeres, signinglocked=false angir at signering er valgfritt. Hvilke skjema og vedlegg som skal signeres angis i SignatureSpec. Id for aktuelt skjema og Attachments må hentes fra message-ressursen før signering og angis i PUT operasjonen.\nHeader\nPUT https://www.altinn.no/api/{who}/messages/{messageid}?complete=true\u0026amp;sign=true HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Body\n{ \u0026quot;Type\u0026quot;: \u0026quot;FormTask\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;123\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 64, \u0026quot;_embedded\u0026quot; : { \u0026quot;SignatureSpec\u0026quot;: { \u0026quot;FormIds\u0026quot;: [12121,1232], \u0026quot;AttachmentIds\u0026quot;: [1123,1123] } } }  GET for å hente signeringstekst Signeringsteksten spesifisert for signerinssteget skal presenters for brukeren før signering. Teksten kan lastes ned ved å følge lenken signingtest\nHeader\nGET https://www.altinn.no/api/{who}/messages/{messageid}/signingtext HTTP/1.1 Accept: application/hal+json ApiKey: myKey  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/slette/",
	"title": "Slette",
	"tags": [],
	"description": "Operasjoner for å slette meldinger, underskjema og vedlegg",
	"content": " Sletting utføres med DELETE på message Følgende request sletter den aktuelle meldingen eller skjema. Når slettingen er utført returneres HTTP 204 - No Content.\nSletting av meldinger av typen correspondence sendt til organisasjoner er ikke mulig, verken i api-ene eller portal.\nDELETE https://www.altinn.no/api/{who}/messages/{messageid} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Slette vedlegg på en aktiv skjemainstans Følgende request sletter det angitte vedlegget på en aktiv skjemainstans.\nDELETE https://www.altinn.no/api/{who}/messages/{messageid}/attachments/{attachmentid} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Når slettingen er utført returneres HTTP 204 - No Content.\nSlette et eksisterende underskjema Følgende request sletter det angitte underskjemaet på en aktiv skjemainstans.\nDELETE https://www.altinn.no/api/{who}/messages/{messageid}/forms/{formid} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Når slettingen er utført returneres HTTP 204 - No Content.\nOversikt over slettede elementer Meldingsboksen i Altinn har en søppelbøttefunksjon. De fleste elementer som slettes vil først legges i søppelbøtten. REST API har implementert en operasjon som gir oversikt over alle elementer i søppelbøtten. Det er derimot foreløpig ingen operasjon for å gjennopprette elementer.\nGET https://www.altinn.no/api/{who}/messages/trashbin?language={language} HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  Ved korrekt autentisering vil du få følgende svar fra APIet:\n{ \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages\u0026quot; }, \u0026quot;find\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/{messageId}\u0026quot;, \u0026quot;isTemplated\u0026quot;: true } }, \u0026quot;_embedded\u0026quot;: { \u0026quot;messages\u0026quot;: [ { \u0026quot;MessageId\u0026quot;: \u0026quot;a546789\u0026quot;, \u0026quot;Subject\u0026quot;: \u0026quot;Vedr. saksnr 201301840, journalnr 2013021622 \u0026quot;, \u0026quot;Status\u0026quot;: \u0026quot;Slettet\u0026quot;, \u0026quot;LastChangedDateTime\u0026quot;: \u0026quot;2017-11-11T13:41:01.703\u0026quot;, \u0026quot;LastChangedBy\u0026quot;: \u0026quot;Kommunene\u0026quot;, \u0026quot;ServiceOwner\u0026quot;: \u0026quot;Kommunene\u0026quot;, \u0026quot;Type\u0026quot;: \u0026quot;Correspondence\u0026quot;, \u0026quot;MessageSender\u0026quot;: \u0026quot;Brønnøy Kommune\u0026quot;, \u0026quot;ServiceCode\u0026quot;: \u0026quot;2479\u0026quot;, \u0026quot;ServiceEdition\u0026quot;: 2, \u0026quot;_links\u0026quot;: { \u0026quot;self\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/my/messages/a385107\u0026quot; }, \u0026quot;metadata\u0026quot;: { \u0026quot;href\u0026quot;: \u0026quot;https://www.altinn.no/api/metadata/correspondence/2479/2\u0026quot; } } } ] } }  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/meldinger/validere/",
	"title": "Validere",
	"tags": [],
	"description": "Operasjoner for å validere skjemasett",
	"content": " Validering utføres med VALIDATE på message Følgende request validerer en melding sitt skjemasett.\nValidering av meldinger er kun mulig for skjemasett som er under utfylling.\nNår valideringen er utført returneres HTTP 200 med en body som inneholder resultatet av valideringen.\nHeader\nGET https://www.altinn.no/api/{who}/messages/{messageid}/validate HTTP/1.1 Content-Type: application/hal+json ApiKey: myKey  For vellykket validering uten feil vil Success være satt til true og ValidationWarnings vil inneholde en liste over alle advarsler skjemaene gir.\nBody\n{ \u0026quot;Success\u0026quot;: true, \u0026quot;ValidationErrors\u0026quot;: [], \u0026quot;ValidationWarnings\u0026quot;: [ { \u0026quot;FieldName\u0026quot;: \u0026quot;KontaktpersonEPost\u0026quot;, \u0026quot;ErrorMessage\u0026quot;: \u0026quot;Har du e-postadresse som du kan kontaktes på?\u0026quot;, \u0026quot;FieldXPath\u0026quot;: \u0026quot;/Skjema/Skattyterinfo/Kontakt/KontaktpersonEPost\u0026quot; }, { \u0026quot;FieldName\u0026quot;: \u0026quot;KontaktpersonTelefon\u0026quot;, \u0026quot;ErrorMessage\u0026quot;: \u0026quot;Har du et telefonnummer som du kan kontaktes på?\u0026quot;, \u0026quot;FieldXPath\u0026quot;: \u0026quot;/Skjema/Skattyterinfo/Kontakt/KontaktpersonEPost\u0026quot; } ] }  For feilende validering vil Success være satt til false og ValidationWarnings/ValidationErrors vil inneholde en liste over alle advarsler/feilmeldinger skjemaene gir.\nBody\n{ \u0026quot;Success\u0026quot;: false, \u0026quot;ValidationErrors\u0026quot;: [ { \u0026quot;FieldName\u0026quot;: \u0026quot;KlageSpesifisering\u0026quot;, \u0026quot;ErrorMessage\u0026quot;: \u0026quot;Klagen skal alltid begrunnes..\u0026quot;, \u0026quot;FieldXPath\u0026quot;: \u0026quot;/Skjema/klage/spesifisering/KlageSpesifisering\u0026quot; }, { \u0026quot;FieldName\u0026quot;: \u0026quot;Samtykke_Skatt\u0026quot;, \u0026quot;ErrorMessage\u0026quot;: \u0026quot;Du må krysse av for et av alternativene\u0026quot;, \u0026quot;FieldXPath\u0026quot;: \u0026quot;/Skjema/Skattyterinfo/Kontakt/Samtykke_Skatt\u0026quot; }, { \u0026quot;FieldName\u0026quot;: \u0026quot;KlageUtloptKlagefristBegrunnelse\u0026quot;, \u0026quot;ErrorMessage\u0026quot;: \u0026quot;Du må forklare hvorfor klagen blir levert etter fristen.\u0026quot;, \u0026quot;FieldXPath\u0026quot;: \u0026quot;/Skjema/Skattyterinfo/klagefrist/KlageUtloptKlagefristBegrunnelse\u0026quot; } ], \u0026quot;ValidationWarnings\u0026quot;: [ { \u0026quot;FieldName\u0026quot;: \u0026quot;KontaktpersonEPost\u0026quot;, \u0026quot;ErrorMessage\u0026quot;: \u0026quot;Har du e-postadresse som du kan kontaktes på?\u0026quot;, \u0026quot;FieldXPath\u0026quot;: \u0026quot;/Skjema/Skattyterinfo/Kontakt/KontaktpersonEPost\u0026quot; }, { \u0026quot;FieldName\u0026quot;: \u0026quot;KontaktpersonTelefon\u0026quot;, \u0026quot;ErrorMessage\u0026quot;: \u0026quot;Har du et telefonnummer som du kan kontaktes på?\u0026quot;, \u0026quot;FieldXPath\u0026quot;: \u0026quot;/Skjema/Skattyterinfo/Kontakt/KontaktpersonEPost\u0026quot; } ] }  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/autentisering/virksomhetssertifikat/",
	"title": "Virksomhets­sertifikat",
	"tags": [],
	"description": "Dersom brukeren skal representere en virksomhet som har et virksomhetssertifikat, kan dette benyttes sammen med en virksomhetsbruker opprettet på Altinn.no til å autentisere seg mot Altinns REST-api.",
	"content": " For å kunne tilby en autentiseringsmekanisme uten personlig bruker/pin-koder, tilbyr Altinns REST-api støtte for bruk av virksomhetssertifikat. Autentiseringen gir sikkerhetsnivå 3 og kan brukes mot alle API-ets ressurser på vegne av organisasjonen sertifikatet tilhører og andre som organisasjonen har rettigheter på vegne av.\nDersom man utvikler en ekstern portalløsning der brukerne er innlogget med f.eks. ID-porten, kan IKKE sertifikatet brukes til å sende inn på vegne av disse. Virksomhetssertifikatet er en maskin-til-maskin-integrasjon på vegne av innehaverorganisasjon og andre den har rettigheter for, og må ikke forveksles med en mulighet til backend-integrasjon mot Altinn på vegne av brukere på ekstern portal.\n1. Sette opp virksomhetsbruker Etter at man har installert sertifikat fra utsteder, må man knytte sertifikatet opp mot virksomheten i Altinn ved å opprette en såkalt virksomhetsbruker. Dette er nærmere beskrevet her.\n2. Tildele roller og rettigheter Når man logger inn med en virksomhetsbruker første gang, har ikke denne tilstrekkelig med roller og rettigheter for en organisasjon til å kunne verken se aktive skjema eller sende inn nye før roller/rettigheter har blitt delegert.\n3. Autentisere seg mot Altinn API Send følgende POST-request mot APIet med brukernavn/passord for virksomhetsbruker opprettet i 1.\nPOST https://www.altinn.no/api/authentication/authenticatewithpassword?ForceEIAuthentication HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey { \u0026quot;UserName\u0026quot;: \u0026quot;MyUsername\u0026quot;, \u0026quot;UserPassword\u0026quot;: \u0026quot;MyPassword\u0026quot; }  Dersom requesten genereres fra ekstern webside, vil brukeren få beskjed om å velge sertifikat av nettleser (trigges av parameteren ?ForceEIAuthentication).\nVed programmatisk bruk fra f.eks. Java eller .NET legger man ved sertifikatet i HttpRequest.ClientCertificates.\nEksempelkode ligger her.\nNår man autentiserer seg mot REST-apiet ved hjelp av sertifikat, bruker man hele sertifikatet (eks .p12) - ikke .cer som man eksporterer for å opprette virksomhetsbruker i portal.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-11/",
	"title": "18.11",
	"tags": [],
	"description": "Forbedringer, fjerning av ALLEA, ytelse, feilrettinger m.m.",
	"content": " Endringer i portal Ytelse i meldingsboks - kostbar logikk per element Profilering fra produksjon samt code-review har avdekket at det gjøres mange tjenestekall for hvert element i meldingsboksen. Dette er svært uheldig i forhold til ytelse. Alle relevante data om et element bør hentes ut av tjenesten som returnerer meldingslista. Det er kun visuell logikk som ikke trenger tjenestedata som bør gjøres i meldingsboksen. Konkret er følgende utbedret:\n CanArchiveCorrespondence: Forbedret nøkkelhåndtering MessageSender: Logikk for å hente SBS navn caches CanDelete: Eksisterende tjenestekall erstattes av informasjon som allerede finnes  Flaskehals i navigasjonsmeny Profilering i produksjonsmiljøet viser en flaskehals i FillInForm-siden når man lager navigasjonsmenyen. Det blir gjort en \u0026ldquo;data bind\u0026rdquo; for hvert sporvalg i menyen. Man trenger bare å gjøre data bind for det første sporvalget.\nFeil i profil for administrering av varslingsadressene til en virksomhet Sletting av en varslingsadresse kunne vise feil rad som slettet rett etter lagring Feilen kunne gjennskapes ved å ha minst 2 varsladresser av samme type. For eksempel to epostadresser. Når bruker valgte å slette den øverste varseladressen for så å lagre endringen ville panelet igjen vise den slettete adressen. Adressen man ønsket å beholde var derimot borte. Hvis siden ble relastet så var det den riktige varslingsadressen som ble vist.\nEn slettet varslingsadresse ville dukke opp igjen hvis bruker trykket legg til ny varslingsadresse rett etter lagring Feilen kunne gjennskapes ved å ha minst 2 varsladresser av samme type. For eksempel to epostadresser. Bruker måtte så slette den nederste adressen å trykke lagre. Hvis bruker så valgte å legge til ny epostadresse ville den tidligere slettete varslingsadressen dukke opp igjen i det nye feltet. Denne feilen hadde nøyaktig de samme problemstillingene som den forrige og den ble også løst på nøyaktig samme måte.\nForretningslogikk i views benyttet av meldingsboks og aktørvalg Hjelpemetoder som benytter tjenestekall mot forretningslaget i views benyttet i meldingsboks og aktørvalg er ryddet opp i slik at arkitekturretningslinjene til Altinn overholdes.\nEndringer i integrasjon Utbedringer i integrasjon mot KoFuVi sitt synkroniseringsgrensesnitt KoFuVi har gjort endringer som har påvirket hvilke elementer som må være med i en fragment forespørsel. Hvor de tidligere skulle ha en KoFuViID skal det nå være noe de kaller Elastic search scroll id. Dessverre hadde Altinn hardkodet inn generering av forespørselen til å inkludere KoFuViID for siste element på forrige side istedenfor å benytte next page url. Denne endringen har korrigert dette slik at Altinn nå benytter angitt next page url istedenfor å generere dette selv.\nDet er også innført konfigurasjon av antall elementer per side når Altinn spørr KoFuVi om en Fragment. Verdien er i utganspunktet satt til 10000 som er maks for det KoFuVi vil levere, men det kan justeres helt ned til 2. Dette kan være spesielt nyttig ved testing av paging.\nMulighet for tjenesteeier å stå som avsender av SMS standalone varslinger Som tjenesteeier ønsker jeg å kunne endre avsender på sms standalone notification fra Altinn slik at det ser ut som SMS er sendt fra tjenesteeier og ikke Altinn.\nDriftsleverandør har fått støtte for å kunne motta hvem som skal stå som avsender for SMS varslinger.\nSOAP-grensesnitt for SendStandaloneNotification har nå fått nytt valgfritt input parameter: UseServiceOwnerShortNameAsSenderOfSms. For at tjenesteeier skal kunne stå som avsender må det registreres ShortName i tjenesteeier-tabellen i databasen. Ved deploy av 18.11 vil det bli satt ShortName for tjenesteeierene: NAV og ACN. Om/når andre tjenesteeiere ønsker å ta i bruk funksjonen må det innhentes ønsket ShortName for disse og oppdatere tjenesteeier tabellen.\nDet er også innført konfigurasjonverdi i Altinn: Notify_DefaultSmsOriginator, som spesifierer default avsender (Altinn).\nDenne benyttes når:\n tjenesteeier ikke ønsker å stå som avsender UseServiceOwnerShortNameAsSenderOfSms flagget ikke er spesifisert eller når det ikke er registrert ShortName for tjenesteeier  Endringer i autorisasjon Fjerning av basisrolle Som en rettighetsdelegerer ønsker jeg at det ikke følger med basisrolle når jeg gjør en delegering, slik at det er forutsigbart for bruker hvilke tilganger som deles ved en delegering, og at løsningen er i tråd med personopplysningsloven.\nDenne brukerhistorien handler om å fjerne automatikken som fører til at alle får ALLEA/Basisrolle i tillegg til den rollen som egentig er ment delegert. Alle steder hvor ALLEA er brukt er endret slik at Basis rolle ikke hentes opp eller automatisk tildelses.\nRydde opp i databasen rundt ALLEA Script utvikles for å lokalisere tjenester der ALLEA er eneste rollen som gir tilgang til opperasjoner og bytte ut rollen på disse opperasjonene med A0236 for meldingstjenester og UTINN for andre tjenester.\nI TUL så oppdateres loggen (ServiceEditionStatus) på alle berørte tjenester som står som uendret til Completed. For overstyrte rettigheter så benyttes \u0026ldquo;OverrideRights\u0026rdquo; som DataArea men for Tjenester og Tjenesteeier så benyttes \u0026ldquo;All\u0026rdquo;.\nI SBL oppdateres det på siste migrerte versjon siden det er denne som benyttes som basis for alle versjoner av utgaven. I tillegg så slettes alle knyttinger av ALLEA i TUL etter utbyttingen slik at ingen utgaver lenger vil være knyttet til ALLEA rollen.\nScript utvikles for å slette delegeringer av ALLEA i miljøene i Produksjon er det ca 9000 slike delegeringer. I tilleg så fjernes den som underrolle på alle ER roller ca 40 rolletyper slik at personer med DAGL, LEDE osv. heller ikke får ALLEA lenger. Dette gjøres både i TUL og i SBL.\nSanering av autorisasjonsregler Siden det er endret i tilgangskontrollen til å sjekke tilgang på utgave nivå og ikke på versjons nivå så er det en del regler som vil fremstå som duplikater siden de gjelder forskjellig versjon men samme utgave. Dette brutt ned i 4 scripts.\n Authorisasjonsregler for ER og ALtinn roller disse er alltid knyttet til nyeste versjon på en utgave så alle andre regler er overflødige Lokale roller har et innslag for hver versjon på samme utgave og det er bare en av disse som er nødvendig valgt å beholde den med lavest id Direkte delegete rettigheter fikk lagt inn nye versjoner hver gang en ny versjon ble migrert den nye versjonen fikk ikke delegeringsinformasjon og derfor er det reglene uten denne infoen som må slettes først Ved delegering ble det tidligere delegert på alle tidligere versjoner som allerede eksisterte slik at her er det bare en som må beholdes men alle er knyttet til hvem som delegerte og når så det må slettes fra begge tabellene.  Endringer i REST API Filtype på attachments via REST Som bruker av REST-API ønsker jeg å se filtype på attachments slik at jeg kan finne det vedlegget jeg ønsker uten å måtte laste ned alle.\nDenne brukerhistorien handler om å vise filtype på attachment som er sendt inn sammen med filnavnet. Det er lagt til et nytt parameter som returneres sammen med attachmentet i JSON-responsen. Den nye verdien har navngivning \u0026ldquo;fileName\u0026rdquo;. Den nye responsen er nå basert på at \u0026ldquo;Name\u0026rdquo; og \u0026ldquo;FileName\u0026rdquo; er satt riktig ved innsendelse av attachment. \u0026ldquo;Name\u0026rdquo; skal bare inneholde navnet på filen, f.eks \u0026ldquo;Vedlegg1\u0026rdquo;, mens \u0026ldquo;FileName\u0026rdquo; skal inneholde filnavn med extension, f.eks \u0026ldquo;Vedlegg1.pdf\u0026rdquo;.\nAuthorize reportee flaskehals Profilering i produksjon viser at den store flaskehalsen i Altinn API er autorisasjon av reportee. Dette er forbedret ved caching.\nEndringer i ERImport Informasjon registrert i enheters hjemland Som forvalter av Altinn løsningen, ønsker vi at informasjon registrert i enheters hjemland leses inn via ER batch. UREGN og ULOVN data blir nå lest inn til altinns register. Altinns Organisasjons-addresse er blitt utvidet med sin egen tabell, denne vil inneholde Organisasjonsaddresse, post-addresse og utenlandsk addresse (UREGN).\nAndre endringer Sanering av temp nøkler for lenketjenester Disse lagres for å kunne knytte en videresendt lenke til en brukers valg i Altinn slik at tjenesteeieren kan be om mer informasjon fra Altinn men denne har ikke verdi etter at den er brukt og heller ikke etter at det ikke lenger er noen naturlig knytting til en videresending det vil si at dette er ferskvare og her er det valgt å bare slette alt som er eldre en 30 dager dette er utført med en prosedyre som kan kalles.\nDen bør settes opp som en jobb som går kontinuerlig. Men først bør det kjøres kontrollert og slette det som er av etterslep siden 2012.\nFlytting av prosjektfiler i ulike komponenter for å fysisk skille logikk og PnC-prosjektene Fysisk separere logikk og PnC prosjektene i Authentication komponenten.\nDisse sakene gjøres for å få bedre support for NuGet pakker og vil gjøre det enklere for Altinn å lage NuGet pakker av egne komponenter. Dette vil være nødvendig for de prosjektene som fortsatt krever eldre versjoner av Visual Studio. For eksempel TUL og BizTalk. Dette er en del av et større arbeid før det er mulig å ta i bruk C# v7 og nyere.\nParameter som sendes inn som returnUrl faller bort ved bruk av ExternalAuthentication når autentiseringen går via ID-porten Query parameters til returnUrl faller bort ved bruk av ExternalAuthentication/Redirect.aspx.\nDette er en bug som har eksistert i applikasjonen over en lang periode. Ved en request mot ExternalAuthentication/Redirect.aspx ble bare den første parameteren i returnUrl-verdien sendt med videre til den endelige destinasjonen,\nForbedret caching i arkiv contekst handler Arkiv kontekst handler har fått en bedre og mer effektiv bruk av caching.\nFlaskehals i prosedyre for henting av roller Monitorering av databasen i produksjon viser en flaskehals i en prosedyre. Dette unngås nå ved å fjerne unødvendige joins.\nFeilretting Mottar mange e-poster ved klientdelegering på fil Som ansatt i regnskapsfirma ønsker jeg ikke å motta tusenvis av eposter når jeg er mottaker av klientdelegering på fil. Feil ble rettet som hasteendring i produksjon torsdag 22. november\n"
},
{
	"uri": "https://altinn.github.io/docs/helt/authorisation/",
	"title": "Autorisasjon",
	"tags": [],
	"description": "Generell beskrivelse av autorisasjon i HELT",
	"content": "Figur av autorisasjon\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakonsument/be-om-samtykke/",
	"title": "Be om samtykke",
	"tags": [],
	"description": "Hvordan sende sluttbruker til samtykkesiden i Altinn",
	"content": " Sende sluttbruker til samtykkesiden Datakonsument må sende sluttbruker til samtykkesiden med en parameter som sier at den ønsker en autorisasjonskode tilbake etter at samtykke er gitt. Autorisasjonskoden benyttes til å hente token, som er nøkkelen som datakonsumenten benytter for å få tilgang til data hos datakilden. Når låntaker for eksempel underveis i en søknadsprosess har angitt at han ønsker å gi samtykke til at opplysninger om han kan innhentes så må datakonsumenten sende brukeren til samtykkesiden i Altinn.\nNedenfor er et eksempel på URL til samtykkeside i produksjonsmiljøet i Altinn. Dette er bare et eksempel som viser oppbyggingen. URL må tilpasses tjenesten som skal benyttes. Skal samtykkesiden vises på f.eks. engelsk må parametre som DelegationContext og eventuelle metadata være på engelsk og verdi for engelsk må legges i LanguageCode.\nURL https://www.altinn.no/ui/AccessConsent/?Resources=4629_2.4630_2\u0026amp;CoveredBy=910514458\u0026amp;RedirectUrl=https://www.altinn.no\u0026amp;ValidToDate=2019-09-30%2010:30:00\u0026amp;LanguageCode=nb-NO\u0026amp;DelegationContext=Ved%20%C3%A5%20samtykke,%20gir%20du%20Skatteetaten%20rett%20til%20%C3%A5%20utlevere%20opplysninger%20om%20deg%20direkte%20til%20Banken%20AS.%20Banken%20f%C3%A5r%20opplysningene%20for%20%C3%A5%20behandle%20s%C3%B8knaden%20din%20om%20finansiering.\u0026amp;ResponseType=code\u0026amp;4629_2_inntektsaar=2016\u0026amp;4630_2_fraOgMed=2017-06\u0026amp;4630_2_tilOgMed=2017-08  Forklaring til parameterne i url:\n   Parameter Format Obligatorisk/valgfri Beskrivelse     Resources xxxx_x Obligatorisk Tjenestekode og tjenesteutgavekode på tjenesten som datakilde har definert som samtykketjeneste. Kan også være flere tjenester dersom det skal samtykkes til å dele data fra flere datasett hos en eller flere datakilder. Tjenestekode og tjenesteutgavekode separeres med underscore og ved bruk av flere tjenester separeres disse med punktum (eks. Resources=4629_2.4630_1) Kodene må man få hos datakilde   CoveredBy organisasjonsnummer Obligatorisk Organisasjonsnummeret til datakonsument.\nPå samtykkesiden er det navnet som er knyttet til organisasjonsnummeret som presenteres.   OfferedBy organisasjonsnummer eller fødselsnummer Valgfri Inneholder fødselsnummer eller organisasjonsnummer til aktøren som det ønskes samtykke fra.   RedirectUrl gyldig url Obligatorisk Url som sluttbruker blir sendt tilbake til etter å ha samtykket/ikke samtykket til innsyn i data   ValidToDate YYYY-MM-DD hh:mm:ss Obligatorisk Dato og tidspunkt for når samtykket opphører   LanguageCode en\nnb-NO\nnn-NO Valgfri Angir hvilket språk sluttbruker skal få opp samtykkesiden på. Kan velge mellom engelsk (en), bokmål (nb-NO) og nynorsk (nn-NO). Sendes ikke språkkode med kommer samtykkesiden opp på språket som er satt av bruker i profilen i Altinn   DelegationContext tekst Obligatorisk Beskrivelse fra datakonsument på hva som er formålet med samtykket. Det kan hende at det finnes føringer fra datakilde på utformingen av denne teksten. Sjekk med datakilde.   ResponseType code Obligatorisk Vil alltid være «code». Angir at man skal ha en autorisasjonskode i retur som skal benyttes for å hente token   Metadata tjenestekode_tjenesteutgavekode\n_parameternavn=verdi Valgfri For å gi ekstra metadata kan det defineres en eller flere samtykkeparameter som generelt er valgfri men kan påtvinges av utformingen av samtykketeksten som er definert av datakilde (eks. 4629_2_inntektsaar=2016)   UserToken Hex-enkodet SHA-256, eks: CF1F71474AF6B8F6241C1AE\u0026hellip; Valgfri Kan oppgis som en SHA-256 hash av en brukers fødselsnummer (11 siffer uten mellomrom). Hvis oppgitt, blir denne sammenlignet med evt. allerede innlogget bruker i Altinn. Hvis bruker er innlogget med et annet fødselsnummer, blir brukeren bedt om å logge inn på nytt.    I figuren nedenfor kan man se sammenhengen mellom det som ligger i url og det som presenteres for sluttbrukeren på samtykkesiden.\n Sammenheng mellom opplysninger i url og samtykkesiden   Autorisasjonskode Når sluttbruker har fått opp samtykkesiden og gitt samtykke vil han sendes tilbake til siden som er angitt i RedirectUrl.\nI denne url vil det sendes med autorisasjonskode og status.\nEksempel på url hvor status er OK:\nhttps://www.eksempel.no/?AuthorizationCode=0435d832-193b-4a13-a6d1-d172c18e18c7\u0026amp;Status=OK  Eksempel på url hvor sluttbruker har valgt å trykke på knappen for \u0026ldquo;Nei, jeg vil ikke gi samtykke\u0026rdquo;:\nhttps://www.eksempel.no/?Status=Failed\u0026amp;ErrorMessage=User%2520did%2520not%2520give%2520consent  "
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/bruke-gjennom-peppol/",
	"title": "Bruke gjennom PEPPOL",
	"tags": [],
	"description": "",
	"content": " Dette er dokumentasjon under arbeid for eBevis-tjenesten som per i dag ikke er produksjonssatt\n\rInnledning eBevis kan benyttes gjennom en spesiell dokumenttype tilgjengelig på PEPPOL-infrastrukturen. eBevis kjører sitt eget aksesspunkt (AP) som kan motta meldinger i et spesielt EHF (elektronisk handelsformat), som inneholder all informasjon knyttet til en forespørsel (hvem som spør, hvem det spørres om, hvilke data som etterspørres samt eventuelle vedlegg som danner hjemmelsgrunnlag). Alle forespørseler vil avstedkomme et svar i et tilsvarende EHF-format som inneholder de forespurte opplysningene (subsidiært feilmeldinger).\n Les mer om EHF-infrastrukturen  Leverandører Mange leverandører av KGV-er (konkurransegjennomføringsverktøy) er i dag koblet til PEPPOL-infrastrukturer og kan tilby tilkobling til eBevis til alle sine brukere innen offentlig sektor. Under er en liste over ulike løsninger som allerede i dag tilbyr innhenting av dokumentasjonsbevis gjennom eBevis.\nTODO! Legg inn tabell med leverandører, produkter, kontaktinformasjon\n\rTeknisk Her følger informasjon av teknisk art til hjelp for systemleverandører.\nPEPPOL Det er to ulike EHF-formater som brukes for å implementere eBevis. Alle request-meldinger vil bli besvart med én melding i formatet EHF Get Evidence Response. Alle konsumenter av eBevis må derfor være registrert i SMP (ELMA) som mulige mottakere av EHF Get Evidence Response. Forvaltning av ELMA gjøres av Difi.\n EHF Get Evidence Request-meldinger sendes til 0192:974760673 (Brønnøysundregistrene) Endepunktet støtter kun AS4-protokoll Meldingen må være i en SBD-konvolutt Meldingen kan valgfritt være i en signert (ikke kryptert) ASIC container  EHF Get Evidence Response-meldinger må sees i sammenheng med den korresponderende EHF Get Evidence Request-meldingen. EHF Get Evidence Response-meldinger fra andre avsendere enn eBevis, eller som ikke kan assosieres med en tidligere sendt EHF Get Evidence Request skal ignoreres.\n Les mer om innmelding i ELMA.  EHF Get Evidence EHF er basert på internasjonalt standardiseringsarbeid, nærmere bestemt; CEN BII Core data modellene og en syntaks implementering basert på Universal Business Language (UBL). EHF Get Evidence representerer to ulike formater (henholdsvis \u0026ldquo;Request\u0026rdquo; og \u0026ldquo;Response\u0026rdquo;). Formatet er utviklet og forvaltes av Difi.\n Teknisk dokumetasjon om EHF Get Evidence Les mer om EHF-formatene generelt  ASIC-E Alle EHF Get Evidence Response-meldinger som sendes fra eBevis legges i en ASIC-E container hvor selve dokumentet er signert med Brønnøysundregistrens virksomhetsertifikat. Konsumenter må besørge for utpakking og verifisering av innholdet før dette benyttes.\n Les mer om ASIC  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/",
	"title": "Diverse",
	"tags": [],
	"description": "Forskjellige andre ting man kan benytte API&#39;et til.",
	"content": "\r\rProfil\r\rAltinn API tilbyr tilgang til profil-data.\n\rMetadata\r\rAltinn API tilbyr en ressurs som gir tilgang til metadata for tjenester tilgjengelige i Altinn.\n\rSamtykke\r\rAltinns REST-funksjonalitet for samtykke\n\rFormidling\r\rAltinns REST-funksjonalitet for formidlingstjenester\n\rBetaling\r\rAltinns REST-funksjonalitet for betalingssteg\n\rReferanse-app\r\rAltinn har tilgjengeliggjort referansekode for å gjøre det enklere å lage applikasjoner med Altinn-funksjonalitet.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/regler/",
	"title": "Regler",
	"tags": [],
	"description": "Regelfilen bygges opp av en eller flere regler (valideringer eller overføringer). Alle reglene som støttes listes her.",
	"content": " Valideringsregler SimpleValidation SimpleValidation er regeltypen du bruker for å validere ved hjelp av standard betingelser.\nNødvendige parameter: Source\nOverføringsregler RemoveParentPost Denne regelen fjerner foreldreposten til et gitt felt dersom betingelsene er innfridd.\nNødvendige parameter: Source\nTransferValue Denne regelen blir brukt til å kopiere en verdi fra et felt til et annet. Feltene kan enten være i samme skjema eller i ulike skjema.\nNødvendige parameter: Source og Target\nTransferResult TransferResult er en regeltype som kan brukes dersom du vil gjøre utregninger før du overfører resultatet som verdi. Utregningene gjøres basert på verdier fra felter man angir i attributtene addFields, subtractFields, multiplyFields og divideFields. Disse skal ligge som attributter på Source elementet til regelen.\nNødvendige parameter: Source og Target\nSetFieldValue Regel som kan brukes til å sette en verdi i et felt basert på et sett av betingelser.\nNødvendige parameter: Target\nRemoveFieldElement Denne regelen kan brukes når du trenger å fjerne et spesielt felt basert på et sett av betingelser.\nNødvendige parameter: Source\nCalculateResult CalculateResult er en regeltype som kan brukes dersom du vil gjøre utregninger og overføre resultatet til et felt i skjema. Utregningene gjøres basert på det matematiske utrykket man angir i elementet CalcExpression.\nNødvendige parameter:\n Source Target Param med navn CalcExpression.  For CalcExpression så angir man det matematiske uttrykket i value attributtet til Param elemenetet.\nI det matematiske utrykket så kan man enten bruke konstante verdier eller man kan hente verdier fra felter i skjema. Hvis en verdi skal hentes fra felt i skjema så angis det ved å legge xpath til feltet inn i klammeparenteser i utrykker.\nNoen eksempler på bruk av CalculateResult regelen:\n\u0026lt;Rule type=\u0026quot;CalculateResult\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;4120\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;4120\u0026quot; field=\u0026quot;/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/skatterett\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;CalcExpression\u0026quot; value=\u0026quot;{/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/finansregnskap} * 3 / 2\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;RoundResultToGivenNumberOfDecimals\u0026quot; value=\u0026quot;1\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;Rule type=\u0026quot;CalculateResult\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;4120\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;4120\u0026quot; field=\u0026quot;/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/regnskapsfoererregelverket\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;CalcExpression\u0026quot; value=\u0026quot;{/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/finansregnskap} + {/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/skatterett}\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;CeilingOfResult\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;Rule type=\u0026quot;CalculateResult\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;4120\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;4120\u0026quot; field=\u0026quot;/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/rettslaere\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;CalcExpression\u0026quot; value=\u0026quot;{/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/regnskapsfoererregelverket} + ({/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/skatterett} * {/melding/Skjemainnhold_KRT-1005/omRegnskapsfoerer/etterutdanning/finansregnskap})\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;FloorOfResult\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  Valgfrie parameter:\n CeilingOfResult - Denne brukes til å angi om det skal gjøres en Ceiling av resultatet. Dette angis med verdien True i value attributtet til Param elementet.Param med navn FloorOfResult. Denne brukes til å angi om det skal gjøres en Floor av resultatet. Dette angis med verdien True i value attributtet til Param elementet. RoundResultToGivenNumberOfDecimals - Denne brukes til å angi om det skal gjøres en Round av resultatet. Her angir man ikke True for å indikere at det skal gjøres Round, men man angir antall desimaler det skal gjøres Round med.  TransferTransformedResult Denne regelen kan brukes når du trenger å sette sammen verdiene fra flere felter og overføre resultet til et enkelt felt som en kommaseparert liste.\nNødvendige parameter: Source og Target\nTransferSingleExternalValue Overfører en gitt ekstern verdi, dette er verdier som ikke ligger som en del av skjemadataen, men som kan settes eksplisitt i implementasjonen for f.eks lasting eksterne skjema.\nNødvendige parameter:\n Source Target Parameter med navn TransferType.\n  TransferType som er støttet pr. 01.10.2015 er ArchiveReference, som henter arkivreferansen fra et eksternt skjema og sette den i det gitte målfeltet.\nWebSA-spesifikke regler Det fins en rekke regeldefinisjoner som er utviklet spesielt for bruk i selvangivelsetjenestene. Disse er merket med websa: i starten av navnet.\nwebsa:InternalRF1224Calculations For bruk til kalkuleringer i skjema RF-1224.\nwebsa:TransferFromNO1ToRF1224 Regel for å overføre verdi fra fordeling av næringsinntekt (“Business Allocation”) (fra instansiering i RF-1175) til RF1224. Denne regelen blir ikke kjørt ved komplett innsending fra sluttbrukersystem.\nwebsa:TransferFromRF1084ToRF1030 Spesialregel for å overføre fra skjema RF-1084 til skjema RF-1030.\nDenne regelen blir ikke kjørt ved komplett innsending fra sluttbrukersystem.\nwebsa:TransferFromRF1084ToRF1175 Spesialregel for å overføre fra skjema RF-1084 til skjema RF-1175.\nDenne regelen blir ikke kjørt ved komplett innsending fra sluttbrukersystem.\nwebsa:TransferFromRF1125ToRF1030 Spesialregel for å overføre til postene 2.1.4 og 3.2.2 i skjema RF-1030 basert på skjema RF-1125.\nDenne regelen blir ikke kjørt ved komplett innsending fra sluttbrukersystem.\nwebsa:TransferSumFrom0402 Flytter fra post 4.0.2 (fra RF-1175) til RF-1030 basert på den valgte industrisektoren (industry type) og tilegnet inntekt.\nDenne regelen blir ikke kjørt ved komplett innsending fra sluttbrukersystem.\nwebsa:TransferSumToChildcare Brukes for å regne ut foreldrefradrag.\nwebsa:TransferSumToTravelDeduction Brukes for å regne ut fradrag for reise mellom hjem og arbeid/besøksreiser.\nwebsa:TransferSumToWizard Brukes for å flytte verdier fra RF-1084/RF-1219/RF-1224 (lenket via veiviseren og første instans av et bestemt skjema) til OrID-er eller veiviseren.\nwebsa:ValidatePost337StandardDeductionTempStay Dette er en spesialregel for å validere post 3.3.7\nwebsa:ValidateRF1219TransferToWizard For å lage en valideringsfeil dersom det er mer enn et RF-1219-skjema som er knyttet til veiviseren for selvstendig næringsdrivende (Business Wizard).\nwebsa:ValidateRF1224BelongsToPost0402 For å lage en valideringsfeil dersom det finnes RF-1224 instanser som ikke er knyttet til noen 4.0.2 post (fordeling av næringsinntekt) når PSAN er instansiert med RF-1175.\nwebsa: TransferFromRF1224ToRF1030 For å overføre null (0) fra RF 1224 til RF 1030. Hvis verdier i orid 26235 eller orid 26236 er negativ overføres 0 til henholdsvis 35613 eller 35616.\nWebsa:ValidateOnePrimaryDwelling For å validere at kun en bolig er valgt som primærbolig i postene tilknyttet 2.8/4.3 Bolig og annen fast eiendom\nSource Definerer skjema og felt som verdi (for overføring eller validering) skal hentes fra.\n\u0026lt;Source form=\u0026quot;245\u0026quot; field=\u0026quot;Skjema/Tilbakebetaling/Utbetaling\u0026quot; sumRecurringFields=\u0026quot;true\u0026quot; multiple=\u0026quot;true\u0026quot; addFields=\u0026quot;orid(7378),orid(7380)\u0026quot; subtractFields=\u0026quot;orid(15801),orid(32836)\u0026quot; /\u0026gt;  Forklaring:\n Form er dataformat-id til skjemaet. Field er referanse til et eller flere felt. Kan bli gitt som OR-id eller som komplett XPath. Antallet felt må samsvare med antallet felt definert som mål. SumRecurringFields forteller om overføringen skal summere repeterende felt eller ikke før overføringen. Multiple forteller om modergruppa kan få verdier fra flere kilder. Må være true eller false. AddFields er en liste over felt som skal bli lagt til verdien som skal overføres. Feltene skilles med komma. SubtractFields er en liste over felt som skal trekkes fra verdien som skal overføres. Feltene skilles med komma.  Target Definerer skjema og felt som skal ta imot verdiene eller feilmeldinger i forbindelse med valideringer.\n\u0026lt;Target form=\u0026quot;2\u0026quot; field=\u0026quot;Skjema/Tilbakebetaling/Utbetaling\u0026quot; index=\u0026quot;0\u0026quot; /\u0026gt;  Forklaring:\n Form er dataformat-id til skjemaet. Field er referanse til et eller flere felt. Kan bli gitt som OR-id eller som komplett XPath. Antallet felt må samsvare med antallet felt definert som kilde. Index er indeksen til målfeltet. Value brukes om du vil sette en fast verdi.  Param Param er et felleselement som kan brukes til mange ulike parametertyper. Attributtet name brukes til å fortelle hvilken type du vil at Param-elementet skal være.\nPercentageTransfer Denne definerer hvor stor del av verdien som skal overføres. value bestemmer den prosentvise delen av verdien som skal overføres. Standardverdi er 100.\n\u0026lt;Param name=\u0026quot;PercentageTransfer\u0026quot; value=\u0026quot;30\u0026quot;/\u0026gt;  IgnoreGuid Denne bestemmer om regelmotoren skal ta hensyn til sourceFormGuid når den gjør overføringen. Dersom verdien er true vil overføringen ikke merke xml-en med kildeskjema. For InfoPath-skjema må denne være true fordi InfoPath ikke vil forstå dette attributtet.\nValue må være enten true eller false.\n\u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  SignStorageHint Denne forteller om den overførte verdien skal bli lagret spesifikt som en positiv eller negativ verdi.\n\u0026lt;Param name=\u0026quot;SignStorageHint\u0026quot; value=\u0026quot;positive\u0026quot;/\u0026gt;  value forteller om verdien skal bli lagret som negativ eller positiv. Mulige valg her er positive, negative og any. Standardverdi er any.\nAlwaysRun Bestemmer om en overføringsregel i tillegg til å kjøres i utregningsprosessen også skal kjøres i valideringsprosessen.\n\u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value må være true eller false, og avgjør om regelen blir kjørt i valideringsprosessen i tillegg til utregningsprosessen eller ikke.\nIgnorePrefill Avgjør om et felt kan slettes selv om det er merket som pre-utfylt. Dette er bare relevant i skjema som ikke er InfoPath-skjema.\n\u0026lt;Param name=\u0026quot;IgnorePrefill\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value avgjør om feltet skal slettes selv om det er merket som pre-utfylt. Må være true eller false.\nRemoveFieldIfConditionsFail Dette avgjør om felt som ikke innfrir betingelsene for verdioverføring skal slettes. Standardverdi er true.\n\u0026lt;Param name=\u0026quot;RemoveFieldIfConditionsFail\u0026quot; value=\u0026quot;false\u0026quot;/\u0026gt;  value avgjør om dette feltet skal slettes dersom betingelsene ikke er innfridd. Mulige valg er true eller false. Standard er true.\nRemoveOnMismatch Forteller om målfeltet skal bli tømt dersom betingelsene ikke inntreffer.\n\u0026lt;Param name=\u0026quot;RemoveOnMismatch\u0026quot; value=\u0026quot;false\u0026quot;/\u0026gt;  value forteller om målfeltet skal slettes eller ikke. Må være true eller false. Standardverdien er true.\nTransfertype Avgjør typen overføring. Standard er “ManyToOne” (mange til en) der flere verdier blir regnet om til en verdi. «ManyToMany» (mange til mange) vil overføre hver enkelt verdi til et separat målfelt. Dette er et spesialparameter opprinnelig lagd for webSA post 402.\n\u0026lt;Param name=\u0026quot;TransferType\u0026quot; value=\u0026quot;ManyToMany\u0026quot;/\u0026gt;  value er enten ManyToOne eller ManyToMany.\nRemoveDirtyField Avgjør om såkalte «skitne felt» (felter som har blitt skrevet til i løpet av prosessen) skal fjernes eller ikke.\n\u0026lt;Param name=\u0026quot;RemoveDirtyField\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value må være true eller false. Standard er false.\nDoNotIgnoreZeroValue Avgjør om verdien 0 skal overføres eller ikke.\n\u0026lt;Param name=\u0026quot;DoNotIgnoreZeroValue\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value forteller om verdien 0 skal ignoreres eller ikke. Må være true (0 vil bli oppfattet som en verdi) eller false (0 vil bli ignorert). Standard er false.\nInsertEmptyIfNotCalculated Avgjør om 0 skal brukes som verdi dersom skjemaet ikke inneholder et eller flere felter som er nødvendige for å regne ut verdien i feltet.\n\u0026lt;Param name=\u0026quot;InsertEmptyIfNotCalculated\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value forteller om 0 skal brukes som verdi eller ikke når nødvendige felter mangler. Må være true eller false. Standard er false.\nTransferRecurringFields Avgjør om repeterende felt skal overføres.\n\u0026lt;Param name=\u0026quot;TransferRecurringFields\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value avgjør om repeterende felt skal overføres. Må være true eller false. Standard er false.\nSetNillable Brukes til å fortelle at verdien kan være blank (null).\n\u0026lt;Param name=\u0026quot;SetNillable\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value settes til true for å tillate null-verdier. Standard er false.\nPurgeOldTransfers Brukes når det er ønskelig at gamle overføringer skal slettes før nye gjennomføres. Bør kun brukes når det oppstår problemer med mange overføringer fra / til samme felt.\n\u0026lt;Param name=\u0026quot;PurgeOldTransfers\u0026quot; value=\u0026quot;true\u0026quot; /\u0026gt;  value forteller om målfelter skal slettes eller ikke. Må være true eller false. Standard er false.\nSetValueForMultiplePosts Brukes til å definere om oppdatering av feltverdi skal gjøres til alle målfelter i samme skjema.\n\u0026lt;Param name=\u0026quot;SetValueForMultiplePosts\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt;  value avgjør om oppdatering av verdi skal gjøres for alle målfelter i samme eller kun det første. Må være true eller false. Standard er false.\nWebSA-spesifikke Param Her følger en liste over Param-navn som benyttes i selvangivelsen.\nValueType Forteller om verdien er negativ, positiv eller begge deler. Til bruk med regel TransferSumFrom0402.\n\u0026lt;Param name=\u0026quot;ValueType\u0026quot; value=\u0026quot;negative\u0026quot;/\u0026gt;  value kan være both, positive eller negative. Brukes i kombinasjon med IndustryTypes. Se tabell under IndustryType.\nIndustryTypes Forteller hvilke industri-/næringsområde som verdien gjelder. Til bruk med regel TransferSumFrom0402.\n\u0026lt;Param name=\u0026quot;IndustryTypes\u0026quot; value=\u0026quot;Skiferbrudd,Skiferproduksjon\u0026quot;/\u0026gt;  Se tabellen under for aktuelle verdier i value.\nOversikt over kombinasjon av verdier i IndustryType og ValueType\n   IndustryType ValueType OrId for målfeltet i RF1030 Felt i RF1030     Inntekt fra familiebarnehager Positive 28262 2.1.3   Jordbruk_gartneri_pelsdyr, Pelsdyr, Jordbruk_gartneri Positive 27758 2.7.1   Skogbruk Positive 27759 2.7.2   Fiske_og_fangst Positive 33958 2.7.3   Reindrift Positive 27760 2.7.4   Skiferbrudd, Skiferproduksjon Positive 20662 2.7.5   Annen_naering Positive 27757 2.7.6   Familiebarnehage_i_eget_hjem, Inntekt_fra_familiebarnehager Negative 28299 3.2.19   Annen_naering Negative 21006 3.2.19   Jordbruk_gartneri_pelsdyr, Jordbruk_gartneri, Pelsdyr Negative 27784 3.2.19   Reindrift Negative 27786 3.2.19   Skiferproduksjon Negative 24729 3.2.19   Skogbruk Negative 27785 3.2.19   Fiske_og_fangst Negative 34097 3.2.19    BaseRate Avgjør den grunnleggende satsen. For bruk med InternalRF1224Calculations.\n\u0026lt;Param name=\u0026quot;BaseRate\u0026quot; value=\u0026quot;81153\u0026quot;/\u0026gt;  value skal være et heltall. Standard er 81153.\nOverMaxDistanceRate Avgjør prosentsats for den delen av reisen som er over maksavstanden. For bruk med TransferSumToTravelDeduction.\n\u0026lt;Param name=\u0026quot;OverMaxDistanceRate\u0026quot; value=\u0026quot;0.7\u0026quot;/\u0026gt;  value skal være et desimaltall. Standard er 0.7.\nNormalRate Avgjør normal prosentsats. For bruk med TransferSumToTravelDeduction.\n\u0026lt;Param name=\u0026quot;NormalRate\u0026quot; value=\u0026quot;1.5\u0026quot;/\u0026gt;  value skal være et desimaltall. Standard er 1.5.\nDeductible Avgjør bunnfradraget for reiseutgifter. For bruk med TransferSumToTravelDeduction.\n\u0026lt;Param name=\u0026quot;Deductible\u0026quot; value=\u0026quot;13950\u0026quot;/\u0026gt;  value skal være et heltall. Standard er 13950.\nMinimumTollAndFerryDeduction Avgjør minstebeløpet for å få bom- og fergeutgifter dekket. For bruk med TransferSumToTravelDeduction.\n\u0026lt;Param name=\u0026quot;MinimumTollAndFerryDeduction\u0026quot; value=\u0026quot;3300\u0026quot;/\u0026gt;  value skal være et heltall. Standard er 3300.\nMaxDistance Avgjør hva som er maksavstand for reisegodtgjørelse. For bruk med TransferSumToTravelDeduction.\n\u0026lt;Param name=\u0026quot;MaxDistance\u0026quot; value=\u0026quot;50000\u0026quot;/\u0026gt;  value skal være et heltall. Standard er 50000.\nMaxDeduction Avgjør maksimalfradrag. For bruk med ValidatePost337StandardDeductionTempStay.\n\u0026lt;Param name=\u0026quot;MaxDeduction\u0026quot; value=\u0026quot;40000\u0026quot;/\u0026gt;  value skal være et heltall. Standard er 40000.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/samtykke/",
	"title": "Samtykke",
	"tags": [],
	"description": "Altinns REST-funksjonalitet for samtykke",
	"content": "En mer utfyllende beskrivelse av samtykke finnes under guider/samtykke.\n"
},
{
	"uri": "https://altinn.github.io/docs/altinncore/status/",
	"title": "Status",
	"tags": [],
	"description": "Status på arbeidet med 3.0.",
	"content": "Dette er siste overordnede status for utviklingen av tjenester 3.0.\nStatus vil oppdateres etter hvert som ny informasjon er tilgjengelig.\nArbeid med konsepter, arkitektur og veivalg (2015/2016) Teknisk PoC utviklet for å verifisere konsepter og veivalg (april/juni 2016) Presentere PoC og konsepter for tjenesteutviklere og arkitekter for å få feedback (juni/september 2016) Presentasjon og demo på servicelederseminar med tjenesteeierne (14. september 2016) Levert satsingsforslag for 2018, tjenester 3.0 sentral del av satsing (november 2016) Presentasjon om brukerorientering på Altinndagen 2016 viste hvordan en fremtidig tjeneste kan fungere (28. november 2016) Tjenester 3.0 som produkt i Altinn produktstrategi. (v1.0 ferdig 10. januar, v1.1 ferdigstilt 2. mars 2017) Altinn Design System utvikles for å kunne gjenbruke UI-patterns på tvers av tekniske løsninger (ferdigstilt oktober 2017) Avklaringer finansiering satsingsforslag for 2018 (oktober 2017) Målbilde og arkitekturarbeid og arbeid med løsningsdesign, involvering av tjenesteeiere (høst/vinter 2017) Utvikle et tidlig \u0026ldquo;minmium testable product\u0026rdquo; (MTP) som man kan teste ut og gi feedback på. Altinn Studio MTP ble annonsert og tilgjengeliggjort på Altinn-dagen 20. september 2018. Legge ut kildekode, backlog og milepæler helt åpent på GitHub. Legge ut teknisk dokumentasjon på docs.altinn.studio og overordnet info på altinndigital.no. Utvikle et \u0026ldquo;minimum viable product\u0026rdquo; (MVP) som man kan benytte for å utvikle og produksjonssette tjenester MVP.01 - Jan-feb 2019 - Verktøy for utvikling av tjenester MVP.02 - April-mai 2019 - Kan deploye tjenster til testmiljø MVP.03 - Juni-sept 2019 - Kan deploye tjenster til prod   "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/",
	"title": "Tjenesteutvikling",
	"tags": [],
	"description": "Dokumentasjon for hvordan man utvikler tjenester i Altinn ved bruk av tjenesteutviklingsløsningen (TUL).",
	"content": "Hvordan utvikle tjenester i Altinn ved bruk av tjenesteutviklingsløsningen (TUL). Merk at enkelte bilder kan være litt utdaterte.\n\rInnledning\r\rOversikt og struktur, forutsetninger, beskrivelse av aktører samt overordnet prosess.\n\rKom i gang\r\rInstallasjon og klargjøring, Citrix, sentral funksjonalitet, statuser og beskrivelse av de ulike arbeidsflatene i TUL.\n\rTjenestetyper\r\rBeskrivelse av de ulike tjenestetypene i Altinn og hvordan man oppretter og utvikler dem.\n\rFunksjonalitet\r\rSentral funksjonalitet i TUL som understøtter tjenesteutvikling.\n\rDiverse\r\rMindre brukt funksjonalitet i TUL.\n\rVedlegg\r\rSkjemautvikling i InfoPath, utforming av brukergrensesnitt og brukervennlige tjenester, bruk av Visual Studio, web service oppslag, regelmotor, mapperutvikling, etc.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-10/",
	"title": "18.10",
	"tags": [],
	"description": "Slette meldinger permanent, andre forbedringer, feilrettinger m.m.",
	"content": " Endringer i portal Brukere som representerer en organisasjon kan nå permanent slette elementer fra “Slettede” i innboksen Brukere som representerer en organisasjon og som har rollen tilgangsstyring og rettigheter til å slette elementer kan nå permanent slette elementer fra “Slettede” i innboksen. Når bruker ønsker å permanent slette et element kommer det opp et varsel der brukeren er nødt til å bekrefte sitt ønske. Varselet kommer også opp når enkeltpersoner prøver å permanent slette elementer fra “Slettede”.  Altinn husker nå valget brukeren sist hadde ved bruk av “se alle underenheter” og/eller “se slettede enheter” Når bruker huker av for “se alle underenheter” og/eller “se slettede enheter” vil Altinn nå huske brukerens valg slik at neste gang brukeren er innom aktørvalg-siden vil avhukningsboksene for “se alle underenheter” og “se slettede enheter” reflektere forrige valg.  Maksimum størrelse på e-post utvidet til 1.4 MB Max størrelse på vedlegg som kan sendes på epost utvidet til 1.4 MB. Varsel kommer opp når meldingen er for stor til å videresende på epost. Man kan velge å videresende i altinn (ingen begrensing på størrelse for videresending i altinn) eller takke nei.\n CAPTCHA oppdatert i MVC portalen BotDetect CAPTCHA er nå blitt oppgradert på alle sider det dette benyttes.\n Operasjonene arkivering og permanent sletting av en aktiv melding skjuler nå utgåtte delegeringer fra oversikt over andres rettigheter Med denne endringen fjernes all informasjon om tidigere elementdelegeringer som ikke lenger har noen interesse fra oversikten. Dette gjør det lettere for tilgangsadministrator å se hvilke delegeringer som er aktive.\n Diverse bugfix Person med rettighet på enkelttjeneste fikk ikke delegert rettigheten videre Det ble innført en feil i 18.9 releasen av Altinn som gjorde at personer med tjenesterettigheter ikke fikk delegert videre. Dette skjedde hvis rettigheten de hadde var eldre enn versjonen av den gjeldende tjenesten. Dette er nå rettet opp.\nKvitteringen som skal sendes ut etter prosessering av en klientdelegeringsfil ble ikke alltid sendt Samlekvittering etter klientdelegering ble ikke sendt dersom fila inneholdt e-postadresse. Feilen oppsto etter 18.8 releasen av Altinn. Dette er nå rettet.\nTabbing i innboks hoppet over slett knappen Slett knappen blir nå også aktivert ved tabbing på siden.\nFjerning av ugyldige linker i resultatet fra slettede elementer i REST API Ved henting av slettede elementer via REST API ble det returnert noen ugyldige linker. Nå er self-linken korrigert på hele resultatet til å peke på /messages/trashbin istedenfor bare /messages. Find-elementet på hele listen ble fjernet, samt at det nå bare returneres metadata-link på selve message-element som ligger i slettede enheter (trashbin). Alle andre linker på message-objektene er fjernet.\nSnarveier for tastaturnavigering lagt til Meny som blir synlig når tastatur benyttes er lagt til på innboks, arkiv og slettede visningen for å lette navigering fra tastatur. Dette er samme meny som allerede finnes på Altinns infoportal og www.brreg.no.\n Feil lenke til Kontakt- og reservasjonsregisteret fra profilsiden Personer reservert mot kommunikasjon fra det offentlige får opp en tekst med en lenke på profilsiden som gir mulighet til å endre reservasjonsstatusen. Lenken gikk til feil side hos Kontakt- og reservasjonsregisteret. Dette er nå rettet opp. Lenken er dynamisk slik at den leder til riktig sted også i testmiljøene.\n "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/betingelser/",
	"title": "Betingelser",
	"tags": [],
	"description": "Betingelser (conditions) brukes til å styre om en regel skal kjøres eller ikke. Her listes alle betingelsene som kan benyttes.",
	"content": " Liste over betingelser Som del av regelmotoren er det definert et sett betingelser som kan brukes til å bestemme om en regel skal kjøres eller ikke. Følgende betingelser er tilgjengelige i Altinns regelmotor.\nAnyFieldIsEmpty Denne blir sann der et av de gitte feltene er tomme.\n\u0026lt;Condition type=\u0026quot;AnyFieldIsEmpty\u0026quot; check=\u0026quot;Skjema/Tilbakebetaling/Krav/Krav1, Skjema/Tilbakebetaling/Krav/Krav2\u0026quot;/\u0026gt;  Parameter\nListe av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma.\nAnyFieldIsMissing Betingelsen er sann dersom et av de gitte felt mangler fra xml-en.\n\u0026lt;Condition type=\u0026quot;AnyFieldIsMissing\u0026quot; check=\u0026quot;orid(33005),orid(33004)\u0026quot;/\u0026gt;  Parameter\nListe av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma.\nAnyFieldIsPositive Blir sann dersom et av de gitte feltene har en positiv verdi.\n\u0026lt;Condition type=\u0026quot;AnyFieldIsPositive\u0026quot; check=\u0026quot;orid(19890),orid(19792),orid(19794)\u0026quot;/\u0026gt;  Parameter\nListe av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma.\nAnyFieldHasValue Betingelsen blir sann hvis et av de gitte feltene har en verdi.\n\u0026lt;Condition type=\u0026quot;AnyFieldHasValue\u0026quot; check=\u0026quot;orid(19890),orid(19792),orid(19794)\u0026quot;/\u0026gt;  Parameter\nParameteren definerer en liste av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma.\nAnyFieldHasValueIgnoreZero Betingelsen blir sann hvis et av de gitte feltene har en verdi. Tallet 0 blir ikke regnet som en verdi.\n\u0026lt;Condition type=\u0026quot;AnyFieldHasValueIgnoreZero\u0026quot; check=\u0026quot;orid(19890),orid(19792),orid(19794)\u0026quot;/\u0026gt;  Parameter\nParameteren definerer en liste av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma.\nAnyFieldEquals Er sann dersom et av de gitte felt har en verdi som er lik den gitte verdien.\n\u0026lt;Condition type=\u0026quot;AnyFieldEquals\u0026quot; check=\u0026quot;Skjema/Utbetaling/Post1, Skjema/Tilbakebetaling/Krav1\u0026quot; value=\u0026quot;Ja\u0026quot;/\u0026gt;  Parameter\nListe av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma. value-attributtet definerer verdien feltene sjekkes mot.\nAnyFieldNotEquals Er sann dersom et av de gitte felt har ikke har en verdi som er lik den gitte verdien.\n\u0026lt;Condition type=\u0026quot;AnyFieldNotEquals\u0026quot; check=\u0026quot; Skjema/Utbetaling/Post1, Skjema/Tilbakebetaling/Krav1\u0026quot; value=\u0026quot;Ja\u0026quot;/\u0026gt;  Parameter\nListe av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma. value-attributtet definerer verdien feltene sjekkes mot.\nAnyFieldExists Er sann dersom et av de gitte feltene i check eksisterer.\n\u0026lt;Condition type=\u0026quot;AnyFieldExists\u0026quot; check=\u0026quot;Skjema/Utbetaling/Post1, Skjema/Tilbakebetaling/Krav1, Skjema/Utbetaling/Post2, Skjema/Tilbakebetaling/Krav2\u0026quot; /\u0026gt;  Parameter\nBruk check for å fortelle hvilke felt som skal sjekkes.\nCodeExistsInCodelist Brukes til å sjekke om en verdi finnes i en kodeliste\n\u0026lt;Condition type=\u0026quot;CodeExistsInCodelist\u0026quot; check=\u0026quot;orid(33)\u0026quot;/\u0026gt;  Parameter\ncheck brukes til å fortelle hvilket felt eller hvilken verdi som skal sjekkes. Du kan ikke bruke XPath for denne betingelsen.\nCodeNotInCodelist Blir sann dersom en verdi ikke finnes i en kodeliste.\n\u0026lt;Condition type=\u0026quot;CodeNotInCodelist\u0026quot; check=\u0026quot;orid(33)\u0026quot;/\u0026gt;  Parameter\ncheck brukes til å fortelle hvilket felt eller hvilken verdi som skal sjekkes. Du kan ikke bruke XPath for denne betingelsen.\nContainsAny Er sann dersom verdien av et gitt felt inneholder en av de gitte verdiene.\n\u0026lt;Condition type=\u0026quot;ContainsAny\u0026quot; check=\u0026quot;orid(34409)\u0026quot; value=\u0026quot;Nei,0\u0026quot;/\u0026gt;  Parameter\nParameteren for denne betingelsen definerer feltet (i check) og en liste av verdier separert med komma (i value).\nEquals Denne betingelsen blir sann om det gitte feltet har en verdi som er lik den gitte verdien.\n\u0026lt;Condition type=\u0026quot;Equals\u0026quot; check=\u0026quot;Skjema/Tilbakebetaling/Krav/Krav1\u0026quot; value=\u0026quot;1000\u0026quot;/\u0026gt;  Parameter\nListe av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma. Verdien det sjekkes mot blir angitt i attributtet value. Du kan ikke bruke XPath for denne betingelsen.\nNotEquals Denne er sann dersom det gitte feltet har en verdi som ikke er lik den gitte verdien.\n\u0026lt;Condition type=\u0026quot;NotEquals\u0026quot; check=\u0026quot;orid(34071)\u0026quot; value=\u0026quot;100\u0026quot;/\u0026gt;  Parameter\nListe av felter i skjemaet gitt i Source-noden. Feltene blir separert av et komma. Verdien det sjekkes mot blir angitt i attributtet value. Du kan ikke bruke XPath for denne betingelsen.\nSumEquals Denne betingelsen er sann dersom summen av feltene i check er lik summen av feltene i value.\n\u0026lt;Condition type=\u0026quot;SumEquals\u0026quot; check=\u0026quot;orid(34408),orid(34409)\u0026quot; value=\u0026quot;orid(34588),orid(34510)\u0026quot;/\u0026gt;  Parameters\nListe av felter i skjemaet gitt i Source-noden som skal summeres. En gruppe i check og en annen gruppe i value. Feltene blir separert av et komma. Du kan ikke bruke XPath for denne betingelsen.\nSumNotEquals Denne betingelsen er sann dersom summen av feltene i check ikke er lik summen av feltene i value.\n\u0026lt;Condition type=\u0026quot;SumNotEquals\u0026quot; check=\u0026quot;orid(34408),orid(34409)\u0026quot; value=\u0026quot;orid(34588),orid(34510)\u0026quot;/\u0026gt;  Parameters\nListe av felter i skjemaet gitt i Source-noden som skal summeres. En gruppe i check og en annen gruppe i value. Feltene blir separert av et komma. Du kan ikke bruke XPath for denne betingelsen.\nSumNotEqualsWithRange Blir sann dersom summen av feltene i check ikke er innenfor et område. Du kan bare ha et felt i denne betingelsen, avviket skal være parameter nummer to.\n\u0026lt;Condition type=\u0026quot;SumNotEqualsWithRange\u0026quot; check=\u0026quot;orid(34408),orid(34409)\u0026quot; value=\u0026quot;orid(34588),20\u0026quot;/\u0026gt;  Parameters\nListe av felter i skjemaet gitt i Source-noden som skal summeres i check. value skal være først en direkte verdi eller et felt som verdien skal hentes fra, og deretter hvor stor avvik som skal tillates. Feltene blir separert av et komma. Du kan ikke bruke XPath for denne betingelsen.\nIsPositive Denne betingelsen er sann om det gitte feltet har en positiv verdi. Tallet 0 blir ikke regnet som positivt.\n\u0026lt;Condition type=\u0026quot;IsPositive\u0026quot; check=\u0026quot;/Skjema/Tilbakebetaling/Krav/Krav1\u0026quot; form=\u0026quot;62\u0026quot;/\u0026gt;  Parameter\nParameter for denne metoden er en enkelt referanse (i check-attributet) til et felt i skjemaet definert i attributtet form.\nIsPositiveIncludingZero Denne betingelsen er sann om det gitte feltet har en positiv verdi. Tallet 0 blir regnet som positivt.\n\u0026lt;Condition type=\u0026quot;IsPositiveIncludingZero\u0026quot; check=\u0026quot; Skjema/Utbetaling/Post1, Skjema/Tilbakebetaling/Krav1\u0026quot;/\u0026gt;  Parameter\nParameter for denne metoden er en enkelt referanse (i check-attributet).\nIsPrefilled Finner ut om et felt eller gruppen den er del av er preutfylt.\n\u0026lt;Condition type=\u0026quot;IsPrefilled\u0026quot; check=\u0026quot; Skjema/Utbetaling/Post1, Skjema/Tilbakebetaling/Krav1\u0026quot;/\u0026gt;  Parameter\nHvilket felt som skal sjekkes legges inn i check.\nNotPrefilled Blir sann dersom et felt eller gruppen den er del av er preutfylt.\n\u0026lt;Condition type=\u0026quot;NotPrefilled\u0026quot; check=\u0026quot;orid(20804)\u0026quot;/\u0026gt;  Parameter\nHvilket felt som skal sjekkes legges inn i check.\nIsNegative Denne er sann om det gitte feltet har en negativ verdi.\n\u0026lt;Condition type=\u0026quot;IsNegative\u0026quot; check=\u0026quot;orid(32969)\u0026quot;/\u0026gt;  Parameter\nParameteren er en enkelt referanse i check til et felt i skjemaet som er gitt i Source-noden.\nIsEmpty Denne betingelsen er sann om et felt er tomt..\n\u0026lt;Condition type=\u0026quot;IsEmpty\u0026quot; check=\u0026quot;orid(34116)\u0026quot;/\u0026gt;  Parameter\nParameteren definerer et enkelt felt i skjemaet definert i Source-noden.\nIsEmptyWithZeroValue Er sann om et felt er tomt. Tallet 0 blir regnet som en verdi.\n\u0026lt;Condition type=\u0026quot;IsEmptyWithZeroValue\u0026quot; check=\u0026quot; Skjema/Utbetaling/Post1, Skjema/Tilbakebetaling/Krav1\u0026quot; value=\u0026quot;Ja\u0026quot;/\u0026gt;  Parameter\nParameteren definerer et enkelt felt i check.\nIsMissing Denne er sann dersom et felt mangler i skjema-xml-en (ikke er til stede i xml-en).\n\u0026lt;Condition type=\u0026quot;IsMissing\u0026quot; check=\u0026quot;orid(19794)\u0026quot;/\u0026gt;  Parameter\nDefinerer et enkelt felt i skjemaet funnet i Source-noden.\nIsNonValidEmail Sjekker om verdien er en gyldig epost-adresse. Returnerer sann dersom verdien ikke følger formatet til epost-adresse.\n\u0026lt;Condition type=\u0026quot;IsNonValidEmail\u0026quot; check=\u0026quot;orid(3344)\u0026quot;/\u0026gt;  Parameter\nFeltet som skal sjekkes fyller du ut i check. Du kan ikke bruke XPath for denne betingelsen.\nIsValidSSN Blir sann om det gitte feltet inneholder et nummer som følger formatet for personnummer (modulus-sjekk). Den vil ikke sjekke om det faktisk finnes en person som har dette personnummeret.\n\u0026lt;Condition type=\u0026quot;IsValidSSN\u0026quot; check=\u0026quot;orid(20804)\u0026quot;/\u0026gt;  Parameter\nDefinerer feltet som skal bli sjekket for personnummer.\nIsNonValidSSN Blir sann om det gitte feltet ikke inneholder et nummer som følger formatet for personnummer (modulus-sjekk). Den vil ikke sjekke om det faktisk finnes en person som har dette personnummeret.\n\u0026lt;Condition type=\u0026quot;IsNonValidSSN\u0026quot; check=\u0026quot;orid(20804)\u0026quot;/\u0026gt;  Parameter\nDefinerer feltet som skal bli sjekket for personnummer.\nIsValidOrgNr Denne betingelsen blir sann dersom det gitte feltet inneholder en verdi som passer med formatet for organisasjonsnummer.\n\u0026lt;Condition type=\u0026quot;IsValidOrgNr\u0026quot; check=\u0026quot;orid(34091)\u0026quot;/\u0026gt;  Parameter\nDefinerer feltet som skal sjekkes for organisasjonsnummer.\nIsNonValidOrgNr Denne betingelsen blir sann dersom det gitte feltet inneholder en verdi som ikke passer med formatet for organisasjonsnummer.\n\u0026lt;Condition type=\u0026quot;IsNonValidOrgNr\u0026quot; check=\u0026quot;orid(34091)\u0026quot;/\u0026gt;  Parameter\nDefinerer feltet som skal sjekkes for organisasjonsnummer.\nGreaterThan Denne er sann dersom verdien i et gitt felt er større enn den gitte verdien.\n\u0026lt;Condition type=\u0026quot;GreaterThan\u0026quot; check=\u0026quot;orid(6824)\u0026quot; value=\u0026quot;2014\u0026quot;/\u0026gt;  Parameter\nDefinerer feltet i checkog verdien det skal sammenlignes med i value. Du kan ikke bruke XPath for denne betingelsen.\nLessThan Denne er sann dersom verdien i et gitt felt er mindre enn den gitte verdien.\n\u0026lt;Condition type=\u0026quot;LessThan\u0026quot; check=\u0026quot;orid(6827)\u0026quot; value=\u0026quot;1900\u0026quot;/\u0026gt;  Parameter\nDefinerer feltet i checkog verdien det skal sammenlignes med i value. Du kan ikke bruke XPath for denne betingelsen.\nHasValue Er sann dersom det gitte feltet har en verdi. Tallet 0 er regnet som en verdi.\n\u0026lt;Condition type=\u0026quot;HasValue\u0026quot; check=\u0026quot;orid(6824)\u0026quot;/\u0026gt;  Parameter\ncheck definerer feltet som skal sjekkes.\nHasValueIgnoreZero Er sann dersom det gitte feltet har en verdi. Tallet 0 er ikke regnet som en verdi.\n\u0026lt;Condition type=\u0026quot;HasValueIgnoreZero\u0026quot; check=\u0026quot;orid(6824)\u0026quot;/\u0026gt;  Parameter\ncheck definerer feltet som skal sjekkes.\nNotPrefilled Denne betingelsen er sann dersom det gitte feltet ikke er pre-utfylt. Dette vil bare virke med selvangivelsetjenestene (APE) som er merket med pre-utfylte verdier.\n\u0026lt;Condition type=\u0026quot;NotPrefilled\u0026quot; check=\u0026quot;orid(22689)\u0026quot;/\u0026gt;  Parameters\nDefinerer feltet som skal bli sjekket for pre-utfylling.\nExists Blir sann dersom det gitte feltet eksisterer i xml-en.\n\u0026lt;Condition type=\u0026quot;Exists\u0026quot; check=\u0026quot;orid(34295)\u0026quot;/\u0026gt;  Parameter\nDefinerer feltet som det skal bli sjekket om eksisterer.\nHasForm Blir sann dersom skjemasettet inneholder et gitt skjema.\n\u0026lt;Condition type=\u0026quot;HasForm\u0026quot; form=\u0026quot;618\u0026quot;/\u0026gt;  Parameter\nDefinerer dataformat-id for skjemaet det skal sjekkes at er i skjemasettet.\nMissingForm Blir sann dersom skjemasettet mangler et gitt skjema.\n\u0026lt;Condition type=\u0026quot;MissingForm\u0026quot; form=\u0026quot;618\u0026quot;/\u0026gt;  Parameters\nDefinerer dataformat-id for skjemaet det skal sjekkes for.\nMatchPattern Sjekker om verdien oppfyller et regulært uttrykk (regular expression/regex). Returnerer sann dersom det er en match. (Regulære uttrykk er en måte å finne ut om en tekst oppfyller definerte kriterier. Hvordan du lager slike uttrykk faller utenfor denne håndboka. Du vil finne mange guider om dette på nettet.)\n\u0026lt;Condition type=\u0026quot;MatchPattern\u0026quot; check=\u0026quot;orid(33)\u0026quot; value=\u0026quot;([A-Z])\\w+\u0026quot;/\u0026gt;  Parameter\nLegg feltet som skal sjekkes i check og det regulære uttrykket i value. Du kan ikke bruke XPath for denne betingelsen.\nDoesNotMatchPattern Sjekker om verdien oppfyller et regulært uttrykk (se MatchPattern). Returnerer sann dersom det ikke er en match.\n\u0026lt;Condition type=\u0026quot;DoesNotMatchPattern\u0026quot; check=\u0026quot;orid(222)\u0026quot; value=\u0026quot;([A-Z])\\w+\u0026quot;/\u0026gt;  Parameter\nLegg feltet som skal sjekkes i check og det regulære uttrykket i value. Du kan ikke bruke XPath for denne betingelsen.\nHasAnyForm Blir sann dersom skjemasettet inneholder et av de gitte skjemaene.\n\u0026lt;Condition type=\u0026quot;HasAnyForm\u0026quot; form=\u0026quot;1,2,61\u0026quot;/\u0026gt;  Parameter\nDefinerer dataformat-ider for skjemaene det skal sjekkes for. De skal skilles med komma.\nValueNotInCodeList Denne betingelsen blir sann dersom et gitt felt ikke er lik en verdi fra en gitt kodeliste.\n\u0026lt;Condition type=\u0026quot;ValueNotInCodeList\u0026quot; codelist=\u0026quot;ASF_Land\u0026quot; check=\u0026quot;orid(34112)\u0026quot; value=\u0026quot;3\u0026quot;/\u0026gt;  Parameters\nDefiner kodelisten i «codelist», feltet i check og verdien i value. Du kan ikke bruke XPath for denne betingelsen.\nValueFoundMoreThanOnceInFields Sjekker om verdien finnes i mer enn et av de feltene du oppgir.\n\u0026lt;Condition type=\u0026quot;ValueFoundMoreThanOnceInFields\u0026quot; check=\u0026quot;orid(20804), orid(20805), orid(20806)\u0026quot; value=\u0026quot;orid(2045)\u0026quot;/\u0026gt;  Parameter\nBruk check for å angi feltene, og value for å gi verdien det skal sjekkes mot. Du kan ikke bruke XPath for denne betingelsen.\nNoneFieldHasValue Returnerer sann dersom ingen av feltene har en ­verdi.\n\u0026lt;Condition type=\u0026quot;NoneFieldHasValue\u0026quot; check=\u0026quot;orid(20804), orid(20805)\u0026quot;/\u0026gt;  Parameter\nFeltene definerer du i check.\nNotEqualAcrossMultipleForms Sjekker om en verdi ikke er lik over flere skjema. Returnerer sann dersom verdien er funnet mer enn en gang.\n\u0026lt;Condition type=\u0026quot;NotEqualAcrossMultipleForms\u0026quot; check=\u0026quot;orid(20804)\u0026quot; value=\u0026quot;orid(20810)\u0026quot;/\u0026gt;  Parameter\nLegg feltene som skal sjekkes i check, og verdien som skal sjekkes i value. Du kan ikke bruke XPath som value i denne betingelsen. For check vil XPath kunne brukes.\nAnyFieldIsPositiveIncludingZero Sjekker om noen av de gitte feltene har positiv verdi inkludert 0.\n\u0026lt;Condition type=\u0026quot;AnyFieldIsPositiveIncludingZero\u0026quot; check=\u0026quot;orid(18116),orid(26537)\u0026quot;/\u0026gt;  Parameter\nFeltene definerer du i check.\nDuplicatedValue Sjekker om gitt felt inneholder dupliserte verdier.\n\u0026lt;Condition type=\u0026quot;DuplicatedValue\u0026quot; check=\u0026quot;orid(19890)\u0026quot;/\u0026gt;  Parameter\nFeltet definerer du i check.\nDateNotWithinRange Sjekker om datoen i et gitt felt er innenfor en gitt periode (spesifisert med to datoer, kommaseparert).\n\u0026lt;Condition type=\u0026quot;DateNotWithinRange\u0026quot; check=\u0026quot;orid(35505)\u0026quot; value=\u0026quot;01-01-2012,31-12-2014\u0026quot;/\u0026gt;  Parameter\nFeltet definerer du i check. value forteller hvilken periode det skal sjekkes mot.\nHasAttachment Sjekker om et gitt vedlegg finnes for en form\n\u0026lt;Condition type=\u0026quot;HasAttachment\u0026quot; form=\u0026quot;AT03_Cycle01\u0026quot;/\u0026gt;  Parameter\nVedlegg definerer du i form.\nHasAnyAttachment Sjekker om noe av gitt vedlegg finnes for en form\n\u0026lt;Condition type=\u0026quot;HasAnyAttachment\u0026quot; form=\u0026quot;AT02_Cycle01, AT03_Cycle01, AT04_Cycle01, AT06_Cycle01\u0026quot;/\u0026gt;  Parameter\nVedlegg (kommaseparert) definerer du i form.\nMissingAttachment Sjekker om et gitt vedlegg finnes ikke for en form\n\u0026lt;Condition type=\u0026quot;MissingAttachment\u0026quot; form=\u0026quot;AT01_Cycle01\u0026quot;/\u0026gt;  Parameter\nVedlegg definerer du i form.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/bruke-rest-api/",
	"title": "Bruke gjennom REST-API",
	"tags": [],
	"description": "",
	"content": " Dette er dokumentasjon under arbeid for eBevis-tjenesten som per i dag ikke er produksjonssatt\n\rInnledning HTTP REST-APIet kan benyttes av alle konsumenter som et alternativ til PEPPOL. Integrasjon mot REST krever ingen spesiell programvare eller infrastruktur, men forutsetter at det benyttes et virksomhetssertifikat for autentisering.\nProtokoll og formater REST-APIet bygger på HTTP, og tilkoblinger sikres ved hjelp av TLS 1.1 kryptering. Dataene formateres i JSON.\nVersjonering API-et har et versjonsprefiks som en del av URL-en. Gjeldende versjon er \u0026ldquo;v1\u0026rdquo;, og eventuelt nye versjoner vil få \u0026ldquo;v2\u0026rdquo;, \u0026ldquo;v3\u0026rdquo; etc. eBevis vil så langt det lar seg gjøre unngå å introdusere nye versjoner, men for å sikre bakoverkompabilitet med alle konsumenter vil nødvendig forbedring og utvidelse av funksjonalitet kunne medføre at en ny versjon må introduseres.\nNye uavhengige actions og modeller vil kunne bli lagt til en eksisterende versjon, men ingen endringer (selv ikke rent additive) vil bli gjort på eksisterende actions og modeller i en gitt versjon.\nGamle versjoner vil bli støttet i minst XX måneder etter at en ny versjon tilgjengeliggjøres, og alle registrerte brukere i eBevis-API-et vil bli underrettet i god til før utfasing av gamle versjoner finner sted for å sikre at alle får migrert til ny versjon.\nMer informasjon om versjoner, endringslogg og planlagte utfasinger finnes i API-portalen.\n Gå til eBevis API Portal  Beviskoder Datafeltene (navn, antall og verdityper) i beviskoder er å regne som ikke-muterbare, men beviskoder vil kunne endre påkrevd tilgangsnivå når som helst. Ved behov for nye datafelter i en gitt beviskode, vil en ny uavhengig beviskode introduseres.\nGamle beviskoder vil kunne utfases i takt med tilgjengeligheten av dataene i de underliggende registrene. Disse er eksterne for eBevis, og følgelig utenfor vår kontroll - men så langt det lar seg gjøre vil beviskoder på samme måte som versjoner i API-et bli støttet i minst XX måneder før disse fases ut.\n Vis liste over alle beviskoder (JSON)  Feil- og statuskoder Feil- og statuskoder som beskrevet i metadata-API-et vil ikke kunne endres eller fjernes uten at ny versjon av API-et introduseres, men nye feil- og statuskoder vil kunne bli lagt til i en eksisterende versjon.\n Vis liste over alle statuskoder (JSON) Vis liste over alle feilkoder (JSON)  Autentisering og autorisasjon For å autentisere seg mot eBevis REST-API trenger man et virksomhetssertifikat utstedt av en offentlig godkjent aktør. Begge tilbyr både produksjons- og test-sertifikater som kreves for bruk mot de respektive miljøene.\nDette sertifikatet må benyttes gjennom standard klientsertifikat autentisering, noe de fleste HTTP-klienter støtter.\nAutorisasjon foregår gjennom registrering av en konto og bruk av API-nøkler.\n Les om virksomhetssertifikat fra Buypass Les om virksomhetssertifikat fra Commfides Les om bruk av klientsertifkat i Postman  Hvordan komme i gang med REST-API Alle brukere av eBevis må registrere en profil i eBevis API Portal, hvor man kan registrere applikasjoner og få utdelt API-nøkler som må oppgis i alle requests til eBevis. Kontaktopplysningene du oppgi vil bli benyttet for å sende informasjon om planlagte endringer og nedetid samt annen driftsrelatert informasjon. På profilsiden vil man også kunne hente ut detaljert bruksstatistikk.\n Gå til eBevis API Portal  Hvordan innhente opplysninger om en virksomhet For å hente ut informasjon, må man først sende en autorisasjonsforespørsel til REST-APIet, som inneholder informasjon om hvilken virksomhet man spør om og hvilke beviskoder det gjelder. Hvis forespørselen blir autorisert, vil man som svar få en akkrediterings-ID som representerer bevisforespørselen. For bevis som er åpne eller hjemmelsbaserte, vil ,am umiddelbart kunne høste disse bevisene med kall hvor denne akkrediterings-IDen oppgis. For bevis som krever samtykkesvar, vil man kunne sjekke status på dette (om svar er avgitt eller ikke), og så fort dette foreligger vil du kunne høste beviset på samme måte (så lenge samtykket er gyldig og ikke trukket tilbake).\n Vis liste over alle beviskoder (JSON) Vis oversikt over metadata-tjenester  Teknisk beskrivelse av API På portalen finner du oppdatert teknisk dokumentasjon om actions, modeller og feilsituasjoner. Du kan også hente ned Swagger/OpenAPI definisjoner.\nDet er to miljøer - production og staging. Begge miljøene har et metadata-API, som ikke krever autentisering eller autorisasjon for bruk.\n Oversikt over eBevis API-er  Bruke Postman for testing Det er utarbeidet en colection med forespørsler i Postman som fritt kan lastes ned og benyttes for testing mot eBevis REST API. Se Github-lenken under for mer informasjon.\n Postman-collection på Github Last ned Postman  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/formidling/",
	"title": "Formidling",
	"tags": ["TODO"],
	"description": "Altinns REST-funksjonalitet for formidlingstjenester",
	"content": " Per nå er det bare uthenting av filer lastet opp på formidlingstjenesten som er tilgjengelig via API.\nEn mer utfyllende beskrivelse av formidlingstjenesten i Altinn kommer etter hvert under Guider.\nLaste ned filer fra formidlingstjeneste GET https://www.altinn.no/api/{who]/brokerservice/files/{filereference} ApiKey: myKey Accept: application/hal+json  "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakonsument/hente-token/",
	"title": "Hente token",
	"tags": [],
	"description": "Hvordan veksle inn autorisasjonskode i token",
	"content": " Veksle inn autorisasjonskode i token Autorisasjonskoden som datakonsument mottar fra Altinn når sluttbruker har samtykket benyttes til å hente token. Altinn plattformen støtter at man kan veksle inn autorisasjonskoden via REST med ApiKey. Det krever at man har ApiKey som er registrert på organisasjonsnummer som enten matcher mottaker av samtykke eller registrert tredjepart som kan behandle samtykker på vegne av mottaker. Bestilling av nye nøkler, eller oppdatering av eksisterende, gjøres ved henvendelse til servicedesk@altinn.no.\nTokenet som returneres vil være en streng bestående av et base64-encodet Json Web Token.\nFor å hente ut token ved hjelp av autorisasjonskode over REST gjør man GET på\nhttps://www.altinn.no/api/authorization/token?authcode={AuthorizationCode}\nmed header ApiKey: {apikey}\nEksempel på response (encoded token):\neyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkthUGxpMFJUdVVUcl9yUXJWSmhzQkNXQS0yayJ9.eyJTZXJ2aWNlQ29kZXMiOi I0NjI5LDEiLCJBdXRob3JpemF0aW9uQ29kZSI6ImY0NTQ5NDNlLTNiNTctNGI0YS1iYjRjLTNkZjY0YTgwMmQ4NyIsIk9mZmVyZWRCeSI6I jA2MTE3NzAxNTQ3IiwiQ292ZXJlZEJ5IjoiOTEwNTE0MzE4IiwiRGVsZWdhdGVkRGF0ZSI6IjI3LjEwLjIwMTYgMjE6MTE6MTciLCJWYWxp ZFRvRGF0ZSI6IjA1LjAxLjIwMTcgMTA6MzA6MDAiLCJpc3MiOiJhbHRpbm4ubm8iLCJleHAiOjE0Nzc1OTU1MTcsIm5iZiI6MTQ3NzU5NTQ 4N30.S9RBNazx2Ml0R93cSEf_LC5YP2UcYtFf7w6JH_OPy_MK1HhVIxA2e-5DQjPV53HmKBhlHmL3Wxz36KzIXddfz1olKLEK7Xqn61FJFL TCiReKcySRcvDtRhLtFVH8zT-VcaEEXyA9_tTUumUVKTqy9vPMDOYAhmih55uT__Ghs5UQbxDZXLJ08f-SDUq-wlcbU8TFLfBnrQBxF53Sf L3BvmjYTg_xm69mBRkGuW431fZnMiY_U3Omrd0gHniu8ri33lpEaL3ip1Lq65QC_jVzy2WHN1RdQCA5WiYGJ89GoSZL2eAtCS8d7qngsMUu zBPpcn4hDiI7MkK4RWrAc2drTw  Hvis datakilde ønsker å verifisere hvilken verdi som ligger i \u0026ldquo;offeredBy\u0026rdquo; (fødsels- eller organisasjonsnummer til den som har gitt samtykke) så må token decodes. Se her for eksempel på decoded token samt informasjon om sertifikat som må benyttes ved decoding.\nREST-tjenesten returnerer 403 dersom authcode er ugyldig eller Apikeyen ikke har tilgang til angitt autorisasjonskode:\n403 The API key is not authorized for this operation, or the supplied authorization code is either expired or invalid.  Hente data fra datakilden ved hjelp av Altinn-signert token Når datakonsument har mottatt Altinn-signert token benyttes dette i request mot datakilden for å få tilgang til data. Formatet på hvordan denne informasjonen overføres må avtales mellom datakilde og datakonsument, og styres ikke av Altinn.\nToken har 30 sekunders varighet og datakonsument må be om nytt token når det har gått ut (benytt samme autorisasjonskode om igjen).\n"
},
{
	"uri": "https://altinn.github.io/docs/helt/project-plan/",
	"title": "Overordnet prosjektplan og -status",
	"tags": [],
	"description": "",
	"content": "HELT sitt mandat er å utvikle et konsept for helhetlig tilgangsstyring som gjør autorisasjonsløsningen til Altinn lettere å gjenbruke og bedre rustet for teknologiutviklingen og ulike brukerbehov. I tillegg til konseptutvikling, arbeider konseptteamet i HELT med å videreutvikle og finne områder der eksisterende tjenester tilhørende autorisasjonskomponenten kan gjenbrukes. Det er flere prosjekter og produkter som leveres av Altinn som påvirker hva brukerne forstår med tilgangsstyring og som bør presenteres til brukerne på en måte som er tillitsskapende og gir de en god oversikt over hvem som har tilgang til deres data\ngantt title A Gantt Diagram dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1 , 20d section Another Task in sec :2014-01-12 , 12d another task : 24d  "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/",
	"title": "Samtykke",
	"tags": [],
	"description": "Dokumentasjon for samtykkeløsningen i Altinn",
	"content": " Samtykkeløsningen i Altinn gjør det mulig at sluttbruker kan samtykke til at data om dem kan deles mellom en datakilde (tjenesteeier) og en datakonsument (den som trenger data). Samtykke betyr i denne sammenhengen at brukeren gir en tredjepart midlertidig innsynsrett på et spesifikt datasett om brukeren som ligger lagret i tjenesteeiers database.\nBruker vil kunne se hva de samtykker til å dele, hvem de deler data med, hvor lenge, og innenfor hvilken kontekst dataene skal brukes.\nOm samtykkeløsningen Gjennom samtykkeløsningen i Altinn kan brukeren gi samtykke til at en tredjepart, en datakonsument, får midlertidig innsynsrett på et spesifikt sett med opplysninger om brukeren. Dette kan for eksempel være ligningsdata fra Skatteetaten. Med brukerens samtykke vil datakonsumenten bli tildelt en tidsbegrenset lese-rettighet for en eller flere definerte ressurser representert ved tjenester i Altinn.\n  Samtykkeløsningen er etablert slik at datakilde (tjenesteier) har stor fleksibiltet i hvordan data skal tilbys til datakonsument. Data kan gå via Altinn eller utenom Altinn slik at data kan tilbys via forskjellige formater og grensesnitt. Felles for flytene er at sluttbruker blir presentert samtykkesiden i Altinn hvor sluttbruker kan velge å samtykke til tilgangen.\nHer beskrives bruk av samtykkeløsningen med dataflyt direkte mellom datakilde og datakonsument med bruk av self-contained OAuth 2.0 token utstedt av Altinn. Tokenet, som blir signert med Altinns sertifikat, inneholder all informasjon knyttet til de delegerte rettighetene og benyttes av datakonsument mot datakilde slik at datakilde kan verifisere at innholdet er pålitelig.\nMålgruppe Målgruppen for denne dokumentasjonen er datakilder og datakonsumenter som skal ta i bruk samtykkeløsningen hvor selve dataflyten skal gå direkte mellom partene og hvor Altinn benyttes til tilgangskontroll.\nBruk av \u0026ldquo;Self-contained OAuth 2.0 token\u0026rdquo; Self-contained OAuth-token betyr at tokenet i seg selv inneholder all informasjon om rettigheten(e) som er blitt delegertfra sluttbruker til datakonsumenten.\nFiguren under viser prosessen med bruk av self-contained OAuth token i et lånesøknads case hvor en bank er datakonsumenten og Skatteetaten er datakilden:\n Prosess   Steg i prosessen  Lånesøker går inn på bankens nettside for å søke om lån. Lånesøker bekrefter i søknadsprosessen at han ønsker å gi banken samtykke til å innhente ligningsopplysninger og blir sendt til Altinn for å gi samtykke. Lånesøker logger inn i Altinn og gir samtykke. Altinn registrerer samtykket og delegerer rettighet. Rettighetsdelegering er utført og det sendes en autorisasjonskode tilbake. Lånesøker sendes tilbake til siden som er angitt av banken i redirect-Url. I Url sendes autorisasjonskoden samt en status som forteller om samtykke ble gitt. Autorisasjonskoden benyttes av banken mot Altinn for å få tak i Altinn-signert self-contained OAuth token. Altinn sender signert token til banken. Banken benytter signert token mot datakilden (f.eks. Skatteetaten). Tokenet verifiseres av Skatteetaten for å sjekke at innhold stemmer med ønsket utført operasjon og data returneres til banken.  Detaljerte guider \rFor sluttbruker\r\rHvordan samtykke oppleves for sluttbruker\n\rFor datakilde\r\rUtføres av datakilde/tjenesteeier\n\rFor datakonsument\r\rUtføres av datakonsument\n\rBegrepsliste\r\rBegrepsliste samtykke\n\r"
},
{
	"uri": "https://altinn.github.io/docs/altinncore/satsingsforslag/",
	"title": "Satsingsforslag 2018",
	"tags": [],
	"description": "Kort oppsummering av satsingsforslag for 2018.",
	"content": " Det ser nå ut til at Altinn får 55 millioner for 2018. Merk at dette er et totalbeløp som også skal dekke andre områder enn tjenester 3.0.\nOppsummering For å nå målsettingene i Regjeringens satsingsområde konkurransekraft for norske arbeidsplasser, Digital agenda og å nå målene i Altinn-strategien, foreslås det å modernisere Felleskomponenten Altinn.\nVidereutvikling av Altinn legger til rette for økt realiseringstakt av helhetlige digitale offentlige sluttbrukertjenester, og muliggjør prinsippet om at informasjon til det offentlige skal leveres kun én gang. Selvbetjente verktøy for tjenesteproduksjon skal forenkle, og det skal legges bedre til rette for samhandling, innovasjon og informasjonsdeling ved bruk av Altinn.\nFormålet med tiltaket er:\n Helhetlig offentlige sluttbrukertjenester med brukeren i sentrum Informasjon til det offentlige skal leveres kun én gang  "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/dev-in-code/",
	"title": "Utvikling i kode-editor",
	"tags": [],
	"description": "Hvordan 3.0 kan tilpasses med bruk av kode-editorer.",
	"content": "TODO\n"
},
{
	"uri": "https://altinn.github.io/docs/altinncore/dev-in-browser/",
	"title": "Utvikling i nettleser",
	"tags": [],
	"description": "Hvordan 3.0 kan benyttes av fagpersoner via nettleser.",
	"content": "TODO\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-9/",
	"title": "18.9",
	"tags": [],
	"description": "Støtte for eIDAS autentisering, mindre forbedringer, feilrettinger m.m.",
	"content": " Endringer i portal Som bruker av stort aktørvalg ønsker jeg at filtreringsmulighetene er lettere tilgjengelig Checkbokser, for å vise underenheter og slettede enheter, er nå flyttet opp over listen over tilgjengelige aktører i stort aktørvalg.  Figur1: Filtreringsvalg er nå øverst   Endringer i TUL (tjenesteutvikling) Stoppe migrering av tjenester med ALLEA-basisrolle ALLEA rollen fases ut. Dette vil skje gradvis gjennom flere releaser. I denne omgang implementeres det en ny metode som kalles: \u0026ldquo;under validering av tjenesten ved migrering\u0026rdquo;. Dersom tjenesten har definert rollen ALLEA som rettighet, stoppes migreringen og en feilmelding vises. Feilmeldingen ber tjenesteutvikler om å fjerne denne rollen.\nOppdatert hjelpetekst for samtykketekst-felt i TUL Informasjonstekst i TUL er oppdatert slik at man bedre forstår at man ikke kan endre “betingelser” i samtykketekst uten å opprette en ny utgave.\nEndringer i eksterne grensesnitt Endring i dateFrom / dateTo-parametre i REST-API Som bruker av REST-API ønsker jeg å kunne begrense resultatsett av Messages, etter dato for siste endret. Kall til Messages i REST-API med query-parametrene dateFrom og dateTo filtrerer nå på dato for siste endring på elementet. Dette i stedet for filtrering for dato for opprettelse.\nDiverse bugfix Blindeprogrammet Jaws 18 greier ikke å lese aktørvalg i Internet Explorer etter oppdateringen i mai I Internet Explorer ble oppdatering av søk utløst ved tab-navigering i listen, noe som gjorde at det elementet man navigerte til i listen mistet fokus. Det er nå lagt til en sjekk som gjør at tab-navigering ikke trigger oppdatering av listen.\nHjelpetekst mangler på “tillat bare engangssamtykker” i tjenesteutviklings løsningen (TUL) Koden oppdatert slik at hjelpeteksten nå er synlig.\nFår meldingen \u0026ldquo;non-functional error\u0026rdquo; (attachmenttypename) (webservice) Ved innsending av skjema (SubmitFormTask) med 2 eller flere vedleggstyper feilet innsendinger hvor man ikke oppgav regelnavn på vedlegg (AttachmentTypeName). Dette er nå løst ved å legge til null-sjekk.\nSøk på tvers - funksjonalitet som forsvant etter 18.8 release Rettet en feil som gjorde det vanskelig å bruke søk på tittel som måte å avgrense resultatene av et søk på tvers.\nForbedret ytelse for samtykke Optimalisering av lagrede prosedyrer og nye/endrede indekser for å forbedre skalering og svartider rundt samtykke.\nInfoportal eGuide-funksjonalitet Løsningen består av spørsmål og svar i en stegvis prosess for brukeren, som resulterer i en huskeliste (\u0026ldquo;har du husket\u0026rdquo;) basert på svar/valg i denne prosessen. Er nå lagt ut på \u0026ldquo;Starte og drive bedrift\u0026rdquo;-delen av Informasjonsportalen.\nLagt til favorittikon i infoportal Favorittikon er nå lagt til i infoportal, slik at det kommer opp i nettleserfanen.\n"
},
{
	"uri": "https://altinn.github.io/docs/altinncore/architecture/",
	"title": "Arkitektur",
	"tags": [],
	"description": "Beskrivelse av arkitekturen til 3.0.",
	"content": " For flere detaljer, se https://docs.altinn.studio/architecture\nGit Det distribuerte versjonskontrollsystemet Git er nå det klart mest brukte versjonskontrollsystemet for utvikling av programvare.\nDet er derfor naturlig å benytte Git også for lagring og versjonering av tjenestene som utvikles.\nHver tjeneste vil lagres i et eget Git-repository, og vil inneholde en eller flere utgaver.\nBåde tjenesteutvikling i nettleser og tjenesteutvikling i kode-editor vil jobbe mot de samme versjonskontrollerte filene, og ha fullt innsyn i de filene som en tjeneste består av.\nDokumentasjon Dokumentasjon av tjenester 3.0 vil ligge åpent tilgjengelig på GitHub slik at alle kan bidra og foreslå forbedringer.\nMarkdown vil benyttes som format både for dokumentasjon, men også for tekst-ressurser og dokumentasjon for den enkelte tjeneste som utvikles.\nÅpen kildekode, cross platform Tjenester 3.0 skal være basert på fri og åpen programvare som kan kjøre på alle plattformer, og ikke benytte proprietær programvare. Selve 3.0-løsningen vil i seg selv også deles som åpen kildekode. Se også fjerde målsetting.\nProgramvare 3.0 vil benytte bl.a. følgende teknologier. Enkelte ting kan endre seg.\n   Teknologi Beskrivelse     Visual Studio Code Veldig populær kodeeditor som bare blir bedre hver enste måned. Åpen kildekode og faktisk det prosjektet på GitHub med flest bidragsytere.   React Bibliotek som vil benyttes for å utvikle bl.a. gjenbrukbare UI-komponenter. Mye brukt, mange har kompetanse, og veldig godt likt av utviklere.   TypeScript Typet superset av JavaScript.   Git Distribuert versjonskontroll-system som benyttes for å lagre og versjonere tjenestene som utvikles. Git-baserte løsninger for versjonskontroll er klart mest brukt i verden, med innebygd støtte i mange verktøy.   .NET Core Rask, modulær og åpen plattform for moderne applikasjoner og API\u0026rsquo;er.   Bootstrap 4 Verdens mest poulære CSS/JS rammeverk for responsive web-applikasjoner. Benyttes også av Altinn og i designsystemet.   Docker Virtualiseringsteknologi for containers. Viktig muliggjører for DevOps, kontinuerlige leveranser og en arkitektur som understøtter microservices.   Kubernetes Orkestrering, deploy og skalering av container-baserte løsninger.   Linux Selv om 3.0 er cross-plattform, og dermed kan kjøre på alle plattformer, så benyttes Linux-baserte containere. Linux er en åpen og en ganske populær plattform.    "
},
{
	"uri": "https://altinn.github.io/docs/guides/betaling/",
	"title": "Betaling",
	"tags": [],
	"description": "Implementasjonsguide for betaling",
	"content": " Innledning Dette dokumentet inneholder spesifikk informasjon om hvordan man teknisk og funksjonelt kan ta i bruk Betaling i Altinn for å gjøre betaling som del av en innsendingstjeneste eller frittstående.\nBetaling - En Altinn tjeneste En del offentlige tjenester innebærer brukerbetaling som del av saksbehandlingen. Dette kan gjøres enkelt via ny funksjonalitet i Altinn levert med Altinn versjon 16.1.\nAltinn og flere tjenesteeiere i Altinn-samarbeidet, har sett behovet for en betalingsløsning som del av Altinn. En gruppe representanter for flere tjenesteeiere og Altinn har jobbet mot å kunne tilby dette.\nDel av arbeidsflyten Betalingsløsningen kan være del av arbeidsflyten til en innsending på fire ulike måter:\n I parallell med innsendingssteget\nDet vil si at man fyller ut et skjema, og fra siden der man skal bekrefte innsending velger man «Send inn og betal». Man sendes videre til en av betalingsleverandørene, og så snart betaling er utført er man tilbake på kvitteringen på innsending i Altinn.VarselDPVUtenRevarsel\n Betaling før signering\nDer man etter utfylling først gjennomfører en betaling, og deretter signerer på innsendingen. Betaling etter signering\nDer man får fylle ut og signere en innsending før man sendes videre til betalingsløsningen Forhåndsutfylt betaling\nDet vil si at det ikke kreves noen aktiv utfylling av et skjema. Brukeren sendes direkte til et betalingssteg.  Altinn har støtte for betaling med tre av de største betalingsleverandørene på det norske markedet. Det er opp til tjenesteeier å lage avtale med den leverandøren de ønsker å bruke av alternativene Nets, Payex og DIBS. Altinn vil også ha funksjonalitet for å begrense hvilke betalingsalternativer som er tilgjengelig – for eksempel hvis det er uønsket at betaling skal skje med enkelte typer kort.\nKan være avhengig av utfyllingen Det trenger ikke være et forhåndsbestemt beløp som skal betales per innsending. Tjenester med betaling kan defineres slik at hvor mye som skal betales avhenger av hva som fylles ut i skjemaet. Det går også an å definere at det kun er bestemte data som skal medføre betaling. Utfyllingen trenger ikke skje i Altinn. Betaling er også tilgjengelig til bruk i for eksempel apper eller tjenesteeiernes egne nettsteder via Altinns REST-API. Brukeren trenger med andre ord ikke vite at det er Altinns betalingsløsning som benyttes som del av en tjenesteeier sin tjeneste.\nGjennomgang av oppsett av enkel betalingstjeneste Definering i Tjenesteutviklingsløsningen (TUL) Betalingsleverandøravtale Grunnleggende for å få satt opp en betalingsløsning er at tjenesteeier (TE) har gjort en avtale med betalingsleverandør om bruk av dennes betalingstjenester. Data om denne avtalen må legges inn i TUL for å kunne lage en tjeneste med betaling. Her støtter løsningen avtaler med Nets, Payex og DIBS. Felter for å spesifisere at en tjenesteutgave skal ha betalingsfunksjonalitet vil være skjult inntil minst en betalingsleverandøravtale er lagt inn i TUL. Betalingsavtalen finnes til høyre på tjenesteeierarbeidsflaten under «Felles ressurser for tjenesteeier»\nVed åpning av denne kommer en til side for opprettelse og vedlikehold av betalingsleverandøravtaler\nVed vedlikehold/opprettelse av avtale må betalingsleverandør, merchant-id og nøkler mottatt fra betalingsleverandør legges inn. Videre kan betalingsmåter begrenses ved å sjekke boks for dette valget som vist på bunnen i seksjon «Legg til ny avtale for betalingsleverandør» av betalingsavtalen under.\nMed betalingsavtale på plass kan tjeneste med betaling spesifiseres.\nUtgavespesifikasjon Det er en seksjon under Utgaveparametre nederst på tjenesteutgaven som spesifiserer hvordan betaling skal fungere. Denne blir som tidligere nevnt først synlig når minst en betalingsavtale er registrert:\n «Bruk betaling» bestemmer om betalingssteg skal aktiveres for denne tjenestutgaven.\n «Ordrenummer genereres i skjema» bestemmer om betalingstransaksjonene skal få unikt ordrenumer automatisk generert fra teller i Altinn eller om tjenesteutvikler skal lage ordrenummer i skjema etter fritt valgt logikk. Er dette feltet aktivert så er det da tjenestutvikler som genererer ordrenummer gjennom logikk i skjema. Ordrenummer er et av fire felter som er obligatoriske for betalingen og som sendes i utvekslingen som skjer med betalingsleverandøren. Mer lenger ned om disse 4 feltene (heretter kalt betalingsfelter)\n «Betalingsleverandøravtale» angir hvilken avtale som skal brukes for denne tjenesteutgaven.\n «XPath til».. Betalingsfelter som må finnes i meldingsdefinisjonen for skjema (xsd). De sendes i utveksling med betalingsleverandøren. «sum-felt» er beløpet som skal betales. Typisk sum av tjenester/artikler i skjema. Dersom sum er null etter endt utfylling av sluttbruker vil ikke steget for betaling bli gjennomført. Tjenesteutvikler kan da gjennom dette feltet styre om sluttbruker skal ledes gjennom betalingssteget og dermed måtte betale. Eksempelvis kan tjenesteutvikler sette feltet til null som følge av valg sluttbruker har tatt og dermed unngå betaling. Skjema sendes inn uavhengig av om betaling utføres. «beskrivelse-felt» angir tekst som beskriver betalingen. «ordrenummer-felt» unik alfanumerisk verdi som settes i skjema/av Altinn for å identifisere transaksjonen (se om ordrenummer over). «transaksjonsid-felt» unik verdi som settes av betalingsleverandør for å identifisere transaksjonen.\n  Under Prosessflyt er det 4 maler som har med betaling å gjøre:\n Betaling (med innsending) Tjenesteutvikler har definert i skjemadefinisjonen hvilke verdier som skal være i betalingsfeltene. Dvs at sluttbruker har ikke anledning til å fylle ut skjema, bare gjøre selve betalingen. Skjema sendes inn og betalingstransaksjonen utføres. Utfylling og betaling (med innsending) Sluttbruker fyller ut skjema og betaler deretter for skjema. Skjema sendes inn og betalingstransaksjonen utføres. Utfylling, betaling og signering Sluttbruker fyller ut skjema, betaler og signerer. Utfylling, signering og betaling (med innsending) Sluttbruker fyller ut skjema, signerer og betaler. Skjema sendes inn og betalingstransaksjonen utføres.  Bruk i Sluttbrukerløsningen (SBL) Her er det illustrert hvordan det kan arte seg for sluttbruker når betaling gjennom prosessflyt 2 – Utfylling og betaling (med innsending), brukes. Første steg: Skjema fylles ut. Dette er et test-skjema som bare inkluderer betalingsfeltene.\nAndre steg: Skjema kontrolleres og vises før betaling. Ved å trykke «Betal og send inn» nederst til høyre, så blir bruker ledet til betalingsleverandør sin betalingsterminal.\nBruker velger betalingsform\nBruker legger inn betalingsdetaljer\nBetalingstransaksjon utføres og skjema sendes inn.\nTredje steg: Bruker vises kvitteringsside.\nBetaling kan også brukes via REST-API: https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/betaling/\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/betaling/",
	"title": "Betaling",
	"tags": [],
	"description": "Altinns REST-funksjonalitet for betalingssteg",
	"content": " Ved bruk av Altinns REST-api kan man videresende brukeren til betalingssteget i portal på https://www.altinn.no.\nFremgangsmåte  GET på elementet som skal betales (f.eks. https://www.altinn.no/api/my/messages/aXXXXX) Hente ut verdi fra link med navn payment Redirecte brukeren til linken, alternativt med parameteret returnurl for å hente brukeren tilbake til samme side etter at betaling er utført.  Domenet på returnurl må være registrert sammen med apikey for å ikke bli stoppet av CORS. Når brukeren kommer tilbake vil URL-en ha en ny parameter, kalt resource som inneholder link til elementet (etter arkivering vil elementet få nytt navn - bXXXXX) Hvis man ikke bruker returnurlvil siste respons i prosessen ha status 204 og location header inneholder URI til arkivert element.   "
},
{
	"uri": "https://altinn.github.io/docs/guides/digital-post-til-virksomheter/",
	"title": "Digital Post til Virksomheter",
	"tags": [],
	"description": "Implementasjonsguide for DPV",
	"content": " Innledning Dette dokumentet inneholder spesifikk informasjon om hvordan man teknisk og funksjonelt kan ta i bruk Meldingstjeneste i Altinn for å sende digital post til virksomheter (heretter benevt som DPV), slik dette er omfattet i avtalen for dette. Altinns meldingstjenester kan benyttes i ulike sammenhenger, ofte i forbindelse med andre dialogtjenester i Altinn. DPV er således en påbygg for de avsendere som i utgangspunktet kun skal sende post til virksomheter uten behov for å knytte dette tett til en spesifikk innsendingstjeneste i Altinn, eller særskilte behov som ikke dekkes av DPV.\nTradisjonell bruk av Meldingstjenester i Altinn har Tjenesteeierne selv utviklet egne Meldingstjenester, der de selv kan stille krav til at kun brukere med spesielle roller skal få tilgang. I DPV introduseres derimot meldingstjenester som er generelle i krav om sluttbrukers rolle. Det vil være opp til virksomhetene som mottar post å styre tilgang til egen post, og formidle denne videre inn i sin organisasjon, enten via automatiske og maskinell integrasjon med Altinn eller tilgang i Altinn meldingsboks.\nOverordnet funksjonalitet Altinn har utviklet et ferdig sett med Meldingstjenester til bruk i DPV. Dette er fellestjenester som alle avsendere av DPV kan benytte uten noen form for tjenesteutvikling på forhånd. Det er foreløpig utviklet 10 ulike Meldingstjenester innenfor ulike tjenesteområder, inkludert en generell kategori:\n   Kategori ExternalServiceCode / ExternalServiceEditionCode     Post fra det offentlige innenfor administrasjon 4255/10   Post fra det offentlige innenfor plan, bygg og geodata 4255/1   Post fra det offentlige innenfor helse, sosial og omsorg 4255/2   Post fra det offentlige innenfor oppvekst og utdanning 4255/3   Post fra det offentlige innenfor kultur, idrett og fritid 4255/4   Post fra det offentlige innenfor trafikk, reiser og samferdsel 4255/5   Post fra det offentlige innenfor natur og miljø 4255/6   Post fra det offentlige innenfor næringsutvikling 4255/7   Post fra det offentlige innenfor skatter og avgifter 4255/8   Post fra det offentlige innenfor tekniske tjenester 4255/9    Alle disse Meldingstjenestene er knyttet opp til en ny Rolle i Altinn «Post/Arkiv». Det anbefales at avsender benytter meldingstypen \u0026ldquo;Generell: Post fra det offentlige innenfor administrasjon\u0026rdquo;, hvis det ikke er særskilte behov for at posten skal prekategoriseres for sluttbruker. Det er verdt å nevne at metadata på postmeldinger bør videreutvikles, men basert på en mer fleksibel og skalerbar modell som kan benyttes i ulike domene og fagområder.\n\rJfr figur over, basisfunksjonalitet for forsendelse av Meldinger i Altinn dekker fra før av behov for forsendelse, statusoppdatering, varslinger og revarsel. Men i tillegg til basis meldingsfunksjonalitet er det for DPV lagt inn mulighet for:\n Å sende post på vegne av annen virksomhet. En mottaker vil da kunne se hvem som er den faktiske avsender, ikke den tekniske avsender. Altinn loggfører både hvem som er teknisk og hvem som er faktisk avsender. Styrt brukertilgang til post via rollen «Post/Arkiv» Å hente status på inntil 10.000 meldinger ad gangen (ny Web Service) eller basert på søkekriterier Å benytte virksomhetsertifikat på Web Service operasjoner uten å måtte angi brukernavn+passord (altså en mer \u0026lsquo;normal\u0026rsquo; bruk av virksomhetsertifikat).  Varsel og evt revarsel Varsler og revarsel i DPV benytter generell funksjonalitet for dette i Altinn. I Altinn kan man utvikle egne varselsmaler til spesifikk bruk, med ulike forhåndsdesignet statiske tekster og bruk av \u0026ldquo;variabler\u0026rdquo; (tokens) for utfylling av evt avsenderstyrt varselstekst (i runtime). For DPV tilbys 2 varselsmaler, som bør benyttes der det er behov for varsel og evt revarsel:\n VarselDPVUtenRevarsel\nFor varsler der det ikke er behov for å sende revarsel\n VarselDPVMedRevarsel (7 dager)\nFor varsler der det er behov for både å sende varsel og revarsel hvis ikke lest innen 7 dager  Altinn vil benytte den kontaktinformasjon som allerede er registrert i Altinn for forsendelse av varsler hvis ikke avsender angir dette spesifikt selv i postforsendelsen. Avsender må altså kun kjenne til org.nr til mottager hvis de ikke selv ønser å spesifisere dette.\nJuridisk er det viktig å være klar over følgende: Krav om revarsling er knyttet til om forsendelsen gjelder enkeltvedtak og lignende, jf eForvaltningsforskriften § 8, 5.ledd og 6.ledd:\n«Informasjonssystemet skal registrere tidspunktet for når parten har skaffet seg tilgang til enkeltvedtaket, og data som bekrefter at vedkommende har rett til å gjøre seg kjent med vedtaket. Har parten ikke skaffet seg tilgang til enkeltvedtaket innen én uke fra det tidspunktet vedtaket ble gjort tilgjengelig, og varsel ble sendt, skal parten varsles en gang til i samsvar med tredje ledd. Første og annet punktum gjelder ikke dersom vedtaket er sendt en elektronisk adresse mottaker oppgir jf. annet ledd annet punktum.\nDet som gjelder enkeltvedtak i annet til femte ledd ovenfor, gjelder tilsvarende for;\n forhåndsvarsel etter forvaltningsloven § 16, for andre meldinger som har betydning for vedkommendes rettsstilling eller for behandlingen av saken, og for meldinger som det av andre grunner er av særlig betydning å sikre at vedkommende mottar.»  Integrasjon Statlige virksomheter integrerer seg mot tjenesten DPV via Difis Integrasjonspunkt for eFormidling, eller direkte fra egne løsninger mot Altinns Webtjenestegrensesnitt. Ta kontakt med idporten@difi.no for å bestille tilgang til tjenesten DPV med eFormidling. Du kan lese mer om tjenesten her: (https://samarbeid.difi.no/felleslosninger/eformidling).\nKommuner kan benytte KS sin løsning (SvarUt), og kan henvende seg til KS (http://www.ks.no/fagomrader/utvikling/digitalisering/svarut/komme-i-gang-med-svarut/).\nDPV for Sluttbruker: Det blir enklere for alle mottakere av post når denne er knyttet til en generell rolle uansett hvem som er avsender. For en Sluttbruker vil man da kun delegere tilganger til en virksomhet sin post én gang for all post fra alle avsendere.\nDe som skal lese post for en virksomhet må ha rollen «Post/Arkiv». Alle som har en nøkkelrolle i en virksomhet får denne rollen automatisk. Rollen «Post/Arkiv» kan videre delegeres til:\n Andre privatpersoner Andre virksomheter Virksomhetsbrukere (som benytter virksomhetssertifikat)  Det er kun de som har nøkkelrolle (daglig leder, styreleder o.l) eller har fått rollen «Tilgangsstyring» som kan delegere videre.\nSluttbrukere kan integrere sine IKT løsninger mot egen Meldingsboks i Altinn, slik mange allerede har gjort siden Altinns begynnelse. Altinn tilbyr Web Services enten i form av SOAP eller REST.\nDe standard Meldingstjenestene for DPV er alle satt opp på sikkerhetsnivå 3. Sikkerhetsnivå 4 er mulig i Altinn, men inntil videre er dette ikke satt opp for DPV meldingstjenestene. Det er i dag kun mulig å lese meldingstjenester med sikkerhetsnivå 4 ved ordinær innlogging via Idporten, men maskinintegrasjon er ikke mulig. Virksomhetsertifikat-autentisering gir kun sikkerhetsnivå 3, og Idporten støtter pr i dag ikke systemautentisering. Hvis det allikevel blir behov for at DPV støtter meldingstjenester på sikkerhetsnivå 4 vil Altinn generere og tilby meldingstjenester som krever dette nivået, men da med dagens begrensning at maskinintegrasjon ikke er mulig.\nDPV for Avsender: Alle som skal ta i bruk DPV, må i utgangspunktet benytte de felles meldingstjenestene som er utviklet. Avsender må selv vurdere om de ønsker å benytte 1 eller flere av de 10 felles meldingtjenestene som er utviklet.\nTanken med DPV er basert på dagens Meldingstjenester i Altinn med noen få valgfrie endringer. Teknisk kan dagens Tjenesteeiere fortsatt benytte eksisterende meldingstjenester, men bør vurdere overgang til de generelle og felles Meldingstjenestene som nå er ferdig utviklet i Altinn, der Altinn står som forvalter og tjenesteutvikler.\nDe etatene som benytter egenutviklete Meldingstjenester kan fortsette med dette hvis det er særskilte behov for å styre spesifikke rollekrav/tilganger til en melding og at den benyttes i en flerveis dialogtjeneste sammen med andre sluttbrukertjenester i Altinn.\nEksisterende avsendere må derfor konfigurere om sine løsninger slik at man benytter de korrekte tjenestekodene når de skal benytte de nye generelle DPV meldingstjenestene.\nEn avsender kan sende post ved å knytte seg til Altinns Web Service grensesnitt «InsertCorrespondence», eller på Batch (SFTP). Når en offentlig virksomhet er registrert i Altinn som Tjenesteeier eller gjort avtale for bruk av DPV kan man benytte DPV og de felles meldingstjenestene direkte ved enten:\n Bestille brukernavn + passord Benytte eget virksomhetssertifikat  For de som skal sende post på vegne av andre organisasjoner, så skal et nytt parameter benyttes i integrasjonsgrensesnittet, \u0026ldquo;OnBehalfOfOrgNr\u0026rdquo;. Dette feltet skal da inneholde et orgnr for en offentlig virksomhet som har gyldig tjenesteeier-/DPV- avtale med Altinnn.\nEllers kan parameter \u0026ldquo;MessageSender\u0026rdquo; benyttes som før for de som har behov for å angi for sluttbruker et spesifikk avsendernavn innenfor egen organisasjon.\nFunksjonalitet og grensesnitt For mer utfyllende og generell dokumentasjon på de tekniske grensesnittene se Tjenesteeier, som gir informasjon om alle Altinn Web Services grensesnitt samlet.\nDet tilbys både grensesnitt på Batch og Web Services. Vi anbefaler å benytte Web Services fremfor Batch-grensesnitt. Man må uansett benytte Web Services grensenitt for å hente status på sendte meldinger.\nAktuelle grensesnitt Web Service for avsendere Endepunktene for virksomhetssertifikat under er nye endepunkt ifm DPV, der avsender kun autentiseres med gyldig virksomhetssertifikat, som valideres mot gyldige tjenesteeiere i Altinn. Om man velger å benytte Soap 1.1 eller 1.2 har ingen praktiske forskjeller uten det rent tekniske. Det er utviklet en ny Status Web Service for de som ønsker å hente inn inntil 10.000 status basert på ExternalShipmentReference fra operasjonen InsertCorrespondence (send post).\n\rSend post For innsending av melding til mottakers meldingsboks i Altinn. Denne kan benyttes både til privatpersoner og organisasjoner.\n Basic SOAP 1.1\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalBasic.svc\nOperasjon: InsertCorrespondenceBasicV2 SOAP 1.2\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternal.svc\nOperasjon: InsertCorrespondenceV2 Virksomhetssertifikat\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalAEC.svc\nOperasjon: InsertCorrespondenceAEC  Hent Status på Post (Alternativ 1 - anbefalt) Ny operasjon, benyttes av en tjenesteeier/avsender for å sjekke status på et sett (inntil 10.000) av meldinger basert på ExternalShipmentReference fra operasjonen InsertCorrespondence (send post).\n Basic SOAP 1.1\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalBasic.svc\nOperasjon:GetCorrespondenceStatusHistoryBasic SOAP 1.2\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternal.svc)\nOperasjon:GetCorrespondenceStatusHistory Virksomhetssertifikat\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalAEC.svc\nOperasjon:GetCorrespondenceStatusHistoryAEC  Hente Status på Post (Alternativ 2):  SOAP 1.1\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalBasic.svc\nOperasjon:GetCorrespondenceStatusDetailsBasicV3 SOAP 1.2\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternal.svc\nOperasjon:GetCorrespondenceStatusDetailsV3 Virksomhetssertifikat\nhttps://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalAEC.svc\nOperasjon:GetCorrespondenceStatusDetailsAECV3  Bruk av Web Services samt virksomhetssertifikat For de Avsendere som ikke velger å benytte Virksomhetsertifikat må det utstedes brukernavn+passord som i dag på Tjenesteeier grensesnitt (WS). Dette gis ut ifb. avtaleinngåelse om bruk av DPV.\nNår det gjelder bruk av Virksomhetssertifikat: På de nye Web Servicene til DPV, er disse satt opp slik at det holder å være registrert som brukere av DPV (\u0026ldquo;inngått avtale\u0026rdquo;) med org.nr, som må matche virksomhetssertifikatet. Altinn trenger altså ikke noe annet fra Avsender enn en DPV avtale, og at Avsender er registrert i Altinn. Altinn trenger f.eks. ikke noe nøkkelinformasjon fra selve Virksomhetssertifikatet.\nBehov for test og testmiljø Altinns testmiljø https://tt02.altinn.no/ kan benyttes for Avsendere som har behov for dette. Testbrukere (sluttbrukere og sluttbruker-organisasjon i meldingsboksen) gis ut til de som trenger dette, slik at man kan sjekke mottak av post i dennes meldingsboks.\nI møtet på mandag kom vi fram til at istedenfor at alle som vil teste i TT02 må bestille sine egne test sertifikater så kjøpes det inn fem som vi eier og kan låne ut til de som trenger det. Avsender sertifikat kan deles så lenge de har egne mottakerbedrifter som de kan sende til og sjekke resultater.\nDet er slik at hvis nye Avsendere skal teste DPV i TT02, og velger å benytte Virksomhetssertifikat, må de i dag benytte det settet Altinn har av test-virksomhetsertifikat. Avsender trenger altså ikke bestille egne testsertifikat. TT02 inneholder ikke reelle organisasjoner, og det er en forutsetning at en org (med Virk.sert) er registrert i ER og hos utsteder. Inntil dette er løst tverrsektorielt (det er pågående tiltak for samkjøring av testbrukere/testdata på tvers av offentlige fellesløsninger), kan Altinn låne ut Avsender-virksomhetsertifikat for TT02.\nVarsel og Revarsel Eksempelfilene viser teknisk hvordan man benytter Altinns varselsmaler. De forhåndsdefinerte varselsmalene Altinn tilbyr Avsendere er:\n VarselDPVUtenRevarsel:\nFor varsler der det ikke er behov for å sende revarsel. Varsel sendes kun 1 gang. Denne skal kun benyttes hvis Avsender har gjort en juridisk vurdering av revarsel ikke er påkrevd. VarselDPVMedRevarsel (7 dager):\nFor varsler der det er behov for både å sende varsel og revarsel hvis ikke lest innen 7 dager. Varsel sendes minst 1 gang, revarsel hvis post ikke er åpnet. Denne skal benyttes i de fleste tilfeller.  Varselsmalene har 3 språkinnstillinger man kan velge blant:\n 1044 = NorwegianNO\nEpost emne satt til \u0026ldquo;Ny melding tilgjengelig i Altinn.no for $reporteeName$\u0026rdquo; (Se info om makro under) Epost tekst/SMS settes av Avsender i run-time.\nRevarsel er samme som over, men Altinn legger inn en statisk tekst \u0026ldquo;Påminnelse: \u0026ldquo; i forkant av selve varselsteksten satt av Avsender. 2068 = NorwegianNN\nEpost emne satt til \u0026ldquo;Ny melding tilgjengeleg i Altinn.no for $reporteeName$\u0026rdquo; Epost tekst/SMS settes av Avsender i run-time.\nRevarsel er samme som over, men Altinn legger inn en statisk tekst \u0026ldquo;Påminning: \u0026ldquo; i forkant av selve varselsteksten satt av Avsender. 1033 = English\nEpost emne satt til \u0026ldquo;New message available at Altinn.no for $reporteeName$\u0026rdquo;\nEpost tekst/SMS settes av Avsender i run-time.\nRevarsel er samme som over, men Altinn legger inn en statisk tekst \u0026ldquo;Reminder: \u0026ldquo; i forkant av selve varselsteksten satt av Avsender.  Bruk av makroer i varsler:\nI varselsteksten kan Avsender benytte såkalte \u0026ldquo;makroer\u0026rdquo;, som er variabler for å hente ulike data fra Altinn Register inn i varselsteksten som vises for sluttbruker. Registerdata hentes basert på angitt mottager.\nFølgende makroer er tilgjengelig for bruk mot virksomheter:\n$reporteeName$ = Altinn legger inn navn på virksomhet som mottar post (basert på orgnr som er angitt som mottager).\nNy og spesifikk funksjonalitet for DPV utover vanlig meldingsfunksjonalitet DPV er bygget på den ordinære meldingsfunksjonalitet i Altinn, men med noen få tillegg. Informasjon om bruk av varsler, detaljer om parametere, etc er beskrevet i Tjenesteeier dokumentasjon.\nFor operasjonen InsertCorrespondenceBasicV2[\u0026hellip;], så er denne ikke versjonert til tross for ny DPV-funksjonalitet, siden det kun er en ny opsjonell parameter i request, og operasjonen er ellers kompatibel med eksisterende implementasjoner.\nSende på vegne av andre organisasjoner, ny parameter \u0026ldquo;OnBehalfOfOrgNr\u0026rdquo; Denne benyttes hvis man skal sende på vegne av en annen organisasjon. Organisasjonsnummeret må være et valid orgnr, som er en ordinær tjenesteeier eller har DPV-avtale med Altinn (En automatisk validering på om orgnr i \u0026ldquo;OnBehalfOfOrgNr\u0026rdquo; faktisk er en Tjenesteeier gjøres ikke p.t.). \u0026ldquo;OnBehalfOfOrgNr\u0026rdquo; er også knyttet til parameter \u0026ldquo;MessageSender \u0026ldquo;, se mer om dette under. \u0026ldquo;MessageSender\u0026rdquo; er et fritekstfelt/parameter som kan benyttes for å angi en mer brukerorientert tekst for Sluttbruker hvem som er avsender av Post. F.eks. om det er behov for å angi at Post kommer fra et spesielt kontor/avd/bydel innenfor en organisasjon.\n Man kan fortsatt benytte MessageSender som idag uten InsertOnBehalfOfOrgNr. Da vil oppførsel være som tidligere. MessageSender kan angi et mer fritekst- og brukerorientert navn på avsender innnenfor en organisasjon. Når man benytter InsertOnBehalfOfOrgNr, så kan man utelate parameter MessageSender hvis ønskelig, da vil Altinn oppi navnet til OrgNr som MessageSender i portalen for brukeren. Man kan benytte MessageSender OG InsertOnBehalfOfOrgNr, men da vil brukeren se det som er oppgitt i Messagesender. Altinn vil registrere hvem som er den faktiske avsender av Post i tillegg til den tekniske avsender. OnBehalfOfOrgNr skal uansett benyttes hvis man sender på vegne av andre organisasjoner, slik at vi får registrert faktiske avsendere og bruken av DPV.  Hent Status på sendt Post Jf. Aktuelle grensesnitt Web Service for avsendere, så kan man hente status på sendt post enten via den opprinnelige eller den nye operasjonen for dette. Den opprinnelige operasjonen \u0026ldquo;GetCorrespondenceStatusDetailsV3[\u0026hellip;]\u0026rdquo; er egnet for enten å be om status for én kjent melding basert på meldingens unike referanse (\u0026ldquo;ExternalShipmentReference\u0026rdquo; fra operasjonen InsertCorrespondence), eller angi mer søkbaserte parametere som vil returnere et varierende antall status-er utifra søketreff. Den nye operasjonen \u0026ldquo;GetCorrespondenceStatusHistory[\u0026hellip;]\u0026rdquo; kan kun benytte verdier fra \u0026ldquo;ExternalShipmentReference\u0026rdquo; fra operasjonen InsertCorrespondence. Men her kan man be om inntil 10.000 status ad gangen, angitt i en array-lists i request på operasjonen. F.eks.\n... \u0026lt;ns:CorrespondenceSendersReferences\u0026gt; \u0026lt;arr:string\u0026gt;EXT_REF7653\u0026lt;/arr:string\u0026gt; \u0026lt;arr:string\u0026gt;EXT_REF71875\u0026lt;/arr:string\u0026gt; \u0026lt;arr:string\u0026gt;EXT_REF78392\u0026lt;/arr:string\u0026gt; \u0026lt;arr:string\u0026gt;EXT_REF26628\u0026lt;/arr:string\u0026gt; \u0026lt;/ns:CorrespondenceSendersReferences\u0026gt; ...  Det vil da være mulig å korrelere meldinger deterministisk og effektivt. Avsender må ta vare på identifikatorer pr sendt melding (verdien \u0026ldquo;ExternalShipmentReference\u0026rdquo; fra operasjonen InsertCorrespondence).\nDenne operasjonen inkluderer som standard også status på post som blir videresendt fra Altinn til Difis løsning for Innbyggerpost, for de som skal benytte den funksjonaliteten.\n\rEksempel på bruk og eksempelfiler Post sendt og mottatt i Altinn: \r\rSkal legge inn hvordan nettsidene ser ut for bruker – kommer \u0026hellip;\nEksempelfiler InsertCorrespondenceBasicV2 Merk: XML parametere som er kommentert bort er tatt med for informasjon om muligheter for funksjonalitet utover kun bruk av DPV.\nFor detaljert informasjon om de ulike parameterene, se eget kapittel i integrasjonsguiden for tjenesteeiere\nREQUEST:\n\u0026lt;soapenv:Envelope xmlns:soapenv=\u0026quot;http://schemas.xmlsoap.org/soap/envelope/\u0026quot; xmlns:ns=\u0026quot;http://www.altinn.no/services/ServiceEngine/Correspondence/2009/10\u0026quot; xmlns:ns1=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Correspondence/2010/10\u0026quot; xmlns:ns2=\u0026quot;http://www.altinn.no/services/ServiceEngine/ReporteeElementList/2010/10\u0026quot; xmlns:ns3=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Correspondence/2009/10\u0026quot; xmlns:ns4=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Notification/2009/10\u0026quot; xmlns:ns5=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Correspondence/2016/02\u0026quot;\u0026gt; \u0026lt;soapenv:Header/\u0026gt; \u0026lt;soapenv:Body\u0026gt; \u0026lt;ns:InsertCorrespondenceBasicV2\u0026gt; \u0026lt;!-- Brukernavn + passord hvis dette skal benyttes fremfor Virksomhetssertifikat --\u0026gt; \u0026lt;ns:systemUserName\u0026gt;...\u0026lt;/ns:systemUserName\u0026gt; \u0026lt;ns:systemPassword\u0026gt;...\u0026lt;/ns:systemPassword\u0026gt; \u0026lt;!-- En unik egenreferanse til Meldingen. benyttes for asynkront Statusoppslag. Datatypen er string, og må inneholde en unik identifikator for meldingen. Må tas vare på for senere asynkrone Statusoppslag for enkeltmeldinger. Identifikatoren blir også returnert i synkron SOAP respons --\u0026gt; \u0026lt;ns:ExternalShipmentReference\u0026gt;EXT_REF${=(int)(Math.random()*100000)}\u0026lt;/ns:ExternalShipmentReference\u0026gt; \u0026lt;ns:Correspondence\u0026gt; \u0026lt;!-- Angir en av de standard Meldingstjeneste for DPV 4255 - 1-10 Felles meldingstjeneste (eid av ASF)--\u0026gt; \u0026lt;ns1:ServiceCode\u0026gt;4255\u0026lt;/ns1:ServiceCode\u0026gt; \u0026lt;ns1:ServiceEdition\u0026gt;10\u0026lt;/ns1:ServiceEdition\u0026gt; \u0026lt;!-- Orgnr til mottager --\u0026gt; \u0026lt;ns1:Reportee\u0026gt;910820605\u0026lt;/ns1:Reportee\u0026gt; \u0026lt;ns1:Content\u0026gt; \u0026lt;ns1:LanguageCode\u0026gt;1044\u0026lt;/ns1:LanguageCode\u0026gt; \u0026lt;ns1:MessageTitle\u0026gt;Tittel på Melding\u0026lt;/ns1:MessageTitle\u0026gt; \u0026lt;ns1:MessageSummary\u0026gt;MessageSummary legges inn her hvis ønskelig\u0026lt;/ns1:MessageSummary\u0026gt; \u0026lt;ns1:MessageBody\u0026gt;Meldingsbrødtekst legges inn her\u0026lt;/ns1:MessageBody\u0026gt; \u0026lt;!-- Vedlegg til Post --\u0026gt; \u0026lt;ns1:Attachments\u0026gt; \u0026lt;ns1:BinaryAttachments\u0026gt; \u0026lt;ns2:BinaryAttachmentV2\u0026gt; \u0026lt;!-- PortalOnly | EndUserSystemOnly | Default --\u0026gt; \u0026lt;ns2:DestinationType\u0026gt;Default\u0026lt;/ns2:DestinationType\u0026gt; \u0026lt;ns2:FunctionType\u0026gt;Unspecified\u0026lt;/ns2:FunctionType\u0026gt; \u0026lt;ns2:FileName\u0026gt;Test1-Hoved.pdf\u0026lt;/ns2:FileName\u0026gt; \u0026lt;!-- Name er navn på vedlegg i portalvisningen: --\u0026gt; \u0026lt;ns2:Name\u0026gt;Test1-Hoved.pdf\u0026lt;/ns2:Name\u0026gt; \u0026lt;ns2:Encrypted\u0026gt;false\u0026lt;/ns2:Encrypted\u0026gt; \u0026lt;ns2:Data\u0026gt; ... Base64 encode ...\u0026lt;/ns2:Data\u0026gt; \u0026lt;!-- Unik referanse for Vedlegget, ikke påkrevet --\u0026gt; \u0026lt;ns2:SendersReference\u0026gt;SEND_REF${=(int)(Math.random()*100000)}\u0026lt;/ns2:SendersReference\u0026gt; \u0026lt;/ns2:BinaryAttachmentV2\u0026gt; \u0026lt;/ns1:BinaryAttachments\u0026gt; \u0026lt;/ns1:Attachments\u0026gt; \u0026lt;!-- Dette er data som kun kan leses via Integrasjonsgrensesnitt Sluttbrukere. Benyttes ikke av noen avsendere i dag, men er et 'fritekst'-felt for avsender og som kan f.eks inneholde metadata for sluttbrukers IKT-løsninger, hvis behov for dette. Opsjonelt. --\u0026gt; \u0026lt;ns1:CustomMessageData\u0026gt;Dette er customMessagedata fra TTD\u0026lt;![CDATA[\u0026lt;para\u0026gt;check\u0026lt;/para\u0026gt;]]\u0026gt;\u0026lt;/ns1:CustomMessageData\u0026gt; \u0026lt;/ns1:Content\u0026gt; \u0026lt;!-- Når skal Melding synliggjøres for Sluttbruker. Tid kan settes i fremtiden. Hvis man setter tidspunkt i fortid blir meldingen tilgjengelig øyeblikkelig --\u0026gt; \u0026lt;ns1:VisibleDateTime\u0026gt;2011-07-01\u0026lt;/ns1:VisibleDateTime\u0026gt; \u0026lt;!-- Følgende er ikke parametere som benyttes i DPV, men for dialogtjenester i ordinære meldingstjenester - angir når Altinn kan slette meldingen (blir ikke benyttet), - frist for å lese Meldingen - referanse til et tidligere arkivert element i Altinn, f.eks et tidligere innsendt skjema --\u0026gt; \u0026lt;!-- \u0026lt;ns1:AllowSystemDeleteDateTime\u0026gt;2011-12-30\u0026lt;/ns1:AllowSystemDeleteDateTime\u0026gt; \u0026lt;ns1:DueDateTime\u0026gt;2015-12-30\u0026lt;/ns1:DueDateTime\u0026gt; \u0026lt;ns1:ArchiveReference\u0026gt;ArcRef${=(int)(Math.random()*100000)}\u0026lt;/ns1:ArchiveReference\u0026gt; \u0026lt;ns1:ReplyOptions\u0026gt; \u0026lt;ns3:ReplyOption\u0026gt; \u0026lt;ns3:Service\u0026gt; \u0026lt;ns3:ServiceCode\u0026gt;?\u0026lt;/ns3:ServiceCode\u0026gt; \u0026lt;ns3:ServiceEdition\u0026gt;?\u0026lt;/ns3:ServiceEdition\u0026gt; \u0026lt;/ns3:Service\u0026gt; \u0026lt;ns3:ArchiveReference\u0026gt; \u0026lt;ns3:ArchiveRef\u0026gt;?\u0026lt;/ns3:ArchiveRef\u0026gt; \u0026lt;/ns3:ArchiveReference\u0026gt; \u0026lt;ns3:URL\u0026gt; \u0026lt;ns3:LinkText\u0026gt;Sjekk denne URL lenken\u0026lt;/ns3:LinkText\u0026gt; \u0026lt;ns3:LinkURL\u0026gt;https://qaoffentlig.digipost.no\u0026lt;/ns3:LinkURL\u0026gt; \u0026lt;/ns3:URL\u0026gt; \u0026lt;/ns3:ReplyOption\u0026gt; \u0026lt;/ns1:ReplyOptions\u0026gt; --\u0026gt; \u0026lt;!--- *********** Varsel **************** --\u0026gt; \u0026lt;!-- 3 språkvalg: 1044 NorwegianNO 2068 NorwegianNN 1033 English Maler som kan benyttes fritt i DPV: VarselDPVUtenRevarsel = 1 token VarselDPVMedRevarsel = 1 token, 7 dager --\u0026gt; \u0026lt;ns1:Notifications\u0026gt; \u0026lt;ns4:Notification\u0026gt; \u0026lt;ns4:FromAddress\u0026gt;TTD@brreg.no\u0026lt;/ns4:FromAddress\u0026gt; \u0026lt;!-- Når skal varsel sendes --\u0026gt; \u0026lt;ns4:ShipmentDateTime\u0026gt;2015-12-15\u0026lt;/ns4:ShipmentDateTime\u0026gt; \u0026lt;!-- Hvilken språkvariant av Varselsmal skal benyttes --\u0026gt; \u0026lt;ns4:LanguageCode\u0026gt;1044\u0026lt;/ns4:LanguageCode\u0026gt; \u0026lt;!-- Her angis hvilken mal som ønskes benyttes: --\u0026gt; \u0026lt;ns4:NotificationType\u0026gt;VarselDPVMedRevarsel\u0026lt;/ns4:NotificationType\u0026gt; \u0026lt;!-- Tekst token som skal erstatte Token i Varselsmal. --\u0026gt; \u0026lt;ns4:TextTokens\u0026gt; \u0026lt;ns4:TextToken\u0026gt; \u0026lt;ns4:TokenNum\u0026gt;1\u0026lt;/ns4:TokenNum\u0026gt; \u0026lt;ns4:TokenValue\u0026gt;Varsel ang sak X er er klar\u0026lt;/ns4:TokenValue\u0026gt; \u0026lt;/ns4:TextToken\u0026gt; \u0026lt;/ns4:TextTokens\u0026gt; \u0026lt;ns4:ReceiverEndPoints\u0026gt; \u0026lt;ns4:ReceiverEndPoint\u0026gt; \u0026lt;!-- Angir hvilke varselskanaler som skal benyttes --\u0026gt; \u0026lt;ns4:TransportType\u0026gt;Email\u0026lt;/ns4:TransportType\u0026gt; \u0026lt;!-- \u0026lt;ns4:ReceiverAddress\u0026gt;Hvis denne angis spesifikt vil ikke Altinn hente ut og benytte kontaktinformasjon som er registrert på Virksomheten\u0026lt;/ns4:ReceiverAddress\u0026gt; --\u0026gt; \u0026lt;/ns4:ReceiverEndPoint\u0026gt; \u0026lt;ns4:ReceiverEndPoint\u0026gt; \u0026lt;ns4:TransportType\u0026gt;SMS\u0026lt;/ns4:TransportType\u0026gt; \u0026lt;!-- \u0026lt;ns4:ReceiverAddress\u0026gt;Hvis denne angis spesifikt vil ikke Altinn hente ut og benytte kontaktinformasjon som er registrert på Virksomheten\u0026lt;/ns4:ReceiverAddress\u0026gt; --\u0026gt; \u0026lt;/ns4:ReceiverEndPoint\u0026gt; \u0026lt;/ns4:ReceiverEndPoints\u0026gt; \u0026lt;/ns4:Notification\u0026gt; \u0026lt;/ns1:Notifications\u0026gt; \u0026lt;!-- Mulig å videresende meldingen til en e-post adresse om angitt i valgfri parameter AllowForwarding. Er denne satt til true vil bruker kunne sende meldingen videre som en e-post fra portalen. Om ikke satt settes den til standardverdi som er True --\u0026gt; \u0026lt;ns1:AllowForwarding\u0026gt;true\u0026lt;/ns1:AllowForwarding\u0026gt; \u0026lt;!-- Brukes kun for tjenestetypen Samhandlingstjenester i Altinn \u0026lt;ns1:CaseID\u0026gt;?\u0026lt;/ns1:CaseID\u0026gt; --\u0026gt; \u0026lt;!-- MessageSender parameter kan benyttes hvis behov for å overstyre overfor sluttbruker hvem som er avsender. Hvis MessageSender ikke angis spesifikt, vil Altinn benytte avsenders orgnr som utgangspunkt og angi det orgnavn som er registrert i Enhetsregisteret overfor sluttbruker. Se også parameter OnBehalfOfOrgNr, som benyttes som utgangspunkt overfor bruker hvis angitt. Merk at MessageSender kun er et tekstfelt som benyttes overfor sluttbruker, den faktiske avsender og evt OnBehalfOfOrgNr registreres alltid i Altinn. --\u0026gt; \u0026lt;ns1:MessageSender\u0026gt;Testdept avdeling for småsaker\u0026lt;/ns1:MessageSender\u0026gt; \u0026lt;!-- Benyttes kun for privatpersoner, og skal ikke benyttes for virksomheter Kan benyttes hvis man benytter Altinn til å sende Post både til virksomheter og privatpersoner (Altinn kan videresende til DPI) \u0026lt;ns1:IsReservable\u0026gt;1\u0026lt;/ns1:IsReservable\u0026gt; --\u0026gt; \u0026lt;!-- Benyttes kun til videresending til DPI, hvis man sender Post til privatpersoner og skal benytte Videresendingsfunksjonalitet i Altinn SdpOptions:Hvis ikke denne angis gjelder default funksjonalitet i Altinn (ingen videresending til DPI) Represents data that are used as input to insert correspondence, to control how it will forward the correspondence to a secure digital mailbox. * BackupAltinn [optional, nillable] type boolean Gets or sets a value indicating whether the correspondence should be stored in Altinn instead, if the reportee do not have a digital mailbox. The default value is \u0026quot;true\u0026quot;. * PrimaryDocumentFileName [nillable] type string Summary: Gets or sets the name of the file to be used as the primary document in the digital letter. The file name must exist in the list of attachments in the binary attachments list in the insert correspondence request. * SdpSetting: { 'ForwardOnly', 'CopyAltinn' } Summary: Gets or sets a value that controls whether Altinn should have a copy of the correspondence. Sum-scenario ved masseutsendelser: c) =\u0026gt; Ihht Digitaliseringsrundskrivet, Post mottas kun i SDP, men havner i Altinn hvis bruker ikke har valgt postkasse d) Dobbellagring uansett om bruker har valgt postkasse eller ikke. Varsel kan da sendes sammen med Correspondence, slipper StandAlone varsling Parametere: a) BackupAltinn: false + SdpSetting: ForwardOnly : b) BackupAltinn: false + SdpSetting: CopyAltinn : c) BackupAltinn: true + SdpSetting: ForwardOnly : d) BackupAltinn: true + SdpSetting: CopyAltinn : --\u0026gt; \u0026lt;!-- \u0026lt;ns1:SdpOptions\u0026gt; \u0026lt;ns5:BackupAltinn\u0026gt;true\u0026lt;/ns5:BackupAltinn\u0026gt; \u0026lt;ns5:PrimaryDocumentFileName\u0026gt;Test1-Hoved.pdf\u0026lt;/ns5:PrimaryDocumentFileName\u0026gt; \u0026lt;ns5:SdpSetting\u0026gt;CopyAltinn\u0026lt;/ns5:SdpSetting\u0026gt; \u0026lt;/ns1:SdpOptions\u0026gt; --\u0026gt; \u0026lt;!-- Denne benyttes hvis man skal sende på vegne av en annen org. Må være valid orgnr (tjenesteeieravtale eller DPV avtale) i Altinn. Sluttbruker vil se org.navn til denne org som avsender, hvis den ikke er overstyrt av parameter MessageSender. --\u0026gt; \u0026lt;ns1:OnBehalfOfOrgNr\u0026gt;974760673\u0026lt;/ns1:OnBehalfOfOrgNr\u0026gt; \u0026lt;/ns:Correspondence\u0026gt; \u0026lt;/ns:InsertCorrespondenceBasicV2\u0026gt; \u0026lt;/soapenv:Body\u0026gt; \u0026lt;/soapenv:Envelope\u0026gt;  RESPONSE:\n\u0026lt;s:Envelope xmlns:s=\u0026quot;http://schemas.xmlsoap.org/soap/envelope/\u0026quot;\u0026gt; \u0026lt;s:Body\u0026gt; \u0026lt;InsertCorrespondenceBasicV2Response xmlns=\u0026quot;http://www.altinn.no/services/ServiceEngine/Correspondence/2009/10\u0026quot;\u0026gt; \u0026lt;InsertCorrespondenceBasicV2Result xmlns:a=\u0026quot;http://schemas.altinn.no/services/Intermediary/Receipt/2009/10\u0026quot; xmlns:i=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot;\u0026gt; \u0026lt;a:LastChanged\u0026gt;2017-10-13T10:06:17.743\u0026lt;/a:LastChanged\u0026gt; \u0026lt;a:ParentReceiptId\u0026gt;0\u0026lt;/a:ParentReceiptId\u0026gt; \u0026lt;a:ReceiptHistory/\u0026gt; \u0026lt;a:ReceiptId\u0026gt;11653653\u0026lt;/a:ReceiptId\u0026gt; \u0026lt;a:ReceiptStatusCode\u0026gt;OK\u0026lt;/a:ReceiptStatusCode\u0026gt; \u0026lt;a:ReceiptText\u0026gt;Correspondence Saved Successfully\u0026lt;/a:ReceiptText\u0026gt; \u0026lt;a:ReceiptTypeName\u0026gt;Correspondence\u0026lt;/a:ReceiptTypeName\u0026gt; \u0026lt;a:References\u0026gt; \u0026lt;a:Reference\u0026gt; \u0026lt;a:ReferenceTypeName\u0026gt;ExternalShipmentReference\u0026lt;/a:ReferenceTypeName\u0026gt; \u0026lt;a:ReferenceValue\u0026gt;EXT_REF76405\u0026lt;/a:ReferenceValue\u0026gt; \u0026lt;/a:Reference\u0026gt; \u0026lt;a:Reference\u0026gt; \u0026lt;a:ReferenceTypeName\u0026gt;OwnerPartyReference\u0026lt;/a:ReferenceTypeName\u0026gt; \u0026lt;a:ReferenceValue\u0026gt;910646192\u0026lt;/a:ReferenceValue\u0026gt; \u0026lt;/a:Reference\u0026gt; \u0026lt;/a:References\u0026gt; \u0026lt;a:SubReceipts i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;/InsertCorrespondenceBasicV2Result\u0026gt; \u0026lt;/InsertCorrespondenceBasicV2Response\u0026gt; \u0026lt;/s:Body\u0026gt; \u0026lt;/s:Envelope\u0026gt;  CorrespondenceStatusHistory REQUEST:\n\u0026lt;soapenv:Envelope xmlns:soapenv=\u0026quot;http://schemas.xmlsoap.org/soap/envelope/\u0026quot; xmlns:ns=\u0026quot;http://www.altinn.no/services/ServiceEngine/Correspondence/2009/10\u0026quot; xmlns:arr=\u0026quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays\u0026quot;\u0026gt; \u0026lt;soapenv:Header\u0026gt; \u0026lt;ns:SystemUserName\u0026gt;...\u0026lt;/ns:SystemUserName\u0026gt; \u0026lt;ns:SystemPassword\u0026gt;...\u0026lt;/ns:SystemPassword\u0026gt; \u0026lt;/soapenv:Header\u0026gt; \u0026lt;soapenv:Body\u0026gt; \u0026lt;ns:CorrespondenceStatusHistoryRequest\u0026gt; \u0026lt;ns:CorrespondenceSendersReferences\u0026gt; \u0026lt;!--Liste med inntil 10000 identifikatorer melding (ExternalShipmentReference):--\u0026gt; \u0026lt;arr:string\u0026gt;EXT_REF76405\u0026lt;/arr:string\u0026gt; \u0026lt;!-- \u0026lt;arr:string\u0026gt;...\u0026lt;/arr:string\u0026gt; \u0026lt;arr:string\u0026gt;...\u0026lt;/arr:string\u0026gt; ... --\u0026gt; \u0026lt;/ns:CorrespondenceSendersReferences\u0026gt; \u0026lt;/ns:CorrespondenceStatusHistoryRequest\u0026gt; \u0026lt;/soapenv:Body\u0026gt; \u0026lt;/soapenv:Envelope\u0026gt;  RESPONSE:\nMerk: i tilfellet under er det benyttet en Varselmal som gir revarsel hvis ikke lest innen 7 dager, samt det er knyttet 2 varslingsadresser til virksomheten i kontaktregisteret for virksomheten i Altinn. Status angir hvem det er sendt varsel til samt om det er fremtidig varsel på vent (rvarsel). Videre gir denne informasjon at Melding er \u0026ldquo;Created\u0026rdquo; og evt faktisk lest \u0026ldquo;Read\u0026rdquo;.\n\u0026lt;s:Envelope xmlns:s=\u0026quot;http://schemas.xmlsoap.org/soap/envelope/\u0026quot;\u0026gt; \u0026lt;s:Body\u0026gt; \u0026lt;CorrespondenceStatusHistoryResult xmlns=\u0026quot;http://www.altinn.no/services/ServiceEngine/Correspondence/2009/10\u0026quot;\u0026gt; \u0026lt;CorrespondenceStatusInformation xmlns:a=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Correspondence/2016/02\u0026quot; xmlns:i=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot;\u0026gt; \u0026lt;a:CorrespondenceStatusDetailsList xmlns:b=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Correspondence/2014/10\u0026quot;\u0026gt; \u0026lt;b:StatusV2\u0026gt; \u0026lt;b:CorrespondenceID\u0026gt;4981636\u0026lt;/b:CorrespondenceID\u0026gt; \u0026lt;b:CreatedDate\u0026gt;2017-10-16T12:55:30.96\u0026lt;/b:CreatedDate\u0026gt; \u0026lt;b:Notifications xmlns:c=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Correspondence/2013/11\u0026quot;\u0026gt; \u0026lt;c:Notification\u0026gt; \u0026lt;c:Recipient\u0026gt;Mortens+felles_kon@gmail.com\u0026lt;/c:Recipient\u0026gt; \u0026lt;c:SentDate\u0026gt;2017-10-16T12:55:30.983\u0026lt;/c:SentDate\u0026gt; \u0026lt;c:TransportType\u0026gt;Email\u0026lt;/c:TransportType\u0026gt; \u0026lt;/c:Notification\u0026gt; \u0026lt;c:Notification\u0026gt; \u0026lt;c:Recipient\u0026gt;Mortens+DinKIFVirksomheten@gmail.com\u0026lt;/c:Recipient\u0026gt; \u0026lt;c:SentDate\u0026gt;2017-10-16T12:55:31\u0026lt;/c:SentDate\u0026gt; \u0026lt;c:TransportType\u0026gt;Email\u0026lt;/c:TransportType\u0026gt; \u0026lt;/c:Notification\u0026gt; \u0026lt;c:Notification\u0026gt; \u0026lt;c:Recipient\u0026gt;91929394\u0026lt;/c:Recipient\u0026gt; \u0026lt;c:SentDate\u0026gt;2017-10-16T12:55:31.02\u0026lt;/c:SentDate\u0026gt; \u0026lt;c:TransportType\u0026gt;SMS\u0026lt;/c:TransportType\u0026gt; \u0026lt;/c:Notification\u0026gt; \u0026lt;c:Notification\u0026gt; \u0026lt;c:Recipient\u0026gt;Mortens+felles_kon@gmail.com\u0026lt;/c:Recipient\u0026gt; \u0026lt;c:SentDate i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;c:TransportType\u0026gt;Email\u0026lt;/c:TransportType\u0026gt; \u0026lt;/c:Notification\u0026gt; \u0026lt;c:Notification\u0026gt; \u0026lt;c:Recipient\u0026gt;Mortens+DinKIFVirksomheten@gmail.com\u0026lt;/c:Recipient\u0026gt; \u0026lt;c:SentDate i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;c:TransportType\u0026gt;Email\u0026lt;/c:TransportType\u0026gt; \u0026lt;/c:Notification\u0026gt; \u0026lt;c:Notification\u0026gt; \u0026lt;c:Recipient\u0026gt;91929394\u0026lt;/c:Recipient\u0026gt; \u0026lt;c:SentDate i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;c:TransportType\u0026gt;SMS\u0026lt;/c:TransportType\u0026gt; \u0026lt;/c:Notification\u0026gt; \u0026lt;/b:Notifications\u0026gt; \u0026lt;b:Reportee\u0026gt;910820605\u0026lt;/b:Reportee\u0026gt; \u0026lt;b:SendersReference\u0026gt;EXT_REF76405\u0026lt;/b:SendersReference\u0026gt; \u0026lt;b:StatusChanges\u0026gt; \u0026lt;b:StatusChangeV2\u0026gt; \u0026lt;b:StatusDate\u0026gt;2017-10-16T12:55:30.943\u0026lt;/b:StatusDate\u0026gt; \u0026lt;b:StatusType\u0026gt;Created\u0026lt;/b:StatusType\u0026gt; \u0026lt;/b:StatusChangeV2\u0026gt; \u0026lt;b:StatusChangeV2\u0026gt; \u0026lt;b:StatusDate\u0026gt;2017-10-16T13:28:38.86\u0026lt;/b:StatusDate\u0026gt; \u0026lt;b:StatusType\u0026gt;Read\u0026lt;/b:StatusType\u0026gt; \u0026lt;/b:StatusChangeV2\u0026gt; \u0026lt;/b:StatusChanges\u0026gt; \u0026lt;/b:StatusV2\u0026gt; \u0026lt;/a:CorrespondenceStatusDetailsList\u0026gt; \u0026lt;a:LimitReached\u0026gt;false\u0026lt;/a:LimitReached\u0026gt; \u0026lt;/CorrespondenceStatusInformation\u0026gt; \u0026lt;SdpStatusInformation xmlns:a=\u0026quot;http://schemas.altinn.no/services/ServiceEngine/Correspondence/2016/02\u0026quot; xmlns:i=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot;\u0026gt; \u0026lt;a:LimitReached\u0026gt;false\u0026lt;/a:LimitReached\u0026gt; \u0026lt;a:SdpStatusDetailsList/\u0026gt; \u0026lt;/SdpStatusInformation\u0026gt; \u0026lt;/CorrespondenceStatusHistoryResult\u0026gt; \u0026lt;/s:Body\u0026gt; \u0026lt;/s:Envelope\u0026gt;  Tilbake til toppen\nVedlegg - Presentasjoner \r\rPresentasjon DPV\r\r\rDPV-overordnet.pdf\r\r(1511 ko)\r\r\r\rSpørsmål og svar om DPV\r\rOfte stilte spørsmål om DPV\n\r"
},
{
	"uri": "https://altinn.github.io/docs/helt/proposals/",
	"title": "Satsningsforslag",
	"tags": [],
	"description": "Brregs satsningsforslag til regjeringen",
	"content": "Brønnøysundregistrene leverte i 2017 et satsningsforslag som bestod av to deler:\n Satsingsforslag 1: Innovasjon, forenkling og effektivisering gjennom samordnet digitalisering\n Satsingsforslag 2: Brukerstyrt forvaltning og videreutvikling av Altinn-plattformen\n  Allerede i revidert budsjett for 2018 ble det bevilget en engangsbevilgning på 50 mill. kroner eks. mva. til satsningsforslag 1. Gevinstanalyser for denne satsningen viser med nøkterne forutsetninger en netto nåverdi av investeringen på ca. 11,4 mrd. kroner. Allerede fra 2020 antas gevinstene å overstige investeringskostnadene.\nFølgende tiltak hører til under satsningsforslag 1 og skal gjennomføres i 2018 og 2019: * Helhetlig tilgangsstyring * API-katalog- utvidelse av Felles datakatalog * Tilrettelegging for tverrsektoriell samhandling (ikke påbegynt)\nFormålet med satsningsforslag 1 er 1. Informasjon til det offentlige skal leveres kun én gang 2. Helhetlige offentlige sluttbrukertjenester med brukeren i sentrum 3. Innovasjon og verdiskapning- for næringslivet, privatpersoner og offentlig sektor\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/testing/",
	"title": "Testing",
	"tags": [],
	"description": "",
	"content": " Dette er dokumentasjon under arbeid for eBevis-tjenesten som per i dag ikke er produksjonssatt\n\rTestmiljø eBevis har et test-miljø kalt \u0026ldquo;staging\u0026rdquo; som har et fåtall beviskoder og leverer fiktive data. Miljøet kan brukes i forbindelse med testing av implementasjoner. Miljøet er også eBeviss pre-prod miljø, og alle endringer blir først deployet til staging-miljøet før de produksjonssettes.\nPEPPOL TODO: Avklare routing mellom OA og staging Core.\nREST-API For REST-API er det et eget endepunkt som benyttes, og det må også oppgis et test-virksomhetssertifikat utstedt av en offentlig godkjent aktør.\n Teknisk beskrivelse av staging-API Les mer om bruk av REST-API  Test-organisasjon for forespørsler Oversikt over testorganisasjoner som kan brukes i staging-miljøet samt tilhørende innloggingsinformasjon for nøkkerolleinnehavere for disse organisasjonene i Altinns testmiljø (TT02) vil bli tilsendt etter registrering av API-nøkkel.\nTilgjengelige test-koder Listen av tilgjengelige beviskoder i staging-miljøet er tilgjengelig i det åpne metadata-API-et.\n Vis liste over beviskoder i staging (JSON)  Bruke Postman for testing Det er utarbeidet en colection med forespørsler i Postman som fritt kan lastes ned og benyttes for testing mot eBevis REST API. Se Github-lenken under for mer informasjon.\n Postman-collection på Github Last ned Postman  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/utvidede-beskrivelser/",
	"title": "Utvidede beskrivelser",
	"tags": [],
	"description": "Bruk av regelmotor for parallell signering og vedleggsfiltrering.",
	"content": " Regelmotor og parallellsignering Tjenester som har parallellsigneringsteg kan velge å få utført automatisk delegering av rettigheter til parallellsignerere. For å benytte seg av dette må man benytte seg av TransferTransformedResult-regelen. For slike tjenester forventer Altinn plattformen at man bruker denne regelen til og populere en spesiell property i rot noden på skjema. Det som trengs av data er personnummer/brukernavn/orgnummer, etternavn, epost og mobilnummer i denne rekkefølgen. (skjema må da ha slik input i en repeterende gruppe)\nData vil bli validert i signeringssteget under validering slik at det er en fordel at man også implementer slik validering i selve skjema slik at ikke delegering feiler. (validering av dette kan ikke gjøres av regelmotor)\nEksempel på fungerende oppsatt regel, med riktig angitt regler er.\n\u0026lt;Rule type=\u0026quot;TransferTransformedResult\u0026quot; description=\u0026quot;Transfer to myfield\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;3940\u0026quot; concatFields=\u0026quot;/melding/ElektroniskStiftelseAvAksjeselskap/EnhetAnsvarligFodselsnummerOrganisasjonsnummerUserNavn, /melding/ElektroniskStiftelseAvAksjeselskap/LastNavn, /melding/ElektroniskStiftelseAvAksjeselskap/Email, /melding/ElektroniskStiftelseAvAksjeselskap/MobileNummer\u0026quot; /\u0026gt; \u0026lt;Target form=\u0026quot;3940\u0026quot; field=\u0026quot;property(ParallelSigningUserDetails)\u0026quot; /\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot; /\u0026gt; \u0026lt;Param name=\u0026quot;TransferType\u0026quot; value=\u0026quot;ManyToOne\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt;  Regelmotor og vedleggsfiltrering Det er mulig å benytte regelmotoren til validere om brukeren har lagt ved nødvendige vedlegg. For å få dette til å fungere sammen med Altinn plattformen er det nødvendig å fylle ut et spesielt attributt i rot noden på skjema samt å gjøre validering på vedleggene lagt ved.\nFor at filopplastingsfunksjonaliteten i Altinn plattformen skal filtrere ut valg basert på valg i skjema må regelmotoren sette attributtet Attachmentfilter i rot-noden på skjema. Eksempelet nedenfor viser hvordan det kan gjøres.\n\u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;Set filter when Industri has been chosen\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;3940\u0026quot; field=\u0026quot;/melding/SkjemavalgSkal/AttachmentTypeChoices\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;3940\u0026quot; field=\u0026quot;property(AttachmentFilter)\u0026quot; value=\u0026quot;AT01_Cycle01, AT03_Cycle01, AT04_Cycle01\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;RemoveOnMismatch\u0026quot; value=\u0026quot;false\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;Equals\u0026quot; check=\u0026quot;/melding/SkjemavalgSkal/AttachmentTypeChoices\u0026quot; value=\u0026quot;Industri\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  Basert på conditions og antall skjema kan man validere om riktige vedlegg er lastet opp. Eksempel på regel ses nedenfor som bruker condition HasAnyAttachment. Legg merke til TargetField som er satt til AttachmentList som gjør at valideringsfeilmelding blir vist riktig i portal.\n\u0026lt;Rule type=\u0026quot;SimpleValidation\u0026quot; description=\u0026quot;Check if invalid attachments are added\u0026quot;\u0026gt; \u0026lt;Target field=\u0026quot;AttachmentList\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;Equals\u0026quot; check=\u0026quot;/melding/SkjemavalgSkal/AttachmentTypeChoices\u0026quot; value=\u0026quot;Industri\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasAnyAttachment\u0026quot; form=\u0026quot;AT02_Cycle01,AT06_Cycle01\u0026quot;/\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt; Ugyldige vedlegg er lagt AT02_Cycle01/AT06_Cycle01.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt; Ugyldige vedlegg er lagt AT02_Cycle01/AT06_Cycle01.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;Invalid attachments are added AT02_Cycle01/AT06_Cycle01.\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt;  Eksempelet nedfor viser hvordan man regelmotor validerer om man mangler et vedlegg ved å bruke condition MissingAttachment. Legg merke til TargetField som er satt til AttachmentList som gjør at valideringsfeilmelding blir vist riktig i portal.\n\u0026lt;Rule type=\u0026quot;SimpleValidation\u0026quot; description=\u0026quot;Check if missing attachments were not added\u0026quot;\u0026gt; \u0026lt;Target field=\u0026quot;AttachmentList\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;Equals\u0026quot; check=\u0026quot;/melding/SkjemavalgSkal/AttachmentTypeChoices\u0026quot; value=\u0026quot;Industri\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;MissingAttachment\u0026quot; form=\u0026quot;AT01_Cycle01\u0026quot;/\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt; Manglende vedlegg - AT01_Cycle01.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt; Manglende vedlegg - AT01_Cycle01.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt; MIssing Attachment - AT01_Cycle01.\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-8/",
	"title": "18.8",
	"tags": [],
	"description": "Rediger lagrede søk, app uri scheme for samtykke, metadata på skjema, feilrettinger m.m.",
	"content": " Endringer i portal Tillatte app uri schemes i redirecturl for srr/samtykke Tillatte app uri schemes i redirecturl for srr/samtykke Det er lagt til støtte for å bruke egendefinerte schemas ved innleggelse av redirectUrls for tjenesteeier. Om schmea ikke er spesifisert tillates både HTTP og HTTPS.\nRediger lagrede søk Rediger lagrede søk og overskrive eller lagre som nytt søk Når brukeren går inn på et lagret søk og deretter går til siden for å gjøre endringer Og der gjør en eller flere endringer i søkeparameterene, og deretter utfører søket og søkeresultatet vises. Det er lagt inn en ny modal hvor brukeren kan velge å oppdatere søket og beholde navnet eller bruker kan velge å lagre et nytt søk.\nHåndheve tjenestekrav til sikkerhetsnivå for samtykke delegering Når tjenesteeier nå spesifiserer krav til sikkerhetsnivå for en tjeneste i TUL vil dette ikke bare påvirke krav til sikkerhetsnivå for bruk av tjenesten men også for å kunne gi samtykke til tjenesten, både gjennom samtykkesiden eller REST API. Det håndheves fortsatt minimumskrav satt til sikkerhetsnivå 2, tilsvarende som annen rettighetsdelegering i Altinn, selv for tjenester som spesifiserer lavere krav. Er bruker ikke logget inn med høyt nok sikkerhetsnivå vil bruker få samme feilmelding som ved bruk av tjenesten, med beskjed og mulighet til å gå til innlogging med korrekt nivå.\nBrukere kan se i profilen at de har reservert seg i KRR Det er lagt til en advarsel-boks som informerer brukeren i tilfeller hvor de har reservert seg i KRR. Det er og lagt til en lagre-knapp for å oppdatere instillingen for kvittering på epost, slik at oppdatering av instillingene virker på lik linje med resten av løsningen (i stede for ajax request).\nI samtykkeprosessen er det sikret at brukere er innlogget i Altinn med rett fødselsnummer Det er lagt til en ny parameter for å be om samtykke; UserToken. UserToken er valgfri. Om den er oppgitt må den inneholde en sha256-hash av personnummeret til brukeren. Hvis feil bruker er logget inn vil de bli omdirigert til innloggingssiden. Se https://altinn.github.io/docs/guides/samtykke/datakonsument/be-om-samtykke/\nKan ikke lenger se fødselsnummer i lister over \u0026ldquo;mine aktører\u0026rdquo; Ved utskrift av andre sitt personnummer enn ditt eget vil de 5 siste sifferene i personnummeret nå bli maskert av en “*“. Det vil si at f.eks. 121213 12345 vises som 121213 *****.\nKlientroller for Revisor/Regnskapsfører er ikke lenger tilgjengelig for delegering under \u0026ldquo;Andre med rettigheter\u0026rdquo; Alle klientrolle-typer blir nå filtrert bort fra oversikten på Andre med rettigheter i portalen.\nDelegeringssider tjenesteeiers arkiv er utvidet Siden for rolleoverikt er utvidet med et nytt valg roller for en spesifisert mottaker. Dersom dette valget velges (Radioknapp) så kan brukeren fylle ut et tekstfelt med en fødselsnummer/organisasjonsnummer/brukernavn det skal vises roller for.Etter tidligere fjerning av avkrysningsbokser for sms/epost-varsling i “din kontaktinformasjon for virksomheten”, ble ikke sjekken på om disse var aktive, fjernet, ved søk på kontaktinformasjon for virksomhet fra serviceowner-APIet. Denne sjekken er nå fjernet\nEndringer i TUL (tjenesteutvikling) Mulighet for å angi felter i xsd som skal legges ved forsendelsen som metadata Tjenesteeier har mulighet til å definer metadatafelter som skal være mulig å trekke ut for å styre videre behandling av skjema, etter de er sendt fra Altinn. Det er lagt inn en ny seksjon i innholdsreferanser, der tjenesteeier kan oppgi hvilke felter fra xsd’en som skal legges ved skjema som metadata.\nEndringer i eksterne grensesnitt Endring ER Batch/RegisterER Webservice Konvertering fra flatfil til XML og innlesing av XML både internt og eksternt er utvidet med innlesing av flere felter.\nREST grensesnitt som tilbyr CRUD for KoFuVi REST-grensesnittet for kontaktinformasjon er blitt oppdatert med POST for å legge inn ny kontaktinformasjon. Grensesnittet tar i mot samme modell som GET-requesten, men kun epos eller telefonnummer kan oppgis. REST-grensesnittet for kontaktinformasjons-endepunkter (/api/{orgNo}/profile/contactinformation/{id}) er blitt oppdatert med DELETE for å slette enkelte endepunkter. Se /api/help for mer.\nLokal rolle opprettet på juridisk enhet skal også gjelde på underenheter Endringen fører til at når det opprettes lokal rolle på juridisk enhet så gjelder dette også for underenheter.\nAndre endringer Implementering av nytt KoFuVi-grensesnitt KoFuVi har satt opp et nytt grensesnitt for varslingsadresser. Det gamle grensesnittet, /digitale_adresser, vil fortsatt være tilgjengelig både fra KoFuVi og i kodebasen.\nVirksomhetsbrukere skal få samme tilgang til underenheter som de har for hovedenhet Virksomhetsbrukere har fått samme tilgang til underenheter som de har for hovedenhet. Avgiverliste returnerer nå også underenheter når man henter avgivere for virksomhetsbruker.\nMulighet for å lese inn felter som skal brukes til å anngi metadata ved uthenting av skjemaer Det er lagt til mulighet for å lese inn felter som skal brukes til å anngi metadata ved uthenting av skjemaer. Disse metadata-feltene spesifiseres per LogicalForm. XML-formatet i FormPresentationField.xml er utvidet med MetadataFields:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot;?\u0026gt; \u0026lt;ContentReferences\u0026gt; \u0026lt;PresentationFields formatVersion=\u0026quot;1.0\u0026quot; xmlns:fpf=\u0026quot;http://schemas.altinn.no/tul/2009/formpresentationfield\u0026quot;\u0026gt; \u0026lt;PresentationField id=\u0026quot;1\u0026quot; xPath=\u0026quot;/Skjema/Skattyterinfor-grp-5801/info-grp-5802/EnhetOrganisasjonsnummer-datadef-18\u0026quot; pageName=\u0026quot;view1.xsl\u0026quot; /\u0026gt; \u0026lt;PresentationField id=\u0026quot;2\u0026quot; xPath=\u0026quot;/Skjema/Skattyterinfor-grp-5801/Kontakt-grp-5803/KontaktpersonNavn-datadef-2\u0026quot; pageName=\u0026quot;view1.xsl\u0026quot; /\u0026gt; \u0026lt;/PresentationFields\u0026gt; \u0026lt;OverridableFields\u0026gt; \u0026lt;Field xPath=\u0026quot;/Skjema/Skattyterinfor-grp-5801/Kontakt-grp-5803/KontaktpersonNavn-datadef-2\u0026quot; pageName=\u0026quot;view1.xsl\u0026quot; /\u0026gt; \u0026lt;/OverridableFields\u0026gt; \u0026lt;MetadataFields\u0026gt; \u0026lt;Field xPath=\u0026quot;/Skjema/Skattyterinfor-grp-5801/Kontakt-grp-5803/KontaktpersonNavn-datadef-2\u0026quot; pageName=\u0026quot;view1.xsl\u0026quot; key=\u0026quot;kontaktpersonNavn\u0026quot; /\u0026gt; \u0026lt;/MetadataFields\u0026gt; \u0026lt;/ContentReferences\u0026gt;  Diverse bugfix Duplikater i listen når man legger til epost adresser som allerede eksisterer i kontakt informasjon Det var slik at om man la til to like eposter/telefonnummere ble det lagret og man fikk tilbake en liste som inneholdt duplikater. Når siden oppdateres blir duplikatene borte. Det er nå lagt til filtrering på duplikater slik at disse blir tatt bort før oppdateringen gjøres.\nStøtte for mellomrom og bindestrek i etternavn ved overføring fra selvregistrert (SI) bruker til fødselsnummer Det ble ettet en feil i valideringsrutinen som gjorde at navn som “Van Helsing” eller “Bang-Hansen” ikke kunne oppgis, fordi mellomrom og bindestrek ikke var ansett som gyldige tegn.\nDin kontaktinformasjon under profil viste informasjon fra gammelt samtykke hvis det ikke fantes informasjon fra kontakt og reservasjonsregisteret Dette er nå blitt fjernet. Kontaktinformasjon vil nå være blankt hvis Altinn ikke har informasjon fra kontakt og reservasjonsregisteret (KRR). Dette stemmer bedre med en tidligere endring hvor Altinn ikke lenger faller tilbake til informasjonen i samtykke profil hvis det ikke finnes noe i KRR.\nDet var ikke mulig å fjerne alle eksisterende varslingsadresser selv om man la til en ny Administrasjon av varslingsadresser krever at det finnes minst en varslingsadresse. Logikken for dette hindret sletting av alle eksisterende adresser selvom det samtidig ble lagt til en ny. Dette er nå blitt justert slik at det er mulig å fjerne alle gamle adresser så lenge det legges til minst en ny adresse i samme operasjon.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/autorisasjon/",
	"title": "Autorisasjon",
	"tags": [],
	"description": "Implementasjonsguiden for autorisasjon gir en teknisk beskrivelse av hvordan en kan benytte Altinn til autorisasjon og tilgangskontroll for eksterne tjenester, altså tjenester på andre nettsteder.",
	"content": " Innledning Implementasjonsguiden for autorisasjon gir en teknisk beskrivelse av hvordan autorisasjon og tilgangskontroll for eksterne tjenester skal implementeres. Dokumentasjonen er ment for utviklingsressurser hos tjenesteeiere som skal utnytte Altinn til autorisasjon og tilgangskontroll. For å beskytte sine tjenester er det også nødvendig at tjenesteeiere etablerer føderering av brukere fra ID-porten. Dette dokumentet inneholder ikke detaljert informasjon om oppsett av føderering mot ID-porten, men beskriver hvordan løsningen for autorisasjon i Altinn forholder seg til ID-porten, og hva dette innebærer for tjenesteeieren.\nBegrepsdefinisjoner\nOverordnet flyt for implementasjon av autorisasjon Altinn kan benyttes av tjenesteeiere som ønsker å tilgjengeliggjøre informasjon og tjenester på egen plattform og nettsted, men ikke kan utføre en full autorisasjon av brukers tilganger. Roller og rettigheter kan være basert på mye informasjon som hver enkelt tjenesteeier ikke nødvedigvis har tilgang til. For å oppnå dette kan tjenesteeieren opprette en tjeneste av typen lenketjeneste i TUL. Tjenesten migreres til SBL på linje med andre tjeneste¬typer, slik at Altinn kan avgjøre om den aktuelle brukeren har nødvendig tilganger basert på de regler tjenesteeier har definert i TUL.\nAltinn leverer autorisasjonstjenester mens ID-porten leverer tjenester for føderering av brukere (Single Sign On).\nI forbindelse med autorisasjon i Altinn er det dermed tre aktører:\n ID-porten, som er Identity Provider og foretar autentisering av sluttbruker Altinn, som foretar autorisasjonskontroll, (og ved bruk av lenking - tjenestekontroller og videreføring av sluttbruker til tjeneste i ekstern portal). Tjenesteeier for ekstern tjeneste som tilbyr tjenesten til sluttbruker.  Flyt ved bruk av viderføring i Altinn  Figur 1 – Flyt for lenketjeneste - autentisering   Figur 1 viser ID-porten, Altinn, tjenesten og tjenesteeier i et standard «SAML-univers». Altinn er ikke Identity Provider og ID-porten utfører dermed all autentisering av sluttbrukere som deretter fødereres mot Altinn som er Service Provider. Altinn deltar i ID-portens Circle of trust sammen med tjenesteeiere for lenketjenester som også er Service Provider.\n Punkt 1a og 1b. Sluttbruker når lenketjenesten på to måter; via tjenestekatalogen i Altinn eller via dyplenke hos tjenenesteeier. Punkt 2. Når sluttbruker prøver å nå lenketjenesten i Altinn blir det sjekket om sluttbruker er pålogget Altinn. Dersom sluttbruker ikke er pålogget Altinn, blir brukeren ført til ID-porten for autentisering. Sluttbruker blir autentisert i ID-porten og ID-porten fødererer sluttbrukerens identitet til Altinn.   Figur 2 – Flyt for lenketjenesten – Valg av avgiver og tjenestekontroll   Altinn har verifisert sluttbrukerens identitet og sluttbrukeren er innenfor Circle of Trust med ID-porten og Altinn. Circle of Trust er et begrept innenfor SAML som beskriver systemer med gjensidig tillitt.\n Punkt 3. og Punkt 4. Sluttbrukeren blir ført til valg av avgiver siden i Altinn. Avgiverkontroll og eventuelle tjenestekontroller som er satt på lenketjenesten i TUL blir utført.\n Punkt 5. Dersom sluttbruker og valgt avgiver tilfredstiller kontrollene satt på tjenesten, blir brukeren videreført til den eksterne tjenesten med en temporær nøkkel lagt til URL.   Figur 3 - Flyt for lenketjenesten - Autorisasjonskontroll   Tjenesteeier har verifisert at sluttbrukeren er autentisert og sluttbruker er innenfor Circle of Trust med ID-porten, Altinn og Tjenesteeier.\n Punkt 6. Når sluttbruker kommer til den beskyttede tjenesten hos tjenesteeier, må tjenesteeier sjekke om sluttbrukeren er pålogget i tjenesteeiers løsning. Dersom sluttbrukeren ikke er pålogget i tjenesteeiers løsning, verifiseres det at brukeren er pålogget i ID-porten og ID-porten fødererer sluttbrukerens identitet til tjenesteeier. Punkt 7. Tjenesteeier bruker den temporære nøkkelen lagt på URL (tempkey) i webservicekall mot Altinn og henter avgiver valgt av sluttbruker i Altinn. Punkt 8. Tjenesteeier sender XACML request i webservicekall til Altinn for å få bekreftet at sluttbruker har rettigheter til å utføre spesifisert operasjon på lenketjenesten til tjenesteeieren for valgt avgiver. Punkt 9. Brukeren kan nå lenketjenesten.  Implementasjon av lenketjenesten. De påfølgende kapitlene vil gi en teknisk detaljert beskriveles av hvordan tjenesteiere bør implementere lenketjenesten i tjenesteeieres applikasjon.\nUtvikling av tjenesteiers eksterne tjeneste Hvordan tjenesten skal fungere i ekstern portal har Altinn ikke et forhold til, og tjenesteier har selv ansvaret for utviklingen av applikasjonen som driver den eksterne tjenesten. Men, i forhold til lenketjenesten i Altinn er det tre hovedfunksjoner tjenesteier må implementere i sin løsning.\nFøderering av identitet fra ID-porten Ressursene som inngår i tjenesten, og dermed er tilgjengelige for sluttbrukere, må beskyttes ved bruk av SAML for føderering av brukerindentiet fra ID-porten. Hvordan dette løses kan tjenesteier selv avgjøre innen for de kravene som stilles av ID-porten. Det som er viktig for lenketjenesten er at sluttbrukers identitet blir verifisert og mottatt i applikasjonen.\nHente avgiver med tempkey fra Altinn. Når sluttbrukeren overføres fra Altinn til den eksterne tjenesten i en http GET request blir en temporær nøkkel (tempkey) lagt til URL. Denne temporære nøkkelen skal benyttes i webservicekall til Altinn for å hente avgiveren brukeren har valgt i portalen. Det er altså viktig at den temporære nøkkelen kan videreføres igjennom fødereringen mot ID-porten, og dermed kan det være hensiktsmessig at applikasjonen mellomlagrer den temporære nøkkelen før sluttbrukeren blir «redirected» til ID-porten i forbindelse med føderering.\nSjekke sluttbrukers autorisasjon ved bruk av webservice Når identiteten til sluttbrukeren er fastslått etter fødereringen fra ID-porten, og avgiver er mottatt i responsen fra Altinns webservice, må applikasjonen benytte Altinns autorisasjonswebservice for å få bekreftet at sluttbruker har rettigheter til å utføre spesifisert operasjon på lenketjenesten til tjenesteeieren for valgt avgiver.\nIntegrasjon mot ID-porten ID-Porten er Identity Provider for lenketjenester, og tjenesteeiere i Altinn som har lenketjenester må etablere en egen, standard, samarbeidsavtale med ID-porten. Dette fordi en slik tjenesteeier vil måtte ha en direkte integrasjon mot ID-porten. DIFI har utarbeidet en tilslutningsguide som beskriver den jobben som må gjøres for å sette opp SAML-integrasjon mot ID-porten. Tilslutningsguiden finnes under ID-Porten \u0026gt; Dokumentasjon i Samarbeidsportalen til Difi.\nUtvikle Lenketjenesten i TUL Lenketjenestene utvikles i TUL på samme måte som andre tjenestetyper, ved at man først oppretter en tjeneste med tjenestetype Lenketjeneste, og deretter har utgaver av tjenesten på nivået under. Det er utgavene som migreres til SBL og er tilgjengelig for sluttbruker. Når tjenesten opprettes blir det generert en ekstern tjenestekode, som er unik for hver enkelt tjeneste. Sammen med ekstern utgavekode, som man setter på Utgaveparametre, danner ekstern tjenestekode en unik identifikator til hver utgave. Ekstern tjenestekode og ekstern utgavekode brukes både i direktelenke til tjenesten i Altinn, samt i autorisasjonsforespørselen mot Altinn.\nDet som skiller lenketjenestene fra andre tjenestetyper er at det på lenketjenestene legges inn en URL til tjenesten på tjenesteeiers side i utgavespesifikasjonen, og siden test-URL og prod-URL er forskjellig, må man derfor alltid opprette en test-utgave og en prod-utgave.\nPå utgaveparametre definerer man lenken som skal peke mot skjema:\n Utgavenavn – dette er navnet som sluttbruker ser i SBL Kortnavn – vises bare i TUL Ekstern utgavekode – numerisk kode som må være unik innen hver tjeneste. Sammen med tjenestekoden utgjør tjenesteutgavekoden en unik identifikator av tjenesesteutgaven, og dyplenken til skjema vil bestå av disse to verdiene Hovedspråk – angi hvilket hovedspråk tjenesten skal finnes på Gyldighetsdatoer – angi gyldig fra-dato og gyldig til-dato Instansierings-/serivcekontroller Altinn verifiserer at valgt avgiver er over 18 år før brukeren gis tilgang til lenketjenesten. Er kun gyldig dersom avgiver er person. Altinn verifiserer at innlogget bruker har registerert personlig epostadresse i profilen før brukeren gis tilgang til lenketjenesten. Lenketjeneste detaljer – her legges url til tjenesten på tjenesteeiers skjemamotor inn Logging og sporing – angi om loggings og sporingsinfo skal lagres i tredjeparts arkiv, og evt hvor lenge. Minimum 10 år hvis logging/sporing skal benyttes. Avgiverkrav – angi hvike aktører/avgivere som skal kunne bruke tjenesten.  Tilgjengelige valg er:\n Privatperson Juridisk enhet Bedrift Konkursbo Bedrift eller juridisk enhet Person eller juridisk enhet Bedrift, juridisk enhet eller konkursbo Alle aktører Sikkerhetsnivå – lenketjenester i Altinn 2 må settes opp med sikkerhetsnivå 3 eller 4, fordi ID-porten benyttes til autentisering og de tilbyr nivå 3 og 4. Virksomhetsbrukere – angi om sluttbrukere skal kunne bruke virksomhetssertifikat til å logge inn. Med virksomhetssertifikat er det ingen knytning til fødselsnummeret til vedkommende som bruker tjenesten. Samhandlingstjeneste – lenketjenester kan defineres til å kunne inngå i en samhandlingstjeneste. Da settes det et kryss på utgaven her, og utgaven vil være valgbar som tilgjengelig tjeneste for samhandlingstjenester.  Altinn rolle På samme måte som andre tjenestetyper, må lenketjenestene knyttes til en eller flere Altinn-roller slik at tjenestene blir tilgjengelig for sluttbrukerne. Altinn-rollene er knyttet til et sett med eksterne roller fra Enhetsregisteret (ER), og når tjenesteeier skal velge hvilke(n) Altinn-rolle\u0026reg; som skal gi tilgang til tjenesten,er det viktig å tenke over en del ting:\n Hvem skal bruke tjenesten – det må velges en eller flere roller som sikrer at alle aktuelle avgivere har tilgang til tjenesten. Ulike organisasjonstyper registrerer ulike typer eksterne roller i ER, og tjenesteeier må velge en Altinn-rolle som dekker ulike organisasjonstyper. F.eks vil et enkeltpersonsforetak kanskje bare ha innehaver registrert, mens et AS har både daglig leder, styreleder og revisor. Hvis både ENK’et og AS’et skal kunne benytte tjenesten, må Altinn-rollen som knyttes til tjenesten være knyttet til både Innehaver og Daglig leder, Styreleder eller Revisor. Tilgjengelige roller finnes på \u0026ldquo;rolleadministrasjonssiden\u0026rdquo; i TUL og i portalhjelpen i SBL. Skal ulike roller har tilgang til å utføre ulike operasjoner på tjenesten? Dette kan man skille på i rolletilknytningen. Vær i midlertid oppmerksom på at Altinn kun sjekker at man har lese-tilgang til tjenesten ved instansiering. Hvis man ønsker en mer detaljert autorisasjonssjekk, må dette implementeres i tjenesteeiers tjeneste-applikasjon.  Bruk av Altinns autorisasjonswebservice Altinns webservice for autorisasjon kan benyttes av tjenesteiere til å foreta autorisasjonsbeslutninger basert på rolle og rettighetsregler og delegeringer som ligger i Altinns autorisasjonsdatabase. Dette gjør at eksterne tjenester som ikke benytter Altinns tjenestemotor likevel kan benytte Altinns autorisasjonsmodell på tjenesten. For lenketjenester, for eksempel en tjeneste hvor avgiver kan være en organisasjon, er dette sentralt.\nDisse tabellene viser endepunktene og operasjonene for Altinns to webservices for autorisasjon som er aktuelle for lenketjenesten.\nAuthorizationAdministration https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc?wsdl\n   Input Beskrivelse Endepukt operasjon     GetReporteeByTempKey https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc GetReporteeByTempKey   GetReportees https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc GetReportees    AuthorizationDecisionPointExternal https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc?wsdl\n   Basis operasjon URI/endepunkt Endepukt operasjon     ExternalReporteeBE https://www.altinn.no/AuthorizationExternal/AuthorizationDecisionPointExternal.svc AuthorizeAccessExternal       Input Beskrivelse     tempKey Nøkkel som angitt i lenketjenestens request URL, vil utgå etter at informasjon er hentet ut – pålagt parameter.   Returverdi Beskrivelse   ExternalReporteeBE ExternalReporteeBE-objekt.       Returverdi Beskrivelse     Name Avgivers navn   OrganizationNumber Organisasjonsnummer for denne avgiveren hvis dette er en organisasjon.   SSN Fødselsnummer for denne avgiveren hvis dette er en person.   Reportee Type Typebeskrivelse for hvilken type avgiver dette er: None, Person, Organization, eller SelfIdentified (ikke et praktisk mulig scenario i denne sammenhengen).    Eksempel Request \u0026lt;?xml version=\u0026quot;1.0\u0026quot;?\u0026gt; \u0026lt;soap:Envelope xmlns:soap=\u0026quot;http://www.w3.org/2003/05/soap-envelope\u0026quot; xmlns:ns=\u0026quot;http://www.altinn.no/services/Authorization/Administration/2010/10\u0026quot;\u0026gt; \u0026lt;soap:Header/\u0026gt; \u0026lt;soap:Body\u0026gt; \u0026lt;ns:GetReporteeByTempKey\u0026gt; \u0026lt;ns:tempKey\u0026gt;76d4afac-f228-4055-bde5-f4aae0c6af8f\u0026lt;/ns:tempKey\u0026gt; \u0026lt;/ns:GetReporteeByTempKey\u0026gt; \u0026lt;/soap:Body\u0026gt; \u0026lt;/soap:Envelope\u0026gt;  \r\rXML SOAP request\r\r\rgetReporteeByTempKeyReq.xml\r\r(0 ko)\r\r\rEksempel Response \u0026lt;s:Envelope xmlns:s=\u0026quot;http://www.w3.org/2003/05/soap-envelope\u0026quot; xmlns:a=\u0026quot;http://www.w3.org/2005/08/addressing\u0026quot; xmlns:u=\u0026quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\u0026quot;\u0026gt; \u0026lt;s:Header\u0026gt; \u0026lt;a:Action s:mustUnderstand=\u0026quot;1\u0026quot;\u0026gt;http://www.altinn.no/services/Authorization/Administration/2010/10/IAuthorizationAdministrationExternal/GetReporteeByTempKeyResponse\u0026lt;/a:Action\u0026gt; \u0026lt;o:Security s:mustUnderstand=\u0026quot;1\u0026quot; xmlns:o=\u0026quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\u0026quot;\u0026gt; \u0026lt;u:Timestamp u:Id=\u0026quot;_0\u0026quot;\u0026gt; \u0026lt;u:Created\u0026gt;2012-11-29T07:19:14.278Z\u0026lt;/u:Created\u0026gt; \u0026lt;u:Expires\u0026gt;2012-11-29T07:24:14.278Z\u0026lt;/u:Expires\u0026gt; \u0026lt;/u:Timestamp\u0026gt; \u0026lt;/o:Security\u0026gt; \u0026lt;/s:Header\u0026gt; \u0026lt;s:Body\u0026gt; \u0026lt;GetReporteeByTempKeyResponse xmlns=\u0026quot;http://www.altinn.no/services/Authorization/Administration/2010/10\u0026quot;\u0026gt; \u0026lt;GetReporteeByTempKeyResult xmlns:b=\u0026quot;http://schemas.altinn.no/services/Authorization/Administration/2012/11\u0026quot; xmlns:i=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot;\u0026gt; \u0026lt;b:Name\u0026gt;HÅKON TRANA\u0026lt;/b:Name\u0026gt; \u0026lt;b:OrganizationNumber i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;b:ReporteeType\u0026gt;Person\u0026lt;/b:ReporteeType\u0026gt; \u0026lt;b:SSN\u0026gt;05116602352\u0026lt;/b:SSN\u0026gt; \u0026lt;/GetReporteeByTempKeyResult\u0026gt; \u0026lt;/GetReporteeByTempKeyResponse\u0026gt; \u0026lt;/s:Body\u0026gt; \u0026lt;/s:Envelope\u0026gt;  Feilsituasjoner Dersom nøkkelen er ugyldig (for eksempel, på grunn av timeout, eller tidligere bruk) vil operasjonen returnere en Altinnfault. Den eksterne tjenesten bør da presentere en feilmelding for sluttbruker, og gi sluttbruker mulighet til å gå tilbake til Altinn (dyplenken til tjenesten) for å starte tjenesten på ny.\nAuthorizationDecisionPointExternal.AuthorizeAccessExternal Når applikasjonen som driver den eksterne tjenesten har verifisert identiten til brukeren med føderering fra ID-porten, og mottatt avgiver (valgt av sluttbruker) ved kall til GetReporteeByTempKey, må det verifiseres at sluttbruker har rettighet til å benytte tjenesten for valgt avgiver. Dette gjøres med kall til AuthorizationDecisionPointExternal.AuthorizeAccesExternal.\nAuthorizeAccessExternal operasjonen benytter XACML standarden og regler lagret i Altinn til å returnere en autorisasjonsbeslutning. Besluttningsgrunnlaget til autorisasjon for tjenester er de regler (rolleknytninger) som tjenesteeier har satt på lenketjenesten i TUL.\nDet kreves en XACMLRrquest som gir et XACML standardisert svar\nXACML-forespørselen skal inneholde en kombinasjon av følgende elementer:\n   Foreldre-node AttributeId Gyldige verdier i AttributeValue Eksempel     Subject urn:oasis:names:tc:xacml:2.0:subject: urn:altinn:ssn Utførende brukers fødselsnummer \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml: 2.0:subject:urn:altinn:ssn\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;07037512345\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt;   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn Avgivers fødselsnummer \u0026lt;AttributeAttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0: resource:urn:altinn:reportee-ssn\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;010203401944\u0026lt;/AttributeValue\u0026gt;\u0026lt;/Attribute\u0026gt;   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno Avgivers organisasjonsnnummer \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0: resource:urn:altinn:reportee-orgno\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;910453777\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt;   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode Eksterne tjenestekoder \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;2298\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt;   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode Ekstern utgavekode (tilhørende overnevnte tjenestekode) \u0026lt;/Attribute\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;60804\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt;   Action urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id Read Write Sign ArchiveRead ArchiveDelete ServiceOwnerArchiveRead Delegate Hvilke operasjoner som kan benyttes for den aktuelle lenketjenesten defineres i TUL. \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;Sign\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt;   Environment urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment YT2 YT AT8 AT3 AT4 AT5 TT1 TT2 Prod \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0: action:urn:altinn:environment\u0026quot;DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;PROD\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt;    XACML-forespørselen skal inneholde kun et Resource element med kombinasjon av enten avgivers fødselsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn) eller avgivers organisasjonsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno), samt ekstern tjenestekode og utgavekode (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode og urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode). Det må angis hvilket miljø requesten gjelder i Environment elementet (urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment). Altinn spesifikke elementer XACML-respons:\n   Foreldre-node AttributeId Gyldige verdier i AttributeValue Eksempel     Obligation urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:authenticationlevel Autentiseringsnivå 0, 1, 2, 3, 4 Hvilke nivå som skal kreves for en resurs. \u0026lt;tns:Obligation FulfillOn=\u0026quot;Permit\u0026quot; ObligationId=\u0026quot;\u0026quot;\u0026gt; \u0026lt;tns:AttributeAssignment AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:obligation:urn:altinn:authenticationlevel\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;tns:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#integer\u0026quot;\u0026gt;3\u0026lt;/tns:AttributeValue\u0026gt; \u0026lt;/tns:AttributeAssignment\u0026gt; \u0026lt;/tns:Obligation\u0026gt;    Nedenfor vises eksempler på gyldig forespørsler:\nAuthorizationRequest: \u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;Request xmlns=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os\u0026quot; xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xsi:schemaLocation=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os http://docs.oasis-open.org/xacml/access_control-xacml-2.0-context schemaos.xsd\u0026quot;\u0026gt; \u0026lt;!-- Altinn Sample Request. --\u0026gt; \u0026lt;!-- This authorization request tries to verify if user --\u0026gt; \u0026lt;!-- 06069460079 is allowed to perform sign operation --\u0026gt; \u0026lt;!-- on behalf of reportee 910453777 --\u0026gt; \u0026lt;!-- on service 2298, edition 60804 --\u0026gt; \u0026lt;Subject\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:ssn\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;06069460079\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Subject\u0026gt; \u0026lt;Resource\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reporte-orgno\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;910453777\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;2298\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;60804\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Resource\u0026gt; \u0026lt;Action\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;Sign\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Action\u0026gt; \u0026lt;/Request\u0026gt;  Operasjonen returnerer XML som også følger XACML standarden. Under vises et eksempel på en response.\nAuthorizationResponse: \u0026lt;xacml:Response xmlns:tns=\u0026quot;urn:oasis:names:tc:xacml:2.0:policy:schema:os\u0026quot; xmlns:xacml=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os\u0026quot; xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xsi:schemaLocation=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os http://docs.oasis-open.org/xacml/2.0/access_control-xacml-2.0-context-schema-os.xsd\u0026quot;\u0026gt; \u0026lt;xacml:Result ResourceId=\u0026quot;\u0026quot;\u0026gt; \u0026lt;xacml:Decision\u0026gt;Permit\u0026lt;/xacml:Decision\u0026gt; \u0026lt;xacml:Status\u0026gt; \u0026lt;xacml:StatusCode Value=\u0026quot;urn:oasis:names:tc:xacml:2.0:response:urn:altinn:ok\u0026quot; /\u0026gt; \u0026lt;xacml:StatusMessage\u0026gt;\u0026lt;/xacml:StatusMessage\u0026gt; \u0026lt;/xacml:Status\u0026gt; \u0026lt;tns:Obligations\u0026gt; \u0026lt;tns:Obligation FulfillOn=\u0026quot;Permit\u0026quot; ObligationId=\u0026quot;\u0026quot;\u0026gt; \u0026lt;tns:AttributeAssignment AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:obligation:urn:altinn:authenticationlevel\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;tns:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#integer\u0026quot;\u0026gt;3\u0026lt;/tns:AttributeValue\u0026gt; \u0026lt;/tns:AttributeAssignment\u0026gt; \u0026lt;/tns:Obligation\u0026gt; \u0026lt;/tns:Obligations\u0026gt; \u0026lt;/xacml:Result\u0026gt; \u0026lt;/xacml:Response\u0026gt;  Det er opprettet en Altinn-tilpasset XACML context XSD som kan brukes til å validere XACML request fra tjenesteeier. Denne inneholder de gyldige attributtene for XACML requester som sendes til Altinn. Altinn XACML context XSD ligger på Altinnnett under systemdokumentasjon.\nAutorisasjonsbeslutning Dersom XACML responsen fra Altinn (xacml:DecisionPermit/xacml:Decision) indikerer at brukeren har rettighet til å utføre spesifisert operasjon for spesifisert avgiver på spesifisert tjenesteutgave, kan brukeren gis adgang til den eksterne tjenesten.\nMen, dersom XACML responsen fra Altinn (xacml:DecisionDeny/xacml:Decision) indikerer at brukeren IKKE har rettighet til å utføre operasjoen, må applikasjonen nekte sluttbruker adgang til den eksterne tjenesten. Da bør sluttbruker gis mulighet til å velge avgiver på ny, og dette kan gjøres på flere måter:\n Sluttbruker kan sendes tilbake til Altinn (via dyplenke til tjenesten) for å velge avgiver på ny. Applikasjonen for eksterne tjenesten kan hente liste over sluttbrukers mulige avgivere ved kall til AuthorizationAdministration.GetReportees (se kapittel ) og gi sluttbruker mulighet til å velge avgiver på nytt i den eksterne tjenesten.  Uavhengig av valgt metode for å velge avgiver på nytt, må det gjøre et påfølgende kall til AuthorizeAccessExternal metoden.\nFeilsituasjoner Dersom Altinn ikke klarte å gjøre en korrekt beslutning for parameterne spesifisert i requesten, vil XACML responsen fra Altinn indikerere dette (xacml:DecisionIndeterminate/xacml:Decision). Ved annen teknisk feil vil operasjonen returnere en Altinnfault. Den eksterne tjenesten bør da presentere en feilmelding for sluttbruker, og gi sluttbruker mulighet til å gå tilbake til Altinn (dyplenken til tjenesten) for å starte tjenesten på ny.\nAuthorizationAdministrationExternal.GetReportees Metoden GetReportees returnerer alle mulige avgivere for en person (identifisert med fødselsnummer) uavhengig av hvilke roller/rettigheter denne personen har for avgiveren. Dermed må det også ved bruk av denne tjenesten utføres en påfølgende autorisasjonssjekk med XACML webservice mot en lenketjeneste som rollekravene for den eksterne tjenesten kan knyttes til.\nDersom tjenesteier ønker å la sluttbrukeren velge avgiver i egen tjeneste som standard, kan applikasjonen som driver ekstern tjeneste oppnå dette ved å bruke denne metoden.\nDa må tjenesteeier gjøre følgende:\n Opprette lenketjeneste i Altinn og knytte den til en Altinn rolle. Dette gjør at roller/rettigheter for tjenesten kan delegeres i Altinns rolledelegeringside. Implementere valg av avgiver i egen portal og bruke GetReportees til å få liste over mulige avgivere fra Altinn. Implementere bruk av AuthorizeAccessExternal til å sjekke at brukeren har rettighet på tjenesten til til tjenesteier for valgt avgiver.  Da trenger ikke sluttbrukerne å gå innom Altinn for å bruke tjenesten. Men delegering av roller og rettigheter til tjenesten må fremdeles gjøres i Altinn.\nDersom tjenesteeier ikke ønsker å benytte valg av avgiver i Altinn kan de heller ikke benytte følgende servicekontroller på tjenesten:\n Kontroll av korrekt avgivertype (person, bedrift, juridisk enhet etc) Kontroll av at avgiver er 18. år Kontroll av at pålogget bruker har registrert epost i sin profil.  Tabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     userSSN Fødselsnummeret til brukeren det skal hentes avgivere for – pålagt parameter.   retrieveInActiveReportee Flagg for å sette om også inaktive avgivere skal returneres, standard False – valgfri parameter.   RetrieveSubEnitiy Flagg for å sette om også underenheter skal returneres, standard False – valgfri parameter.   maximumReporteeCount Verdi for maksimum antall avgivere som skal returneres, standard satt til alle – valgfri parameter.   Returverdi    ExternalReporteeBEList Liste med ExternalReporteeBE-objekter   Name Avgivers navn   OrganizationNumber Organisasjonsnummer for denne avgiveren hvis dette er en organisasjon   SSN Fødselsnummer for denne avgiveren hvis dette er en person   ReporteeType Typebeskrivelse for hvilken type avgiver dette er: None, Person, Organization, eller SelfIdentified (ikke et praktisk mulig scenario i denne sammenhengen)    Eksempel Request/Response GetReportees Request\n\u0026lt;soap:Envelope xmlns:soap=\u0026quot;http://www.w3.org/2003/05/soap-envelope\u0026quot; xmlns:ns=\u0026quot;http://www.altinn.no/services/Authorization/Administration/2010/10\u0026quot;\u0026gt; \u0026lt;soap:Header/\u0026gt; \u0026lt;soap:Body\u0026gt; \u0026lt;ns:GetReportees\u0026gt; \u0026lt;ns:userSSN\u0026gt;05116602352\u0026lt;/ns:userSSN\u0026gt; \u0026lt;!--Optional:--\u0026gt; \u0026lt;ns:retrieveInActiveReportee\u0026gt;false\u0026lt;/ns:retrieveInActiveReportee\u0026gt; \u0026lt;!--Optional:--\u0026gt; \u0026lt;ns:retrieveSubEnitiy\u0026gt;true\u0026lt;/ns:retrieveSubEnitiy\u0026gt; \u0026lt;!--Optional:--\u0026gt; \u0026lt;ns:maximumReporteeCount\u0026gt;10\u0026lt;/ns:maximumReporteeCount\u0026gt; \u0026lt;/ns:GetReportees\u0026gt; \u0026lt;/soap:Body\u0026gt; \u0026lt;/soap:Envelope\u0026gt;  GetReportees Response\n\u0026lt;s:Envelope xmlns:s=\u0026quot;http://www.w3.org/2003/05/soap-envelope\u0026quot; xmlns:a=\u0026quot;http://www.w3.org/2005/08/addressing\u0026quot; xmlns:u=\u0026quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\u0026quot;\u0026gt; \u0026lt;s:Header\u0026gt; \u0026lt;a:Action s:mustUnderstand=\u0026quot;1\u0026quot;\u0026gt;http://www.altinn.no/services/Authorization/Administration/2010/10/IAuthorizationAdministrationExternal/GetReporteesResponse\u0026lt;/a:Action\u0026gt; \u0026lt;o:Security s:mustUnderstand=\u0026quot;1\u0026quot; xmlns:o=\u0026quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\u0026quot;\u0026gt; \u0026lt;u:Timestamp u:Id=\u0026quot;_0\u0026quot;\u0026gt; \u0026lt;u:Created\u0026gt;2012-11-29T09:06:49.796Z\u0026lt;/u:Created\u0026gt; \u0026lt;u:Expires\u0026gt;2012-11-29T09:11:49.796Z\u0026lt;/u:Expires\u0026gt; \u0026lt;/u:Timestamp\u0026gt; \u0026lt;/o:Security\u0026gt; \u0026lt;/s:Header\u0026gt; \u0026lt;s:Body\u0026gt; \u0026lt;GetReporteesResponse xmlns=\u0026quot;http://www.altinn.no/services/Authorization/Administration/2010/10\u0026quot;\u0026gt; \u0026lt;GetReporteesResult xmlns:b=\u0026quot;http://schemas.altinn.no/services/Authorization/Administration/2012/11\u0026quot; xmlns:i=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot;\u0026gt; \u0026lt;b:ExternalReporteeBE\u0026gt; \u0026lt;b:Name\u0026gt;Otta Transport AS Konkursbo\u0026lt;/b:Name\u0026gt; \u0026lt;b:OrganizationNumber\u0026gt;910453092\u0026lt;/b:OrganizationNumber\u0026gt; \u0026lt;b:ReporteeType\u0026gt;Organization\u0026lt;/b:ReporteeType\u0026gt; \u0026lt;b:SSN i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;/b:ExternalReporteeBE\u0026gt; \u0026lt;b:ExternalReporteeBE\u0026gt; \u0026lt;b:Name\u0026gt;MJOSUNDET OG RYPEFJORD\u0026lt;/b:Name\u0026gt; \u0026lt;b:OrganizationNumber\u0026gt;910059106\u0026lt;/b:OrganizationNumber\u0026gt; \u0026lt;b:ReporteeType\u0026gt;Organization\u0026lt;/b:ReporteeType\u0026gt; \u0026lt;b:SSN i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;/b:ExternalReporteeBE\u0026gt; \u0026lt;b:ExternalReporteeBE\u0026gt; \u0026lt;b:Name\u0026gt;HÅKON TRANA\u0026lt;/b:Name\u0026gt; \u0026lt;b:OrganizationNumber i:nil=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;b:ReporteeType\u0026gt;Person\u0026lt;/b:ReporteeType\u0026gt; \u0026lt;b:SSN\u0026gt;05116602352\u0026lt;/b:SSN\u0026gt; \u0026lt;/b:ExternalReporteeBE\u0026gt; \u0026lt;/GetReporteesResult\u0026gt; \u0026lt;/GetReporteesResponse\u0026gt; \u0026lt;/s:Body\u0026gt; \u0026lt;/s:Envelope\u0026gt;  Feilsituasjoner Dersom sluttbrukeren (spesifisert med fødselsnummer) ikke har gitt samtykke til bruk av Altinn som privatperson eller for andre, vil GetReportees returnere en tom liste.\nDersom sluttbruker (spesifisert med fødselsnummer) ikke har gitt samtykke til å rapportere på vegne av organisasjoner eller andre personer, vil GetReportees kun returnere sluttbruker selv som mulig avgiver.\nDersom sluttbrukeren (spesifisert med fødselsnummer) ikke har gitt personlig samtykke i Altinn, vil GetReportees kun returnere organisasjoner eller andre personer som gyldige avgivere for sluttbrukeren.\nI disse tilfellene må sluttbruker informeres om dette, og gis mulighet til å logge inn i Altinn for å gi sitt samtykke.\nDersom det fødselsnummeret spesifisert er ugyldig vil Altinn returnere en Altinnfault\nFeilsituasjoner i produksjon Dersom det oppdages feil ved bruk av lenketjenesten, er det viktig at det indentifiseres hvor feilen ligger. Feil i forbindelse med føderering fra ID-porten skal meldes til ID-porten og ikke til Altinn.\nDersom lenken til den eksterne tjenesten i Altinn er korrekt, det ikke er feil i forbindelse med føderering fra ID-porten, og tjenesteeier er sikker på at feilen ikke ligger i egen applikasjon bør tjenesteeier kontakte ASF. Feilmelding kan da sendes til tjenesteeier@altinn.no\nFeilmeldingen må inneholde informasjon om tjenesten, tidspunkt for feilen og hvilke brukere og avgivere feilen dreier seg om. SOAP request og response for kall til Altinns autorisasjonswebservices må også vedlegges feilmeldingen.\n"
},
{
	"uri": "https://altinn.github.io/docs/altinncore/faq/",
	"title": "FAQ",
	"tags": [],
	"description": "Ofte stilte spørsmål med svar.",
	"content": " Svar på noen av de vanligste spørsmålene om tjenester 3.0.\nFinnes det en beskrivelse av tjenester 3.0?  Ja, på overordnet nivå så har vi fire målsettinger, og en overordnet beskrivelse av arkitekturen.\nDokumentasjon er nå lagt ut her:\n https://docs.altinn.studio https://altinndigital.no/altinn-studio   Når kan vi ta i bruk tjenester 3.0?  Nå som noe av finansieringen er på plass vil vi kunne starte realisering av målsettingene for 3.0. Det å tilgjengeliggjøre og oppdatere tjenester 3.0 fortløpende fremover, for å få kontinuerlig feedback, er ønsket måte å jobbe på.\nSe siste status for detaljer.\n Kan man gjenbruke noe fra skjema basert på InfoPath, eller må man starte helt på nytt?  Tjenester 3.0 vil støtte eksisterende datamodeller (XSD) fra SERES og OR, noe som betyr at de fleste grensesnitt (mottak, preutfylling, innsending, etc) vil kunne gjenbrukes uten store endringer i tjenesteeiers fagsystemer eller sluttbrukersystemer. Kall mot dagens mappere og interne tjenester skal også fortsatt fungere, selv om vi på sikt ønsker å fase ut mappere til fordel for noe bedre.\nVi har vurdert muligheten for å lage et verktøy som automatisk konverterer fra InfoPath til tjenester 3.0, helt eller delvis.\nEtter diskusjoner med diverse tjenesteeiere, så har det kommet frem at man sannsynligvis uansett vil ønske å forbedre brukergrensesnitt, og forenkle tekster og logikk når man går over til responsive tjenester som skal fungere også på mobil. Det å utvikle et konverteringsverktøy er ikke helt utelukket, men det må gi en reell verdi for tjenesteeierne.\n Finnes det noen retningslinjer for å lette overgangen fra InfoPath?   Lag enkle og fornuftige modeller (XSD) som inneholder så mye som mulig av datatyper, begrensninger, etc. istedenfor å kode disse selv. Benytt regelmotor (XML) istedenfor C# i InfoPath for logikk (særlig for kompliserte skjema). Lag gode og korte tekster som har en større sjanse for å fungere også på små skjermer. Vurder om store tabeller (antall kolonner) egentlig er nødvendig.   Vil vi kunne utvikle eget brukergrensesnitt og kun benytte API\u0026rsquo;ene i Altinn?  Ja. API\u0026rsquo;ene til Altinn vil fortsatt fungere som før, og tjenester 3.0 vil løfte API\u0026rsquo;ene til en kanal som er likestilt med portal også ved utvikling og testing av tjenester. Det vil også legges til rette for å kunne eksponere alle ressurser som utvikles som API, f.eks. tekst-ressurser, metadata, semantiske koblinger, valideringer, etc.\n Vil det forsvinne funksjonalitet som finnes i dagens plattform?  I utgangspunktet nei, så fremt det ikke er funksjonalitet som ikke benyttes, eller som ikke gir mening lengre.\nDe første versjonene av tjenester 3.0 vil ikke inneholde all funksjonalitet, da de viktigste egenskapene vil leveres først og videre utvikling vil gjøres basert på feedback.\n Er tjenester 3.0 prioritert?  Ja. Tjenester 3.0 er helt sentral for å kunne realisere de fire satsingsområdene i Altinn-strategien. I tillegg er tjenester 3.0 definert som ett av hovedproduktene i Altinn, og er dermed sentral også i Altinn produktstrategi.\n Hva slags teknologi benyttes i tjenester 3.0?  Se oversikten over programvare.\n Når vil den gamle InfoPath-løsningen fases ut?  Enten når alle \u0026ldquo;aktive\u0026rdquo; InfoPath-skjema er flytte over og reimplementert på ny plattform, eller når support for InfoPath i SharePoint Server avsluttes (2023, ev. 2026 hvis vi oppgraderer til SharePoint 2016).\nDe siste ryktene tyder på at støtte for InfoPath også vil inkluderes i SharePoint 2019, noe som betyr at support sannsynligvis kan forlenges helt til 2029 hvis vi oppgraderer.\nSupport for InfoPath er også en faktor, men denne virker å forlenges hver gang støtten for InfoPath i SharePoint forlenges.\nRent økonomisk i forhold til driftskostnader så vil det være fordelaktig å fase ut den gamle løsningen så snart som mulig, men det vil selvsagt ikke kunne gjøres før alle tjenesteeiere er klare.\n "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakonsument/logge-bruk/",
	"title": "Logge bruk av samtykke",
	"tags": [],
	"description": "Hvordan logge at man har hentet data som sluttbruker har samtykket til deling av",
	"content": " Når man har hentet data som er omfattet av samtykket som sluttbruker har gitt, kan man logge at data er hentet. For å logge bruk av samtykke/henting av data, trenger man autorisasjonskoden som ble gitt når sluttbruker samtykket til deling av data, samt ApiKey som er registrert på enten organisasjonsnummer som matcher mottaker av samtykke eller tredjepart som kan behandle samtykker på vegne av mottaker.\nVia REST benyttes POST på https://www.altinn.no/api/authorization/token/{AuthCode}/loguse\nLegg følgende inn i header: ApiKey: {apikey},\nAccept: application\\hal+json,\nContent: application\\hal+json\nLegg følgende inn i body: { ServiceCode: \u0026quot;{SC}\u0026quot;, ServiceEditionCode: {SEC}, UsageDateTime: \u0026quot;yyyy-mm-dd hh:mm\u0026quot; }  Responsen på denne requesten skal være 402 No content.\nFor engangssamtykker vil et loguse-kall føre til at samtykket opphører. For samtykker som kan benyttes flere ganger innen utløpsdato, vil henting av data registreres i samtykkeloggen hos sluttbruker.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/ofte-stilte-sp%C3%B8rsm%C3%A5l/",
	"title": "Spørsmål og svar om eBevis",
	"tags": [],
	"description": "",
	"content": " Spørsmål og svar  Trenger du å dele data med spesifikke private eller offentlige virksomheter?\n eBevis autoriserer selv tilgang før data returneres.  Har du data om privatpersoner som krever samtykke?\n eBevis oppretter automatisk samtykkeforespørsler til personens meldingsinnboks.  Er du ikke tjenesteeier i Altinn?\n Det går helt fint, men da kan du ikke administrere brukergruppene dine like enkelt på egen hånd.  Er APIet ditt asynkront og/eller veldig treigt?\n eBevis støtter oppkøing og at enkelte beviskilder trenger noe tid på å svare. I fremtiden vil eBevis også tilby muligheten for at brukere angir callback-url så man slipper å spørre om dataene er klare. Da vil man få et varsel når de er klare for henting.  Har du data som ikke virker å være interessante for andre enn deg selv?\n Alle former for offentlige data om personer og virksomheter kan ha en verdi når de sammenstilles med data fra andre kilder. Ofte er det ikke de som sitter på dataene som ser de mest innovative casene.  Lagres data i eBevis?\n Den eneste lagringen av data i eBevis er ved bruk av PEPPOL-kanalen der det er uunngåelig at noe mellomlagres inntil alle datakilder har levert det som trengs. Etter levering slettes dataene.  Kjører eBevis på en skyløsning?\n eBevis er en skyløsning bygget på Microsoft Azure-plattformen.  Videre plan, drift og forvaltning?\n Altinn står for drift og vedlikehold, samt videreutvikling av tjenesten. Det vil bli sett på nye brukergrupper som kan ta i bruk løsningen, og knytte flere informasjonskilder til tjenesten.  Hvor finner man informasjon om APIene?\n Se link: https://ebevis.no/   "
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-7/",
	"title": "18.7",
	"tags": [],
	"description": "Mindre forbedringer, filopplasting i Safari, feilrettinger m.m.",
	"content": " Endringer i portal Ekspanderende landkode for mobilnummer i Profil - Varslingsadresser for virksomheten Felt for landkode for mobilnummer ekspanderer nå opptil 3 sifre med \u0026ldquo;+\u0026rdquo; foran. Det har tidligere vært mulig å legge inn 3 sifre, men teksten har havnet utenfor feltet.\nKlientdelegering på fil - delegering til brukernavn gir feilmelding \u0026ldquo;Feil: E-postadresse\u0026rdquo; Det har tidligere vært uklart hvordan delegering på fil virker ved delegering til brukernavn. Det har vært støtte for dette, der man har krevet at man ved brukernavn ikke skal oppgi etternavn/orgnr, og dette førte til at man hadde en mindre kolonne for den relevante raden. Om man ikke var klar over dette kunne man fort mistolke feilmeldingen man fikk, der etternavn ble tolket som rolle, og rolle ble tolket som epost. Dette er nå rettet opp i, ved at man kan spesifisere en tom kolonne etter brukernavnet, slik at kolonne-strukturen blir den samme for alle typer rader. Beskrivelse om hvordan man bruker formatet i oppplastings-dialogen er oppdatert for å reflektere dette.\nSom sluttbruker med klientadministrasjon ønsker jeg å kunne slette roller for flere ansatte uten å måtte lukke siden mellom hver gang I visse tilfeller har ikke \u0026ldquo;Ferdig\u0026rdquo;-knappen blitt synlig ved bruk av av \u0026ldquo;Fjern alle\u0026rdquo;-knappen ved gjentatt bruk. Dette skal nå være rettet opp i, slik at \u0026ldquo;Fjern alle\u0026rdquo;-knappene skal fungere som forventet.\nForbedre formatering i kvitteringsepost ved klientdelegering fra fil Det var formateringsforskjell i mailene vi sender ut for klientdelegering avhengig av hvilken metode vi bruker (enkeldelegerig/Fildelegering). Formatet på kviteringsepost ved fildelegering er forbedret og tilsvarer nå eposten som som sendt ut når du får tildelt rolle/rettighet gjennom enkeltdelegering. Det er og lagt til uthenting av språk for hver enkelt bruker slik at alle får eposten på språket de har valgt i portalen.\nEndringer rolledelegeringer etatsportalen Det er lagt til to endringer på delegeringssidenn og rettet en bug.\n På siden for å slette delegerte roller så er det lagt til en tekstboks der man kan legge in id til en bruker eller enhet så filtreres listen over roller som kan slettes til kun denne ene avgiveren. E-post som sendes fra enten delegering eller fra sletting av delegering bytter ut navnet på den som delegerer med en tekst om at saksbehandler har delegert. I tillegg er en bug i e-posten dersom man delegerer til en enhet på tjenesteeier siden så ble både mottaker og avgiver av rollen satt til den privatpersonen som utførte delegeringen. Dette er endret til å sette etaten som avgiver og enheten som mottar som motaker. Det ville ikke gitt mening å skjule hvem som utfører delegeringen for så å oppgi dette navnet på et annet sted i e-posten.  Støtte for statistikk på bruk av forenklet utloggingsside Lagt inn Google Analytics på forenklet utloggingsside slik at det er mulig å uthente statistikk på bruken av denne siden\nEndringer i TUL Søkeside for å slå opp hvilke tjenester som bruker et gitt shipment/metode for overføring Ny side er lagt til i TUL som kan brukes av tjenesteeiere som vil søke etter hvilke utgaver som bruker gitt shipment/metode for overføring. Lenke til siden er lagt til i listen \u0026ldquo;Felles ressurser for tjenesteeier\u0026rdquo;.\nEndringer i eksterne grensesnitt Oppdatering av skjemaer for krypterte tjenester gjennom eksterne grensesnitt Det har tidligere vært mulig å oppdatere skjemaer som tilhørte krypterte tjenester gjennom REST API. Det er nå lagt til en sjekk ved oppdatering av tjenester gjennom eksterne grensesnitt slik at det ikke er mulig å oppdatere eller legge til skjemaer for krypterte tjenester.\nStøtte for at brukerstøttemedarbeidere ved BR kan hente ut enkeltrettigheter for alle aktører Det er lagt til støtte for at brukerstøttemedarbeidere ved BR kan hente ut enkeltrettigheter for alle aktører. Det er lagt til en ny konfigurasjonsinstilling, ServiceOwnerCode_For_Full_GetRights_Access, for serviceOwnerCode\u0026rsquo;en som skal ha denne spesialtilgangen. All bruk av GetRights fra REST API\u0026rsquo;et som tar i bruk denne muligheten blir logget.\nReturnere messageid i location header etter arkivering av meldinger i REST Når man arkiverer en melding gjennom REST-api\u0026rsquo;et (/api/Help/Api/PUT-who-Messages-messageId-Archive_language) vil man nå få returnert den nye arkiv-addressen til meldingen gjennom en Location-header.\nSe integrasjonsguiden for mer informasjon.\nFjerning av varselmottakere hvis det ikke finnes tekster for angitt transport type. Altinn vil nå fjerne mottakere av et varsel hvis angitt varsel type (NotificationType) ikke har tekster for varsel typen (TransportType). Dette gjelder alle steder hvor det kan lages varsel: InsertCorrespondence, SubmitAndInstantiatePrefilledFormTask og SendStandaloneNotification. Hvis resultatet av filtreringen er at ingen vil få varsel, så vil grensesnittet informere om dette.\nVisning av arkiv-referanse for meldinger i REST API Det er lagt til et nytt felt i Message-modellen i REST APIet, kalt ArchiveReference. Dette feltet vil inneholde en eventuelt referanse til en tidligere melding om det har blitt oppgitt av tjenesteeier. Det er og lagt til en HAL-lenke som peker videre til denne meldingen (rel \u0026ldquo;archivereference\u0026rdquo;).\nGi under selskap samme rettigheter som moderselskap ved innsendig Som sytem ønsker jeg at systemUserName registrert på juridisk enhet også skal fungere for innsending på bedriftsnummer. For å få til dette er det lagt inn sjekker i DecisionPoint på om det er et underselskap som valideres. Hvis det er det, gis det samme rettigheter som moderselskapet, juridisk enhet.\nVed registrering av varsel til en person, så skal eneste kilde til kontaktinformasjon være kontakt- og reservasjonsregisteret (KRR) Når tjenesteeier overlater til Altinn å finne epostadressen og mobilnummeret til en person, så har gammel profilinformasjon registrert i Altinn vært en mulig kilde hvis personen ikke har slik informasjon registrert i KRR. Dette er det nå slutt på. Hvis en person ikke har kontaktinformasjon registrert i (KRR) vil Altinn ikke sende varsel til vedkommende. Grensesnittene som gjør det mulig å definere varsel blir ikke endret, men det vil bli en økning i hvor ofte Altinn ikke finner noe kontaktinformasjon på personer. Dette gjelder kun når avgiver er en person.\nAndre endringer Kontaktinfo fra KRR som er for gammel skal ikke brukes Om kontaktinformasjon fra KRR ikke har blitt oppdatert eller verifisert på mer enn 18 måneder skal ikke kontaktinformasjonen benyttes (til å sende varsel o.l.). Det er lagt til en ny konfigurasjonsinstilling, KRRContactInfoExpirationMonths, som bestemmer hvor mange måender det tar før informasjonen ikke brukes lenger.\nDiverse bugfix Rette kjent feil hvor lenker til hjelpesider ikke åpner Kjent feil i legacy-portal. På siden \u0026ldquo;Oversikt - skjema og vedlegg\u0026rdquo; skjedde det ingenting når bruker trykket på hjelpelenkene dersom tjenesten støttet flere vedleggstyper. Nå fungerer lenkene også i denne typen tilfeller.\nRette stack trace på \u0026ldquo;søk på flere aktører\u0026rdquo; for konkursbehandling tjeneste \u0026ldquo;Søk på flere aktører\u0026rdquo; og søker etter \u0026ldquo;konkursbehandling\u0026rdquo; (i innboks) får treff, men får feilmelding når man aksesserer elementene fra trefflista til søk. Dette er nå rettet.\nStøtte for filopplasting i Safari på Mac En feil gjorde at brukere av Safari på Mac ikke kunne laste opp filvedlegg i et skjema. Denne feilen er rettet.\nInfoportal Nytt telefonnummer i hurtighjelp Lagt til telefonnummer for Bedriftsveiledning i hurtighjelp, slik at denne typen henvendelser rettes til riktig sted.\nDiverse bugfix Rettet alfabetisk sortering i skjemaoversikten til å håndtere æ/ø/å korrekt.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakonsument/test-tjeneste/",
	"title": "Test av samtykke",
	"tags": [],
	"description": "Test av samtykketjeneste i Altinn sitt testmiljø",
	"content": " Tjenesten må testes ut i Altinn sitt testmiljø TT02: https://tt02.altinn.no\nFør man kan teste må punktene under komme i gang være på plass.\nTeste samtykkesiden For å få brukt tjenesten og for å få opp samtykkesiden i Altinn kan man benytte URL nedenfor. (Dette er også bare et eksempel så den må tilpasses til den tjenesten, organisasjonen osv. som er aktuell for deres test.)\nhttps://tt02.altinn.no/ui/AccessConsent/?Resources=4629_2.4630_2\u0026amp;CoveredBy=910514458\u0026amp;RedirectUrl=https://www.altinn.no\u0026amp;ValidToDate=2019-09-30%2010:30:00\u0026amp;LanguageCode=nb-NO\u0026amp;DelegationContext=Ved%20%C3%A5%20samtykke,%20gir%20du%20Skatteetaten%20rett%20til%20%C3%A5%20utlevere%20opplysninger%20om%20deg%20direkte%20til%20Banken%20AS.%20Banken%20f%C3%A5r%20opplysningene%20for%20%C3%A5%20behandle%20s%C3%B8knaden%20din%20om%20finansiering.\u0026amp;ResponseType=code\u0026amp;4629_2_inntektsaar=2016\u0026amp;4630_2_fraOgMed=2017-06\u0026amp;4630_2_tilOgMed=2017-08  Nærmere beskrivelse av parametre i url finner her.\nURL fører sluttbruker til innloggingen til ID-Porten. Man må ha tilgang til en fiktiv testbruker for å logge inn.\nNår man har fått opp samtykkesiden og gitt samtykke vil testbruker sendes tilbake til siden som er angitt i RedirectUrl. I denne url vil det sendes med autorisasjonskode og status.\nEksempel på url hvor status er OK:\nhttps://www.altinn.no/?AuthorizationCode=0435d832-193b-4a13-a6d1-d172c18e18c7\u0026amp;Status=OK  Eksempel på url hvor sluttbruker har valgt å trykke på knappen for «Nei, jeg vil ikke gi samtykke»:\nhttps://www.altinn.no/?Status=Failed\u0026amp;ErrorMessage=User%2520did%2520not%2520give%2520consent  Autorisasjonskoden benyttes til å hente token signert av Altinn. Se Informasjon om token.\nTeste å veksle inn autorisasjonskode i token Altinn plattformen støtter at man kan veksle inn autorisasjonskoden via REST med ApiKey. Det krever at man har ApiKey som er registrert på mottaker av samtykke eller tredjepart som kan behandle samtykker på vegne av mottaker. En eventuell tredjepart må være registrert i tjenesteeierstyrt rettighetsregister (SRR). Ingen annen form for autentisering er nødvendig. Som nevnt gjøres bestilling av nye nøkler, eller oppdatering av eksisterende, ved henvendelse til servicedesk@altinn.no.\nTokenet som returneres vil være en streng bestående av et base64-encodet Json Web Token.\nFor å hente ut token ved hjelp av autorisasjonskode over REST gjør man GET på https://tt02.altinn.no/api/authorization/token?authcode={AuthorizationCode} med header ApiKey: {apikey}\nEksempel på response (encoded token):\neyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkthUGxpMFJUdVVUcl9yUXJWSmhzQkNXQS0yayJ9.eyJTZXJ2aWNlQ29kZXMiOi I0NjI5LDEiLCJBdXRob3JpemF0aW9uQ29kZSI6ImY0NTQ5NDNlLTNiNTctNGI0YS1iYjRjLTNkZjY0YTgwMmQ4NyIsIk9mZmVyZWRCeSI6I jA2MTE3NzAxNTQ3IiwiQ292ZXJlZEJ5IjoiOTEwNTE0MzE4IiwiRGVsZWdhdGVkRGF0ZSI6IjI3LjEwLjIwMTYgMjE6MTE6MTciLCJWYWxp ZFRvRGF0ZSI6IjA1LjAxLjIwMTcgMTA6MzA6MDAiLCJpc3MiOiJhbHRpbm4ubm8iLCJleHAiOjE0Nzc1OTU1MTcsIm5iZiI6MTQ3NzU5NTQ 4N30.S9RBNazx2Ml0R93cSEf_LC5YP2UcYtFf7w6JH_OPy_MK1HhVIxA2e-5DQjPV53HmKBhlHmL3Wxz36KzIXddfz1olKLEK7Xqn61FJFL TCiReKcySRcvDtRhLtFVH8zT-VcaEEXyA9_tTUumUVKTqy9vPMDOYAhmih55uT__Ghs5UQbxDZXLJ08f-SDUq-wlcbU8TFLfBnrQBxF53Sf L3BvmjYTg_xm69mBRkGuW431fZnMiY_U3Omrd0gHniu8ri33lpEaL3ip1Lq65QC_jVzy2WHN1RdQCA5WiYGJ89GoSZL2eAtCS8d7qngsMUu zBPpcn4hDiI7MkK4RWrAc2drTw  Se her for eksempel på decoded token.\nREST-tjenesten returnerer 403 dersom authcode er ugyldig eller Apikeyen ikke har tilgang til angitt autorisasjonskode:\n403 The API key is not authorized for this operation, or the supplied authorization code is either expired or invalid.  Man kan laste ned Postman for å teste henting av token: https://www.getpostman.com/apps\n Hente token ved hjelp av Postman   Når man har mottatt Altinn-signert token benyttes dette i request mot datakilden for å få tilgang til data. Formatet på hvordan denne informasjonen overføres må avtales mellom datakilde og datakonsument, og styres ikke av Altinn.\nToken har 30 sekunders varighet og datakonsument må be om nytt token når det har gått ut (benytt samme autorisasjonskode om igjen).\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-6/",
	"title": "18.6",
	"tags": [],
	"description": "Videresending av skatteoppgjør til andre digitale postkasser, feilrettinger m.m.",
	"content": " Endringer i portal For skjema med status \u0026ldquo;Venter på andre\u0026rdquo; skal knappen som tar deg videre til skjema ha teksten \u0026ldquo;Gå til skjema\u0026rdquo; Vi har endret tekst på knapp fra \u0026ldquo;gå til \u0026hellip;\u0026rdquo; til \u0026ldquo;gå til skjema\u0026rdquo; for elementer som har status \u0026ldquo;venter på andre\u0026rdquo;.\nFor alle skjema, der brukeren ikke har rettigheter til å utføre nåværende steg, vil teksten på knappen som tar deg videre til skjemaet være endret. Knappen heter \u0026ldquo;Gå til skjema\u0026rdquo; i stedet for \u0026ldquo;Gå til \u0026hellip;\u0026rdquo;. Dette gjelder for alle skjema som er prefikset med \u0026ldquo;Venter på andre\u0026rdquo; i element-overskriften.\nDet skal for angitte meldingstjenester være mulig for bruker å videresende til egen digital postkasse Som bruker skal jeg kunne videresende skatteoppgjøret for 2017 til min valgte digitale postkasse.\nDet er lagt inn en konfigurasjonsverdi som gjør det mulig å oppgi hvilke meldingstjenester som skal videresendes til brukers digitale postkasse. Hvis bruker ikke har digital postkasse, skal brukeren likevel få muligheten til å gjøre det, ved å bli sendt videre til Difi sine sider for oppretting av digital postkasse.\nNår brukeren har videresendt en melding vil dette være synlig i ekspandert visning og i aktivitetsloggen.\nForhindre at daglig leder for enkeltpersonforetak har tilgang til eiers personlige innboks Vi har endret løsningen slik at eier filtreres bort fra daglig leders tilgangsliste.\nI tillegg filtrerer vi bort daglig leders tilganger, knyttet til innehaver.\nAltinn 1-elementer skal kunne fjernes på forespørsel fra bruker Arkiverte elementer fra den aller første Altinn-løsningen skal kunne fjernes på forespørsel fra bruker.\nLøsningen som kalles for \u0026ldquo;Altinn 1\u0026rdquo; ble innført i 2003 og faset ut i 2013.\nFjerning av ekstra side med valgbokser for kontakt på e-post og sms for ansatte i en virksomhet Som bruker skal jeg kunne be om varsler på SMS og/eller epost for en virksomhet jeg har tilgang til.\nDenne endringen fjerner den ekstra siden under \u0026ldquo;Din kontaktinformasjon for virksomhet\u0026rdquo;, der man tidligere kunne velge om man skulle motta varsling på epost og/eller sms.\nVarsling for enkelttjenester er flyttet til første siden under \u0026ldquo;Din kontaktinformasjon for virksomhet\u0026rdquo;.\nMan vil nå alltid motta varsling om man har oppgitt epost og/eller SMS som kontaktinformasjon, med mindre man har lagt til varsling for enkelttjenester. Hvis man har lagt til tjenester under \u0026ldquo;Varsling kun for enkelttjenester\u0026rdquo; vil man kun motta varslinger for de enkelttjenestene man har valgt i denne listen.\nEndringer i Autorisasjon på tjenester For sluttbruker av altinn vil disse endringene ha lite å bety. For tjenesteutvikler i Altinn vil dette bety nye rutiner når man ønsker å endre autorisasjonsregler på en tjeneste som allerede finnes i produksjon.\nAutorisasjon basert på TUL roller skal benytte reglene fra siste versjon av tjenesten Dette betyr i praksis at de rollebaserte reglene knyttet til en tjeneste definert i TUL vil ha tilbakevirkende kraft når de importeres til SBL. Dette gjør det mulig for tjenesteeier å endre på reglene på en tjenesteutgave uten at det må bestilles databaseskript for å få kopiert reglene over på eldre versjoner av tjenesteutgaven.\nDet er derimot ikke lenger mulig endre rolleregler på en utgave uten at det påvirker eksisterende versjoner. For å få til det må det lages en ny utgave av tjenesten. Endringer i rolleregler som krever ny utgave er f.eks være at man bytter prosessflyt (et eller flere steg legges til eller fjernes) eller at man for en samhandlingstjeneste endrer antall rollestyrte sider.\nAutorisasjonsregler definert i en lokal rolle skal gjelde alle versjoner av en tjeneste Denne endringen betyr at rettighetene knyttet til en lokal rolle som ble definert når Altinn hadde versjon 1 av en tjeneste også har effekt på versjon 2 av tjenesten selvom denne ble importert etter at rollen ble laget. I forrige versjon av Altinn ble slike autorisasjonsregler automatisk kopiert fra forrige versjon til ny versjon av en tjenesteutgave ved import av tjenesten. Denne kopieringen var en meget krevende prosess som skapte problemer med tjenesteimport.\nEn enkelt delegering skal gjelde alle versjoner av en tjenesteutgave Enkeltrettigheter mot en tjeneste vil med denne endringen også fungere på fremtidige versjoner av tjenesteutgaven som enkeltrettigheten ble definert for. Denne endringen er nærmest identisk med endringen vedrørende lokale roller.\nEndringer i eksterne grensesnitt Oppdatere XML (FormData) i en innsendingstjeneste via web service Det er nå mulig å oppdatere XML (FormData) i en innsendingstjeneste i innboks ved bruk av web service.\nDet er lagt til nye eksterne grensesnitt for å oppdatere FormData på elementer som er til utfylling. Dette er lik funksjonaliteten som allerede er laget for REST (https://www.altinn.no/api/Help/Api/PUT-who-messages-messageId-forms-formId).\nDe nye grensesnittene ligger i IntermediaryInbound:\n IntermediaryInboundExternalBasic.UpdateFormDataBasic IntermediaryInboundExternalEC.UpdateFormDataBasic  Som tjenesteeier ønsker jeg at henvisning til notification types ikke skal være case-sensitive Vi har endret kode slik at søk på template type, som skal brukes ved notification sending, ikke er case-sensitive.\nEndringer i integrasjon ReceiveRegisterDSF ReceiveRegisterDSF batch oppdateres til å kjøre \u0026ldquo;comparative update\u0026rdquo;, hvor den sammenligner innkommende personer med eksisterende person i database og kun skriver til database når person er oppdatert. For å kjøre \u0026ldquo;comparative update\u0026rdquo;, kjør ReceiveRegisterDSF batch med argument \u0026ldquo;ComparativeUpdate=true\u0026rdquo; .\nDiverse bugfix \u0026ldquo;Spør meg senere\u0026rdquo;-knapp virker ikke i automatiske påminnelser for Din Kontaktinformasjon (20021) Når man tidligere fikk opp automatiske påminnelser om å oppdatere Din Kontaktinformasjon, kunne man trykke \u0026ldquo;Bekreft\u0026rdquo; eller \u0026ldquo;Oppdatere\u0026rdquo;. Når man trykket \u0026ldquo;Oppdatere\u0026rdquo; ble man tatt til et nytt vindu, for å oppdatere teksten. URL\u0026rsquo;en man vanligvis blir tatt videre til fra denne siden falt bort. Videre, hvis man trykket på \u0026ldquo;Spør meg senere\u0026rdquo; manglet knappen en adresse å videreføre brukeren til.\nDette er nå løst slik at adressen blir satt riktig. Det er i tillegg lagt til en validering av adressen, så det ikke er mulig å legge inn f.eks. javascript-lenker.\nFeil på klientdelegering og henting av rettigheter på klienter når tegnet \u0026lsquo; inngår i navnet (19759) Når man legger til nye brukere under klientdelegering dirigeres man via en side der brukerens navn havner i URLen. Denne ble ikke riktig kodet, slik at tegn som \u0026ldquo;\u0026lsquo;\u0026rdquo; (enkelt-fnutt) førte til feil tolkning av URLen. Dette er rettet opp slik at navn med spesielle tegn blir riktig kodet. Dette er rettet opp andre steder i klientdelegering, der søketekster ikke blir riktig kodet.\nOptimalisering av lagrede prosedyrer (20164) Flere lagrede prosedyrer er optimalisert basert på monitorering i produksjonsmiljøet.\nNy tabell i Maintainance DB for lagring av statistikk for lagrede prosedyrer (20273) Vi har innført en ny tabell for lagring av statistikk.\nKonfigurasjon av caching (20242) Det er innført en attributt i cache.config der man skrur av/på caching for alle nøkler. Vil kun benyttes for test/analyse/feilsøk.\nRFT15013 - Slett enkeltrettighet - kunden får ikke gjort dette selv (20214) Det oppstår duplikater under kjøring av lagret prosedyre. Løses ved å innføre unik primærnøkkel i temporærtabell.\nSlett-knapp mangler for elementer i signeringssteg (20339) En endring i autorisering førte til at \u0026ldquo;Slett\u0026rdquo;-knappen ble fjernet ved ekspandering av enkelt element i signeringssteget. Retted ved å endre parameter i kall til autentisering.\nVed migrering av en ny tjenesteversjon henter skjemavalidering feil logiske id for gamle elementer (20316) LogicalFormSchemaDefinition ble før hentet ved å finne nyeste ServiceEditionVersionId for en tjeneste. Om det ikke var overenestemmelse mellom LogicalFormId for schema og det som var brukt på elementet var det ikke mulig å oppdatere elementet gjennom REST/SOAP. Dette er nå rettet opp.\nFeil på varsel - Altinn sender to SMS (20316) Feilen kommer som ett resultat av KoFuVi-integrasjonen, men har vært mulig tidligere også. Etter KoFuVi har alle telefonnummer registrert i felles \u0026lsquo;Varslingsadresser for virksomheten\u0026rsquo; fått med landskode også for norske telefonnummer.\nDersom samme telefonnummer er registrer i \u0026lsquo;Din kontaktinformasjon for virksomheten\u0026rsquo; uten landskode +47, eller evt. med 0047 så ble ikke dette oppdaget som duplikat tisligere. Det ble sendt ut dobbel SMS.\nDette er nå rettet opp i, med at man eksplisitt stripper bort landskode når man gjør sammenligning for duplikater.\nCorrespondence Batch feiler når mottaker er en person uten brukerprofil i Altinn (20496) Feilen kommer som ett resultat av sammenslåingen av logikk for validering og sending av varsel for Prefill, Correspondence og StandAlone.\nDette er nå rettet opp i.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/eksempler/",
	"title": "Eksempler",
	"tags": [],
	"description": "Diverse eksempler på bruk av regelmotoren sammen med skjema.",
	"content": " I Testdepartementet finnes det eksempeltjenester som viser bruk av regelmotor.\nDisse finner du her:\nhttp://sttul01.altinn.basefarm.net/sites/acn/RegelmotorEksempel/EksempelXPath/default.aspx http://sttul01.altinn.basefarm.net/sites/acn/RegelmotorEksempel/EksempelOR/default.aspx\nEksempeltjeneste som bruker XPath Denne eksempeltjenesten er basert på \u0026ldquo;InfoPath1\u0026rdquo; som hovedskjema og RF-1053 \u0026ldquo;RF-1053 Fradrag i skatt for forskning og utvikling 2012\u0026rdquo; som underskjema.\nFellesoppsett for alle reglene:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;AltinnRuleEngine name=\u0026quot;InfoPath1\u0026quot; version=\u0026quot;Beta\u0026quot;\u0026gt; \u0026lt;Description\u0026gt;Samples using XPath as field identificator.\u0026lt;/Description\u0026gt; \u0026lt;Configuration\u0026gt; \u0026lt;Forms default=\u0026quot;1080\u0026quot;\u0026gt; \u0026lt;!--target--\u0026gt; \u0026lt;Form name=\u0026quot;InfoPath1\u0026quot; dataFormatId=\u0026quot;1080\u0026quot; validationEngine=\u0026quot;AltinnRuleEngine\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot;/\u0026gt; \u0026lt;!--source--\u0026gt; \u0026lt;Form name=\u0026quot;RF-1053\u0026quot; dataFormatId=\u0026quot;866\u0026quot; validationEngine=\u0026quot;AltinnRuleEngine\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot;/\u0026gt; \u0026lt;/Forms\u0026gt; \u0026lt;/Configuration\u0026gt; \u0026lt;/AltinnRuleEngine\u0026gt;  Flytte en verdi fra et hovedskjema til et underskjema For å overføre en verdi fra et skjema til et annet bruker vi regeltypen «TransferValue». Vi setter opp hvilket felt som er kilde i «Source» og hvilket felt verdien skal kopieres til i «Target». I tillegg har vi lagt til en sjekk på at det finnes en verdi i kildefeltet. Dette er gjort ved å legge til en «condition» av type «HasValue». Er det ingen verdi i kildefeltet vil denne feile, og regelen blir ikke utført.\n\u0026lt;!-- Transferring value from main form to sub form --\u0026gt; \u0026lt;Rule type=\u0026quot;TransferValue\u0026quot; description=\u0026quot;Transferring value from InfoPath1 form to RF-1053 form\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;998\u0026quot; field=\u0026quot;/Skjema/OpplysningerOmPersonligeForholdMv-grp-4886/OpplysningerOmPersonligeForholdMv-grp-4529/Skattyter-grp-4531/SelvangivelseType-datadef-27745\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;866\u0026quot; field=\u0026quot;/Skjema/GenerellInformasjon-grp-2228/Revisor-grp-2231/RevisorOrganisasjonsnummer-datadef-1938\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasValue\u0026quot; check=\u0026quot;/Skjema/OpplysningerOmPersonligeForholdMv-grp-4886/OpplysningerOmPersonligeForholdMv-grp-4529/Skattyter-grp-4531/SelvangivelseType-datadef-27745\u0026quot; form=\u0026quot;998\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  Verdien blir hentet fra «Organisasjonsnummer» i hovedskjemaets første side. Dersom vi har en verdi her, vil samme verdi dukke opp i feltet \u0026ldquo;organisasjonsnummer\u0026rdquo; (under revisor) i underskjema. Vis melding om en validering feiler Her viser vi hvordan du kan gjøre en sjekk og vise en feilmelding dersom denne sjekken avdekker en ugyldig tilstand. Vi setter opp hvilket felt som skal motta valideringsmeldingen i «Target». Selve valideringen setter vi opp i «Condition». Her har vi valgt type «IsNegative». Feltet som skal sjekkes fører vi opp i «check». Inne i «Texts» legger vi inn en valideringsmelding for både bokmål, nynorsk og engelsk.\n\u0026lt;!-- Validate the XPath value. If it fails, shows the validation at check form --\u0026gt; \u0026lt;Rule type=\u0026quot;SimpleValidation\u0026quot; description=\u0026quot;Validate the field value. If it fails shows the validation at check form\u0026quot;\u0026gt; \u0026lt;Target field=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;IsNegative\u0026quot; check=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18\u0026quot;/\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt;Negativ verdi er ikke lovlig.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt;Negativ verdi er ikkje lovleg.Text\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;Negative values are not allowed.\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt;  Dersom vi setter inn en negativ verdi i organisasjonsnummer, vil vi etter å ha trykket «Kontroller skjema» få opp meldingen.\nSjekker om et spesifikt underskjema er til stede Valideringsregel som sjekker om underskjemaet RF-1053 er til stede. Vi bruker her «condition» av type «HasForm», og setter skjemaet vi leter etter i «form».\n\u0026lt;!-- Check whether RF-1053 form is added to main form or not --\u0026gt; \u0026lt;Rule type=\u0026quot;SimpleValidation\u0026quot; description=\u0026quot;Check whether RF-1053 form is added to main form or not\u0026quot;\u0026gt; \u0026lt;Target field=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18 \u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasForm\u0026quot; form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt;RF-1053-skjema er lagt til (eksempel)\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt;RF-1053-skjema er lagt til (eksempel)\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;RF-1053 form is added\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt;  Etter å ha trykket «Kontroller skjema» får vi opp meldingen dersom underskjema er på plass.\nFjerner et felt om det eksisterer, og et annet felt ikke har en verdi I dette eksempelet skal vi fjerne et felt basert på om to vilkår er innfridd eller ikke. Vi bruker feltet «Navn» i hovedskjemaet for dette, og forteller dette i «Source». De to kravene vi må innfri for å fjerne feltet er at «Navn» ikke skal ha noen verdi og at «Poststed» skal ha en verdi. Vi bruker «condition» av type «IsEmpty» for det første kravet. For krav nummer to bruker vi typen «HasValueIgnoreZero».\n\u0026lt;!-- Remove field if it exists when user doesn't have value for that field and another specific field has value. --\u0026gt; \u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot; description=\u0026quot;Remove EnhetNavn if it exists, if EnhetNavn does not have value and EnhetPoststed has a value\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;1080\u0026quot; field=\u0026quot;/Skjema/Innledning-grp-8781/EnhetNavn-datadef-1\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnorePrefill\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot; /\u0026gt; \u0026lt;Condition type=\u0026quot;IsEmpty\u0026quot; check=\u0026quot;/Skjema/Innledning-grp-8781/EnhetNavn-datadef-1\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasValueIgnoreZero\u0026quot; form=\u0026quot;1080\u0026quot; check=\u0026quot;/Skjema/Innledning-grp-8781/EnhetPoststed-datadef-6674\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt;  Dersom vi har lagt inn en verdi i poststed, og samtidig ikke har en verdi i navn, vil feltet «navn» bli fjernet (det er ikke lenger mulig å skrive i det). Dette vil skje når skjemaet blir lastet inn på nytt (for eksempel ved å navigere ut av skjemaet og tilbake igjen).\nKomplett regelfil med alle XPath-eksemplene \u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;AltinnRuleEngine name=\u0026quot;InfoPath1\u0026quot; version=\u0026quot;Beta\u0026quot;\u0026gt; \u0026lt;Description\u0026gt;Samples using XPath as field identificator.\u0026lt;/Description\u0026gt; \u0026lt;Configuration\u0026gt; \u0026lt;Forms default=\u0026quot;1080\u0026quot;\u0026gt; \u0026lt;!--target--\u0026gt; \u0026lt;Form name=\u0026quot;InfoPath1\u0026quot; dataFormatId=\u0026quot;1080\u0026quot; validationEngine=\u0026quot;AltinnRuleEngine\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot;/\u0026gt; \u0026lt;!--source--\u0026gt; \u0026lt;Form name=\u0026quot;RF-1053\u0026quot; dataFormatId=\u0026quot;866\u0026quot; validationEngine=\u0026quot;AltinnRuleEngine\u0026quot; calculationEngine=\u0026quot;AltinnRuleEngine\u0026quot;/\u0026gt; \u0026lt;/Forms\u0026gt; \u0026lt;/Configuration\u0026gt; \u0026lt;Rules\u0026gt; \u0026lt;!-- Transferring value from main form to sub form --\u0026gt; \u0026lt;Rule type=\u0026quot;TransferValue\u0026quot; description=\u0026quot;Transferring value from InfoPath1 form to RF-1053 form\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;1080\u0026quot; field=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;866\u0026quot; field=\u0026quot;/Skjema/GenerellInformasjon-grp-2228/Revisor-grp-2231/RevisorOrganisasjonsnummer-datadef-1938\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasValue\u0026quot; check=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- Validate the xpath value. If it fails, shows the validation at check form --\u0026gt; \u0026lt;Rule type=\u0026quot;SimpleValidation\u0026quot; description=\u0026quot;Validate the field value. If it fails shows the validation at check form\u0026quot;\u0026gt; \u0026lt;Target field=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;IsNegative\u0026quot; check=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18\u0026quot;/\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt;Negativ verdi er ikke lovlig.\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt;Negativ verdi er ikkje lovleg.Text\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;Negative values are not allowed.\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- Check whether RF-1053 form is added to main form or not --\u0026gt; \u0026lt;Rule type=\u0026quot;SimpleValidation\u0026quot; description=\u0026quot;Check whether RF-1053 form is added to main form or not\u0026quot;\u0026gt; \u0026lt;Target field=\u0026quot;/Skjema/Innledning-grp-8781/EnhetOrganisasjonsnummer-datadef-18\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasForm\u0026quot; form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;Texts\u0026gt; \u0026lt;Text lang=\u0026quot;1044\u0026quot;\u0026gt;RF-1053-skjema er lagt til (eksempel)\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;2068\u0026quot;\u0026gt;RF-1053-skjema er lagt til (eksempel)\u0026lt;/Text\u0026gt; \u0026lt;Text lang=\u0026quot;1033\u0026quot;\u0026gt;RF-1053 form is added\u0026lt;/Text\u0026gt; \u0026lt;/Texts\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- Remove field if it exists when user doesn't have value for that field and another specific field has value. --\u0026gt; \u0026lt;Rule type=\u0026quot;RemoveFieldElement\u0026quot; description=\u0026quot;Remove EnhetNavn if it exists, if EnhetNavn does not have value and EnhetPoststed has a value\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;1080\u0026quot; field=\u0026quot;/Skjema/Innledning-grp-8781/EnhetNavn-datadef-1\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnorePrefill\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot; /\u0026gt; \u0026lt;Condition type=\u0026quot;IsEmpty\u0026quot; check=\u0026quot;/Skjema/Innledning-grp-8781/EnhetNavn-datadef-1\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasValueIgnoreZero\u0026quot; form=\u0026quot;1080\u0026quot; check=\u0026quot;/Skjema/Innledning-grp-8781/EnhetPoststed-datadef-6674\u0026quot; /\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;/Rules\u0026gt; \u0026lt;/AltinnRuleEngine\u0026gt;  Eksempeltjeneste som bruker OR-id Denne eksempeltjenesten er basert på OR-skjemaene RF-1053 «Fradrag i skatt for forskning og utvikling 2012» og RF-1016 «Formue av skogseiendom».\nFellesoppsett for alle reglene:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;AltinnRuleEngine name=\u0026quot;RF-1016\u0026quot; version=\u0026quot;Beta\u0026quot;\u0026gt; \u0026lt;Description\u0026gt;Sample rules\u0026lt;/Description\u0026gt; \u0026lt;Configuration\u0026gt; \u0026lt;Forms\u0026gt; \u0026lt;Form name=\u0026quot;RF-1016\u0026quot; dataFormatId=\u0026quot;1187\u0026quot; validationEngine=\u0026quot;Both\u0026quot; calculationEngine=\u0026quot;Both\u0026quot;/\u0026gt; \u0026lt;Form name=\u0026quot;RF-1053\u0026quot; dataFormatId=\u0026quot;866\u0026quot; validationEngine=\u0026quot;Both\u0026quot; calculationEngine=\u0026quot;Both\u0026quot;/\u0026gt; \u0026lt;/Forms\u0026gt; \u0026lt;Codelists\u0026gt; \u0026lt;Codelist name=\u0026quot;SKD_Kommuner_Prod\u0026quot; version=\u0026quot;543\u0026quot; lang=\u0026quot;1044\u0026quot;/\u0026gt; \u0026lt;Codelist name=\u0026quot;ASF_Land\u0026quot; version=\u0026quot;404\u0026quot; lang=\u0026quot;1044\u0026quot;/\u0026gt; \u0026lt;/Codelists\u0026gt; \u0026lt;/Configuration\u0026gt; \u0026lt;/AltinnRuleEngine\u0026gt;  Sette verdi basert på en betingelse I dette eksempelet skal vi sette en gitt verdi til et felt i et skjema (RF-1016) om et annet skjema (RF-1053) er til stede. Her skal vi sette verdien i «Navn» under Enkeltpersonforetak til «Underskjema er lagt til» når underskjemaet RF-1053 er lagt til.\nDette gjør vi ved å definere en «SetFieldValue»-regel. I denne definerer vi RF-1016 (som har id 1187) og feltet med orid 68 («Navn») som target. Verdien vi vil ha legger vi inn i «value». Parameteren «AlwaysRun» er lagt til for at regelen både skal kjøres under utregning og validering. I «condition» forteller vi at denne verdien bare skal bli lagt til om skjemaet 866 (RF-1053) er til stede.\n\u0026lt;!-- When RF-1053 is added, field with orid 68 gets a pre-defined value --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;When RF-1053 is added, transfer value to orid 1937\u0026quot;\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(68)\u0026quot; value=\u0026quot;Underskjema er lagt til\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasForm\u0026quot; form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  Med denne regelen på plass vil skjemaet se slik ut dersom du ikke har lagt til underskjemaet:\nMed underskjemaet lagt til ser det slik ut:\nOverføre verdi fra et skjema til et annet Overfører en verdi fra et skjema (RF-1053) til et annet skjema (RF-1016).\n\u0026lt;!-- Transfer a value from RF-1053 to RF-1016--\u0026gt; \u0026lt;Rule type=\u0026quot;TransferValue\u0026quot; description=\u0026quot;Transfer a value from RF-1053 to RF-1016\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot; field=\u0026quot;orid(1938)\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(18)\u0026quot; index=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasValue\u0026quot; check=\u0026quot;orid(1938)\u0026quot; form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  Det er feltet «organisasjonsnummer» under revisor som er kilde i denne regelen.\nDersom vi legger inn en verdi her vil verdien bli kopiert over til hovedskjemaet.\nVerdien vil du finne igjen i «organisasjonsnummer» under «Selskap».\nOverføre verdi basert på et vilkår Dette eksempelet viser hvordan du kan sjekke en tilstand og basert på denne sette en verdi. Her ser vi på radioknapper for «Ja» og «Nei» i underskjema. I «condition» velger vi type «equals», som betyr at regelen blir utført dersom verdien i det feltet vi sjekker er lik den verdien vi legger inn i «value». Vi skal i dette tilfellet altså utføre regelen dersom verdien i den valgte radioknappen er «Ja».\n\u0026lt;!-- If radio button selected as \u0026quot;Yes\u0026quot; in RF-1053 then a pre-defined value is added to RF-1016 --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;When orid_17413 from RF-1053 is YES, transfer value to field\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot; field=\u0026quot;orid(17413)\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(1)\u0026quot; value=\u0026quot;Valgt verdi er 'Ja' i RF-1053\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;Equals\u0026quot; check=\u0026quot;orid(17413)\u0026quot; value=\u0026quot;Ja\u0026quot; form=\u0026quot;866\u0026quot; fieldindex=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  Verdien vi sjekker er det som er valgt i radioboksene (“Ja”/”Nei”) for «101 Tilfredsstiller foretaket vilkårene…» i underskjemaet.\nDersom du velger «Ja» så vil verdien «Valgt verdi er ‘Ja’ i RF-1053» bli satt i feltet «Virksomhetens navn» i hovedskjemaet.\nGi en verdi til et felt dersom en betingelse inntreffer Dersom et felt (17415) mangler verdi blir feltet satt til verdien “0”. Regeltypen vi bruker her er «SetFieldValue», som setter en verdi vi bestemmer i «value». For at dette ikke skal skje uansett velger vi «IsMissing» som type for vår betingelse («condition»). Feltet vi skal sjekke fører vi opp i «check». Her har vi satt samme felt som mål for verdien som feltet vi brukte til å sjekke betingelsen. Vi kan også bruke ulike felt til dette.\n\u0026lt;!-- If a field is missing a value, the value 0 is set to the field --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;For 866\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;866\u0026quot; field=\u0026quot;orid(17415)\u0026quot; value=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;DoNotIgnoreZeroValue\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;IsMissing\u0026quot; check=\u0026quot;orid(17415)\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  Feltet «204 Totale FoU kostnader …» i underskjemaet blir automatisk satt til 0 dersom verdi mangler i dette feltet.\nGjøre en utregning og overføre resultatet til et annet skjema Gjør en utrekning i et skjema (RF-1053) og overfører resultatet til et annet skjema (RF-1016). Vi bruker regeltypen «TransferResult». Vi bestemmer hvilke verdier som skal med i utregningen i «addFields» og «subtractFields». Vi har bare brukt et felt i hver av disse, men du kan også legge til flere felt om du ønsker det. Da bruker du komma til å skille mellom feltene. Utregningen vi får i dette eksempelet er summen vi får når vi legger til verdien i feltet i «addFields» og trekker fra verdien i feltet i «subtractFields».\n\u0026lt;!-- Add the value from one field and subtract the value from another field. Transfer the result to RF-1016 form --\u0026gt; \u0026lt;Rule type=\u0026quot;TransferResult\u0026quot; description=\u0026quot;Transferring Result\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot; addFields=\u0026quot;orid(24107)\u0026quot; subtractFields=\u0026quot;orid(17418)\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(24974)\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt;  I underskjemaet bruker vi feltene «206 Herav kostnader til ulønnet arbeidsinnsats …» og «207 Hvis prosjektet mottar…» som grunnlag for utregningen. Her skal altså verdien 150 trekkes fra verdien 200.\nResultatet av utregningen (50) vil dukke opp i feltet «Super bonitet 0,7 kbm pr da» i hovedskjemaet.\nOversikt over felter brukt i OR-eksempelet RF-1016:\n Orid(1) = «Virksomhetens navn»\n(EnhetNavn-datadef-1, Visning 1) Orid(18) = «Organisasjonsnummer»\n(EnhetOrganisasjonsnummer-datadef-18, Visning 1) Orid(24974) = «Super bonitet 0,7 kbm pr da»\n(SkogBonitetSvartHoyAreal-datadef-24974, Visning 3)  RF-1053:\n Orid(1938) = «Organisasjonsnr.» (revisor)\n(RevisorOrganisasjonsnummer-datadef-1938, Visning1) Orid(17413) = “101 Tilfredsstiller foretaket vilkårene i forskrift av 19. november 1999 nr 1158 til skatteloven (FSFIN § 16-40-5) til SMB (små og mellomstore bedrifter)?” (EnhetESAVilkarStorrelse-datadef-17413, Visning 1) Orid(17415) = «204 Totale FoU kostnader, inkl. ev. kostnader knyttet til ulønnet arbeidsinnsats som ikke omfattes av den ordinære skattefunnordningen»\n(KostnaderFoUSpesifisertProsjekt-datadef-17415, Visning 2) Orid(17418) = «207 Hvis prosjektet mottar annen off. støtte; oppgi dette beløpet her» (ProsjektStatsstotteSkattefradragReduksjonSpesifisertProsjekt-datadef-17418, Visning 2) Orid(24107) = «206 Herav kostnader knyttet til ulønnet arbeidsinnsats som ikke omfattes av den ordinære skattefunnordningen (Se rettledningen.)» (KostnaderFoUUlonnetArbeidSpesifisertProsjekt-datadef-24107, Visning 2)  Komplett regelfil med alle eksemplene \u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;AltinnRuleEngine name=\u0026quot;RF-1016\u0026quot; version=\u0026quot;Beta\u0026quot;\u0026gt; \u0026lt;Description\u0026gt;Set field value and transferring value to RF-1016\u0026lt;/Description\u0026gt; \u0026lt;Configuration\u0026gt; \u0026lt;Forms\u0026gt; \u0026lt;Form name=\u0026quot;RF-1016\u0026quot; dataFormatId=\u0026quot;1187\u0026quot; validationEngine=\u0026quot;Both\u0026quot; calculationEngine=\u0026quot;Both\u0026quot;/\u0026gt; \u0026lt;Form name=\u0026quot;RF-1053\u0026quot; dataFormatId=\u0026quot;866\u0026quot; validationEngine=\u0026quot;Both\u0026quot; calculationEngine=\u0026quot;Both\u0026quot;/\u0026gt; \u0026lt;/Forms\u0026gt; \u0026lt;Codelists\u0026gt; \u0026lt;Codelist name=\u0026quot;SKD_Kommuner_Prod\u0026quot; version=\u0026quot;543\u0026quot; lang=\u0026quot;1044\u0026quot;/\u0026gt; \u0026lt;Codelist name=\u0026quot;ASF_Land\u0026quot; version=\u0026quot;404\u0026quot; lang=\u0026quot;1044\u0026quot;/\u0026gt; \u0026lt;/Codelists\u0026gt; \u0026lt;/Configuration\u0026gt; \u0026lt;Rules\u0026gt; \u0026lt;!-- When RF-1053 is added, field with orid 68 gets a pre-defined value --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;When RF-1053 is added, set value to orid(1)\u0026quot;\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(68)\u0026quot; value=\u0026quot;Test\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasForm\u0026quot; form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- Transfer a value from RF-1053 to RF-1016 --\u0026gt; \u0026lt;Rule type=\u0026quot;TransferValue\u0026quot; description=\u0026quot;Transfer the value from RF-1053 to RF-1016\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot; field=\u0026quot;orid(1938)\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(18)\u0026quot; index=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;HasValue\u0026quot; check=\u0026quot;orid(1938)\u0026quot; form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- If Radio button selected as \u0026quot;Yes\u0026quot; in RF-1053 then a pre-defined value is added to RF-1016 --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;When orid_17413 from RF-1053 is YES, transfer value to field\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot; field=\u0026quot;orid(17413)\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(1)\u0026quot; value=\u0026quot; Valgt verdi er 'Ja' i RF-1053\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;AlwaysRun\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;Equals\u0026quot; check=\u0026quot;orid(17413)\u0026quot; value=\u0026quot;Ja\u0026quot; form=\u0026quot;866\u0026quot; fieldindex=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- If a field is missing a value, the value 0 is set to the field --\u0026gt; \u0026lt;Rule type=\u0026quot;SetFieldValue\u0026quot; description=\u0026quot;For 866\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;866\u0026quot; field=\u0026quot;orid(17415)\u0026quot; value=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;DoNotIgnoreZeroValue\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Condition type=\u0026quot;IsMissing\u0026quot; check=\u0026quot;orid(17415)\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;!-- Add the value from one field and subtract the value from another field. Transfer the result to RF-1016 form --\u0026gt; \u0026lt;Rule type=\u0026quot;TransferResult\u0026quot; description=\u0026quot;Transferring Result\u0026quot;\u0026gt; \u0026lt;Source form=\u0026quot;866\u0026quot; addFields=\u0026quot;orid(24107)\u0026quot; subtractFields=\u0026quot;orid(17418)\u0026quot;/\u0026gt; \u0026lt;Param name=\u0026quot;IgnoreGUID\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;Target form=\u0026quot;1187\u0026quot; field=\u0026quot;orid(24974)\u0026quot;/\u0026gt; \u0026lt;/Rule\u0026gt; \u0026lt;/Rules\u0026gt; \u0026lt;/AltinnRuleEngine\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-5/",
	"title": "18.5",
	"tags": [],
	"description": "Forbedringer på varsling og portal samt div bugfiks.",
	"content": " Endringer i portal Vise oppgitt avsender på skjema i innboks og i arkiv Som sluttbruker ønsker jeg å se i innboksen hvem som er \u0026ldquo;oppgitt skjema-avsender\u0026rdquo; på skjema som har InstantiatedOnBehalfOfPartyId feltet satt. Hvis det er oppgitt en annen skjema-avsender enn tjenesteeier, vil det nå dukke opp navnet på oppgitt avsender under tittelen på skjemaet både i innboks og i arkiv.\nInnføring av \u0026ldquo;foretrukket kanal\u0026rdquo; som kanaltype ved opprettelse av varsel I tjenesteeiergrensesnittene for Prefill, Correspondence og Notification har tjenesteeiere mulighet til å definere kanalen varselene skal sendes på. Valgmulighetene har vært \u0026ldquo;epost\u0026rdquo;, \u0026ldquo;sms\u0026rdquo; eller \u0026ldquo;begge\u0026rdquo;. Usikkerhet rundt hvorvidt varselmottaker har registrert mobilnummer eller epostadresse har gjort at \u0026ldquo;begge\u0026rdquo; har vært det tryggeste valget. Problemene med dette er at mange mottakere da har fått 2 varsel og at det blir sendt unødvendig med SMS.\nLøsningen på dette blir det som kalles \u0026ldquo;foretrukket kanal\u0026rdquo;. Dette defineres som 2 nye kanaler i tillegg til de 3 eksisterende kanalene. De to nye vil bli \u0026ldquo;foretrukket epost\u0026rdquo; og \u0026ldquo;foretrukket SMS\u0026rdquo;. Disse vil indikere for Altinn at løsningen først skal forsøke angitt kanal. Hvis mottaker ikke har registrert noen adresse for foretrukket kanal, så skal løsningen isteden generere varsel på den andre kanalen. For eksempel hvis en person kun har registrert et mobilnummer og foretrukket kanal er epost så vil Altinn da lage varsel på SMS. Implementasjon inkluderer også innlesing av Correspondence via batch grensesnittet.\nAltinn skal kreve varslingsadresser selvom bruker har klikket \u0026ldquo;Slutt å mase\u0026rdquo; i vindu for personlig kontaktinformasjon Slutt å mase er en knapp som er synlig i vinduet som spørr etter personlig kontaktinformasjon. Knappen blir synlig for brukere som har mange avgivere. Når bruker benytter seg av muligheten vil Altinn lagre dato og tidspunkt. Hvis det har gått færre enn 365 dager siden dette ble registrert vil Altinn ikke spørre om personlig kontaktinformasjon. Denne sjekken hindret feilaktig også spørsmål om varslingsadresser for organisasjonen. Dette er nå rettet.\nFjerne låsing av GUI-elementer som ikke er bekreftet av KoFuVi Det var tidligere ikke mulig å endre eller slette kontakt-endepunkter som ble lagt til, før batch hadde kjørt og godkjent disse endringene. Det var derfor en 10-min periode etter hver innlegging av data der man ikke kunne endre eller slette kontakt-endepunkter. Denne begrensningen er nå fjernet slik at det alltid er mulig å endre og å slette nylagde kontakt-endepunkter.\nVise sluttbrukersystemets navn på skjema når det er instansiert fra sluttbrukersystem For å kunne skille mellom elementer som er instansiert opp av sluttbrukersystem og elementer som er instansiert opp av tjenesteeier, skal navnet på sluttbrukersystemet gå fram av elementlista når det er sluttbrukersystem som har instansiert opp elementet.\nAvgivertypeendring blir kommunisert på riktig måte når man instansierer skjema Avgivertypen endres ikke når man skifter avgiver (så sjekken på avgivertypen blir feil). Tidligere ble det ikke registrert på riktig måte at avgivertypen ble endret slik at før ble du hindret selv med en lovlig avgiver og fikk da en feilaktig feilmelding. Dette er nå fikset opp i slik at skjema blir instansiert uten at brukeren ser denne feilmeldingen.\nVise tjenesteeiernavn basert på valgt språk i profil Det er gjort endring på visningen av \u0026ldquo;Rollene dine gir deg tilgang til disse tjenestene\u0026rdquo; når man viser alternativ for å filtrere på tjenesteeiere. Oppbyggingen av tjenesteeiernavn på filter alternativene tar nå i bruk ressurstekster med en nøkkelverdi. Hvis det er ikke eksisterer en ressurstekst for tjenesteeierkoden blir eksisterende løsning brukt, som benytter seg av beskrivelsesfeltet fra ServiceOwner tabellen i databasen.\nSkjule test-tjenesteeiere Det finnes et sett med tjenesteeiere som benyttes av systemeier og leverandører til å utføre testing og overvåking av løsningen. Disse tjenesteeierene vil aldri ha reelle tjenester tilgjengelig for sluttbrukere. Disse tjenesteeierene blir med denne endringen skjult for sluttbruker i 2 spesifikke lister. Listene det gjelder brukes i sammenheng med filtrering av tjenester basert på tjenesteeier. De konkrete listene finner man under henholdsvis \u0026ldquo;Profil \u0026ndash;\u0026gt; Skjema og tjenester du har rettighet til \u0026ndash;\u0026gt; Disse rollene gir tilgang til disse tjenstene\u0026rdquo; og \u0026ldquo;Profil \u0026ndash;\u0026gt; Andre med rettigheter til virksomheten \u0026ndash;\u0026gt; (velg aktør) \u0026ndash;\u0026gt; Disse rollene gir tilgang til disse tjenstene\u0026rdquo;\nOppgradering av Bootstrap-rammeverk Bootstrap-rammeverket som benyttes til å bygge design på sidene i Altinn blir oppgradert til versjon 4.0 stable. I denne sammenheng kan enkelte sider få mindre justeringer i hvordan de ser ut. Endringen gjelder både portal og infoportal.\nEndringer i eksterne grensesnitt Tillate utsending av varsel i helger. Det er gjort endringer i det som kalles sendevindu slik at det blir mulig å sende varsel på lørdager og søndager. I tillegg er det blitt lov å sende varsel på helligdager. Inkludering av helligdager i sendevindu er en innstilling separat fra søndager. Alle regler må være møtt for at det skal sendes varsel. Hvis man endrer sendevindu til å ekskludere fredag vil det ikke sendes varsel på langfredag selvom det er lov å sende varsel på helligdager.\nDette gjelder SMS varsel som lages i sammenheng med nye meldinger, prefill og abonnement, og frittstående varsel.\nTest-prefix i utsendte epost/sms for å indikere at det kommer fra testmiljø Det er lagt til en prefiks for alle utsendte epost/sms fra test-miljøer. For SMS vil meldingen ha teksten \u0026ldquo;ENV - \u0026rdquo; i starten av meldingen og epost vil ha teksten \u0026ldquo;ENV - \u0026rdquo; i starten av emne-feltet (der ENV er testmiljø; DEV, AT02, TT02 etc).\nLagt til en \u0026ldquo;bryter\u0026rdquo; slik at vi kan slå av overføringer av oppdateringer mot Kofuvi i testsammenheng Når kontaktaddresser for organisasjoner oppdateres vil normalt alle oppdateringene bli sendt til Kofuvi. Om bryteren slåes av vil dette ikke skje, og alle oppdateringer er begrenset til lokale database-endringer.\nDet er lagt til en config-verdi, Kofuvi_UseLiveClient, som bestemmer om man skal overføre oppdatering til Kofuvi. Denne har per dags dato verdi som er hentet fra Variables (%KOFUVI_USELIVECLIENT%), som er satt til å være slått av for DEV (utviklingsmiljø).\nLik navnestandard på miljø mellom feature toggles og altinn config. Det er gjort endringer på navngivning av miljø både i altinn.config og features.json slik at disse følger lik navnestandard; DEV,AT1,AT2,AT3,AT4,YT1,YT2,YT3,TT2,PROD.\nDette vil gjelde for oppsett av nye feature toggles samt tjenesten AuthorizationDecisionPointExternal.AuthorizeAccessExternal.\nDiverse bugfix Problemer med samtidige enkeltrettigheter på instansnivå og tjenestenivå Enkeltrettigheter som ikke fungerer (17750) Utbedret et problem med at ikke alle rettigheter blir delegert på tjenestenivå dersom det eksisterer en aktiv rettighet på instansnivå.\nTrekking av tjenestenivå rettigheter sletter også rettigheter på instansnivå for samme bruker (19154) Utbedret et problem med at instans-rettigheter også blir slettet i det man trekker rettighet på tjenestenivå for samme tjeneste.\nYtelsesforbedringer Versjonen inneholder forbedringer i ytelsen på innlevering, og en endring som reduserer størrelsen på PDF-er Altinn genererer.\nØvrige bugfix Ekspandert visning av innboks elementet viser opprettet dato og ikke visningsdato (18997) Dato for mottatt melding i innboks er forskjellig fra dato i aktivitetsloggen. Aktivitetsloggen bruker visningsdato av elementet og ekspandert visning viser opprettet dato for elementet.\nFor skjema som er instantiert av tjenesteeiere vises nå visningsdato i ekspandert visning og opprettet dato på aktivitetsloggen. Det er nå fikset slik at aktivitetsloggen viser visningsdato.\nFjernet krav om at telefonnummer skal være oppført om man endrer valgbokser under login informasjon (19346) Et krav om at telefonnummer skulle være oppført når man endret et av login informasjons-valgende \u0026ldquo;Tillat EUS\u0026rdquo;/\u0026ldquo;Tillat level 3\u0026rdquo; har blitt introdusert i en tidligere versjon. Denne endringen har blitt reversert. Det er fjernet krav til å oppgi passord på nytt om man har valgt en av boksene som krever passord fra før.\nFjerner ikke endpoints fra førstevarsel dersom det ikke har noen revarsler (notification) (19234) Notification finner template for sending basert på input parameterene NotificationType, TransportType og LanguageCode. Endepunkter som det ikke fantes template for førte til exception. Det er gjordt retting i denne bug for Correspondence og Prefill, endepunktene fjernet slik at exception unngås. (Feilen er fortsatt gjeldende for StandAlone-vasrling.)\nMindre bugfix på redaktørgrensesnittet for infoportal Kun merkbart for redaktører. Inkluderer forbedret håndtering av svar på \u0026ldquo;Fant du det du lette etter?\u0026rdquo; og sperrer for å gjøre endringer som ikke burde være mulige.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2019/19-5/",
	"title": "19.5",
	"tags": [],
	"description": "Opprettelse av lokal rolle forenklet, mindre endringer, feilrettinger",
	"content": " Dette er en fremtidig versjon av Altinn. Se 19.4 for siste versjon i produksjon.\n\rEndringer i Portal Forenkle prosessen med opprettelse av lokal rolle som skal inneholde mange rettigheter Prosessen for å opprette lokal rolle har blitt forbedret. Man har ved denne endringen fjernet rettighetsvisningen hvor man delegerer rettigheter på en og en tjeneste når man oppretter en lokal rolle. Istedenfor blir tjenestene nå lagt til i oversikten under søkeresultatet, og rettighetene kan enkelt styres fra oversikten direkte. Endringen er implementert slik at alle rettighetene man har tilgang til for den gitte tjenesten, vil bli lagt til i rollen.\nSteg 1: Velg opprett egendefinert rolle\nSteg 2: Gi rollen et navn og søk opp de tjenester du ønsker å gi tilgang til. Du kan søke på navnet til tjenesten og sortere på etat/tjenesteeier\nSteg 3: De tildelte rollene vil legge seg i listen under søkefeltet. Ikonene viser hvilke tilganger som er gitt, og disse kan endres ved å klikke på ikonene. Man kan bare gi videre tilganger man selv har.\nSteg 4: Etter delegeringen vil man få opp en kvittering. Klikk tilbake til rolleoversikten for å knytte rollen til mottakeren\nSteg 5: Klikk på den nye rollen. Den vil nå bli lagt til.\nImplementere nytt tjenestesøkresultatvisning Implementere nytt tjenestesøkresultatvisning i andre med rettigheter og varsling kun for enkelttjenester Søkeresultatet for delegering av tjenester under andre med rettigheter og søk i aktive tjenester under varsling kun for enkettjenester har blitt endret. Tjenesteeier for tjenesten vises nå i en ny kolonne i tjenestesøket sammen med navnet på tjenesten. Dette er en endring som kommer som følge av endringen for søkeresultatet i prosessen for opprettelse av lokal rolle. Under varsling for enkelttjenester er det også lagt til en tekst som sier noe om tjenesten allerede er lagt til eller ikke fra søkeresultatet.\nDiverse bugfix Oppretting av lokal rolle basert på direkte delegerte tjenesterettigheter ble ikke laget En intern bug i autorisasjonskomponenten resulterte i at en bruker ikke fikk laget eller oppdatert en lokal rolle med tjenesterettigheter som var direkte delegert til brukeren. Dette er nå rettet.\nSatt språk til Engelsk for StandAloneNotification response i Soap Språk i respons er nå Engelsk. Tidligere ble språk på siste varsel brukt.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2019/",
	"title": "2019",
	"tags": [],
	"description": "Endringer innført i 2019",
	"content": "Releaser av Altinn i løpet av 2019\n\r19.5\r\rOpprettelse av lokal rolle forenklet, mindre endringer, feilrettinger\n\r19.4\r\rFeilrettinger\n\r19.3\r\rFavorittliste over aktører, hendelse-feed for status på meldinger, mindre endringer, feilrettinger i skattemeldingen og andre feilrettinger\n\r19.2\r\rEndringer i webSa, utvidet samtykketoken, mindre forbedringer og feilrettinger\n\r19.1\r\rSamtykke utvidelse NADOBE, filtrere bort slettede virksomheter, mindre endringer og feilrettinger\n\r"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-4/",
	"title": "18.4",
	"tags": [],
	"description": "Varslingsadresser fra Enhetsregisteret i Altinn, mindre forbedringer i portal, flere endringer på eksterne API og div bugfiks.",
	"content": " Felles varslingsadresser for virksomheter i Altinn og Enhetsregisteret (KoFuVi) Fra 1. januar ble det innført krav om at alle virksomheter i Enhetsregisteret skal ha registert varslingsadresse for digital kommunikasjon med det offentlige. Dette kan være én eller flere registrerte epostadresser eller mobilnummer. Dette vil være den adressen offentlige myndigheter forholder seg til når de skal sende varsel til virksomheten. Som utgangpunkt så benyttes allerede registerte felles varslingsadresser for virksomheten i Altinn. Varslingsadresse for virksomheten vil benyttes av Altinn til utsending av varsel. Varslingsadresse for allerede registrere virksomheter kan oppdateres via profil i Altinn.\n Oppdater varslingsinformasjon i profil   Ettersom alle virksomheter er pålagt å ha varslingsadresse så vil de som mangler denne bli avkrevd en slik adresse når personer med tilgangsstyring går inn på virksomheten i Altinn første gang etter release 18.4.\n Registrer varslingsinformarsjon   Varslingsadresse registrert eller endret i Altinn vil umiddelbart sendes til enhetsregisteret. Etter en kort tid så vil Altinn få tilbakemelding fra Enhetsregisteret. Merk at det i mellomtiden ikke vil være mulig å korrigere registrert varslingsadresse.\n Venter på tilbakemelding   Portal Forbedring av aktivitetslogg ved utsending av varsel Endringen medfører mer korrekt logging av utsendt varsel fra Altinn.\nBedre visning av lange navn i portalen Vi har hatt utfordringer med å vise lange navn i portalen på en god måte. Dette er det nå gjort forbedringer på.\nKorrigert ledetekst på skjema i innboks På skjema i innboks vises tidspunkt for når skjema er opprettet. Tidligere ble denne feilaktig benevnt som \u0026ldquo;mottatt\u0026rdquo;, men er nå korrigert til \u0026ldquo;opprettet\u0026rdquo;.\nForenklet deling av meldinger Prosess for å dele og gi tilgang til en melding du har mottatt er forenklet.\nForbedringer i søk på tvers Det er nå enklere å slette lagrede søk og vi har gjort det lettere å komme tilbake til søket etter å ha åpnet kvittering på arkivert skjema. I tillegg er det nå lettere å se hvilke aktører du har valgt å søke på.  Valgte aktører   Bedre tilbakemelding til bruker som signerer/sender inn på vegne av andre Det er mulig å gi en bruker tilgang til bare et spesielt eksemplar av et skjema. Når bruker signere og sender inn dette på vegne av noen andre, så vil ikke bruker lenger ha tilgang til å se på skjema som er sendt inn. Det samme vil være tilfellet hvis man som siste person sender inn et skjema som har paralell signering.\nTilbakemelding om hva som har skjedd i slike tilfeller er forbedret slik at bruker ikke tror det har oppstått en feil.\nEndringer i eksterne grensesnitt Splittet warnings og errors på API/messageID/validate Som tjenesteeier ønsker jeg at warnings og errors splittes i API/messageID/validate.\nFør ble warnings og errors vist i samme liste, men nå vises de i to separate lister: ValidationErrors og ValidationWarnings, der hver rad inneholder en FieldName, ErrorMessage og Xpath.\nVaske XML for InfoPath elementer i REST API Som tjenesteeier ønsker jeg at InfoPath elementer ikke skal eksponeres i REST API.\nFør inneholdt XML lagret i Altinn InfoPath elementer. Nå blir disse elementene fjernet fra XMLen når det hentes ut.\nUthenting av elementer fra søppelbøtta via REST API Som sluttbrukersystem ønsker jeg å kunne hente ut elementer som er lagt i søppelbøtta via REST grensesnitt.\nDet er lagt til funksjonalitet for å kunne hente ut en liste over elementer eller enkeltelementer fra søppelbøtta. Funksjonaliteten er tilgjengelig for både privatpersoner og bedrifter. Søppelbøtte er tilgjengelig ved å gå til /api/{who}/messages/trashbin\nUthenting av FormData (XML) for innboks via WebService Det er lagt til mulighet for å hente ut FormData for elementer i innboksen via WebSerivce. Kall til ServiceEngineExternal/ReporteeElementListExternal/GetFormSetData henter ut alle XML-skjemaer for et element. Skjemaene blir vasket for interne felter og namespaces på lik linje med REST.\nSom sluttbruker ønsker jeg å kunne se hvem mitt skjema ble instansiert på vegne av i REST API MessageSender-feltet i Message-modellen vil nå inneholde navnet på organisasjonen om et skjema var sendt på vegne av en organisasjon. (/api/{who}/messages/ og `/api/{who}/messages/{messageId}). Endringen populerer og MessageSender-feltet for bruk i Portalen.\nBekrefte mottatt correspondence via REST API Som bruker av REST API kan man nå arkivere mottatte meldinger.\nSe REST APIets hjelpesider for mer informasjon: /api/Help/Api/PUT-who-Messages-messageId-Confirm_language\nFå valideringsstatus på skjemasett via REST API Som bruker av REST API kan man nå validere skjemasett på skjemaer som ligger til utfylling.\nSe REST APIets hjelpesider for mer informasjon: /api/Help/Api/GET-who-Messages-messageId-Validate_language\nFå ut virksomhets adresseinformasjon Som bruker av REST API får man ut addresse informasjon for virksomhet som en del av profil data.\nSe REST APIets hjelpesider for mer informasjon: /api/Help/\nInkludere filstørrelse på vedlegg i REST API Som bruker av REST API får man nå ut filstørrelse (bytes) på vedlegg. Dersom REST API ikke kjenner til størrelsen på vedlegget settes verdien til -1.\nSe REST APIets hjelpesider for mer informasjon: /api/Help/\nMer info i Metadata for Formtask i REST API Som bruker av REST API får man nå ut mer informasjon om Formtasks. Det er lagt til en liste med prosess-steg (ProcessSteps), som inneholder navn og sikkerhetsnivå som kreves for å fullføre hvert steg. Det er lagt til to felter som indikerer om sluttbrukersystemer kan benyttes for Formtasken (EUSEnabled/EnterpriseUserEnabled).\nSe REST APIets hjelpesider for mer informasjon: /api/Help/\nForbedret caching i Metadata REST-apiet For å unngå bugs bør man bytte fra å benytte AltinnCache.Get og AltinnCache.Insert til å bare bruke AltinnCache.GetObjectFromCacheOrMethod. Det forhindrer vi at to forskjellige cache keys kan bli brukt ved et uhell.\nDette gjelder alle metodene i /api/metadata. Se REST APIets hjelpesider for mer informasjon: /api/Help/\nInformasjon om kodelister tilgjengelig via REST API Det er laget en ny ressurs /api/metadata/codelists hvor en ekstern person/utvikler kan få listet opp alle kodelistene i Altinn. Listen filtreres i utgangspunktet automatisk på norsk, men bruker kan endre denne filtreringen ved å sette språk selv.\nSe REST APIets hjelpesider for mer informasjon: /api/Help/\nEndre avsender på skjema man instansierer via prefill-webservices Det er lagt til felt som skal inneholde organisasjonsnummer til den virksomheten man sender på vegne av.\nSe REST APIets hjelpesider for mer informasjon: /api/Help/\nForbedret validering av skjemasett i REST API Kun tillate ett hovedskjema per forsendelse over REST-apiet. REST API hadde mangelfull validering rundt MainForm / SubForm, hvor det har vært mulig å sende inn flere eller ingen MainForms, samt oppgi SubForm på DataFormat/DataVersion tilhørende MainForm i det logiske formsettet til tjenesten.\nEndringer i REST API POST og PUT til /{who}/Messages blir nå grundigere validert, og vil gi HTTP feilkode 400 hvis en eller flere av følgende inntreffer:\n Det oppgis mer eller mindre enn én form model hvor Type er satt til MainForm DataFormatId og/eller DataFormatVersion på MainForm matcher ikke det som er definert i LogicalFormsInFormSet på det oppgitt tjenestekoden/versjonen DataFormatId og/eller DataFormatVersion på evt. oppgitte SubForms matcher ikke noen av de subforms som er definert i LogicalFormsInFormSet på det oppgitt tjenestekoden/versjonen  AttachmentType i REST Tidligere har AttachmentType (´GET {who}/messages/{messageId}/attachments´) for vedlegg blitt satt til det oversatte navnet til AttachmentRuleType. Dette har ikke vært ønskelig, så det er rettet til å returnere den ikke-oversatte Id\u0026rsquo;en til AttachmentRuleType. Det er lagt til et nytt felt; AttachmentTypeLocalized som inneholder det oversatte navnet.\nLagt til støtte for å soft-delete elementer for organisasjoner via REST API Det er nå mulig å legge elementer fra arkiv og serviceengine i søppelboksen via REST grensesnittet. Det var tidligere ikke mulig å slette elementer for organisasjoner gjennom REST APIet. Dette er endret slik at det foretas en soft-delete for elementer som eies av organisasjoner i stede.\nOrg-nummer for signerende bruker i feltet SignedByUserSsn i GetArchivedFormTask Som tjenesteeier ønsker jeg at informasjon om signerer skal ligge med i oversendelse når skjema er signert av virksomhetssertifikatbruker.\nOm en virksomhetsbruker (bruker uten SSN) signerte et skjema, inneholdt signeringsinformasjonen i GetArchivedFormTask kun brukernavn og intern database-id for brukeren, mens SignedByUserSsn var blankt. SignedByUserSsn blir i dette tilfellet nå satt til organisasjonsnummeret til virksomhetsbrukeren slik at man vet hva skjemaet tilhører.\nXPath i feilmeldinger fra validering i REST grensesnittet Utvide /validate med xpath til felt som har hard/soft valideringsfeil\nVed innsendelse av nytt skjema til REST grensesnittet, eller ved å etterspørre /validate på en melding får man nå opp XPath inkludert i de feilmeldingen for felter som feiler validering. Informasjonen er lagt til i ValidationError objektene som blir returnert ved innsendelse eller ved validering. Se /api/help.\nOperasjon for å hente ut roller for en person/organisasjon via REST-apiet Som tjenesteeier ønsker jeg å kunne se rollene en person/virksomhetsbruker/organisasjon har for en annen person/organisasjon via REST-apiet\nDet er lagt til en ny metode i REST-apiet for tjenesteeiere. GetRoles tar inn en person/organisasjon (subject) som holder roller, og en person/organisasjon (reportee) som rollene er delegert for. Metoden returnerer en liste med alle rollene subject har hos reportee. Dette fungerer på lik linje med GetRights-metoden. Se /api/serviceowner/Help/Api/GET-serviceowner-authorization-roles_subject_reportee_language.\nDiverse bugfix  Søkeboks på feilsiden fungerer ikke Videresend: Altinn logo på videresend-siden ser ikke lenger ut som den er klikkbar Meldinger som bekreftes flere ganger opptrer flere ganger i innboks. Dette er rettet. Gi og del tilgang: Bruker har ikke rettigheter til å se rettighetene til en annen bruker Gi og del tilgang: Hvis en tjeneste er \u0026ldquo;ikke delegerbar\u0026rdquo; så ønsker jeg allikevel å kunne videresende en melding Selvregistert bruker: Lagreknapp forblir aktiv etter at nytt passord blir fjernet (før lagring) Avansert søk - ulogisk bruk av sluttdato - periode inkluderer framtid Forbedret tekst knyttet til visning av virksomhetssertifikatbruker Avansert søk - kan ikke søke med blanke datofelter Tidligere lagrede søk på tvers fungerer ikke lenger - siste 12 måneder oversettes til periode Text when samtykke is given, punktum mangler Gi og del tilgang: Kan ikke gi tilgang for arkiverte, bekreftede meldinger fra arkiv Hvis du trykker enter når du har fokus i feltet der du kan søke etter skjema eller tjenester under gi rettigheter så kommer du til en grønn kvitteringsmelding Skrivefeil i Innboks Teksten AltinnII.SBL.MVC.Payment.DescriptionPay mangler verdier Incorrect file name after upload client delegation by file - rettet for bokmål og nynorsk. Husker ikke språkvalg når bruker kommer kommer tilbake fra siden \u0026ldquo;You do not have safe enough login for this service\u0026rdquo; Ikke åpenrom mellom punktum og neste bokstav i aktivitetsloggen når det delegeres enkeltrettigheter Ikke mulig å videresende til eier av element når eier er en person - finner ikke aktør (person) i liste over brukere med tilgang Profil - får ikke åpnet Skjema og tjenester du har rettighet til pga for lavt sikkerhetsnivå Not able to use videresend functionality for invalid users Exception when delegating same element twice to same recipient Mistet tilgang til et sett eldre elementer via REST API  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2019/19-4/",
	"title": "19.4",
	"tags": [],
	"description": "Feilrettinger",
	"content": " Denne releasen inneholder tekniske feilrettinger og forbedringer som ikke vil påvirke løsningen funksjonelt. Forhold som kan påvirke brukere vises under.\nFeilrettinger Delegering av rettigheter med virksomhetsbruker Det var mulig å delegere rettigheter for virksomhet A til en virksomhetsbruker i virksomhet B. Dette var mulig siden det måtte eksistere et forhold mellom virksomhetene A og B som inkluderte både klientadministrering og tilgangsstyring. Tilgangsstyring er fjernet fra sjekken. Det er fortsatt mulig å delegere rettigheter til en annens virksomhetsbruker hvis det er delegert klientadministrering til virksomheten.\nLukk-knapp på eGuide oppsummeringsside var ikke oversatt Lukke-knapp på eGuide oppsummeringssiden var ikke oversatt til engelsk. Nå rettet ved å legge til riktig oversettelse på engelsk språk.\nHvit stolpe på toppen av hurtighjelp Fjernet mellomrom mellom innhold og topp på hurtighjelp\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/",
	"title": "2018",
	"tags": [],
	"description": "Endringer innført i 2018",
	"content": "Releaser av Altinn i løpet av 2018\n\r18.12\r\rVisning av organisasjonsform i REST, styre utsendelse av varsel ved prefill, feilrettinger m.m.\n\r18.11\r\rForbedringer, fjerning av ALLEA, ytelse, feilrettinger m.m.\n\r18.10\r\rSlette meldinger permanent, andre forbedringer, feilrettinger m.m.\n\r18.9\r\rStøtte for eIDAS autentisering, mindre forbedringer, feilrettinger m.m.\n\r18.8\r\rRediger lagrede søk, app uri scheme for samtykke, metadata på skjema, feilrettinger m.m.\n\r18.7\r\rMindre forbedringer, filopplasting i Safari, feilrettinger m.m.\n\r18.6\r\rVideresending av skatteoppgjør til andre digitale postkasser, feilrettinger m.m.\n\r18.5\r\rForbedringer på varsling og portal samt div bugfiks.\n\r18.4\r\rVarslingsadresser fra Enhetsregisteret i Altinn, mindre forbedringer i portal, flere endringer på eksterne API og div bugfiks.\n\r18.3\r\rOppgradert database samt bedre ytelse, stabilitet og robusthet\n\r18.2\r\rDiverse forbedringer relatert til skattemeldingen.\n\r18.1\r\rDel tilgang, slette delegeringer på instans-nivå, diverse bugfix ...\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/innf%C3%B8ring-i-xml/",
	"title": "Innføring i xml",
	"tags": [],
	"description": "Helt grunnleggende innføring i XML. Både regelfiler og skjemadata i Altinn lagres som XML.",
	"content": " Xml er et format for å sette opp data på en måte som både menneske og maskin skal kunne lese. Formatet har som mål å være enkelt, generelt og kunne brukes på tvers av plattformer og språk.\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;Brev\u0026gt; \u0026lt;Til\u0026gt;Tove\u0026lt;/Til\u0026gt; \u0026lt;Fra\u0026gt;Ole\u0026lt;/Fra\u0026gt; \u0026lt;Tittel\u0026gt;Husk møtet\u0026lt;/Tittel\u0026gt; \u0026lt;Innhold\u0026gt;Husk møtet klokka 16!\u0026lt;/Innhold\u0026gt; \u0026lt;/Brev\u0026gt;  Xml er basert på tekst, og bruker spesiell kode for å strukturere data. Det er viktig å merke seg at xml består av to hoveddeler, tekst som representerer data og tekst som er brukt til å strukturere data («markup»). Tekst som blir brukt til å strukturere data starter med tegnet \u0026lt; og blir avsluttet med tegnet \u0026gt;.\nTag er en markør som starter med \u0026lt; og slutter med \u0026gt;. Den finnes i tre varianter: Start-tag \u0026lt;seksjon\u0026gt;, slutt-tag \u0026lt;/seksjon\u0026gt; og tomt element \u0026lt;seksjon /\u0026gt;.\nElement/Node er en logisk del av xml-en som starter med en start-tag og slutter med en slutt-tag, eller bare er en tom tag. Teksten mellom start-tagen og slutt-tagen er innholdet i elementet.\n\u0026lt;Til\u0026gt;Tove\u0026lt;/Til\u0026gt;  Attributt er egenskaper som kan legges til en tag. Disse kan bare legges inne i en start-tag eller en tom element-tag. Attributt består av to deler, nemlig navn og verdi. Eksempelet under har lagt til to attributt, sendedato og mottaksdato, til elementet Brev. Verdien må alltid stå inne i hermetegn (enkle eller doble).\n\u0026lt;Brev sendedato=\u0026quot;23.10.2013\u0026quot; mottaksdato=\u0026quot;25.10.2013\u0026quot;\u0026gt;  Xml-deklarasjon er et spesialelement som skal stå i starten av dokumentet. Dette er brukt til å fortelle at dette er et xml-dokument, samt hvilken versjon og tegnkoding det bruker. I de fleste tilfeller kan du bruke den slik som det står i eksempelet.\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt;  Kommentarer kan bli markert med \u0026lt;!-- i starten og --\u0026gt; i slutten. Det som står mellom disse tegnene vil ikke bli betraktet som en del av xml-en når maskinen leser den. Disse blir brukt til å fortelle noe som et menneske som leser xml-en kan ha nytte av, men som maskinen ikke trenger kjenne til.\n\u0026lt;!-- En kommentar --\u0026gt;  Regler For å være et velformet xml-dokument må du følge et sett med regler.\n Du må bare ha ett rotelement Elementer må være avgrenset av en start-tag og slutt-tag med samme navn, f.eks.\u0026lt;Til\u0026gt;Tove\u0026lt;/Til\u0026gt;. Tomme elementer kan alternativt bruke en lukket tag. f.eks. \u0026lt;Til /\u0026gt;. Alle attributtverdier må stå i anførselstegn. Elementer kan inneholde andre elementer, men ikke overlappe hverandre. Det er forskjell på små og store bokstaver i elementnavn. \u0026lt;Til/\u0026gt; er ikke det samme som \u0026lt;til/\u0026gt;.  Xsd Xsd står for «xml schema definition» og er et format som brukes til å fortelle detaljert hvilke regler en xml må følge. Dette blir brukt for å sikre at xml-er kan bli brukt til et spesielt formål som krever et samordnet format. Xsd-en brukes for å sette strengere regler enn det som vanligvis gjelder for xml.\nFinne mer informasjon For å lære mer om xml finnes det masse informasjon på internett (http://www.w3schools.com/xml/ er et eksempel).\nVerktøy Når du skal jobbe med xml-filer (som regelfila) anbefales det å bruke verktøy som hjelper deg å følge reglene for xml. Eksempel på slike verktøy er XML Spy og Visual Studio, men det finnes også andre alternativ. Ved å legge inn referanse (se under) til xsd-en vil slike verktøy kunne sjekke om du følger reglene for regelfilen.\n\u0026lt;AltinnRuleEngine name=\u0026quot;test\u0026quot; version=\u0026quot;1\u0026quot; xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xsi:noNamespaceSchemaLocation=\u0026quot;AltinnRuleEngine.xsd\u0026quot;\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/",
	"title": "Tjenesteeiere",
	"tags": [],
	"description": "Dokumentasjon for hvordan tjenesteeiere kan ta i bruk Altinn grensesnitt",
	"content": "Denne dokumentasjonen beskriver de tjenester Altinn tilbyr alle tjenesteeiere og hvordan deres systemer kan integrere seg mot disse. Det er lagt vekt på å beskrive både det funksjonelle aspektet i forhold til hva integrasjonene tilbyr rent funksjonelt, og en teknisk detaljering av grensesnittene som tilbys av Altinn.\nEventuelle tjenester/grensesnitt som er spesifikke for en tjenesteeier er ikke med her.\n\rInnledning\r\rBeskrivelse av de tjenester Altinn tilbyr alle tjenesteeiere og hvordan deres systemer kan integrere seg mot disse.\n\rFunksjonelle scenario\r\rWebservice operasjoner med beskrivelse\n\rREST API\r\rDokumentasjon for tjenesteeierdelen av Altinns REST-apier\n\rWeb Service\r\rWebservice operasjoner med beskrivelse\n\rBatch\r\rWebservice operasjoner med beskrivelse\n\r"
},
{
	"uri": "https://altinn.github.io/docs/releases/2015/15-3/",
	"title": "15.3",
	"tags": [],
	"description": "Støtte for virksomhetssertifikat i REST API, tekniske forbedringer, EIR, innlogging med utenlandsk id (eIDAS), +++",
	"content": " Omfanget av denne versjonen er litt mindre enn vanlig. Hovedtyngden er forbedringer av grensesnitt og feilrettinger.\nAutentisering Støtte for innlogging med utenlandsk identifikasjon (18497) Altinn får støtte for føderering av brukere på tvers av landegrenser innenfor eIDAS (EU-prosjekt). Kun brukere med D-nummer vil få tilgang til Altinn.\nNB! Denne endringen vil ikke være aktiv i produksjonsmiljøet rett etter produksjonssetting, men vil aktiveres når bakenforliggende systemer er klare for det.\n\rBrukskvalitet Mindre feilrettinger – Min profil (18829) Flere mindre feilrettinger i den nye versjonen av Min profil lansert i versjon 15.2.\nEksterne grensesnitt Støtte for sertifikat-autentisering i REST-grensesnittet (18311) REST-grensesnittet får støtte for autentisering via virksomhetssertifikat, slik det allerede er støtte for i webservice og i portal.\nServiceEditionCode som frivillig parameter i GetShipmentStatus (18677) Støtte for å bruke GetShipmentStatus uten å definere en bestemt ServiceEditionCode – det vil si få en oversikt over alle innsendinger for en tjeneste, uavhengig av versjon.\nGetShipmentStatus - mulig å hente ut full shipment status historikk på et element (18727) Alle statusendringer og tidspunkt logges for å kunne returnere disse på listeformat, istedenfor å bare ha ett felt som har siste verdi.\nVerifisering av signeringsrettigheter via eksternt grensesnitt (18728) AuthorizeAccessExternal skal kunne brukes til å verifisere at en bruker har signeringsrettigheter på en gitt tjeneste.\nFeilretting – GetShipmentStatus (18812) Retting av feil der GetArchiveShipmentStatus-kallet sammen med sekvensnummer på immediategrensesnitt, ikke får treff basert på dette.\nFlere mindre endringer på REST-grensesnitt (18767) Mindre feilrettinger på REST-grensesnittet – blant annet økt app-vennlighet.\nIntegrasjonsplattform og grensesnitt Automatisering av oppsett av BizTalk (18213) Oppsett av BizTalk skal kunne gjøres automatisert, slik at blant annet unngår problemer med etablering/reetablering av integrasjonsløsningene i de ulike miljøene ved deploy.\nBedre unntakshåndtering og logging i SendShipmentToEndpoint (18486) Mer intelligent håndtering av feil i SendShipmentToEndpoint – blant annet vurdering av om retry har noe for seg.\nUtvidelser av støtteverktøyet EIR (18489) Støtteverktøyet EIR får funksjonalitet for å kjøre forhåndsgodkjente lagrede prosedyrer og SQL-script.\nDriftsrutiner og registerintegrasjon Standardisert prosedyre for deaktivering og sanering av grensesnitt (17690) Det blir mulig for driftsleverandør på bestilling fra tjenesteeier på en forutsigbar og effektiv måte å kunne deaktivere et grensesnitt midlertidig eller sanere det permanent.\nFeilretting – Enhetsregisterinnlesing for enheter med lange navn I enkelte tilfeller blir mellomrom fjernet i enhetsnavn som er lengre enn 35 tegn – rettes slik at de leses inn korrekt.\nTeknisk arkitektur Bedre logging og oppgradering av EntLib (18370) Det gjøres en del forbedringer på logging i løsningen, blant annet for å redusere mengden logginger uten verdi (\u0026ldquo;falske positive\u0026rdquo;).\nPartisjonering av databaser (18497) Data i Altinn fordeles på en mer hensiktsmessig måte for å minske tid og lagringsbehov ved backup/restore.\nInformasjonsportal Feilretting - Søkeindeksering (18777) Retting av flere små svakheter i søkeløsningen for innhold før innlogging.\nTjenesteutvikling Forbedring av uthenting av familiemedlemmer (18200) Webservicen for å hente ut familieforhold får forbedringer, slik at alle medlemmer av en familie kan hente ut familiedata.\nFeilretting – GetPersonRegisterData og adresser (18366) Denne webservicen gir i dag en blanding av bostedsadresse og postadresse – rettes slik at begge adresser hentes hver for seg.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2017/17-3/",
	"title": "17.3",
	"tags": [],
	"description": "Søk på tvers av aktører, soft due date, og masse bugfix og mindre forbedringer...",
	"content": " Portal Det er gjort flere forbedringer av den nye innboksen som ble innført i forrige release.\nSøk på tvers av flere aktører i innboks Det skal i innboksen være mulighet for å få oversikt over elementer i innboks på tvers av flere eller alle aktører slik at brukere som forvalter flere enn en aktør enkelt skal kunne følge opp ulike innleveringer og mottatt post på en effektiv måte.\n Lenke til \u0026#34;Søk i flere aktører\u0026#34;    Du kan velge \u0026#34;Alle jeg kan representere\u0026#34; for å søke på tvers av alle...    ...eller du kan velge spesifikt hva som skal inkluderes i søket.   Soft due date I skattemeldingen (og muligens på sikt andre tjenester) brukes fristen som er satt som et forslag og ikke en endelig first.\nEn ny konfigurasjonsverdi i Altinn, SoftDueDateServices, lister de tjenestene hvor fristen kun skal være veiledende. Elementer i innboksen tilhørende disse tjenestene blir da ikke listet i \u0026ldquo;haster\u0026rdquo;-kategorien, og blir dermed ikke markert med rødt ikon og rød frist når de er utgått. Utgåtte elementer blir heller ikke plassert i \u0026ldquo;Under arbeid\u0026rdquo;.\n Skattemeldingen vil ikke lengre bli vist som \u0026#34;haster\u0026#34;   Andre mindre forbedringer av innboks  10055 - Skjema-ikon vises på elemenenter i meldingsboksen som er skjema.\n 10342 - Skjema markeres som lest når brukeren trykker på \u0026ldquo;tilbake\u0026rdquo;-knappen etter å ha åpnet et skjema i utfyllings-steget.\n 11497 - Valget \u0026ldquo;+Vis alle profiler\u0026rdquo; og \u0026ldquo;søkefeltet\u0026rdquo; skal ikke vises for brukere som ikke har flere aktører å velge mellom.\n Valget må vises hvis bruker har tilgang til slettede enheter eller kun underenhet koblet til en hovedenhet som han ikke har tilgang til. Når man søker etter aktør så må søk inkludere \u0026ldquo;slettede enheter\u0026rdquo; og \u0026ldquo;singleenheter\u0026rdquo; (gjelder både lite og stort aktørvalg) selv om man ikke har krysset av.  12876 - Søk på tvers vises for brukere som har tilgang til flere enn to aktører.\n  Oppdatert veiledning for klientdelegering på fil Det er laget en ny og bedre illustrasjon som hjelp til klientdelegering på fil.\n Veiledning for klientdelegering på fil   Forbedring av \u0026ldquo;Tjenesteeiers arkiv\u0026rdquo; Endringen er gjort for å sikre at tjenesteeier får opp data korrekt i tjenesteeiers arkiv.\nAutorisasjon Deleger enkeltrettigheter skal gjelde for alle versjoner av tjenesten Ved delegering av enkeltrettigheter og opprettelse av lokale roller så koblet vi kun siste utgave mot tjenesten som ble delegert. Dette er nå utbedret.\nEksterne grensesnitt Virksomhetsbrukere får lesetilgang til flere elementer Det er nå gjort en fiks slik at virksomhetsbrukere får lov til å lese elementer selv om tjenesten elementene er basert på ikke er merket \u0026ldquo;Tillat bruk av virksomhetssertifikat\u0026rdquo;.\nAPI\u0026rsquo;er kan returnere metadata om utgåtte tjenester Dette gjør det mulig å hente opp informasjon om en tjeneste selv om siste versjon av tjenesten har gått ut.\nLegg merke til at det ikke gjelder utgåtte versjoner av tjenester hvor det fortsatt finnes gyldige versjoner.\nBugfix 🐛 Infoportal Følgende feil er rettet i informasjonsportalen (de sidene som er tilgjengelige uten pålogging).\n 13692 - Søk fungerer nå i sticky-hjelp også når noen spørsmål/svar skal være skjult fra sticky-visningen 13082 - Fant du det du lette etter kan skrive til database 13795 - Enkelte sidetyper (landringsside/temaside) som ikke var søkbare er nå blitt det 13822 - 404-siden gir ikke lenger treff ved eksternsøk 13690 - Forbedringer i navngiving av felter i EPiServer redigeringsmodus for Om skjema-malen 13689 - Meta-felter blir tilgjengelig også for eksterne søk 13688 - Fjernet bug som gjorde at sider dypt i strukturen ble feilaktig nedprioritert i søkeresultatene 13828 - Utgåtte driftsmeldinger skal ikke lenger vises i driftsmeldingslista 13232 - Forbedret støtte for å finne relevant bokmålsinnhold ved søk i nynorsk infoportal  Diverse  13202 - Feil på åpning av RF-1030 - Altinn I for årene 2005 til 2012. 13259 - Kommer til websa-meny ved å trykke \u0026ldquo;Tilbake\u0026rdquo; i kvitteringssiden. 12576 - Forkast-kladd knapp virker ikke før for element på egen url før man har åpnet aktivitetslogg. 12305 - Meldinger skal ikke inneholde lenke til ikke eksisterende arkiv-referanse i miljøet 12626 - Endret varslingsside ved \u0026ldquo;midlertidig\u0026rdquo; tilgang til annen bruker ved signering. 13583 - Forbedret ytelse for avgiverliste. 13678 - Får ikke arkivert meldinger som mangler varslingsinformasjon i serviceEngine 13683 - Endring av feilmelding RF-1400. 12143 - Remember selected language when User is not authenticated 12283 - Samtykkelogg - ikke mulig å scrolle for å lese all info om samtykke. 9595 - Samtykke text er ikke synlig i aktivitetslogg for Engangssamtykke. 10940 - Rettet ikon for underenhet i nedtrekkslisten 11027 - Logging av bruk av samtykke må vises i samtykkeloggen. 11231 - Ikon for arkivering er skal være aktivert etter at man bekrefter mottatt melding 12669 - Delegering i Tjenesteeiersarkiv gir server error i enkelte tilfeller. 12687 - Justert visning av firmanavn i Aktivitetslogg 12688 - Ikke mulig å registrere sluttbrukersystem i IOS. 13277 - SRRDirectRightsCleanupBatch Feiler i PROD og TT02 med There was an error reading from the pipe: Unrecognized error 109 (0x6d). 13287 - Forbedringer i søk etter underenhet. 13501 - Får ikke åpnet vedlegg uten filangivelse i navnet når disse er videresendte som epost fra Altinn - åpnes nå som pdf hvis ikke annet er angitt 12435 - Fallbackløsning; når du går tilbake til meldingsbok etter å ha åpnet et skjema til utfylling blir searchId feil 12081 - Feil når man klikker på login ikon 12778 - Tatt bort aktør fra aktørliste når virksomhetsbruker ikke har rettighet på vegne av denne 11229 - Epost ved delegering av roller er korrigert  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-3/",
	"title": "18.3",
	"tags": [],
	"description": "Oppgradert database samt bedre ytelse, stabilitet og robusthet",
	"content": " Innholdet i versjon 18.3 er planlagt ut i fra å øke ytelse, stabilitet og robusthet. Det er ikke lagt til ny funksjonalitet i denne releasen.\nDatabase Databasen er oppgradert til SQL Server 2016. Flere \u0026ldquo;in-memory\u0026rdquo; ytelsesforbedringer er i den forbindelse innført.\nI tillegg er følgende forbedringer innført:\n Timeout for nedlasting av veldig stor fil med klientdelegeringer er fikset (16364) Forbedrete ytelse i lagret prosedyre for henting av shipment status (16312) Fiks av potensielle deadlocks for åpningsdag (16223) Optimalisering av sentral lagret prosedyre (15518) Bedre skalering for skjemasett elementliste (17943) Potensiell flaskehals fjernet for sletting av roller og rettigheter (17946) Tuning av lagret prosedyre for å skalere bedre i produksjon (18409) - (forbedring lagt ut i produksjon 20. mars) Legge til en indeks til en tabell for å bedre oppslagstiden (18407) - (forbedring lagt ut i produksjon 20. mars) Forbedret kjøreplan på prosedyrer med sqlserver 2016 (18478) - (forbedring lagt ut i produksjon 20. mars) Forbedring av skalering av lagret prosedyre (18411) - (forbedring lagt ut i produksjon 20. mars) Redusere CPU forbruk på lagret prosedyre (18412) - (forbedring lagt ut i produksjon 20. mars)  Infoportal  Tiltak og forbedringer av ytelse i infoportal (17560) Skjemakatalog på mobil - får ikke navigere ned til siste nivå (18154)  Selvangivelsen  Overføring av prosentsats for RF-1098 fungerer kun for første skjema (17234) Historikk for selvangivelsen har lenker til meldinger med gammelt design (16573)  Portal  Bedre feilhåndtering i MVC-portal (17720) Skjema import medfører blokkering i databasen (17679) Nytt design på vente- og nedetidsplakater (14945) Flaskehals åpningsdag - autorisasjonslogg (17143) Portal skalering åpningsdag (17224) Link to service missing in correspondence message (17489) Revarsel vises i aktivitetsloggen før det er sendt (14926) Som bruker av REST-APIet ønsker jeg at den underliggende SearchBE kan få satt DateFrom / DateTo med query parametre (17217) Inbox element is not retrieved when the dateTo value is exact time of createdDate (17635) Treg avgiverliste for brukere med virksomhetssertifikat (17451) Flaskehals i context handler fjernet (17940) (forbedring lagt ut i produksjon 20. mars) Integrasjon Fiks av regresjon for noen grensesnitt innført i 17.3 (14928)\n  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2019/19-3/",
	"title": "19.3",
	"tags": [],
	"description": "Favorittliste over aktører, hendelse-feed for status på meldinger, mindre endringer, feilrettinger i skattemeldingen og andre feilrettinger",
	"content": " Endringer i Portal Søk på brukernavn i tjenesteeiers arkiv Tidligere fikk man feilen \u0026ldquo;server error\u0026rdquo; hvis man forsøkte å søke på brukernavn. Dette er nå rettet opp slik at søk på brukernavn i tjenesteeiers arkiv fungerer som forventet.\nSletting av delegering på enkeltelement (rettigheter gitt til enkeltskjema og meldinger) skal vises i aktivitetsloggen for elementet Logginnslagene vises nå som “Tilgang fjernet” i aktivitetsloggen for elementet.\nMulighet for opprettelse av favorittliste Dette er en større endring i portalen der man nå kan ha en liste over favoritter (avgivere). Slik kan man enklere nå de avgiverne man er mest interessert i. Det store aktørvalget viser nå en oversikt over alle tilgjengelige aktører sortert i alfabetisk rekkefølge hvor innlogget bruker alltid havner øverst i listen. I listen med alle aktører er det nå lagt inn en favorittliste som lister alle aktører som er valgt som favoritt. Ved å klikke på stjernen helt til høyre på aktørkortet vil favoritten bli lagt til i favorittlisten med en gang. Søkefunksjonen er også oppdatert til å filtrere favorittlisten samtidig som den komplette aktørlisten. Endringen gjelder også for det lille aktørvinduet.\nEndringer i REST API Lagt inn hendelse-feed for status på meldinger i tjenesteeier API Dette er en ny liste med status på meldinger som er laget for en tjenesteeier. For hver melding som opprettes, arkiveres, leses eller slettes lagres det en hendelse. Det lages også hendelser hvis en melding oppretter ett varsel, og når ett varsel sendes. En tjenesteeier kan gjøre oppslag mot disse hendelsene i REST API ved å gå til altinn.no/api/serviceowner/events/feed. For å styre uttrekket kan det angis to parametere; eventOffset og fetch. - eventOffset angir id for hvilken hendelse uttrekket skal starte fra (utrekket vil ikke inneholde hendelsen som angis i eventOffset) - fetch angir antall hendelser som skal returneres. Hvis ingen parametere settes starter uttrekket fra første hendelse og returnerer opp til 10000 elementer. Det er ikke mulig å hente ut flere enn 10000 elementer i ett uttrekk.\nFeilrettinger Endret validering av filendelse på vedlegg til å være mer presis i API Endringen som er utført påvirker validering av filer som lastes opp på en tjeneste med regler knyttet til vedlegg. Vedleggsregler kan ha krav til filtype og det er validering av dette som nå er blitt gjort mer presist. I praksis betyr endringen at vedlegg i større grad må ha filendelse og denne må stemme bedre med kravene til vedleggsregelen. Eksempler på hva valideringen tillot tidligere, men nå vil avvise: (Filtyperegel: *.pdf, *.txt\u0026rdquo;)\n vedlegg.pd - Det var tidligere nok å ha deler av filendelsen. vedlegg - Det var mulig å laste opp filer uten filendelse. vedlegg.x - Annet eksempel på første punkt.  Endringen påvirker følgende operasjoner:\n   Tjeneste Operasjon     IntermediaryInboundBasic.svc SubmitFormTaskBasic   IntermediaryInbound.svc SubmitFormTask   IntermediaryInboundExternalEC.svc SubmitFormTaskEC   IntermediaryInboundBasicStreamed.svc SubmitAttachmentStreamedBasic   IntermediaryInboundStreamed.svc SubmitAttachmentStreamed   IntermediaryInboundExternalECStreamed.svc SubmitAttachmentStreamedEC    Slettede varslingsadresser lå som en del av responsen i REST API Varslingsadresser merket som slettet ble ikke skjult i REST API for tjenesteeier. Dette er løst ved at koden nå filtrerer bort disse. I tillegg henter nå koden adresser fra KoFuVi data.\nPersoner kunne lese personlige dokumenter for en som hadde rettighet til å representere organisasjonen i REST APIet Det er nå lagt inn en sjekk som stopper denne muligheten.\nFeilrettinger i skattemeldingen Feil lenke til norge.no i hjelpetekst til skjemaet \u0026ldquo;Skattemelding for formue- og inntektsskatt – personlig næringsdrivende mv RF-1030\u0026rdquo; Link til nynorsk versjon av Norge.no var feil i hjelpetekst på post 1.5.7 i RF-1030. Rettet ved å endre lenke slik at den nå peker til riktig nettsted.\nUønsket advarsel returnert av SBS for nye felter til markedsverdi boligverdi Med komplett innsending av \u0026ldquo;Skattemelding for formue- og inntektsskatt – personlig næringsdrivende mv RF-1030\u0026rdquo; via SBS får man opp advarsel på to nye felter for markedsverdi boligverdi. Dette er nå blitt rettet opp.\nSkjema \u0026ldquo;Kontonummerendring RF-1030-A\u0026rdquo; for 2017 dukker fortsatt opp i listen over årets skattedokumenter Meldingstjenesten dukket fortsatt opp i listen over årets skattedokumenter, selv om denne meldingstjenesten ikke lenger brukes i Altinn. Dette er rettet ved å fjerne kode som hentet siste års instanser av RF-1030A.\nLenke til “Endre kontonummer/utbetalingsmåte” i skattemeldingen (PSA) må åpnes i egen fane Om man trykket på lenken «Endre kontonummer/utbetalingsmåte» i menyen ble denne feilaktig åpnet i samme vindu. Rettet ved å åpne lenken i nytt vindu.\nVideresending til \u0026ldquo;Endre kontonummer/utbetalingsmåte\u0026rdquo; i Skattemeldingens (PSA) meny er nå på samme målform som den som er valgt i Altinn Hvis man hadde valgt engelsk som språk i Altinn ble siden for \u0026ldquo;Endre kontonummer/betalingsmåte på bokmål\u0026rdquo; åpnet. Rettet ved å legge inn støtte for videresending til side med samme målform som den som er valgt i Altinn.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2017/",
	"title": "2017",
	"tags": [],
	"description": "Endringer innført i 2017",
	"content": "Releaser av Altinn i løpet av 2017\n\r17.3\r\rSøk på tvers av aktører, soft due date, og masse bugfix og mindre forbedringer...\n\r17.2\r\rNytt design, ny innboks, ny infoportal, nytt søk, papirkurv, klientdelegering, tilpasset hjelp, designsystem, \u0026#43;\u0026#43;\u0026#43;\n\r17.1.1\r\r500 MB på REST og webservices, forbedringer av samtykke samt utvidet API for forms og attachments\n\rEtablering\r\rBytte av leverandører, nye avtaler, ny teknisk driftsplattform\n\r17.1\r\rDigital post til virksomheter, dialog med egenregistrerte brukere, nye sider for pålogging, heving av sikkerhetsnivå for SMS, \u0026#43;\u0026#43;\u0026#43;\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/",
	"title": "Guider",
	"tags": [],
	"description": "Altinn implementasjonsguider",
	"content": "I Altinn har vi flere guider, som er dokumentasjon for hvordan man tar i bruk Altinn.\n\rKom i gang med utvikling\r\rHvordan komme i gang med utvkling i Altinn\n\rIntegrasjon\r\rDokumentasjon for systemintegrasjon mot Altinn.\n\rTjenesteutvikling\r\rDokumentasjon for hvordan man utvikler tjenester i Altinn ved bruk av tjenesteutviklingsløsningen (TUL).\n\rSamtykke\r\rDokumentasjon for samtykkeløsningen i Altinn\n\rBetaling\r\rImplementasjonsguide for betaling\n\rDigital Post til Virksomheter\r\rImplementasjonsguide for DPV\n\rAutorisasjon\r\rImplementasjonsguiden for autorisasjon gir en teknisk beskrivelse av hvordan en kan benytte Altinn til autorisasjon og tilgangskontroll for eksterne tjenester, altså tjenester på andre nettsteder.\n\reBevis\r\rVeiledning for bruk av eBevis (tidligere Nasjonal tjeneste for dokumentasjonsbevis - NADOBE)\n\r"
},
{
	"uri": "https://altinn.github.io/docs/helt/",
	"title": "Helhetlig tilgangsstyring, HELT",
	"tags": [],
	"description": "Dette er dokumentasjon for prosjekt HELT",
	"content": "Altinns infrastruktur omfatter en autorisasjonskomponent som ivaretar tilgangsstyring og tilgangskontroll. Det er ønskelig at denne komponenten skal kunne benyttes som en selvstendig nasjonal felleskomponent og slik redusere offentlige etater og virksomheters behov for å lage egne autorisasjonsløsninger. Dette medfører behov for en skalerbar autorisasjonsløsning som ivaretar flere brukergrupper, som etater og virksomheter, sine behov enn det som støttes av dagens autorisasjonskomponent. Videre skal løsningen legge til rette for å ivareta fremtidige behov for autorisasjon. Autorisasjonsløsningen skal i hovedsak støtte behov i forbindelse med tjenester fra det offentlige, men den skal også kunne benyttes for tjenester virksomheter imellom.\n\rMålsettinger og gevinster\r\rBeskrivelse av viktige mål og gevinster for HELT\n\rAutorisasjon\r\rGenerell beskrivelse av autorisasjon i HELT\n\rOverordnet prosjektplan og -status\r\rHELT sitt mandat er å utvikle et konsept for helhetlig tilgangsstyring som gjør autorisasjonsløsningen til Altinn lettere å gjenbruke og bedre rustet for teknologiutviklingen og ulike brukerbehov. I tillegg til konseptutvikling, arbeider konseptteamet i HELT med å videreutvikle og finne områder der eksisterende tjenester tilhørende autorisasjonskomponenten kan gjenbrukes. Det er flere prosjekter og produkter som leveres av Altinn som påvirker hva brukerne forstår med tilgangsstyring og som bør presenteres til brukerne på en måte som er tillitsskapende og gir de en god oversikt over hvem som har tilgang til deres data\n\rSatsningsforslag\r\rBrregs satsningsforslag til regjeringen\n\rHELT er et prosjekt som skal forbedre Altinns autorisasjonsløsning. Dette omfatter å realisere forbedret autorisasjonsfunksjonalitet, forbedre brukeropplevelsen, integrere nye autorisasjonskilder og legge til rette for at autorisasjonsløsningen kan tas i bruk på nye bruksområder. Videre er det ønsket å øke skalerbarheten til autorisasjonskomponenten.\nHELT skal * gjøre det enklere å få og gi tilgang til å utføre oppgaver på vegne av en virksomhet, den man er ansatt i eller en annen. * gjøre det enklere å få og gi tilgang til datasett man har tilgang til, i forbindelse med tjenester i Altinn, men også uavhengig av disse. * Tilby forbedret autorisasjonsfunksjonalitet − spesielt for brukere som må håndtere et bredt spekter av tilganger ved hjelp av − økt automatisering med flere autorisasjonskilder, forbedrede brukergrensesnitt og API-er * Realisere en representasjonskomponent for å tilby løsninger for fullmakt for innbyggere og virksomheter * Videreutvikle og generalisere løsningene for samtykke og klientdelegering * Legge til rette for ny autorisasjonsmodell som følger av prosjektet Tjenester 3.0 * Legge til rette for å ivareta fremtidige behov for autorisasjon, blant annet ved å sikre god endringsevne\nHELT utarbeider et konsept for helhetlig tilgangsqstyring som godt kommuniserer hva Altinns autorisasjonsløsning er.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/innledning/",
	"title": "Innledning",
	"tags": [],
	"description": "Beskrivelse av de tjenester Altinn tilbyr alle tjenesteeiere og hvordan deres systemer kan integrere seg mot disse.",
	"content": " Tjenesteeiers valg av grensesnitt Flere av tjenestene tilbys med både web service– og batch-grensesnitt. Som en tommelfingerregel kan man si at skal man overføre færre enn 100 elementer (alternativt mindre enn 30 MB) kan man benytte web service grensesnitt, men for store datamengder bør batch-grensesnitt benyttes. Tommelfingerregelen er scenarioavhengig og ingen absoluttgrense. Enkelte ressurser er også tilgjengelig i Altinns REST API for tjenesteeiere. Overtid vil Webservice grensesnittet erstattes med REST Api.\nLike webservice operasjoner med forskjellige protokoller og endepunkter Alle operasjonene er tilgjengelig på to protokoller (bindings).\n Operasjoner som benytter SOAP 1.1 er kjennetegnet med navnendelsen –Basic. Operasjoner som benytter SOAP 1.2 er kjennetegnet med navnendelsen –WS. Operasjoner som benytter SOAP 1.2 og sertifikat er kjennetegnet med navnendelsen –EC.  Sertifikatet er knyttet til avgiver, slik at flere brukere kan benytte samme sertifikat. For tjenesteeiere blir EC grensesnitt autentisert ved bruk av et sertifikat og agency system brukernavn og passord.\nAEC grensesnitt benytter SOAP 1.2 og sertifikat, men krever ikke bruk av agency systemer, med brukernavn og passord. I stedet hentes Organisasjonsnummer direkte fra sertifikatet som brukes til autentisering, som så valideres opp mot registrerte tjenesteeiere.\nVersjonering av webservice operasjoner Flere av operasjonene i dette dokumentet vil kunne eksistere i flere versjoner. Dette for å være tilbakekompatibel med eventuelt eksisterende klienter. Når en endring blir gjort for en gitt operasjon opprettes det en ny operasjon med tilsvarende navn som ender med et versjonsnummer, for eksempel V2. Dette gjør at gamle klienter vil kunne fortsette å benytte gammel metode og WSDL, mens nye klienter kan (og oppfordres til) benytte nyeste metode og WSDL.\nMerk at ikke alle grensesnitt nødvendigvis vil benytte denne endelsen. Dette gjelder i de tilfeller hvor operasjonen ikke tidligere er tilgjengeliggjort og dermed ikke har noen forgjenger, for eksempel gjelder dette for mange av EC grensesnittene.\nDette dokumentet vil dokumentere den nyeste versjonen av operasjonene. For dokumentasjon av tidligere versjoner henvises det til tidligere dokumentversjoner.\nRegistrering For å kunne sende og/eller motta data til/fra Altinn må tjenesteeier registrere sitt system og motta passord som skal benyttes ved overføring(ene). Registrering gjøres ved at tjenesteeier bestiller tilgang via skjema som finnes på Brønnøysundregistrenes selvbetjeningsportal (krever innlogging). Driftsleverandør registrerer systemet basert på registrert skjema, og passord kommuniseres tilbake til tjenesteeier. System og passord brukes da som henholdsvis systemUserName og systemPassword i kall mot Altinn.\nAutentisering og autorisering Når tjenesteeier via egne systemer benytter tjenester mot Altinn blir det registrerte systemet autentisert og autorisert før det kan utføre operasjoner mot Altinn. Tjenesteeiers system må være registrert i Altinn og passord mottatt før tjenestene kan benyttes.\nVed bruk av batch grensesnitt blir tjenesteeier autentisert gjennom FTP/SFTP protokollen på vanlig vis. Eller Altinn autentiserer seg ved henting på FTP/SFTP.\nVarselsmaler Altinn har mulighet til å sende ut predefinerte varsler til sluttbrukerne når tjenesteeier sender meldinger, legger inn prefill, og ved sending av frittstående varsel. Disse varslene må være definert i Altinn før de kan benyttes av tjenesteeier.\nFor å opprette en ny varslingsmal må tjenesteeier bestille dette ved å benytte skjema som finnes på Brønnøysundregistrenes eksternnett. Her kan det velges hvilke språk (norsk, nynorsk og engelsk) og varslingsmetoder (e-post og SMS) varslesmalen skal støtte. Når varselsmalen skal benyttes i web services eller batch vil kombinasjonen av navn på varslingsmalen (NotificationType), varslingsmetode (TransportType) og språk angi hvilken tekst som sendes ut.\nVarselsmalen kan også opprettes med såkalte tokens/substitusjonsvariabler angitt ved {0}, {1} osv. som lar tjenesteeier sende inn egendefinerte tekststrenger. Disse angis i rekkefølge ved å benytte parameteren TokenValue.\nVarsel sendes basert på informasjon om konkret angitte adresser, mobiltelefonnummer og/eller e-post adresse, som sendes Altinn, eller ved å oppgi enten fødselsnummer eller organisasjonsnummer. I de to siste tilfellene vil Altinn slå opp i informasjon lagret i Altinn for å sende varsel: for fødselsnummer i brukerens kontaktinformasjon i kontakt og reservasjonsregisteret til Difi, for organisasjonsnummer i organisasjonens profilside. Profilsiden til en organisasjon vil inneholde en liste over varslingsadresser lagt inn av organisasjonen selv.\nVarselsmakroer Det er en del varslings-makroer tilgjengelig for bruk i Notification løsninger for tjenesteeier. En makro er en kort tekst som byttes ut med data fra Altinns Register. Register data blir hentet ut basert på ReporteeNumber eller ReporteeElementId koblet til en Notification.\nMakroer legges inn som en del av NotificationTemplate, men kan også leveres i en text-token. Makroer er case-sensitive.\n   Makro Beskrivelse     $reporteeFirstName$ Fornavn til Reportee   $reporteeMiddleName$ Mellomnavn til Reportee   $reporteeLastName$ Etternavn til Reportee   $reporteeName$ Fullt navn til Reportee   $reporteeNumber$ Gir organisasjonsnummer for en organisasjon, gir en tom streng ikke noe for en person.   $reporteeBirthMonth$ $reporteeBirthDay$ $reporteeBirthYear$ $reporteeBirthDay(dd/mm/yy)$ $reporteeBirthDay(yyyy-mm-dd)$ $reporteeBirthDay(yy/dd/mm)$ $reporteeBirthDay(dd.mm)$ Forskjellige utgaver av en persons fødselsdag. Dersom man bruker $reporteeBirthDay(#)$, så vil fødsels-dato avgis på formatet som er avgitt av #, med en kombinasjon av yyyy, yy, mm og dd. Så om man gir $reporteeBirthDay(yyyy-mm-dd)$ vil man for eksempel få ut 1977-11-23.   $reporteePostalCode$ $reporteePostalArea$ $reporteePostalAddress1$ $reporteePostalAddress2$ $reporteePostalAddress3$ Post-addresse data til Reportee.   $reporteeEmail$ $reporteeMobileNumber$ Telefonnavn eller Email til Reportee.   $servicename$ Tjenestenavn på ReporteeElement som er koblet til en Notification. Brukes i Prefill/Correspondence sammenheng.   $servicename SC:# SEC:#$ Gir navn på en spesifisert tjeneste. # byttes her ut med relevant ServiceCode / ServiceEditionCode.    Tjenesteutvikling og samspill med integrasjon Tjenester for innsendinger, meldinger, formidling, innsyn og samhandling etableres i tjenesteutviklingsløsningen (TUL), og benyttes i sluttbrukerløsningen (SBL), dvs. Altinn portalen og integrerte systemer (sluttbrukersystemer og systemer hos tjenesteeiere). Samspillet mellom en tjeneste i TUL og integrasjonspunkter er etablert gjennom å benytte:\n   Begrep i TUL Begrep i AltinnII Begrep i AltinnI Beskrivelse     Tjenestekode ServiceCode (noen steder også angitt som ExternalServiceCode N/A Angir tjenestekode for Altinn tjenesten, for eksempel \u0026ldquo;MT0001\u0026rdquo; (innsendingstjeneste). Alfanumerisk verdi. Oppstår i TUL. Kombinasjonen av Tjenestekode og Tjenesteutgavekode er unik i Altinn.   Tjenesteutgavekode ServiceEdition (noen steder også angitt som ServiceEditionCode eller ExternalServiceEditionCode N/A Angir utgaven på tjenestekoden, for eksempel 12311 (for tjenestekode \u0026ldquo;MT0001\u0026rdquo;). Tallverd. Oppstår i TUL. Kombinasjonen av Tjenestekode og Tjenesteutgavekode er unik i Altinn.   N/A DataFormatId Skjemanummer Angir id som metadatakilde har satt på dataenheten (skjema), for eksempel \u0026ldquo;268\u0026rdquo;. Alfanumerisk verdi. Benyttes i Skjema elementet som omkranser faktiske skjemadata (xml). Metadatakilde kan for eksempel være Oppgaveregisteret (OR). Kombinasjonen av DataFormatId og DataFormatVersion er unik.   N/A DataFormatVersion Spesifikasjonsnummer Angir versjon som metadatakilde har satt på dataenheten (skjema), for eksempel 6370. Tallverdi. Benyttes i Skjema elementet som omkranser faktiske skjemadata (xml). Metadatakilde kan for eksempel være Oppgaveregisteret (OR). Kombinasjonen av DataFormatId og DataFormatVersion er unik.   Metode for oversending ShipmentDefinition N/A Angir forsendelsesoppsett, dvs. unik alfanumerisk id som peker til informasjon om hva slags data som sendes/mottas, og hvordan det skal pakkes/settes sammen før utsending. Oppstår ved etablering av grensesnitt mellom Altinn og system som vil integrere seg med Altinn.   N/A ReporteeElementID N/A Angir den unike identifikatoren for en spesifikk tjeneste (innsendings-, meldings-, innsyns-, eller samhandlingstjeneste)   N/A CaseID N/A Angir den unike identifikatoren for en spesifikk samhandlingstjeneste, benyttes blant annet til å knytte andre tjenester opp mot samhandlingstjenesten.    "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/mappere/",
	"title": "Mappere",
	"tags": [],
	"description": "Implementasjonsguide for mapperutvikling i Altinn.",
	"content": "En mapper muliggjør integrasjon mellom Altinn og tjenesteeiersystemer.\nDenne integrasjonen vil la en skjemautvikler kunne benytte seg av et rikt etatsspesifikt datasett. Dette muliggjør dermed en stor variasjon av tjenester som ellers ikke ville kunne utvikles på Altinn-plattformen.\n\rGenerelt\r\rBeskrivelse av hva en mapper er og hvordan man går fram for å lage en\n\rTeknologi\r\rBeskrivelse av teknologiene som brukes for å lage en mapper\n\rUtvikling\r\rBeskrivelse av hvordan man utvikler\n\rTesting\r\rBeskrivelse av hvordan man tester mappere\n\rInstallasjon\r\rBeskrivelse av hvordan man lager installasjonspakker og får dem installert i test og produksjon\n\rDiverse\r\rBruk av mappere med Altinn-kontekst, REST/WCF\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/referanse-app/",
	"title": "Referanse-app",
	"tags": [],
	"description": "Altinn har tilgjengeliggjort referansekode for å gjøre det enklere å lage applikasjoner med Altinn-funksjonalitet.",
	"content": "Altinn har tilgjengeliggjort referansekode for å gjøre det enklere å lage applikasjoner med Altinn-funksjonalitet.\nReferansekoden ligger på Altinns repository på GitHub: https://github.com/Altinn/AltinnApp/\nLisensen for denne koden er type BSD 3-klausul-lisens, noe som gir et godt grunnlag for de som ønsker å tilpasse koden til den bruken de måtte ønske.\nFor å sikre at API-et som er brukt i referansekoden ikke misbrukes, krever Altinn at de som ønsker å benytte det registrerer sin applikasjon.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/",
	"title": "Regelmotor",
	"tags": [],
	"description": "Utviklingshåndbok for Altinn regelmotor. Regelmotoren er et alternativ til å utvikle logikk i C# og InfoPath.",
	"content": "Utviklingshåndbok for Altinn regelmotor. Regelmotoren er et alternativ til å utvikle skjemalogikk i C# og InfoPath.\n\rInnledning\r\rAltinns regelmotor tilbyr en alternativ måte å utføre utregning, validering og overføring av verdier mellom skjema.\n\rRegler\r\rRegelfilen bygges opp av en eller flere regler (valideringer eller overføringer). Alle reglene som støttes listes her.\n\rBetingelser\r\rBetingelser (conditions) brukes til å styre om en regel skal kjøres eller ikke. Her listes alle betingelsene som kan benyttes.\n\rUtvidede beskrivelser\r\rBruk av regelmotor for parallell signering og vedleggsfiltrering.\n\rEksempler\r\rDiverse eksempler på bruk av regelmotoren sammen med skjema.\n\rInnføring i xml\r\rHelt grunnleggende innføring i XML. Både regelfiler og skjemadata i Altinn lagres som XML.\n\rRegelmotor.xsd\r\rXML Schema Definition for Altinn regelfiler.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/regelmotor/xsd/",
	"title": "Regelmotor.xsd",
	"tags": [],
	"description": "XML Schema Definition for Altinn regelfiler.",
	"content": "XML Schema Definition for Altinn regelfiler.\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;xs:schema xmlns:xs=\u0026quot;http://www.w3.org/2001/XMLSchema\u0026quot;\u0026gt; \u0026lt;xs:element name=\u0026quot;AltinnRuleEngine\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element name=\u0026quot;Description\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:element name=\u0026quot;Configuration\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element name=\u0026quot;Forms\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element name=\u0026quot;Form\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:attribute name=\u0026quot;name\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;dataFormatId\u0026quot; type=\u0026quot;xs:integer\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;validationEngine\u0026quot; use=\u0026quot;required\u0026quot;\u0026gt; \u0026lt;xs:simpleType\u0026gt; \u0026lt;xs:restriction base=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AltinnRuleEngine\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;InfoPath\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;Both\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;None\u0026quot;/\u0026gt; \u0026lt;/xs:restriction\u0026gt; \u0026lt;/xs:simpleType\u0026gt; \u0026lt;/xs:attribute\u0026gt; \u0026lt;xs:attribute name=\u0026quot;calculationEngine\u0026quot; use=\u0026quot;required\u0026quot;\u0026gt; \u0026lt;xs:simpleType\u0026gt; \u0026lt;xs:restriction base=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AltinnRuleEngine\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;InfoPath\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;Both\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;None\u0026quot;/\u0026gt; \u0026lt;/xs:restriction\u0026gt; \u0026lt;/xs:simpleType\u0026gt; \u0026lt;/xs:attribute\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;xs:attribute name=\u0026quot;default\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:element name=\u0026quot;Codelists\u0026quot; minOccurs=\u0026quot;0\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element name=\u0026quot;Codelist\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:attribute name=\u0026quot;name\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;lang\u0026quot; type=\u0026quot;Languages\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;version\u0026quot; type=\u0026quot;xs:integer\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:element name=\u0026quot;PurgeMissingTransfers\u0026quot; minOccurs=\u0026quot;0\u0026quot;\u0026gt; \u0026lt;xs:complexType name=\u0026quot;\u0026quot;\u0026gt; \u0026lt;xs:attribute name=\u0026quot;value\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:element name=\u0026quot;Rules\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element name=\u0026quot;Rule\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element name=\u0026quot;Source\u0026quot; minOccurs=\u0026quot;0\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:attribute name=\u0026quot;form\u0026quot; type=\u0026quot;xs:integer\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;field\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;addFields\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;subtractFields\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;sumRecurringFields\u0026quot; type=\u0026quot;xs:boolean\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;multiple\u0026quot; type=\u0026quot;xs:boolean\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:element name=\u0026quot;Target\u0026quot; minOccurs=\u0026quot;0\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:attribute name=\u0026quot;form\u0026quot; type=\u0026quot;xs:integer\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;field\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;index\u0026quot; type=\u0026quot;xs:integer\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;value\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:element name=\u0026quot;Param\u0026quot; minOccurs=\u0026quot;0\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:attribute name=\u0026quot;name\u0026quot; use=\u0026quot;required\u0026quot;\u0026gt; \u0026lt;xs:simpleType\u0026gt; \u0026lt;xs:restriction base=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AlwaysRun\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;BaseRate\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;CalculationType\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;CheckCount\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;Deductible\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;DoNotIgnoreZeroValue\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IgnoreGUID\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IgnorePrefill\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IndustryTypes\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;InsertEmptyIfNotCalculated\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;MaxDeduction\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;MaxDistance\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;MinimumTollAndFerryDeduction\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;NormalRate\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;OverMaxDistanceRate\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;PercentageField\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;PercentageTransfer\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;RemoveDirtyField\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;RemoveFieldIfConditionsFail\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;RemoveOnMismatch\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;SetNillable\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;SignStorageHint\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;TransferRecurringFields\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;TransferType\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;USField\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;USField1\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;USField2\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;UtbytteFeltHS\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;UtbytteFeltUS\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;ValidationType\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;ValueType\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;XPath\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;xPathsToValidate\u0026quot;/\u0026gt; \u0026lt;/xs:restriction\u0026gt; \u0026lt;/xs:simpleType\u0026gt; \u0026lt;/xs:attribute\u0026gt; \u0026lt;xs:attribute name=\u0026quot;value\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:element name=\u0026quot;Condition\u0026quot; type=\u0026quot;Conditions\u0026quot; minOccurs=\u0026quot;0\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;/\u0026gt; \u0026lt;xs:element name=\u0026quot;ErrorTextValueFields\u0026quot; minOccurs=\u0026quot;0\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:attribute name=\u0026quot;fields\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:element name=\u0026quot;caption\u0026quot; type=\u0026quot;Texts\u0026quot; minOccurs=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;xs:element name=\u0026quot;Texts\u0026quot; type=\u0026quot;Texts\u0026quot; minOccurs=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;xs:attribute name=\u0026quot;type\u0026quot; use=\u0026quot;required\u0026quot;\u0026gt; \u0026lt;xs:simpleType\u0026gt; \u0026lt;xs:restriction base=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;CalculateRF1086\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;RemoveFieldElement\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;RemoveParentPost\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;SetFieldValue\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;SimpleValidation\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;TransferResult\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;TransferValue\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;ValidateRF1086\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:InternalRF1224Calculations\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferFromNO1ToRF1224\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferFromRF1084ToRF1030\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferFromRF1084ToRF1175\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferFromRF1125ToRF1030\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferSumFrom0402\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferSumToChildcare\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferSumToTravelDeduction\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:TransferSumToWizard\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:ValidatePost337StandardDeductionTempStay\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:ValidateRF1219TransferToWizard\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;websa:ValidateRF1224BelongsToPost0402\u0026quot;/\u0026gt; \u0026lt;/xs:restriction\u0026gt; \u0026lt;/xs:simpleType\u0026gt; \u0026lt;/xs:attribute\u0026gt; \u0026lt;xs:attribute name=\u0026quot;description\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;optional\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;xs:attribute name=\u0026quot;version\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;name\u0026quot; type=\u0026quot;xs:string\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;!-- Keys --\u0026gt; \u0026lt;xs:key name=\u0026quot;dataFormatId\u0026quot;\u0026gt; \u0026lt;xs:selector xpath=\u0026quot;Configuration/Forms/Form\u0026quot;/\u0026gt; \u0026lt;xs:field xpath=\u0026quot;@dataFormatId\u0026quot;/\u0026gt; \u0026lt;/xs:key\u0026gt; \u0026lt;xs:key name=\u0026quot;codelist\u0026quot;\u0026gt; \u0026lt;xs:selector xpath=\u0026quot;Configuration/Codelists/Codelist\u0026quot;/\u0026gt; \u0026lt;xs:field xpath=\u0026quot;@name\u0026quot;/\u0026gt; \u0026lt;/xs:key\u0026gt; \u0026lt;!-- Keyrefs --\u0026gt; \u0026lt;xs:keyref name=\u0026quot;SourceFormRef\u0026quot; refer=\u0026quot;dataFormatId\u0026quot;\u0026gt; \u0026lt;xs:selector xpath=\u0026quot;Rules/Rule/Source\u0026quot;/\u0026gt; \u0026lt;xs:field xpath=\u0026quot;@form\u0026quot;/\u0026gt; \u0026lt;/xs:keyref\u0026gt; \u0026lt;xs:keyref name=\u0026quot;TargetFormRef\u0026quot; refer=\u0026quot;dataFormatId\u0026quot;\u0026gt; \u0026lt;xs:selector xpath=\u0026quot;Rules/Rule/Target\u0026quot;/\u0026gt; \u0026lt;xs:field xpath=\u0026quot;@form\u0026quot;/\u0026gt; \u0026lt;/xs:keyref\u0026gt; \u0026lt;xs:keyref name=\u0026quot;ConditionCodelistRef\u0026quot; refer=\u0026quot;codelist\u0026quot;\u0026gt; \u0026lt;xs:selector xpath=\u0026quot;Rules/Rule/Condition\u0026quot;/\u0026gt; \u0026lt;xs:field xpath=\u0026quot;@codelist\u0026quot;/\u0026gt; \u0026lt;/xs:keyref\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;xs:simpleType name=\u0026quot;Languages\u0026quot;\u0026gt; \u0026lt;xs:restriction base=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;1033\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;1044\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;2068\u0026quot;/\u0026gt; \u0026lt;/xs:restriction\u0026gt; \u0026lt;/xs:simpleType\u0026gt; \u0026lt;xs:complexType name=\u0026quot;Texts\u0026quot;\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element name=\u0026quot;Text\u0026quot; maxOccurs=\u0026quot;3\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:simpleContent\u0026gt; \u0026lt;xs:extension base=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;xs:attribute name=\u0026quot;lang\u0026quot; type=\u0026quot;Languages\u0026quot; use=\u0026quot;required\u0026quot;/\u0026gt; \u0026lt;/xs:extension\u0026gt; \u0026lt;/xs:simpleContent\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;/xs:sequence\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;xs:complexType name=\u0026quot;Conditions\u0026quot;\u0026gt; \u0026lt;xs:attribute name=\u0026quot;type\u0026quot; use=\u0026quot;required\u0026quot;\u0026gt; \u0026lt;xs:simpleType\u0026gt; \u0026lt;xs:restriction base=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldEquals\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldExists\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldHasValue\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldHasValueIgnoreZero\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldIsEmpty\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldIsMissing\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldIsPositive\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;AnyFieldNotEquals\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;CodeExistsInCodeList\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;CodeNotInCodeList\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;ContainsAny\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;DoesNotMatchPattern\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;Equals\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;Exists\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;GreaterThan\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;HasAnyForm\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;HasForm\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;HasValue\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;HasValueIgnoreZero\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsEmpty\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsEmptyWithZeroValue\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsMissing\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsNegative\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsNonValidEmail\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsNonValidOrgNr\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsNonValidSSN\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsPositive\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsPositiveIncludingZero\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsPrefilled\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsValidOrgNr\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;IsValidSSN\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;LessThan\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;MatchPattern\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;MissingForm\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;NoneFieldHasValue\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;NotEqualAcrossMultipleForms\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;NotEquals\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;NotExists\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;NotPrefilled\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;SumEquals\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;SumNotEquals\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;SumNotEqualsWithRange\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;ValueFoundMoreThanOnceInFields\u0026quot;/\u0026gt; \u0026lt;xs:enumeration value=\u0026quot;ValueNotInCodeList\u0026quot;/\u0026gt; \u0026lt;/xs:restriction\u0026gt; \u0026lt;/xs:simpleType\u0026gt; \u0026lt;/xs:attribute\u0026gt; \u0026lt;xs:attribute name=\u0026quot;check\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;value\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;valuesourceform\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;valuefieldindex\u0026quot; type=\u0026quot;xs:integer\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;codelist\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;form\u0026quot; type=\u0026quot;xs:string\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;fieldindex\u0026quot; type=\u0026quot;xs:integer\u0026quot;/\u0026gt; \u0026lt;xs:attribute name=\u0026quot;donotignorezero\u0026quot; type=\u0026quot;xs:boolean\u0026quot;/\u0026gt; \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:schema\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/intro-slide/",
	"title": "Samtykke (slide)",
	"tags": [],
	"description": "Slide som beskriver samtykke-løsningen i Altinn.",
	"content": "\r# Samtykkeløsningen\r---\rSamtykkeløsningen i Altinn gjør det mulig at sluttbruker kan samtykke til at data om dem kan deles mellom en datakilde (tjenesteeier) og en datakonsument (den som trenger data). ___\r- Tidsbegrenset\r- Leserettighet\r- Kan trekkes / En gangs bruk\r- Oversikt\r___\r- Ble introdusert i Altinn 16.1\r- Benyttes i dag for tilgang til skattedata\r- ca 50.000 personer ga samtykke til bankene i løpet av høsten\r- Kan benyttes til en rekke scenario. ---\r## Arkitektur\r___\r- Bygger på Altinns autorisasjonsmodell\r- Enkeltrettigheter med tidsbegrensning\r- Lenktetjeneste eller innsynstjeneste\r- JSON Web Token\r___\r![](authorization-rule.png)\r---\r## Hvordan fungerer det\r___\r![](../sluttbruker/samtykkesiden/samtykkeside.png)\r___\r- Blir registrert som rettighet i Altinn\r- Generes et Access Token\r___\r### 4 arbeidsflyter\r- Selfcontained token utenfor Altinn\r- Dataflyt gjennom Altinn\r- Dataflyt utenom Altinn\r- Dataflyt utenom Altinn med reference token\r___\r![](../prosess.png)\r___\r![](consent-process-througaltinn.png)\r___\r![](consent-process-outsidealtinn.png)\r___\r![](consent-process-outsidealtinn-reference.png)\r---\r## Hva må til\r___\r### Tjenesteeier\r- Tjeneste må defineres i Altinn (Lenke eller innsynstjeneste)\r- Tjeneste må lages med samtykketekst som beskriver hva man samtykker\r- Man må definere eventuelle parametre\r- Man må definere hvem som kan be om samtykke og hvilken URL som er lovlig (SRR)\r- Man må eksponere en tjeneste for å hente data\r- Man må validere samtykke\r___\r### Datakilde\r- Typisk tjenesteeier, men kan være annen aktør som tjenesteeier har avtale med\r- Etablere grensesnitt for uthenting av data\r- Validere token\r___\r### Datakonsument\r- Etablere prosess hvor bruker blir sendt til samtykkeside med korrekt parametre\r- Motta autorisasjonskode når bruker kommer i retur\r- Veksle inn autorisasjonskode i token\r- Kalle tjeneste hos tjenesteeier for å hente ut data. ___\r### Sluttbruker\r- Logge inn på Altinn\r- Akseptere samtykke\r----\r## Grensesnitt i Altinn\r___\r- XACML Grensesnitt (Web service)\r- Token grensesnitt (REST)\r- Innsyn (REST, WebService og Web)\r- Samtykkesiden (Web)\r- Føderering (For offentlige etater)\r---\r## The End\r[Tilbake](../)\r\r\r\r\r\r\rfunction initSlides() {\rReveal.initialize({\rembedded : true,\rcontrols : \"true\", center: \"true\" ,\thistory: \"true\" ,\rprogress: \"true\" ,\rtransition: \"convex\",\rdependencies: [\r{ src: '\\/docs\\/revealjs\\/lib\\/js\\/classList.js\"', condition: function() { return !document.body.classList; } },\r{ src: '\\/docs\\/revealjs\\/plugin\\/markdown\\/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },\r{ src: '\\/docs\\/revealjs\\/plugin\\/markdown\\/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },\r{ src: '\\/docs\\/revealjs\\/plugin\\/highlight\\/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },\r{ src: '\\/docs\\/revealjs\\/plugin\\/zoom-js\\/zoom.js', async: true, condition: function() { return !!document.body.classList; } },\r{ src: '\\/docs\\/revealjs\\/plugin\\/notes\\/notes.js', async: true, condition: function() { return !!document.body.classList; } }\r]\r});\r}\r\r\rSee it fullscreen\r\rvar toto = document.getElementById('slideContent').innerHTML\rdocument.getElementById('slideFrame').contentWindow.document.write(document.getElementById('slideContent').innerHTML); document.getElementById('slideContent').remove();\rdocument.addEventListener(\"DOMContentLoaded\",function(){\rsetTimeout(function () {\rdocument.getElementById('slideFrame').contentWindow.initSlides() ;\r}, 2000);\r});\rfunction slideFullScreen() {\rdocument.open();\rdocument.write(toto);\rdocument.close();\rinitSlides()\r}\r "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakonsument/komme-i-gang/samtykkebasert-lanesoknad/",
	"title": "Samtykkebasert lånesøknad",
	"tags": [],
	"description": "Informasjon om Samtykkebasert lånesøknad",
	"content": "Bits ivaretar ansvaret for utvikling og forvaltning av Samtykkebasert lånesøknad (SBL) mot Skatteetaten og Brønnøysundregistrene og styrer også onboardingen av bankene. Bits har sendt ut et rundskriv til bankene med informasjon om SBL og hvordan man kan koble seg på løsningen.\nSkatteetaten sin dokumentasjon finnes her.\n"
},
{
	"uri": "https://altinn.github.io/docs/altinncore/slide/",
	"title": "Slide",
	"tags": [],
	"description": "En presentasjon om målsettinger og konsepter for tjenester 3.0",
	"content": " Tjenester 3.0 Status Se siste status her.\nHva er tjenester 3.0? 4 overordnede målsettinger\u0026hellip;\nModerne tjenester  Brukervennlige og effektive tjenester Responsivt design Universell utforming God ytelse og lav responstid Basert på moderne og åpne web-standarder  Effektiv tjenesteutvikling  100% selvbetjening Effektiv og automatisert testing Parallell utvikling (basert på Git) Enkel datamodellering Åpen plattform med API\u0026rsquo;er  Enkelt for fagperson, fleksibelt for utvikler  Fagpersoner benytter nettleser Utviklere kan også bruke kode-editor Kan utvides av andre systemer  Åpen kildekode, cross-platform  Basert på åpen kildekode Deles som åpen kildekode Alle kan gjenbruke, og bidra til forbedringer Raskere videreutvikling Støtter Windows, macOS og Linux  Konsepter 6 konsepter\u0026hellip;\nGit som back-end  Alt som utvikles får full versjonshistorikk Enkel og rask deploy Ekte distribuert og parallell utvikling Back-end både for nettleser og kode-editor Git støttes av veldig mange verktøy  Nærhet til web-teknologi  Alt er basert på standard web-teknologi Verktøy blir aldri \u0026ldquo;i veien\u0026rdquo; eller utdatert Standard utviklerkompetanse Ingen proprietære verktøy som må læres  Effektiv testing  Støtte for automatisert testing Behøver ikke migrere for å få reell test Gjenbruker gjennomtestede komponenter Endringer i plattform gjøres kun ett sted  Enkelt å tilpasse  Alle deler av løsningen skal kunne \u0026ldquo;byttes ut\u0026rdquo; Kan utvides med egne widgets, maler, stilark, etc. Gjenbruk og overstyrbare defaults på alle nivåer API\u0026rsquo;er og Git som back-end gjør det enkelt å integrere andre systemer  Åpen kildekode  Tjenester 3.0 skal være åpen kildekode Vi skal benytte programvare med fri lisensiering, type MIT, Apache 2 eller BSD Vi skal bidra tilbake til prosjekter som vi benytter Ingen lisensutgifter  Cross-platform  Kan kjøre på både Windows, Linux og macOS Unngår låsing mot en enkelt plattform Kan kjøre lokalt på en laptop Muliggjør distribuert lokal utvikling og testing  Motivasjon Se Archimate arkitekturmodell.\nThe End Tilbake\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/betaling/sp%C3%B8rsm%C3%A5l-og-svar/",
	"title": "Spørsmål og svar om Betaling",
	"tags": [],
	"description": "Ofte stilte spørsmål om Betaling",
	"content": " Kan man benytte benytte Altinns betalingsløsning med Vipps?\n Ja. Men det er utfordringer med noen browsere på mobil som Vipps jobber med å rette.  Hva er fordelen med å bruke Altinn sin løsning ifht å bygge fra bunnen selv?\n Altinn sin løsning er velprøvd mot de 3 største betalingsleverandørene og fungerer rett ut av boksen.  Kan betalingsløsning brukes utenom Altinns portal?\n Ja, betaling kan brukes via Altinns REST-API: https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/api/diverse/betaling/    "
},
{
	"uri": "https://altinn.github.io/docs/guides/digital-post-til-virksomheter/sp%C3%B8rsm%C3%A5l-og-svar/",
	"title": "Spørsmål og svar om DPV",
	"tags": [],
	"description": "Ofte stilte spørsmål om DPV",
	"content": " Kan man benytte de generelle meldingstjenestene til å sende Meldinger til privatpersoner?\n Ja. Men vær OBS på vurderinger mht at privatpersoner i utgangspunktet skal ha sin post i DPI  Hvordan kan jeg benytte Altinn til å sende både til virksomheter og privatpersoner?\n Du kan benytt de samme meldingstjeneste som for DPV, men må angi personnr som mottager.  Hva med DPI?\n Hvis du benytter Difis IP (Integrasjonspunkt) til å integrere ditt IKT system til Altinn DPV, vil IP automatisk rute post til virksomheter og privatpersoner (DPV og DPI). Hvis du benytter Altinns API direkte, kan du benytte Altinns Videresendingsfunksjonalitet, som videresender Post til DPI. Det er det samme grensesnittet som benyttes for DPV, men parameterstyrt. Se dokumentasjon på \u0026ldquo;Videresending av Post til Innbygger via Altinn\u0026rdquo; Kommuner som benytter SvarUt ruter automatisk post til virksomheter og privatpersoner (DPV og DPI) Å sende Post til DPI forutsetter uansett at Avsender har avtale med Difi om bruk av DPI  Hvis man bruker KS SvarUt, trenger man da egen avtale om bruk av Altinn DPV?\n Ja, hvis de er en offentlig etat (kommunene er unntatt) og bruker KS SvarUt, så må de uansett ha en DPV avtale med oss. Nei, hvis de er en kommune. Det er en egen avtale mellom Altinn og KS som håndterer dette for kommuner i Norge   "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/",
	"title": "Tjenester 3.0",
	"tags": [],
	"description": "Dette er dokumentasjon for tjenester 3.0, neste generasjon av offentlige tjenester.",
	"content": "Tjenester 3.0 er prosjektet som skal levere neste generasjon Altinn tjenester.\nDu kan lese mer om Altinn Studio her: https://www.altinndigital.no/studio/.\n\rMålsettinger\r\rOverordnede målsettinger for 3.0.\n\rStatus\r\rStatus på arbeidet med 3.0.\n\rSatsingsforslag 2018\r\rKort oppsummering av satsingsforslag for 2018.\n\rArkitektur\r\rBeskrivelse av arkitekturen til 3.0.\n\rFAQ\r\rOfte stilte spørsmål med svar.\n\rSlide\r\rEn presentasjon om målsettinger og konsepter for tjenester 3.0\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/",
	"title": "Tjenestetyper",
	"tags": [],
	"description": "Beskrivelse av de ulike tjenestetypene i Altinn og hvordan man oppretter og utvikler dem.",
	"content": "Beskrivelse av de ulike tjenestetypene i Altinn og hvordan man oppretter og utvikler dem.\n\rNy tjeneste og utgave\r\rHvordan opprette nye tjenester og utgaver.\n\r\r\rFelles\r\rFunksjonalitet som er felles for alle eller flere av tjenestetypene.\n\r\r\rFormidling\r\rFormidlingstjenesten bruker Altinn til å overføre (store) filer fra en avsender til en eller flere mottakere.\n\r\r\rInnsending\r\rInnendingstjenester brukes til å sende data fra Sluttbrukerløsningen eller fra sluttbrukersystemer til en etat/tjenesteeier.\n\r\rBetaling\r\rAltinn kan tilby tjenesteeiere å gjennomføre betaling på innsendingstjenester.\n\rMaster\r\rMastertjenester er innsendingstjenester som utvikles med tanke på å at de skal bli delt av flere tjenesteeiere.\n\rVedleggstyper\r\rEn vedleggstype kan du bruke til å definere et sett med vilkår som må følges for å laste opp filvedlegg.\n\r\rInnsyn\r\rInnsynstjenester brukes til å hente data ved å kalle en eller flere web services.\n\r\r\rLenke\r\rEn lenketjeneste er en lenke fra Altinn til en tjeneste som ligger hos tjenesteeieren.\n\r\r\rMelding\r\rMeldingstjenester definerer meldinger som kan sendes fra tjenesteeier til bruker.\n\r\r\rSamhandling\r\rEn samhandlingstjeneste grupperer enkelttjenester og presentere dem for sluttbruker i en prosess.\n\r\r\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/",
	"title": "eBevis",
	"tags": [],
	"description": "Veiledning for bruk av eBevis (tidligere Nasjonal tjeneste for dokumentasjonsbevis - NADOBE)",
	"content": " Dette er dokumentasjon under arbeid for eBevis-tjenesten som per i dag ikke er produksjonssatt\n\rInnledning eBevis er en tjeneste som er laget for å kunne forenkle utveksling av informasjon mellom leverandører og det offentlige. Formålet er å gjenbruke informasjon som det offentlige allerede er i besittelse av. Ved hjelp av samtykkeløsningen i Altinn eller via hjemmel, vil informasjonen kunne hentes direkte fra datakilden.\nTjenesten er utviklet som en skytjeneste og styrer oppdragsgiveres tilgang til offentlige registre. Det produseres en bevispakke, som er en sammenstilling av informasjon fra datakildene. Denne bevispakken sendes videre til oppdragsgivers fagsystem.\nTjenesten er generisk og vil kunne brukes på ulike forretningsområder, med nye tilknyttede registre og nye brukergrupper. eBevis er en dataflytkomponent i Altinns \u0026ldquo;Platform of platforms\u0026rdquo;-konsept, og er dermed en løsning som ikke kjører på Altinn-plattformen.\neBevisprodukter  Nasjonal tjeneste for dokumentasjonsbevis: Generisk tjeneste; Lager eBevis-pakken som sendes til oppdragsgivers system Aksesspunkt / Grensesnitt for tjenesteleverandører Brukergrensesnitt i Altinn for leverandører: Holde oversikt over samtykker, se hvilke bevis som har blitt hentet inn av hvilken offentlig instans, og sjekke hvilke opplysninger som finnes om sin virksomhet EHF (elektronisk handelsformat) for dokumentasjonsbevis: Standardformat – for å sikre en sømløs digital informasjonsflyt mellom systemløsninger Selve beviset: Data innsamlet fra de ulike datakildene   eBevis Arkitektur   Beviskilder og beviskoder Løsningen baseres på at en oppdragsgiver kan sende forespørsler på én eller flere beviskoder. Beviskoder er en betegnelse for en informasjonspakke som kan inneholde ett eller flere felter med strukturert eller ustrukturert informasjon. Forespørsler inneholder 1) hvem som spør, 2) hvem forespørselen gjelder, og 3) hvilke beviskoder spørres det om.\nPer april 2019 har løsningen to beviskilder, Brønnøysundregistrene og Skatteetaten, med følgende registre: - Enhetsregisteret/foretaksregisteret (Brønnøysundregistrene) - Konkursregisteret (Brønnøysundregistrene) - Regnskapsregisteret (Brønnøysundregistrene) - Skatt og merverdiavgift (Skatteetaten) Her er det definerte datasett, med innhold som eksempelvis firmaattest, årsregnskap, restanser på skatt og merverdiavgift, og informasjon om eventuell konkurs. Flere datakilder er planlagt i tiden fremover.\nHjemmel og samtykke Det oppstår ofte juridiske spørsmål vedrørende innhenting av åpne og ikke-åpne data fra ulike datakilder. Ved hjelp av hjemmel eller Altinns samtykkeløsning vil løsningen også kunne høste og avgi ikke-åpne data.\nBeviskoder kan representere informasjon fra èn eller flere offentlige registre, som kan ha ulik grad av tilgjengelighet. Noen beviskoder kan være utelukkende hjemmelsbasert, og hjemmelsgrunnlag må da sannsynliggjøres. Det gjøres gjennom et vedlegg i forespørselen eller utfra identiteten til den som utfører forespørselen. Hjemmelsgrunnlag vil for enkelte beviskoder være ulikt før og etter kontraktsinngåelse, så enkelte beviskoder vil kunne innhentes med hjemmel “pre-award”, men kreve samtykke for “post-award”.\nAndre beviskoder vil kunne kreve et samtykke. eBevis vil da igangsette en samtykkeprosess i Altinn. En representant fra virksomheten, med tilstrekkelig tilgangsnivå, må logge seg inn i Altinn-portalen og innvilge et aktivt samtykke. Tilgangsnivået styres ut fra roller fra Enhetsregisteret, og eventuelt delegerte roller i Altinn.\nAutorisasjon Altinns autorisasjonsløsning benyttes for tilgangskontroll. De oppdragsgiverne med tilstrekkelig tilgangsnivå får tilgang på løsningen via sitt virksomhetssertifikat og tildelte API-nøkler. Oppdragsgiver sender en autorisasjonsforespørsel til REST-APIet, med informasjon om hvilken virksomhet man spør om og hvilke beviskoder det gjelder. Dersom eksempelvis organisasjonsnummer x, y og z skal ha tilgang, vil autorisasjonsløsningen sjekke om virksomheten som nå forespør bruk av løsningen har rettighet til å utføre den spesifiserte operasjonen.\nAltinns autorisasjonsløsning benyttes også mot leverandørene. Dersom samtykke trengs og en forespørsel er sendt til virksomhetens innboks, vil kun personer med tilstrekkelig tilgangsnivå ha mulighet til å gi samtykke på vegne av virksomheten.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-2/",
	"title": "18.2",
	"tags": [],
	"description": "Diverse forbedringer relatert til skattemeldingen.",
	"content": " Endringer i webSA Årsrevisjon (9811) Hvert år gjøres det oppdateringer og endringer i RF-1030 (skattemeldingen/webSA), f.eks. nye poster, endring i eksisterende poster, sletting av utgåtte poster. Disse oppdateringene gjøres i RF-1030 datamodellen, som tas inn i nye utgaver av tjenestene \u0026ldquo;RF-1030PSA\u0026rdquo; og \u0026ldquo;RF-1030PSAN\u0026rdquo;. I tillegg oppdateres en rekke tekster og det gjøres også endringer på bl.a. overførings- og valideringsregler.\nEndringer knyttet til årsrevisjon  Rekkelfølge på felter i XSD (8067) Overførigsregler knyttet til Saldogruppe C er oppdatert (8411) Overstyring av tekster - webSA 2018 (14578) Obligatorisk felt i XSD og fjerne regler i regelfil (8057) Lenke til ELSA oppdateres (8115) Arvet bolig (8065) Endre valideringstekst - Val_54, Val_21, Val_58 og Val_59 (15592)  Ny skatteberegningsmodul (8117) Tidligere tjeneste for skatteberegning var en COBOL-modul som måtte vedlikeholdes hvert år ifm årsrevisjon. Det er nå implementert støtte for ny og mer moderne tjeneste for skatteberegning som er utviklet av Skatteetaten, og gammel modul fjernes derfor.\nEndringer i skattemeldings-menyen Det er åpnet for at brukere som kommer til skattemeldingen fra skattetaten.no skal få mulighet til å se lenken \u0026ldquo;til innboks\u0026rdquo; i menyen. Denne lenken har tidligere vært skjult for disse brukerne. Lenken Se informasjon om hvordan skattepengene brukes fjernes fra menyen, da siden som lenkes til ikke lenger vedlikeholdes. I tillegg blir meldingen RF-1088 synlig under \u0026ldquo;Årets skattedokumenter\u0026rdquo;, og lenke til meldiger under \u0026ldquo;Årets skattedokumenter\u0026rdquo; er oppdatert til å peke på ny meldingsvisning.\n Årets skattedokumenter (13539) Tilgang til skattemeldingen til skatteetaten.no (15852) Fjerne lenke \u0026ldquo;Se informasjon om hvordan skattepengene brukes\u0026rdquo; (16972)  Tekstendringer Det er gjort noen tekstendringer i løsningen for å forbedre brukskvalitet, bl.a. på hjelpesidene til webSA.\n Opplasting av fil og feilmelding (8113) Hjelpedokument del 1 og 2 (14841) RF-1030 PSA/PSAN - Tekstendring på nynorsk \u0026ldquo;Eigarpart\u0026rdquo; bør endres til \u0026ldquo;eigardel\u0026rdquo; (8091) RF-1030 PSAN m/RF-1175 - RF-1175 Mangler lenke i hjelpetekster til postene 7080 og 7099 (8081) Utrekk av siste webSA tekster (8095) Visning av hjelpetekst mangler (13404)  Diverse endringer i webSA-løsningen Det er flere mindre endringer i webSA-løsningen, både i portalen og på selve tjenesten. Bl.a. er \u0026ldquo;forenklet signeringsvisning\u0026rdquo; tatt bort som valg for RF-1030PSA i TUL. Øvrige endringer i selve tjenesten er primært i metadata. Blant endringer i webSA-løsningen i portal er flere sider oppdatert og regler i regelmotor som er spesifikke for webSA er oppdatert.\n RF-1030 - PSAN - KS/ANS, felles bedrift med ektefelle: Felt i RF-1219 skal være låst til poster i Skattemeldingen (8051) RF-1030 - PSAN - KS/ANS, felles bedrift med ektefelle: Felt i RF-1125 \u0026ldquo;Bruk av bil\u0026rdquo; skal være låst til poster i Skattemeldingen (8053) RF-1030 PSAN Endring vedrørende poster med overføring fra RF-1177 Landbruk. (8055) RF-1030 PSA/PSAN Post 2.2.3 Pensjon fra annen EØS-stat\u0026hellip; - Fra dato/Til dato må endre rekkefølge i regnearket (8071) Uttrekk av Hjelpetekst i RF-1175 webSA (8077) Svalbard US via RF-1175 fordeling? (8083) PSA - visning av signeringssteg (8093) RF-1030 Post 3.2.8. Reise mellom hjem og fast arbeidssted (8099) RF-1030 med næringsrapport skatt (8109) RF-1030 PSAN under start tjeneste mangler RF-nr for næringsrapport skatt (8123) RF-1030 . PSA/PSAN - Endring av maksgrense for fradrag for reise mellom hjem og arbeid/besøksreiser, post 3.2.8/3.2.9 (8127) Fjern valget \u0026ldquo;Tillat at virksomhetsbrukere kan benytte tjenesten\u0026rdquo; (8129) RF-1030 - PSA/PSAN - Feil overføring av beløpet null fra post 3.2.8/3.2.9 til nivå 2 og overstryking av prefill på nivå 1 (8131) Validering for NRS sammen med andre Næringsoppgaver/modus (8143) Dersom andre signerer for deg, synes ikke dette. (8374) Endring av regel VO_349 (8376) TJ05 - Næringsoppgave 1 og familiebarnehage - webSA (8391) Nedtrekksliste på post 3.1 / 4.1 / 4.5 - endre rekkefølge (8399) Ny ordning for skattefavorisert individuell sparing til pensjon (10974) Datovalidering på felt (11137) Tillate innsending fra SBS for orid 37266 (11491) Slette felt fra HTML (12156) Dynamikk i portal - SFU (12350) Oppdatering av design på post 3.2.10 Foreldrefradrag (kostnader til barnehage mv.) (12518) påkrevde felt i webSA (12733) Endre format på 1000 skille for engelsk - html (13070) Oppdatering av VAL_64 (13074) Ny ordning for Skattefavorisert individuell pensjonsordning i en annen EØS-stat (13234) VO endring for RF-1098 (13244) Oppdatert betingelse på overføring fra RF-1177 (13363) Justering av nettleservindu som åpnes via lenker (13371) Post 3.3.5 Dato for oppstart av pensjonsordningen i EØS-staten - Visning (13394) Fjering av custom signering og kvitteringssider for PSA og PSAN (13859) Popup til orid 37375 - skattebegrensning § 17-4 (14118)  Rettinger av feil som er funnet i tidligere releaser Flere feil som har blitt oppdaget i løsningen i tidligere releaser har blitt rettet. Disse omfatter endringer i både sider i webSA-løsningen og i metadata på tjenesten.\n RF-1030 PSAN m/1175, Opplysninger henger igjen i 9910 generelle oppl. når vi lager ny kopi og endrer (8047) RF-1030 PSA og PSAN Post 3.2.13 Særskilt fradrag for sjøfolk. Ikke mulig å lese hjelpetekst til posten dersom denne ikke er pre utfylt (8049) RF-1030 PSAN alle modus Feil tekst på VOI-siden (8059) RF-1030 PSAN Post 2.7.3 (orid 21704) mangler i nedtrekkslista under sumpost 2.7 (8061) Feil tekst på kvitteringssiden RF-1030 PSAN og Nynorsk og Engelsk versjon av PSA (8069) RF-1030 - PSAN m/RF-1175: Navnet på RF-1224 vises på bokmål i html med engelsk som språkvalg (8105) RF-1030 PSA/PSAN post 4.6.1 Fast eiendom i utlandet html - Kjøpsdato vises i feil format bokmål/nynorsk/engelsk (8073) RF-1030 PSA/PSAN Innlagte verdier i boligpostene mangler tusenskille i html. (8075) RF-1030 PSA og PSAN, post 2.1.9 og 2.1.2, Beløp mangler tusenskille og er venstrestilt (8119) RF-1030 PSA/PSAN - Post 3.5.1 Særfradrag for enslige forsørgere vises ikke på print (8137) WebSAMenuAvailableDate og feilmeldinger (8133) Tekst forsvinner på 1175 fordelingssiden (1250) orid 36583 skal ikke være synlig ved legg til (8373) Utbedre feil lenking - delegert rettighet og komplett innsending fra SBS (1273) Sjekkbokser er redigerbare på 4.3.2 bolig og Boenhet i boligselskap (1433) Redigerbare prefill felt blir slettet (8139) Håndtering av prefiks 00/+ for landkode på varslingsinfo fra Kofuvi (17048)  Plattformendringer Kan ikke printe WebSA dersom mer enn 50 underskjema (9044) Det ligger en begrensning inne på signerings- og kvitteringssiden som gjør at man ikke kan \u0026ldquo;Print all\u0026rdquo; hovedskjema og underskjema dersom bruker har fler enn 50 underskjema. Det er unødvendig at WebSA er omfattet av denne begrendningen, da WebSA bruker en egen print-visning som uansett ikke tillatter at PDF for alle underskjema genereres på en gang. Derfor unntas WebSA (PSA/PSAN) fra denne begrensingen.\nDobbelt kommategn i utskriften til RF1030 i navnet på RF-skjema i tjenesteeiers arkiv (8085) Basert på en feil relatert til WebSA print-visning fra tjenesteeiers arkiv som ble oppdaget i en tidligere release. I tilfeller der underskjema har presentasjonsfelter vises lenke til underskjema i print-visning med dobbelt kommategn foran presentasjonsfeltet.\nTilbake til innboks fra PSA arkiv print (8107) Når PSA bruker går til kvitteringssiden fra arkiv, vises lenke øverst i venstre hjørne som \u0026ldquo;Tilbake\u0026rdquo; og sender bruker til PSA-menyen. Dette er endret sånn at lenke viser \u0026ldquo;Til innboks\u0026rdquo; og bruker kommer tilbake til innboksen. Dette gjelder også når bruker er på kvitteringssiden etter å ha sendt inn PSA. Når bruker kommer til kvitterinssiden via \u0026ldquo;Årets skattedokumenter\u0026rdquo; på PSA-menyen viser lenke \u0026ldquo;Tilbake\u0026rdquo; og går til PSA-menyen som før.\nSvakhet i regelmotor (8121) Det er en svakhet i regelmotoren når man overfører repeterende poster/felter , med \u0026lt;Param name=\u0026quot;TransferRecurringFields\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; Når dette gjøres henter koden ut verdien i feltet som et tall. Dersom den faktiske verdien i feltet ikke er et tall (som oppstår i noen tilfeller for WebSA) så blir tallverdien 0. Altså overføres verdien 0 i stedet for den faktiske verdien i feltet.\nDette løses ved å oppdatere metoden i regelmotoren for overføring av repeterende felter, TransferRecurringFields slik at den også håndtererå kunne overføre string-verdier. Dette er gjort ved å innføre en ny parameter StringTransfer som settes opp på de aktuelle overføringsreglene i regelfil. På den måten unngår man i så stor grad som mulig å berøre eksisterende regler som bruker \u0026ldquo;TransferRecurringFields\u0026rdquo;.\nSkatteetaten eller Skattedirektoratet (8135) Når Skatteetaten som tjenesteeier sender meldinger blir MessageSender satt til \u0026ldquo;Skattedirektoratet\u0026rdquo;. Dette er fordi det er beskrivelses-feltet fra tjenesteeiertabellen som brukes, og dette står som \u0026ldquo;Skattedirektoratet\u0026rdquo; i alle miljøer (bortsett fra utviklingsmiljø). Det er opprettet databasescript for å oppdatere dette til \u0026ldquo;Skatteetaten\u0026rdquo;.\nNy avgivertype i TUL (14767) Det er innført nytt avgiverkrav i TUL, \u0026ldquo;Konkursbo og juridisk enhet\u0026rdquo;. SBL er oppdatert til å håndtere det nye avgiverkravet.\nEndring decision point (14809) I sammenheng med 18.1 ble muligheten til å sperre (deny) tilgang til et element fjernet. For å ferdigstille denne endringen, og forbedre ytelsen i Altinn, så har vi nå fjernet noen unødvendige kall til databasen.\nInnføre SoftDueDate for RF-1088K (16171) Tjenesten RF-1088K legges inn i listen over tjenester som benytter soft due date funksjonaliteten som ble innført i 17.3.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2019/19-2/",
	"title": "19.2",
	"tags": [],
	"description": "Endringer i webSa, utvidet samtykketoken, mindre forbedringer og feilrettinger",
	"content": " Endringer i skattemeldingen Generelt om årets revisjon av skattemeldingen i Altinn Hvert år gjøres det oppdateringer og endringer i RF-1030 (skattemeldingen), f.eks. nye poster og underskjema, endring i eksisterende poster, sletting av utgåtte poster og underskjema. Disse oppdateringene gjøres i RF-1030 datamodellen, som tas inn i nye utgaver av tjenestene “RF-1030PSA” og “RF-1030PSAN”. I tillegg oppdateres en rekke tekster og det gjøres også endringer på bl.a. overførings- og valideringsregler. Nyheter om skattemeldingen vil fremover bli publisere på skatteetaten.no.\nSammendrag på signeringsside for Skattemelding for formue- og inntektsskatt – personlig næringsdrivende mv Tidligere endringer har resulterte i en uheldig visning av signeringssiden på Skattemelding for formue- og inntektsskatt – personlig næringsdrivende mv. Dette er nå utbedret, dersom bruker sender med underskjema som hadde egendefinerte signeringssider (f.eks RF-1175).\nStart skatteberegning i skattemeldingen Det er nå mulig å starte skatteberegning fra kvitteringssiden for Skattemelding for formue- og inntektsskatt - lønnstakere og pensjonister mv.\nSkattemelding for formue- og inntektsskatt – personlig næringsdrivende mv. og rød markering etter frist Næringsdrivende sender inn Skattemelding for formue- og inntektsskatt – personlig næringsdrivende mv. etter frist selv om denne tidligere har blitt sendt inn. Det er da i utgangspunktet ikke behov for ny innsending, med mindre det er nye endringer. Dette skjer spesielt med brukere som sender inn via SBS. I dag blir Skattemelding for formue- og inntektsskatt – personlig næringsdrivende mv. markert som rød i innboks dersom fristen har gått ut. Det er lagt inn kode som fjerner DueDate når fristen er utløpt for et element. DueDate fjernes hvis det allerede finnes en annen arkivert instans av samme tjenestetype. Fjerningen av duedate skjer når brukeren går til Innboksen. Rødmarkering vil nå ikke vises dersom tjenesten allerede er sendt til arkivet.\nEndringer i Portal Legge til vedlegg fra signeringssiden Når man fra signering og innsendingssiden trykker “Tilbake til utfylling” er tanken at alle vedlegg som har blitt lagt til under signeringssiden ikke lenger skal være synlig. En feil gjorde imidlertid at vedleggene var synlig for brukeren. Dette er nå rettet.\nHovedenheten er ikke lenger klikkbar i lite aktørvalg hvis man bare har tilgang til underenhet Tidligere var det mulig å klikke på hovedenheten som man ikke hadde tilgang til, noe som medførte at man kom til en side med en 403 feilmelding. Denne endringen fjernet muligheten for å klikke på en hovedenhet som man ikke har tilgang til via den lille avgiverlisten (i header). Dette gjør at aktørlisten i header har lik oppførsel som i den store aktørlisten.\nEndringer i REST API Individuelle skjema i PDF Tidligere lagret Altinn hele skjemasett i PDF formatet. Nå er de separert ut slik at man eksempelvis kan hente ned kun ett underskjema.\nAndre endringer Utvidet samtykketoken til å innholde informasjon om hvem som henter data (HandledBy) I en normal dialog hvor samtykke brukes for å hente data fra en datakilde så består denne av 3 parter:\n Den som gir samtykke (offeredBy) Den som får samtykke og som trenger data, datakonsumenten (coveredBy) Den som sitter på data som skal utveksles, datakilden  I noen tilfeller så er det mest hensiktsmessig at uthenting av data fra datakilden gjøres av en fjerde aktør som kan behandle samtykket på vegne av mottaker (datahåndterer). Dette kan f eks være i tilfelle hvor datakilden ikke har mulighet/ønske om å forholde seg til mange datakonsumenter. Datahåndterer vil da ha ansvar for at data kun formidles videre til datakonsument når det foreligger et gyldig samtykke i altinn. I token angis den som opptrer som datahåndterer som «HandledBy», se her for mer informasjon.\nUtsending av varsel til organisasjoner vil kreve tjenesteinformasjon for å sende varsel til personer rundt organisasjonen Dette er en endring i logikken som identifiserer de som skal ha varsel når tjenesteeier ønsker å sende varsel til en organisasjon. Endringen innebærer at de som har registrert personlig kontaktinformasjon for virksomheten ikke vil bli sendt varsel hvis tjenesteeier ikke oppgir tjenesteinformasjon: ServiceCode og ServiceEdition. Tjenesteinformasjonen brukes til å autorisere hver enkelt person slik at det kun er de med leserettigheter på tjenesten som får varsel. Hvis det ikke blir oppgitt noe tjenesteinformasjon kan ikke Altinn autorisere tilgang og derfor heller ikke sende varsel. I praksis gjelder denne endringen kun tjenesten for å sende uavhengig varsel SendStandAloneNotification. De andre tjenestene med varsel mekanismer har tjenesteinformasjon som obligatorisk input. I tidligere versjoner ville alle bli varslet.\nMaskering av fødselsnummer i kvitteringer og varsler sendt pr e-post og SMS Samtlige meldinger som blir sendt fra løsningen blir nå scannet for fødselsnummer og de siste fem sifrene sladdes før SMS eller e-post sendes ut.\nBetinget lagring av meldinger i tjenesteeiers arkiv Når en tjenesteeier sender inn en melding vil denne ikke lenger legges inn i tjenesteeiers arkiv hvis lagringsperioden for Tjenesteeiers arkiv er satt til 0 i TUL.\nFeilrettinger Avgiverliste for inaktive enheter fungerte ikke for underenheter via REST Det var en feil når man ønsket å hente ut avgiverlisten via REST der man ikke ønsket å se inaktive enheter. Inaktive underenheter ble da ikke filtrert riktig. Dette er nå rettet slik at også underenheter blir filtrert korrekt.\nHjelp på signeringssiden fungerte ikke Man fikk bare en feilmelding når det ble trykket på \u0026ldquo;Hjelp\u0026rdquo; knappen/lenken som kommer opp på signeringssiden. Dette er nå rettet.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2018/18-1/",
	"title": "18.1",
	"tags": [],
	"description": "Del tilgang, slette delegeringer på instans-nivå, diverse bugfix ...",
	"content": " Portal Del og gi tilgang Skjema under utfylling og meldinger med sensitivt innhold kan ikke videresendes på epost fra Altinn til en ekstern mottaker. Disse må istedet deles med å sende en lenke til skjema/meldingen som ligger i Altinn og som mottaker da må få tilgang til og logge på for å se.  Lenke til \u0026#34;Del og gi tilgang\u0026#34;    Velg hvem som skal motta varsel   Hvis du har delegerbare rettigheter på den instans du ønsker å dele kan du dele skjemaet med andre som ikke allerede har tilgang til det  Legg til ny person   Det er mulig å skrive personlig melding til den som mottar epost-varsle. Denne er begrenset til 5000 tegn  Skriv en personlig melding   Hva som er delt med hvem vil vises i Altinn slik at det er enklere for evt flere å se hva som er delt. Det er kun den som sender/mottar meldingen som ser teksten som ble utformet.  Se hva som er sendt i meldingsboksen   Det spores også i aktivitetsloggen hva som er delegert og videresendt.\nSe og slette delegeringer gjort til andre og meg selv på instans-nivå Det er nå lettere å se hvem som har fått delegert tilgang på enkeltinstanser av skjema og meldinger. Alle kan slette delegeringer gjort til seg selv og tilgangstyrer har også mulighet for å slette delegeringer som er gjort på andre på instansnivå som er gjort til andre under \u0026ldquo;andre med rettigheter\u0026rdquo; i profil. Det blir ikke anledning til å slette delegeringer gjort i forbindelse med paralellsignering.\n Se/slett delegeringer på skjema-instans nivå   Bedre løsning for oppdatering av varslingsadresser i Altinn for regnskapsfører og revisor Det er nå mulig via klientdelegeringsfunksjonalitet å oppdatere kontaktinformasjon for revisor eller regnskapsfører som får tildelt en klientdelegeringsrolle. Løsningen støtter å laste opp en fil som inneholder informasjon om rolle, klient og hvem som er mottaker av rollen. Samme fil kan brukes til å settes epost og telefonnr slik at man kan bruke funksjonaliteten til å sette kontaktinformasjon på brukerne for en gitt klient. Det skal være mulig å sette nye adresser eller endre adresser. Filen man laster ned med rolleoversikt inneholder epost og sms satt for bruker/klient. Dette gir en oversikt over kontaktadressene for sine ansatte/klienter.\nAndre mindre forbedringer av innboks  Vise hele tittel i meldingsboks (14038) Endret tilbakemelding ved bestilling av kodebrev (13557) Bedre løsning for oppdatering av varslingsadresser i Altinn for regnskapsfører og revisor (12503) Meldinger som er lest og/eller bekreftede meldinger ut av gruppen haster i innboksen (15063)  Melding med frist uten bekreftelse skal forsvinne fra listen haster i innboksen når den er lest. Meldng med bekreftelse og frist skal forsvinne fra gruppen haster i innboksen når den er bekreftet mottatt. Det betyr at det ikke er tilstrekkelig at disse bare er lest.  For brukere med mange meldinger i innboks er det nå mulighet for å sortere på leste elementer i avansert søk (14951)   Filtrer på meldinger som er åpnet i avansert søk   Diverse bugfix  Mangler oversettelse i avansert innstillinger når pålogget med nivå 1 (12197) Firmanavn beskjæres i aktivitetesloggen (12687) Korrigere lenke som peker henviser til aktørvalg når man kommer til tom boks (13240) Gi bedre feilmelding når bruker forsøker å vidresende melding med for stort innhold (13488) Lange utskrifter knuttes og kun første side blir med (printfunksjon i IE, Edge og firefox) (13533) AdvancedSearch - for 14\u0026rdquo; screen or less button is misplaced (13655) Videresend: Lenke til element i epost tar ikke brukeren til elementet (13734) Stort Aktørvalg: Lagt til funksjon som starter søk automatisk når siden lastes med tekst i søkefeltet (13816) Økt innrykk for underenheter i liste over aktører som vises i søk på tvers slik at det er enklere å se at de tilhører hovedenhet over (13998) Aktørvalg: inaktivere sjekkbokser for underenhet/sletta enheter når bruker starter å skrive noe i søkefelet (14077) Korrigert tekst for når samtykke (fjernet sekunder og oppdatert tekst) (14091) Vsert ansatt listes opp med rettighet på klient uten at det er tilfelle (usikker) (14260) Feil med paralellsignering HELFO-04 (etter 17.2 deploy?) (usikker) (14387) Lange navn i rettighetsknapper får scrollbar (14451) Ved valg av \u0026ldquo;alle, inkludert underenheter\u0026rdquo; i søk på tvers skjules aktørlisten (14418) Samtykke: manglende sjekk for unicode script tags (usikker) (14641) Økt innrykk for underenheter i liste over aktører som vises i søk på tvers slik at det er enklere å se at de tilhører hovedenhet over (13998) Ved valget \u0026ldquo;alle, inkludert underhenther\u0026rdquo; i søk på tvers skal aktørlisten skjules (14418) Sjekk for metadataparametre til samtykke (usikker) (14641) Archive - link to \u0026ldquo;chosen the right party\u0026rdquo; is linking to loginpage not select reportee (14691) Validring av valgt avgiver for søk på tvers (14720) Forbedret visning av knapp i avansert søk (14958) Fjernet overflødig lenke til utskriftsversjon fra visning av correspondence på egen url (15050) Enkeltrettigheter til virksomheter med virksomhetsbruker skal vises (den vises ikke) (15871) Endret timeout fra 5 til 15 minutter samt optimalisert GetRolesForDownload. Denne funksjon blir benyttet ved nedlasting av fil med klientdelegeringer. (Retting i PROD 23. januar) (16364) Tillate søk på tvers I ARKIVET når en velger «alle jeg kan rapportere for» der en har flere enn 100 avgivere (Retting i PROD 23. januar) (16353) Vise navn på klienter ved klientdelegering (Retting i PROD 23. januar) (16464)  Eksterne grensesnitt Tillate sletting av melding via web service ved å utnytte papirkurv funksjonaliteten (14388) Som representant for en organisasjon ønsker jeg å kunne slette aktive meldinger ved hjelp av et sluttbrukersystem Det er lagt til logikk i DeleteCorrespondence som gjør at en melding til en organisasjon flyttes til papirkurv istedenfor at det gis feilmelding om at elementet ikke kan slettes.\nDet er fortsatt sperret for å permanent slette meldinger hvor avgiver er en organisasjon. Endringen skal ikke påvirke funksjonalitet relatert til personer eller elementer i arkiv.\nHente ut pdf av spesifikke skjema via DQ (12621)  Det blir nå mulig å hente ut pdf av spesifikke skjema i et skjemasett via DQ og REST API. Ved å legge til parameteren dataFormatId og dataFormatVersion kan man filtrere bort uønskede skjemasett. For REST API, se /api/Help/Api/GET-who-Messages-messageId-Print_language For DQ, se /ArchiveExternal/DownloadQueueExternalBasic.svc  Støtte for reserverte brukere i instansiering av prefill (12617) Tjenesteeier har nå støtte for å hensynta reserverte brukere i instansiering av prefill fra eksterne systemer Det er blitt lagt inn logikk som gjør det mulig for tjenesteeier å angi at Altinn skal respektere en persons reservasjon mot elektronisk kommunikasjon. Altinn benytter i denne sammenheng kontakt- og reservasjonsregisteret. Default oppførsel er at Altinn ikke tar hensyn til en persons reservasjon. Dette for å opprettholde dagens funksjonalitet for de tjenesteeiere som ikke har implementert støtte for ny funksjonalitet. Logikken understøttes av et nytt input parameter i operasjonene SubmitPrefilledFormTasks og SubmitAndInstantiatePrefilledFormTask på prefill tjenesten mot tjenesteeier. Feltet ligger på PrefillFormTask entiteten og heter IsReservable. Hvis verdien ikke blir satt av tjenesteeier vil logikken behandle den som false. Hvis verdien settes til true og sluttbruker er reservert vil Altinn ikke legge inn prefill på personen. I responsen til tjenesten vil en kvittering indikere at prefill ikke kunne legges inn fordi personen er reservert.\nHente ut created date via REST API (872) Som bruker av REST API kan man nå få utskrift av created date for elementer i meldingsboksen. Det er lagt til et felt kalt CreateDate i alle \u0026ldquo;message\u0026rdquo;-ressurser i REST APIet.\nSe f.eks. /api/my/messages?$orderby=CreatedDate\nBekrefte mottatt correspondence via REST API (869) Som bruker av REST API kan man nå få bekrefte mottatt correspondence. PUT of correspondence message with parameter confirm eq true gives \u0026ldquo;204 - Message has been confirmed\u0026rdquo;\nIndeksering av tabell for BrokerService og endring på prosedyre (14873) Forbedring av ytelse knyttet til tjenesten GetAvailableFiles på Brokerservice (formidlingstjenesten)\nKontakt og fullmaktsregister for virksomheter - første versjon (13455) Tilpasning består av å:\n lage løsning for lesing av data fra KoFuVi batch som henter data tilpasning i GUI for Felles kontaktinformasjon for virksomheten  Infoportal 18 mindre forbedringer og bugfix i informasjonportalen (de sidene som er tilgjengelige uten pålogging).\nYtelsesoptimalisering av forside (14717) Google PageSpeed ble brukt for å validere forsidens fart. Ble gjort mange små grep for å få forsiden til å bli mindre og svare raskere\n SVG kompremering Egen forside css/js som har kuttet vekk det unødvendige små justeringer i head for bedre score gjennom ytelseverktøy som Google PageSpeed  Dagens forside er på 441kb og har blitt redusert ned til 377kb, 15% redusering.\nSøk i skjemakatalogen skal også gi treff på etatsnavnet (13248) Søkeindeksen ble utvidet med felt for kategori, subkategori og etatsnavn. Feltene kan justeres av redaktørene i søkeadmin. Feltene må bli lagt inn i søkeadmin for at de skal kunne være relevante i et søk.\nForbedringer av nyhetsbrevfunksjonalitet - tømming av mottakerliste + retting av autogenering av internlenker (14346) Det ble lagt inn en slette knapp for alle brukere av en liste (nyhetsbrev eller driftsmeldinger) for å unngå at abonnenter fra Prod ble liggende i testmiljøene. Nyhetsbrevet konverte ikke interne lenker til absolutt lenker, og ville dermed ikke ledet noe skulle en bruker trykket inn på den.\nForbedring av sjekk av innloggingsstatus (UU-forbedring) (13349) Brukeren vil nå bli varslet om inaktivitet på over 30 min ved innlogging, som vil resultere i en refresh for å unngå at brukere blir logget av backend men ikke frontend.\nBugfixer infoportal  UU-forbedring på kode for varselbokser/driftsmeldinger (13770) Benytte npm-versjonering for å hente CSS og JS filer inn i epi-løsningen (teknisk forbedring - ikke merkbar) (13397) Fargekode-felt i Episerver ved opplasting av hovedillustrasjon til «Starte og drive» / forsideillustrasjon (13398) Alt-tekst på de fire ikonene på hjelpesenter (13399) Autogenererte nedtrekksfelter på Om skjema med samme titler som ved import (13691) Ferdigstilling av rapporten \u0026ldquo;Artikkel generator\u0026rdquo; (redaktør-funksjonalitet - ikke merkbart for sluttbruker) (14344) Innføre begrensning i mulige blokktyper i driftsmeldingsarkivet (kun merkbart for redaktør) (11212) Åpne for lenker i driftsmeldingsfeltet på Om skjema-siden (13341) Mulighet for tastatur-navigasjon mellom nivåer i skjemaoversikten (13348) Automatisk lukking av sticky-hjelp ved åpning av kontaktskjema (13353) Fjerne ekstern lenke-ikon når lenka er et bilde (14346) Endre filtype for bilde som brukes ved deling av innhold i Facebook/Twitter (14822)  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2019/19-1/",
	"title": "19.1",
	"tags": [],
	"description": "Samtykke utvidelse NADOBE, filtrere bort slettede virksomheter, mindre endringer og feilrettinger",
	"content": " Endringer i Service Rights Registry (SRR) og samtykke Autorisering av tredjepart for behandling av samtykker på vegne av datakonsument Det er introdusert mulighet til å registrere organisasjon som tredjepart i tjenesteeierstyrt rettighetsregister (SRR). Det er utført en utvidelse av autorisasjonskomponenten i Altinn for å autorisere denne tilgangen. Samtykkesiden er også endret slik at teksten der gjenspeiler endringen. Dette er en tilpasning til NADOBE.\nEndringer i REST API REST grensesnittet utvidet for å kunne filtrere på slettede virksomheter Ved henting av avgivere er det lagt til et filter å kunne filtrere bort slettede selskap.\nReplyoptions er synlig for alle Replyoptions er nå synlig for alle (uavhengig av accept header) for messages av typen Correspondence.\nVisning av organisasjonsform og foreldreorganisasjon for Reportees i REST API for tjenesteeiere Organisasjonformen til hvert selskap vises nå slik at man kan filtrere bort indre selskap og underenheter. Denne er forøvrig en videreføring av en endring som kom i 18.12 hvor man så et behov for å synliggjøre organisasjonsform og foreldreorganisasjonen til en underenhet.\nShipmentMetadata Tjenesteeiere kan nå få metadata om en skjemaforsendelse i DownloadQueue uten å måtte parse skjema xml Dersom tjenesteutvikler har lagt til et eller flere metadatafelt i et skjema i TUL, vil disse bli populert når utfylt skjema blir signert/arkivert av skjemamottaker. Ved kall til webservicemetoden GetDownloadQueueItems, vil ShipmentMetadataList bli returnert som ny property i hvert DownloadQueueItem i returen, med Key (metadatafeltnavn) og Value for hvert metadatafelt. Dersom et skjema ikke har metadatafelt, vil ShipmentMetadataList være NULL. Metadataverdiene kan for eksempel brukes av tjenesteeier til å kategorisere en skjemaretur før selve skjemaet blir lastet ned. Dette reduserer behovet for å laste ned og parse hvert enkelt skjema for å avgjøre videre behandling. For tjenesteeiere som ikke ønsker å ta denne funksjonaliteten i bruk, kreves ingen endringer. Merk også at ShipmentMetadata kun er tilgjengeliggjort via GetDownloadQueueItems og ikke via GetArchivedFormtaskDQ.\nAndre endringer Ny tjenesteeier i SBL - Enova SF Ressursfiler er oppdatert med beskrivelse av koden til Enova SF på bokmål, nynorsk og engelsk.\nFeilrettinger Aktivitetsloggen - Hendelser registrert på samme tidspunkt ble vist i feil rekkefølge En feil gorde at det kunne se ut som signering ble utført etter innsending i Aktivitetslogg. Dette er nå rettet opp.  Slik kunne det se ut før feilen ble rettet   Profilsiden - Virksomheter med virksomhetsbrukere fikk feil visning under “Andre med rettigheter til virksomheten” Feilen oppsto når det var virksomhetsbrukere registrert på selskapet og denne virksomhetsbrukeren hadde roller. I disse tilfellene vistes også virksomheten. Dette er nå rettet opp.\nReporteeType i REST blir feil for AAFY-underenheter AAFY (ikke næringsdrivende enhet) ble ikke med som underenhet. Dette er nå rettet opp.\nHyppige feil ved SOAP overføringene fra Enhetsregisteret til Altinn Hasteoverføringene via SOAP har inneholdt personstatus med feil lengde. Dette medførte at hjelpetabellen ikke kunne lagre informasjonen og innlesingen feilet. Det sendes derfor nå ‘null’ som verdi på personsatus til databasen. Dette kan gjøres fordi verdien i dag ikke blir lagret hos Altinn.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2015/15-2/",
	"title": "15.2",
	"tags": [],
	"description": "Ny formidlingstjeneste, forenklet registrering av kontaktinformasjon, forbedret parallell signering, delegering via REST API, +++",
	"content": " Denne versjonen inneholder flere store endringer, blant annet en ny tjenestetype, og store forandringer i registrering av kontaktinformasjon.\nEndringene for kontaktinformasjon gjøres for å sikre at Altinn skal være godt egnet for tjenesteeiere som benytter tjenester til virksomheter som krever varsling. Her gjøres det endringer både på brukersiden med et forenklet, moderne design, og mot tjenesteeierne for å sikre kontroll på at varsel sendes ut til de riktige varslingsadressene.\nTjenester Ny tjenestetype for transport av data (16230) Vi gjør det mulig å lage tjenester for utveksling av store datafiler mellom ulike aktører. En avsender vil laste opp data til Altinn, som vil sørge for at dataene blir tilgjengelig for nedlasting for de angitte mottakerne. Det skal være mulig å bruke de nye tjenestene både via webservice og SFTP.\nParallell signering – bedret informasjon ved signering av flere (17528) Justering av hvilken informasjon som vises i situasjoner der man selv har signert, mens man venter på at andre skal signere.\nStyring av parallell signering (18230) Forbedring av funksjonaliteten for parallell signering, slik at det blir mulig å styre hva de ulike signererne skal signere. Dette er nødvendig for den planlagte tjenesten for elektronisk stiftelse av aksjeselskap.\nInstansiering av innsendingstjenester fra dialogsider i samhandlingstjeneste (16151) Det innføres mulighet for eier av samhandlingstjenester å definere at tjenester som startes mens man er inne i samhandlingstjenesten må sendes inn av aktøren som har samhandlingstjenesten.\nFeilretting: Regelmotor og SERES ved like felter (18075) Feilretting for å få regelmotoren til å håndtere at felter som er definert i SERES kan ha samme navn.\nFeilretting: Problem med caching i regelmotor (18442) Regelmotor får støtte for at ulike tjenester/tjenesteutgaver skal kunne bruke ulike versjoner av samme skjema. Dette ble tidligere ikke unikt identifisert ved lasting fra cache.\nTilgangsstyring og kontaktinformasjon Forenklet/forbedret registrering av kontaktinformasjon (17415) Dagens \u0026ldquo;Min profil\u0026rdquo; erstattes med en ny side for registrering av kontaktinformasjon. Denne siden vil ha et mer moderne, responsivt design (som tilpasser seg ulike skjermstørrelser). I tillegg vil det innføres mulighet for personlige varsel for en virksomhet (for tjenester man har tilgang til). Det legges også opp til større grad av validering av kontaktinformasjonen som legges inn.\nOppdatert 19.05.15: Denne endringen leveres med nytt design og funksjonalitet for personlige varsel i versjon 15.2. Det gjøres også relevante endringer i grensesnittet mot tjenesteeierne for å sikre oversikt over hvem som har fått varsel både for meldingstjenester og ved frittstående varsel.\nForenklet/forbedret tilgangsstyringsfunksjonalitet (17593) Dagens \u0026ldquo;Tilgangsstyring\u0026rdquo; integreres med ny side for registrering av kontaktinformasjon. Denne siden vil gjøre det mer intuitivt å finne ut av hvem som har tilgang til hva for en virksomhet, og å delegere disse tilgangene videre. Den vil også ha et mer moderne, responsivt design (som tilpasser seg ulike skjermstørrelser).\nOppdatert 19.05.15: Endringer på tilgangsstyringsområdet vil ikke bli produksjonssatt i versjon 15.2. Det leveres kun et konsept på hvordan dette kan løses.\nVarsler (sms/e-post) Prioritet på varsler (sms/e-post) (17330) Forbedring av funksjonaliteten for å prioritere varsler (sms/e-post) ved utsending av store mengder varsler, slik at ikke en masseutsending av (mindre tidskritiske) varslinger fører til at mer akutte varsel blir liggende lenge i kø i påvente av at massevarslene sendes ut.\nUtvidelse av standardmakroer for varsling (18101) Vi utvider hvilke mulige identifikatorer som kan være del av et varsel, slik at man kan sende ut varsel der det er tydelig hvem varselet gjelder uten at man sender ut for mye identifiserende informasjon i en uegnet kanal.\nEksterne grensesnitt Delegeringsmulighet i REST-grensesnittet (17668) Vi innfører mulighet til å bruke REST-grensesnittet til å hente ut og administrere tilganger/rettigheter i Altinn. Dette gjøres ved først å forbedre autorisasjonskomponenten med mer robuste og gjenbrukbare tjenester, og deretter å implementere dette i REST-grensesnittet. Endringen gjør det mulig for utviklere å inkludere rettighetsstyring i eksterne portaler og applikasjoner.\nIntegrasjonsplattform og grensesnitt Forbedret håndtering av items som feiler i batchinnlesing (17621) Vi innfører mellomlagring, logging til database og automatisk retry-funksjonalitet i batcher som leses inn i Altinn. Dette vil både redusere behovet for manuell oppfølging, og gi bedre oversikt og kontroll over de feilene som krever manuell oppfølging.\nInnfasing av ny CreateShipment-funksjonalitet for immediate-overføringer (17622) I versjon 14.3 tok vi i bruk ny logikk for pakking av forsendelser for batch-overføringer. Nå skal den samme logikken også brukes for grensensitt med umiddelbare overføringer (immediate). Dette vil forbedre ytelse og kapasitet i løsningen, og gi mer konsistent kode av høyere kvalitet.\nOppsplitting av PrepareShipmentPart-orkestrering basert på outbound ShipmentType (17626) Forbedring av orkestrering av forsendelser, slik at ulike typer forsendelser kan behandles ulikt. Dette gjør det mulig å styre ressursbruken for ulike typer forsendelser. I tillegg er det en forenkling av løsningen som gjør den enklere å vedlikeholde.\nStore meldinger og ESB Excetion database (17659) Retting av et problem ved feilhåndteringen i PrepareShipmentPart-orkestreringen. Store meldinger vil ikke lenger legges ved til ESB faults.\nFeilretting: Kolonnenavn i BAM observasjonsmodellen stemmer ikke overens med faktisk verdi (17757) Feilretting for å sørge for bedre datakvalitet fra BAM. Det vil nå være samsvar mellom data i løsning og det som vises i view.\nCustom Pipeline for Inbound Receive Porter (17619) Forbedring av håndtering av inkommende batch-filer for å redusere belastningen på BizTalkmeldingsboksen. Innkommende batch vil nå håndteres mer likt som utgående ved at selve filen skrives til disk, mens det kun er en melding med referanse til filplassering som legges i BizTalkmeldingsboksen.\nNy makro for metadata-informasjon i generic batch (18099) Mulighet for å inkludere informasjon om hvilke sluttbrukersystem som var brukt i de enkelte innsendingene i xml-filene som mottas i batch.\nTeknisk arkitektur Oppgradering av PDF-bibliotek (18216) Mindre teknisk oppgradering i forbindelse med PDF-print.\nTjenesteutviklingsløsning Forbedringer av tjenesteutviklingsløsningen (17778) Rammeendring for forbedringer. Detaljer om endringene som gjøres vil tilgjengeliggjøres når omfanget er avklart.\nOppdatert 19.05.15: Det leveres et nytt, forenklet design for utgaveparameter-siden, preutfylling av bostedsadresse blir mulig (tidligere kun postadresse) og det innføres en automatisk sjekk av om tjenesteeierrolle er satt før migrering av tjeneste (for tilgang til tjenesteeiers arkiv). I tillegg utføres det noe bugfixing, og det gjøres endringer for å forenkle synkronisering mellom TUL- og TUT-miljøer.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2017/17-2/",
	"title": "17.2",
	"tags": [],
	"description": "Nytt design, ny innboks, ny infoportal, nytt søk, papirkurv, klientdelegering, tilpasset hjelp, designsystem, +++",
	"content": " Dette er en stor release, som først og fremst handler om innføring av nytt design.\nNoe funksjonalitet som var lite brukt er dessuten fjernet, og det er fortsatt enkelte områder som ennå ikke har fått nytt design.\nEnklere å velge hvem du representerer Det er laget ny side for valg av hvem man representerer ved pålogging. I tillegg er det laget en ny funksjonalitet fra toppmenyen for å kunne bytte hvem du representerer etter pålogging.\nDette er tilgjengelig uansett hvor du står etter å ha logget på. På den nye siden er det tydeligere hvilket foretak en underenhet hører til.\n Valg av hvem du representerer   Ny innboks Grunnleggende forbedringer Den nye innboksen har en rekke forbedringer fra dagens løsning, blant annet:\n Responsivt design som støtter store og små skjermer. Skjema og meldinger grupperes slik at de mest relevante kommer øverst. Tydeligere informasjon om hva som er status/neste steg, som for eksempel \u0026ldquo;til signering\u0026rdquo; eller \u0026ldquo;til betaling\u0026rdquo;. Utseende er tilpasset hvem man representerer - \u0026ldquo;enklere\u0026rdquo; utseende på innboks for privatpersoner.   Ny innboks - for privatpersoner    Ny innboks - for virksomheter   Ekspandert (inline) visning Meldinger vil nå kunne åpnes direkte (ekspandert) i innboksen, som en utvidet visning av meldingen. Det blir som tidligere mulig å videresende melding på epost, men Altinn inneholder nå informasjon om at dette er gjort.\n Ekspandert visning av element   Ny aktivitetslogg Det er utviklet en ny og bedre aktivitetslogg for meldinger og skjema, som viser tydeligere hvem som har gjort hva.\n Aktivitetslogg   Papirkurv for privatpersoner og virksomheter Det har tidligere kun vært mulig å slette elementer i innboks for privatpersoner. Nå har vi laget en papirkurv som gir både private og virksomheter mulighet til å slette tjenester i innboks eller arkiv. Meldinger som kastes i papirkurven kan gjenopprettes (flyttes tilbake til innboks eller arkiv).\nFor privatpersoner er det også mulig å slette elementer permanent fra papirkurven. For virksomheter vil elementer lagt i papirkurv automatisk fjernes etter en gitt periode.\n Tom papirkurv   Nytt søk i innboks Grensesnitt for søk er forenklet. I første omgang er det kun mulig å søke på tittelen på meldingen eller skjemaet, og å begrense treffene til en bestemt periode eller status. Det er mulig å lagre søkene man gjør, slik at de lett kan gjentas.\n Søk i innboks   Separat arkiv Det er opprettet en egen boks for arkiverte meldinger. Meldinger som er arkivert vil ikke synes i innboksen.\n Ny side for arkiverte elementer   Hjelp tilpasset det du holder på med I hele Altinn ligger det nå et hjelpeikon nederst i høyre hjørne.\nVed å trykke på ikonet, får man opp hjelpeinnhold som skal være tilpasset hvor man er og hva man har klikket på.\n Hjelp ekspandert   Nye sider for klientdelegering Det er nå enklere for regnskapsfører og revisor å delegere rettigheter til ansatte for klienter. Det er innført nye klientdelegeringssider for å gi en ansatt tilganger for flere klienter, og for å gi flere ansatte tilganger for en klient.\nSynlige samtykker Det er laget et eget panel under \u0026ldquo;Profil\u0026rdquo; i portalen som viser hvilke samtykker man har gitt. Det kommer også en logg som viser bruken av samtykket.\nNy informasjonsportal Alle sider i Altinn som man kan nå uten å logge inn har fått nytt design.\nDet nye designet er responsivt, det vil si at utseendet på siden tilpasser seg størrelsen på skjermen man bruker. Vi gjør også strengere prioriteringer i hvilket innhold alle skal se. Det vil være lettere å finne det mange trenger, uten at det noen få trenger har forsvunnet.\n Ny Altinn forside   Ny skjemaoversikt For å finne fram til riktig skjema, har vi forenklet oversikten over skjema og tjenester. Det vil være tre veier til skjemainformasjonen, via nye kategorier, via etat og via søk.\n Ny skjemaoversikt   Bedre innhold under \u0026ldquo;Starte og drive bedrift\u0026rdquo; Informasjonssidene om hvordan man starter og driver bedrift har fått en enklere struktur, med færre klikk før man kommer til innholdet. Vi har også gjort en rekke språklige forenklinger og forbedringer.\n Starte og drive bedrift   Ny søkeløsning i informasjonsportal Å finne informasjon med den gamle søkeløsningen på altinn.no kunne være frustrerende. Vi har derfor lagd en helt ny søkeløsning, basert på ElasticSearch, som gir mer relevante treff når man søker. Det er også tydeligere i søkeresultatet hva slags informasjon man har funnet.\nLøsningen for søk vil etter hvert deles som åpen kildekode på GitHub.\n Ny løsning for søk   Funksjonalitet som forsvinner Ikke all funksjonalitet vi lanserer i Altinn slår dessverre like godt an hos brukerne\u0026hellip; 😞\nI forbindelse med overgangen til nytt design, har vi derfor valgt å kutte ut et par funksjoner som var svært lite brukt:\n Samlesider for å gruppere sammen elementer i innboks Mulighet å nekte brukere innsyn på instansnivå  Noe har fortsatt gammelt design Ikke alt får nytt design i 17.2. Utfylling av skjema vil se ut og oppføre seg som før, og vil ikke kunne oppdateres før tjenester 3.0 er realisert.\nDet er også et par funksjonaliteter i innboksen som man inntil videre må bruke gammel meldingsboks for å få:\n Søk på tvers av mange aktører Delegering på instansnivå  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2016/",
	"title": "2016",
	"tags": [],
	"description": "Endringer innført i 2016",
	"content": "Releaser av Altinn i løpet av 2016\n\r16.1\r\rSamtykkebasert datadeling, betalingsløsning, nytt design for roller og rettigheter, videresending av post til innbygger, \u0026#43;\u0026#43;\u0026#43;\n\r"
},
{
	"uri": "https://altinn.github.io/docs/releases/",
	"title": "Altinn endringslogg",
	"tags": [],
	"description": "Oversikt over endringer i Altinn",
	"content": "\r2019\r\rEndringer innført i 2019\n\r2018\r\rEndringer innført i 2018\n\r2017\r\rEndringer innført i 2017\n\r2016\r\rEndringer innført i 2016\n\r2015\r\rEndringer innført i 2015\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/sluttbruker/",
	"title": "For sluttbruker",
	"tags": [],
	"description": "Hvordan samtykke oppleves for sluttbruker",
	"content": "Samtykkeløsningen gir sluttbrukere mulighet til å gi samtykke til innsyn i sine data eller data for organisasjoner sluttbruker har rettighet for.\nSamtykke kan gis av sluttbruker når denne er i en prosess eller når andre kan bruke hans data i en prosess. Sluttbruker blir i prosessen presentert for samtykkesiden i Altinn hvor han kan velge å gi samtykke.\nEt samtykke skal for sluttbruker være:\n Informert - du har fått informasjon som gjør at du kan forstå hva du samtykker til Frivillig - du skal kunne velge å ikke samtykke Uttrykkelig - du skal gjøre en aktiv handling for å gi samtykke  Sluttbruker vil i Altinn ha oversikt over hvem som har fått samtykke og en aktivitetslogg viser all aktivitet over samtykker som sluttbruker har gitt eller slettet og samtykker som har opphørt på grunn av at gyldig dato er passert.\n\rInnlogging\r\rHvordan logge inn for å gi samtykke\n\rSamtykkesiden\r\rPresentasjon av samtykkesiden\n\rOversikt samtykker\r\rOversikt over gitte samtykker\n\rTrekke samtykke\r\rHvordan trekke et samtykke som er gitt\n\rSamtykkelogg\r\rSamtykkelogg\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/funksjonalitet/",
	"title": "Funksjonalitet",
	"tags": [],
	"description": "Sentral funksjonalitet i TUL som understøtter tjenesteutvikling.",
	"content": "Sentral funksjonalitet i TUL som understøtter tjenesteutviklingen.\n\rKodelister\r\rEn kodeliste er en liste med faste verdier som for eksempel postnummer og poststed eller kommuner og landkoder.\n\rMigrering\r\rEn utgave av en tjeneste kan migreres til sluttbrukermiljø når tjenesten er tilstrekkelig definert og utviklet.\n\rOversetting\r\rHvis det er behov for å tilby en tjeneste på flere språk så kan oversettermodulen benyttes.\n\rRolleadministrasjon\r\rOversikt over rolleadministrasjon i TUL, med hovedvekt på definisjon av roller med tilhørende rettigheter.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/funksjonelle-scenario/",
	"title": "Funksjonelle scenario",
	"tags": [],
	"description": "Webservice operasjoner med beskrivelse",
	"content": " Altinn tilbyr flere tjenester innenfor flere funksjonelle områder for tjenesteeiere.\nHer beskrives det hvilken funksjonalitet som finnes med referanser til hvilke grensesnitt som benyttes. Denne seksjonen innholder kun beskrivelse for Webservice og Batch grensesnitt og vil bli oppdatert med funksjonelle scenario som også benytter REST API.\nOversikt over den enkelte tjeneste, tjenesteoperasjon og parametere til disse er beskrevet i Tjenestekatalog og tjenestenes WSDL, samt i et eget avsnitt; kap 9 Grensesnitt – web servicesGrensesnittWebServices. Tilsvarende er det et eget avsnitt for batch beskrivelser; kap 10 Grensesnitt – batch til Altinn_Innsendingstjenester.\nDe funksjonelle områder som finnes er:\n Innsendingstjenester Meldingstjenester Formidlingstjenester Kvitteringer Innsynstjenester Lenketjeneste Samhandlingstjenester Frittstående varsel Autorisasjon Uthenting fra tiltrodd tredjepart logg Sluttbrukers meldingsboks (ikke tilgjengelig p.t.) Tjenesteeierstyrt rettighetsregister  Innsendingstjenester Innsendingstjenester utvikles i tjenesteutviklingsløsningen (TUL) i Altinn, og er en definert innsending av spesifikke skjema/skjemasett med eller uten vedlegg. Fylles ut i Altinn portalen eller i integrert sluttbrukersystem, signeres og sendes inn. Påbegynte og innsendte innsendingstjenester kan oppbevares i sluttbrukers meldingsboks i Altinn.\nSvardata sendes tjenesteeier. Tjenesteeier kan også legge skjemaet klart i den enkeltes brukers arbeidsliste og varsle om frister og lignende.\nFor tjenesteeiere omhandler \u0026ldquo;Innsendingstjenester\u0026rdquo; følgende:\n innsending av prefilldata innsending av abonnementsdata mottak av ferdig utfylte innsendinger fra Altinn uthenting av innsendte data fra tjenesteeiers eget arkiv uthenting av kvittering for status på innsending  Innsending av prefilldata Tjenesteeier kan sende inn prefilldata for en tjeneste i Altinn, og dataene benyttes ved preutfylling. Preutfylling innebærer at en gitt tjeneste (skjema/skjemasett) ved aktivisering i Altinn blir forhåndsutfylt med data mottatt fra tjenesteeiere og nasjonale registre. Prefilldata kan sendes i sanntid eller satsvis (batch).\nDet finnes fem typer data ifbm. preutfylling:\n Sende inn preutfylte skjemasett\n Tjenesteeier kan sende inn ett eller flere preutfylte skjemasett for en gitt tjeneste versjon, eller rapporteringsplikt for lagring i database. Benyttes når en avgiver eller abonnementsrutine aktiviserer tilknyttet tjeneste i portalen. Skjemasettet kan inneholde identifiserende felter, for å kunne ha forskjellige preutfylte skjemasett ved rapportering flere ganger i året. Se eget punkt nedenfor om Identifiserende felter for mer info. Kan sendes i sanntid eller satsvis. Ved overføring i sanntid overføres en liste av preutfylte skjemasett asynkront, og kvittering returneres. Kvittering for info om status på asynkron innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending benyttes som nøkkel.  Identifiserende felter\n Verdier som legges på et preutfylt skjemasett, for å gjøre skjemasettet unikt Verdiene kan være \u0026ldquo;hva som helst\u0026rdquo;, men typisk noe som kan knyttes til det preutfylte skjemasettet, f.eks. \u0026ldquo;rapport X\u0026rdquo;, \u0026ldquo;periode Y\u0026rdquo; (2 verdier). Preutfylte skjemasett uten identifiserende felter benyttes ved aktivisering av tjenester i Altinn portal, og/eller sammen med abonnement. Preutfylte skjemasett med identifiserende felter benyttes kun sammen med abonnement.  Direkte aktivisering av ett preutfylt skjemasett\n Tjenesteeier kan sende inn ett preutfylt skjemasett som øyeblikkelig blir tilgjengeliggjort i avgivers arbeidsliste i portalen Med eller uten varsel etter tilgjengeliggjøring i arbeidslisten. Det preutfylte skjemasettet kan lagres til database for senere bruk, som beskrevet i punkt 1. Kan kun sendes i sanntid, synkront. Man vil kunne angi om det instansiert og preutfylt skjema skal knyttes til en samhandlingstjeneste ved å angi referansen i den valgfrie parameteren caseId i operasjonen.  Sende inn feltbasert preutfyllingsdata\n Tjenesteeier kan sende inn feltnavn og feltverdi for felter som benyttes i skjemaer. Ingen direkte knytning til tjeneste eller skjema, dvs. feltet kan finnes på flere tjenester for samme avgiver. Benyttes når avgiver aktiviserer tjeneste som inneholder feltet i portalen. Kan kun sendes inn satsvis. Kvittering for status på batch-innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt i xml ved innsending benyttes som nøkkel.  Preutfyllingsdata fra nasjonale registre\n Data fra nasjonale registre som f.eks. Folkeregistre og Enhetsregisteret sendes inn til Altinn. Register data knyttes til felter når tjeneste opprettes i Tjenesteutviklingsløsningen (TUL). Benyttes når avgiver aktiviserer tjeneste som inneholder feltet    Figur 1 - Skjermbildet viser RF-1047 i portalen. Feltene i den røde firkanten har automatisk blitt preutfylt av tjenesteeier.   Da det er flere kilder for preutfyllingsdata blir preutfyllingsdataene benyttet i følgende rekkefølge for å hindre uønskede overskrivelser:\n Preutfylt skjemasett.\nHentes fra Altinn databasen dersom det finnes for gitt tjeneste og avgiver. Feltbasert preutfylling.\nFelter som finnes for gitt avgiver og aktivisert skjema hentes fra Altinn databasen. Overskriver evt. Preutfylt skjemasett. Preutfyllingsdata fra nasjonale registre.\nData fra nasjonale registre er feltbasert og overskriver alle andre preutfyllingsdata typer.  For satsvis overføring kan data hentes fra tjenesteeiers system, eller tjenesteeier kan levere data på et definert Altinn område.\nTjenesten må være opprettet i TUL og eksportert til SBL, for at preutfyllingsdata for den gitte tjenesten skal kunne mottas.\nFor flere detaljer rundt kontrakten for SubmitPrefilledFormTasks og SubmitAndInstantiatePrefilledFormTask vennligst se henholdsvis kapittel 9.6.2 og 9.6.1, Tjenestekatalog og WSDL.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     Prefill SubmitPrefilledFormTasks Basic/WS/EC   Prefill SubmitAndInstantiatePrefilledFormTask Basic/WS/EC   Receipt GetReceipt Basic/WS/EC    Batch grensesnitt som inngår i beskrevet funksjonalitet:\n   Batch Operasjon Type     Preutfylling XML FTP/SFTP    Innsending av abonnementsdata Tjenesteeiere kan opprette abonnement på innsendingstjenester som aktiverer og tilgjengeliggjør innsendingstjenesten i den gitte avgivers arbeidsliste. Kan sendes i sanntid eller satsvis (batch).\nVed overføring i sanntid overføres en liste med abonnement, dvs. ett eller flere asynkron overføringer.\nFor satsvis overføring kan data hentes fra tjenesteeiers system, eller tjenesteeier kan levere data på et definert Altinnområde.\nTjenesten må være opprettet i TUL og eksportert til SBL, for at et abonnement for den gitte tjenesten skal kunne mottas.\nMan kan opprettet følgende abonnementstyper:\n Engangsaktivering For en gitt periode/periodisk rapporteringsplikt I et gitt intervall På gitte tidspunkter med gitte frister  Et abonnement kan være tilknyttet identifiserende felter for å kunne koble et abonnement til et bestemt preutfylt skjemasett for den gitte avgiver. Det preutfylte skjemasettet med de samme identifiserende feltene må finnes i Altinn databasen før abonnementet aktiviseres. Se eget punkt om Identifiserende felter for mer info.\nMottatte abonnementsdata lagres til databasen.\nVed innsending av abonnementsdata vil man kunne angi om skjema skal knyttes til en samhandlingstjeneste ved å angi referansen i den valgfrie parameteren CaseId i SubmitSubscription.\nKvittering for info om status på innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending via web service/batch grensesnitt (xml) benyttes som nøkkel.\nEn rutinejobb i Altinn vil med jevne mellom gå igjennom abonnementsdatabasen for å finne abonnement/innsendingstjenester som er klare for instansiering, dvs. den vil aktivisere alle abonnement hvor startdato er mindre enn, eller lik, dagens dato. Startdato er satt av tjenesteeier, og neste aktiviseringsdato kalkuleres automatisk av rutinejobben i Altinn ut fra gitte parametre satt av tjenesteeier. Se parameter detaljer i avsnittet SubmitSubscription (web service) (9.7.1) eller Abonnement (batch) (10.3).\nFor flere detaljer rundt kontrakten for SubmitSubscription vennligst se kapittel 9.7.1, Tjenestekatalog og WSDL.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     Subscription Basic/SubmitSubscription/EC Basic/WS/EC   Receipt GetReceipt Basic/WS/EC    Batch grensesnitt som inngår i beskrevet funksjonalitet:\n   Batch Overføringsformat Protokoll     Abonnement XML FTP/SFTP    Motta data for innsendinger Arkiverte innsendinger i Altinn tilgjengeliggjøres til tjenesteeier for henting/overføring. Kan enten sendes i sanntid per innsending, satsvis (batch), eller ved å bruke DownloadQueue.\n For sanntid, dvs. ved bruk av web service, må tjenesteeier etablere dedikert web service angitt av Altinn på egen plattform, og motta innsendinger automatisk etter hvert som de arkiveres. Se eget avsnitt: 9.15 Online overføring til Tjenesteeier.\n For satsvis overføring kan data leveres til en tjenesteeiers mottakssystem dersom det er etablert, eller tjenesteeier kan hente data på et definert Altinn område.\n Tjenesteeier kan velge å bruke DownloadQueue web service, som lar tjenesteeiere hente meta-data fra en kø, som så kan brukes til å hente individuelle arkiverte innsendinger.\n  Tilgjengeliggjøres i standard Altinn format eller transformeres til tjenesteeiers eget mottaksformat.\nKvittering først opprettet ved innsending fra tjenesteeier oppdateres med informasjon om utsending, dvs. livsløpet til innsendingstjenesten dokumenteres. Kvittering kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending benyttes som nøkkel.\nInnsendinger for tjenesteutgaver knyttet til DownloadQueue (konfigureres under utgaveparametere i TUL) vil legge til metadata for innsendinger i DownloadQueue. Tjenesteeier kan hente en liste med disse metadata ved å bruke et web service kall, se kapittel for DownloadQueue (9.16) Metadata kan så benyttes til å hente individuelle arkiverte innsendinger med vedlegg. I tillegg er det en tjenesteoperasjon som gir tilgang å hente ned en PDF versjon av et skjemasett. Denne vil støtte PDFA standarden.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet for overføring i sanntid:\n   Tjeneste Operasjon Type      Basic/ReceiveOnlineBatchExternalAttachment Basic   Receipt GetReceipt Basic/WS/EC    Batch grensesnitt som inngår i beskrevet funksjonalitet:\n   Batch Overføringsformat Protokoll     Innsendingstjenester XML FTP/SFTP    Tjenester og tjenesteoperasjoner som inngår i DownloadQueue:\n   Tjeneste Operasjon Type     DownloadQueue GetDownloadQueueItems Basic/WS/EC   DownloadQueue PurgeItem Basic/WS/EC   DownloadQueue GetArchivedFormtaskDQ Basic/WS/EC   DownloadQueue GetFormSetPdf Basic/WS/EC    Status på sending av innsendte element For arkiverte elementer som blir sendt til tjenesteeier i sanntid eller satsvis beskrevet i 8.1.3 kan tjenesteeier hente status på elementer ved bruk av ArchiveShipmentStatus tjenesten. Ved å bruke ArchiveShipmentStatus webtjenesten kan tjenesteeier hente en enkel oversikt over overførsels-status på individuelle elementer eller for lister av elementer sortert på tjeneste.\nTjenester og tjenesteoperasjoner som inngår i ArchiveShipmentStatus:\n   Tjeneste Operasjon Type     ServiceOwnerArchive GetArchiveShipmentStatus Basic/WS/EC    Dekryptering av sensitive felter data i innsendingstjenesten Altinn støtter funksjonalitet for innsending av sensitive tjenester med sensitive felter. Slike skjema kan sendes inn via portalen eller sluttbrukersystemer. For å kunne lese de sensitive feltene tjenester må tjenesteeier benytte sine egne sertifikater for å dekryptere feltene.\nKrypteringen skjer ved at innsender benytter en symmetrisk nøkkel på 128 bit i en AES algoritme for å kryptere det sensitive feltene i skjemaet. Sluttbrukersystemer må selv generere denne nøkkelen og kryptere det sensitive felteneskjemaet, mens dette vil bli håndtere for bruker i portalen.\nFor at bruker senere skal kunne dekryptere feltene fra skjemaet sendes den symmetriske nøkkelen med forsendelsen, men denne er da kryptert ved et selvvalgt brukerpassord på minst 8 tegn. Bruker kan da hente ut data, dekryptere symmetrisk nøkkel ved hjelp av sitt selvvalgte passord, og bruke denne til å dekryptere den sensitive dataen.\nFor at tjenesteeier skal kunne dekryptere feltene må de også ha krypteringsnøkkelen. Den symmetriske nøkkelen må derfor også krypteres med tjenesteeierens offentlige sertifikat ved hjelp av algoritmen RSA, og lagt ved innsendingen. Når tjenesteeier da mottar sensitiv data vil de først bruke sin private nøkkel til å dekryptere krypteringsnøkkelen, deretter bruke denne nøkkelen til å dekryptere de sensitive feltenedata.\nInnsendinger med av sensitive felt tjenester og vedlegg overføres til etat via batch eller via online oppslag til tjenesteeiers arkiv på samme måte som andre innsendinger for tjenester uten sensitiv informasjon.\nTekniske detaljer Den symmetriske nøkkelen som er brukt til å kryptere de sensitive feltene i et skjema som skal dekrypteres hos tjenesteeier gjøres tilgjengelig i skjema ved hjelp av XML-Enc standarden http://www.w3.org/TR/xmlenc-core/. Den krypterte symmetriske nøkkelen ligger pakket sammen med en referanse til sertifikatet som er brukt på følgende form.\n\u0026lt;my:txtFN\u0026gt; \u0026lt;EncryptedData Type=\u0026quot;http://www.w3.org/2001/04/xmlenc#Content\u0026quot; xmlns=\u0026quot;http://www.w3.org/2001/04/xmlenc#\u0026quot;\u0026gt; \u0026lt;EncryptionMethod Algorithm=\u0026quot;http://www.w3.org/2001/04/xmlenc#aes128-cbc\u0026quot; /\u0026gt; \u0026lt;ds:KeyInfo xmlns:ds=\u0026quot;http://www.w3.org/2000/09/xmldsig#\u0026quot;\u0026gt; \u0026lt;EncryptedKey xmlns=\u0026quot;http://www.w3.org/2001/04/xmlenc#\u0026quot;\u0026gt; \u0026lt;EncryptionMethod Algorithm=\u0026quot;http://www.w3.org/2001/04/xmlenc#rsa-1_5\u0026quot; /\u0026gt; \u0026lt;CipherData\u0026gt; \u0026lt;CipherValue\u0026gt;Ahgw/pNo9fcfUtOr8aTceVkFlCsC58HY0VrQUJW1B/AxMOzYsyKhWRorUViQENqSJabEiwfin4zO2qzRuELwGXBFZ4jtkwlJpnAd+6NuCZ/P0ZsxJG5A8XnALmVCBpIcOPaPUa3Q211Bnu3eCHaMmgw9/itX3g3FPZItkwNEfGg=\u0026lt;/CipherValue\u0026gt; \u0026lt;/CipherData\u0026gt; \u0026lt;/EncryptedKey\u0026gt; \u0026lt;ds:KeyName\u0026gt;CD13AEC20C0564C2B5499630BE478654D3ADD64A\u0026lt;/ds:KeyName\u0026gt; \u0026lt;/ds:KeyInfo\u0026gt; \u0026lt;CipherData\u0026gt; \u0026lt;CipherValue\u0026gt;TJ+KuQDc2ccduVlCIaM9sw==\u0026lt;/CipherValue\u0026gt; \u0026lt;/CipherData\u0026gt; \u0026lt;/EncryptedData\u0026gt; \u0026lt;/my:txtFN\u0026gt;  I dette eksempelet er my:txtFN feltet i skjema som inneholder sensitive data. I slike felt vil man finne et EncryptedData element som inneholder følgende 3 viktige elementer\n Symmetrisk nøkkel kryptert med sertifikat. (EncryptedData/KeyInfo/EncryptedKey/Cipherdata) Referanse til sertifikat brukt for å kryptere symmetrisk nøkkel. Dette er en thumbprint av sertifikat for tjenesteier. Den brukes internt hos tjenesteeier til å gjøre oppslag i keystore for å få tak i privat nøkkel og dermed kunne dekryptere den symmetriske nøkkelen. (EncryptedData/KeyInfo/KeyName) Skjemadata kryptert med symmetrisk nøkkel. (EncryptedData/CipherData/CipherValue)  Skjemadata er kryptert ved hjelp av den symmetriske AES algorithmen med en blocksize på 128 bit, ciphermode CBC (Cipher-block chaining, http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation og padding er PKCS7.\nDen symmetriske nøkkelen er kryptert med RSA algoritmen, ECB mode og PKCS1 padding.\nFor tjenester som har krypterte vedlegg og krypterte skjemaer benyttes nøkkelinformasjonen som ligger i GetArchivedFormTaskBasicV2Result eller i data fra fil\n\u0026lt;SOEncryptedSymmetricdKey\u0026gt; \u0026lt;EncryptedKey\u0026gt;u7CPRJ/ZtOoFPU4tkSqBDLW6e0V1Mr92C0oTC7bWztYuCvgl0+R2DUW/8iSSaH3+Wl1vnWTRSnuEDiKBVenfEjQ5j89WHvbA0QO1cMzIpYl53EDBt1tvoVHaJYq+4KJIo2DGNYNHyb2iFIgn39BYo4KpNLW1Yk2k8MegCgnajMnSICSuYuy5sGuBkvytottC0h2KKR7PAZtuuzJ4PRnby2AAMNmSB8VusNctDen/d8nF1Sh1DRcP9pArBvsxEH2A7SwiKS+dRC/J2QK7iM1I6Tphkalsyjmgn03LkJMm/8X9ufp+fN6n8Czg+BsZ1+rw2DD7vgTDGMyn+41gqZW1qg==\u0026lt;/EncryptedKey\u0026gt; \u0026lt;CertificateThumbprint\u0026gt;5D15D6E888632370E0223B779C4E0F0D9D45DED0\u0026lt;/CertificateThumbprint\u0026gt; \u0026lt;/SOEncryptedSymmetricdKey\u0026gt;  Se kapittel 14 for kodeeksempler.\nFormDataXml er kryptert ved hjelp av den symmetriske AES algorithmen med en blocksize på 128 bit, ciphermode CBC (Cipher-block chaining, http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation og padding er ISO10126.\nMeldingstjenester Tjenesteeiere kan sende informasjon i form av meldinger til brukere av Altinn, og meldingene støtter HTML og vedlegg. Brukere kan varsles med e-post eller SMS om at informasjon er gjort tilgjengelig, for innsyn eller behandling. Tjenesteeiere får informasjon om hvilke utsendte meldinger som er åpnet, og kan eventuelt kreve at brukeren bekrefter mottaket innen en fastsatt frist. Tjenesteeier kan enkelt sjekke status for innsendte meldinger på en meldingstjeneste ved å benytte eget web service kall med et sett av søkeparametere.\nMeldingene kan oppbevares i sluttbrukers meldingsboks i Altinn i en fastsatt periode, eventuelt slettes av brukeren. Bruker kan også arkivere meldingene til sitt arkiv. Om meldingen krever bekreftelse må dette gjøres før meldingen eventuelt kan arkiveres.\nMeldinger kan også eventuelt sendes til \u0026ldquo;Digital postkasse til innbygger\u0026rdquo; hvis brukeren har registrert en slik postkasse i Kontakt- og reservasjonsregisteret. (Dette gjelder kun personer, ikke organisasjoner.) Digitale brev kan opprettes istedenfor eller i tillegg til en melding i Altinn.\nI sammenheng med opprettelse av digitale brev er det også mulig å bestille varsel fra DPI løsningen. DPI varsel vil bli sendt ut av postkasse leverandøren. Meldingsvarsel og DPI varsel er helt separate og bestilles hver for seg. For varsel fra DPI følger grensesnittet til Altinn i stor grad definisjonene til difi.\n http://begrep.difi.no/SikkerDigitalPost/1.2.0/begrep/Varsler  Sende inn meldingstjenester Tjenesteeiere kan sende en melding til en gitt person eller bedrift som tilgjengeliggjøres for lesing/henting via Altinn. Kan enten sendes i sanntid per innsending, eller satsvis (batch).\nMelding kan være:\n Ren tekst. HTML basert (formatert visning i nettleser). XML basert med referanse til tilhørende visningsskjema. (Skjema må defineres på tjenesten i TUL.) PDF. Dette gjelder kun sikker digital post. (Altinn vil selv behandle det som vedlegg.) Kombinasjon av alle over.  Annet:\n Brukere kan reservere seg mot å motta digital korrespondence gjennom kanaler som Altinn og digital postkasse. Tjenesteeiere kan velge å respektere eller ignorere slike reservasjoner. Se IsReservable. Inneholde binære vedlegg (for nedlasting), valgfri parameter DestinationType vil kunne begrense om vedleggene er tilgjengelig i portal eller sluttbrukersystem, eller begge. Om ikke sendt inn blir den satt til standard verdi ShowToAll. Ved videresending til \u0026ldquo;Digital postkasse til innbygger\u0026rdquo; er det obligatorisk med minst ett vedlegg. Dette vil da benyttes som hoveddokument i det som sendes til brukerens digitale postkasse. Varsles til en eller flere brukere på forskjellige kommunikasjonskanaler:  SMS E-post  Tilknyttet en eksisterende samhandlingstjeneste ved å benytte valgfri caseID parameter. Om meldingstjenesten ikke tilhører den angitte samhandlingstjenesten eller denne ikke eksisterer vil operasjonen avbrytes. Mulig å videresende meldingen til en e-post adresse om angitt i valgfri parameter AllowForwarding. Er denne satt til true vil bruker kunne sende meldingen videre som en e-post fra portalen. Om ikke satt settes den til standardverdi som er True. En melding kan kobles til innsending ved å oppgi ArchiveReference. Dette vil da oppfattes som et svar på en innsending. Det er også mulig å gi instrukser for hvordan en bruker kan svare på en melding.  I form av en enkel link brukeren kan åpne: I form av et skjema som bruker må sende inn. I form av en kopi av eksisterende innsending. Brukeren korrigerer og sender inn.   Digital postkasse til innbygger: Løsningen for «Digital postkasse til innbygger» har ikke støtte for all funksjonalitet som finnes i Altinn. Funksjoner som ikke blir brukt hvis det ikke opprettes noen melding i Altinn:\n Opprettelse av kobling mellom melding og en innsending. (Tjenesteeier svar på innsending) Svar på melding. (Sluttbruker svar på melding fra tjenesteeier.) Knyttning mot samhandlingstjenester. Varsel for h.h.v melding og digitalt brev styres med ulike innstillinger.  Ved overføring i sanntid sendes en og en melding av gangen. Synkron overføring.\nFor satsvis overføring kan data hentes fra tjenesteeiers system, eller tjenesteeier kan levere data på et definert Altinn område.\nTjenesten må være opprettet i TUL og eksportert til SBL, for at meldingene skal vises for sluttbrukerne/sluttbrukersystemer.\nKvittering for info om status på innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending via web service/batch grensesnitt (xml) benyttes som nøkkel.\nFor flere detaljer rundt kontrakten for InsertCorrespondenceV2 vennligst se kapittel 9.4.1, Tjenestekatalog og WSDL.\nDet tilbys støtte for gammelt AltUt format for eksisterende tjenesteeiere i Altinn.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     Correspondence InsertCorrespondenceV2 Basic/WS/EC   AltUt SubmitAltutMessagePw Basic   Receipt GetReceiptV2 Basic/WS/EC    Batch grensesnitt som inngår i beskrevet funksjonalitet:\n   Batch Overføringsformat Protokoll     Correspondence format XML FTP/SFTP   AltUt Format XML FTP/SFTP    Motta meldingsbekreftelse En meldingstjeneste kan defineres med at tjenesteeier ønsker:\n Åpne bekreftelse Lese bekreftelse  Meldingsbekreftelser tilgjengeliggjøres for overføring / henting:\n Tilgjengeliggjøres i \u0026ldquo;sanntid\u0026rdquo; per innsending Samles opp og tilgjengeliggjøres på gitte intervall eller spesifikt tidspunkt (batch)  Data kan leveres til en tjenesteeiers mottakssystem dersom det er etablert, eller tjenesteeier kan hente data på et definert Altinn område.\nTilgjengeliggjøres i standard Altinn format eller transformeres til tjenesteeiers eget mottaksformat.\nKvittering først opprettet ved innsending fra tjenesteeier oppdateres med informasjon om utsending, dvs. livsløpet til meldingstjenesten dokumenteres. Kvittering kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending benyttes som nøkkel.\nTilbyr støtte for gammelt AltUt format for eksisterende tjenesteeiere i Altinn.\nBatch grensesnitt som inngår i beskrevet funksjonalitet:\n   Batch Overføringsformat Protokoll     CorrespondenceConfirmations XML FTP/SFTP   AltUtConfirmationBatch XML FTP/SFTP    Det tilbys også egen funksjonalitet for rapportering av en samlet meldingstjeneste hvor tjenesteeier vil motta informasjon om status for alle brukere etter et gitt antall dager definert for tjenesten i TUL. Status for hver bruker her vil kunne være ikke lest, lest, og bekreftet. Data leveres til tjenesteeiers mottakssystem dersom det er etablert.\n   Batch Overføringsformat Protokoll     CorrespondenceUsageData XML FTP/SFTP    Sjekke status på meldingstjenester Tjenesteeier kan enkelt sjekke status på meldinger de har sendt inn på en tjeneste ved å benytte egen web service for dette. Resultatsettet fra tjenesten vil være avhengig av søkeparameterne som tjenesteeier sender inn. Tjenestekode (ServiceCode) og tjenesteutgavekode (ServiceEditionCode) er pålagte parametere i spørringen, mens det videre kan filtreres ved å sende inn SendersReference, avgiver (Reportee), til og fra dato (CreatedAfterDate og CreatedBeforeDate), konkrete meldingsstatuser (CurrentStatus), samt hvorvidt det har blitt sendt varsel (NotificationSent).\nFor hver enkelt melding som passer til søkekriteriene tjenesteeier angir vil man få returnert følgende informasjon:\n ID for meldingen Når meldingen ble opprettet Avgiver meldingen tilhører Avsenders referanse (satt av tjenesteeier) Liste over statusendringer med tidspunkt Liste med varsler knyttet til meldingen, inkludert mottaker, tidspunkt for når varselet er sendt (om sendt) og varselskanal.  Statussjekk operasjonen kan også returnere status på det som er blitt forsøkt videresendt til Digital postkasse til innbygger. Statusinformasjon for post som er videresendt inneholder:\n ID for sikkert brev slik det er registrert i Altinn Unik ID for brevet slik det fremkommer i sikker digital post systemet. Når brevet ble opprettet Når status for brevet ble sist endret Avgiver brevet tilhører Avsenders referanse List med alle statusene brevet har hatt.  I tillegg til denne informasjonen returneres også tjenestekode og tjenesteversjonskode tilbake, samt en parameteren som angir om en grense for antall returmeldinger er nådd (LimitReached). Er grensen nådd må tjenesteeier spisse søket sitt, f.eks. ved å begrense tidsrommet, for å få hentet ut status for alle meldingene.\nFor flere detaljer rundt kontrakten for GetCorrespondenceStatusDetails vennligst se kapittel 9.4.5.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     Correspondence GetCorrespondenceStatusDetails Basic/WS/EC    Lenketjeneste Formålet med en lenketjeneste er å overføre en bruker i Altinn til en annen nettside og er derfor alltid assosiert med en URL. Lenketjenester blir ikke instansiert i Altinn og er derfor ikke å finne i min meldingsboks i Altinn. For å kunne identifisere hvilken avgiver brukeren valgte å starte tjenesten med, sendes det med en nøkkel som den eksterne tjenesteportalen kan benytte for å spørre Altinn om informasjon om valgt avgiver. Det er også mulig å etterspørre informasjon om hvilke avgivere en bruker kan representere ved å benytte web service metoden GetReportees.\nLenketjenester defineres i TUL som de andre tjenestetypene slik at man kan sette autentiseringsnivå og autorisasjonsregler for start av tjenesten. Ekstern portal må verifisere at bruker faktisk skal ha tilgang til tjenestene portalen tilbyr, ved å benytte seg av Altinns XACML grensesnitt for ekstern autorisasjon.\nFor flere detaljer rundt kontrakten for GetReporteeByTempKey og GetReportees vennligst se henholdsvis kapittel 9.8.4 og 9.8.3. For mer informasjon om ekstern autorisasjon se kapittel 8.9.2 og 9.9.1.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     AuthorizationAdministration GetReporteeByTempKey WS/EC   AuthorizationAdministration GetReportees WS/EC   AuthorizationDecisionPointExternal AuthorizeAccessExternal WS    Formidlingstjenester Formidlingstjenester handler om å transportere data fra en eller flere avgivere til en eller flere mottakere, hvor Altinn fungerer som mellommann som sørger for transport og infrastruktur. Altinn er sådan en passiv part i prosessen, og både avsender og mottaker må benytte grensesnitt tilgjengeliggjort av Altinn.\nInnholdet i en formidlingstjeneste er data som er bestemt mellom aktørene som inngår i en formidlingstjeneste, og er ikke kjent av Altinn.\nFormidlingstjenesten overføres fra avsender til mottaker, og tjenesteeiere benytter derfor ikke egne grensesnitt kun for tjenesteeiere for formidlingstjenesten, men benytter i stedet de samme grensesnitt som er tilgjengelig for alle brukere av Altinn. Se derfor Implementasjonsguide for sluttbrukersystemer for mer informasjon om hvordan disse grensesnittene skal benyttes.\nTransport av data i en formidlingstjeneste kan gå via web service og SFTP kanal, både for opp- og nedlasting. Ved bruk av web service vil det være en funksjonell begrensning i størrelsen på filer som kan lastes opp og ned, satt til 1GB, mens grensen for SFTP-kanalen vil ligge på i underkant av 2GB.\nData som skal overføres over SFTP kanalen pakkes i en ZIP-fil med to forhåndsdefinerte Altinn XML filer for å definere metadata (manifest.xml) og mottakere (recipients.xml). Ved bruk av web service sendes først metadata og mottaker liste, før selve dataen overføres i en egen operasjon. Utover dette kan ZIP-filen i prinsippet inneholde hva som helst av data som må overføres til en eller flere aktører. Utover viruskontroll gjør ikke Altinn noen form for validering eller prosessering av denne dataen som forsendes, men sørger for at oppgitt metadata og mottakerinformasjon er korrekt og validerer, samt holder orden på kvitteringer og sporingsinformasjon om forsendelsen.\nFormidlingstjenester er tenkt brukt primært for formidlinger:\n B2B (Business-to-Business), B2G (Business-to-Government), G2B (Government-to-Business), eller G2G(Government-To-Government)  Når en avsender laster opp en formidlingstjeneste vil Altinn verifisere metadata og mottakere. Når dette er gjort vil forsendelsen gjøres tilgjengelig for mottakere for nedlasting. Samtidig vil Altinn opprette en kvitteringshierarki med en hovedkvittering tilhørende avsender, samt en underkvittering per mottaker. Hver underkvittering vil inneholde status på nedlastingen for denne mottakeren. Alle kvitteringer vil være knyttet til referanse satt av avsender. Avsender og mottaker kan også utveksle ytterligere statustekst på disse kvitteringene gjennom web service. På denne måten kan avsender følge opp status for hver enkelt mottaker.\nTiden en formidlingstjeneste vil være tilgjengelig for nedlasting i Altinn vil kunne variere fra tjeneste til tjeneste og styres av tjenesteeier. Dette betyr at filene etter en viss tidsperiode vil bli slettet selv om filene ikke er lastet ned av en eller flere av mottakerne.\nFormidlingstjenesten kan av tjenesteeier også settes opp til å benytte seg av et tjenesteeierstyrt rettighetsregister. Dette registeret kan begrense hvem som har tilgang til opp- og nedlasting av spesifikke tjenester, og styres av tjenesteeier. Se kapittel 8.12 for mer informasjon om dette registeret og hvordan dette styres. For formidlingstjenesten er det tjenesteeierstyrte rettighetsregisteret definert med følgende grunnleggende regler:\n For å kunne laste opp en formidlingstjeneste må avsender inneha «write»-rettigheten for formidlingstjenesten. For å kunne laste ned en formidlingstjeneste må mottaker inneha «read»-rettigheten for formidlingstjenesten.  I enkelte brukstilfeller er det i tillegg ønskelig at mottaker også skal kunne sende informasjon tilbake til avsender. For å unngå at alle mottaker da også får «write»-rettigheten, og på den måten kan sende til andre mottakere, benyttes feltet «condition» (betingelse) i det tjenesteeierstyrte rettighetsregisteret. For å støtte brukstilfellet har man derfor også følgende regler:\n En mottaker som kun skal kunne sende tilbake til en avsender av tjenesten må ha rettigheten «write», men da med «condition» satt til verdien «recipient». Denne betingelsen benyttes så i Altinn til å validere mottakerlisten, og kun brukere som har rettigheten «read» med «condition» satt til «sender» vil være godkjente mottakere. Dette er vist med Org D i figuren under som kun kan sende til Org A.\n Merk her at avsender med rettigheten «write» uten «condition» kan sende til en mottaker med rettighet «read» med «condition» satt til «sender». Dette er vist med Org B i figuren under som kan sende til samtlige andre mottakere.\n  Ved bruk av tjenestene som tilbys av tjenesteeierstyrt rettighetsregister (9.17) kan det bemerkes at parameteren «Party» ikke benyttes for formidlingstjenesten.\n Figur 2 - Viser de ulike mulighetene for formidlingstjenesten som er gyldige og hvilke rettigheter og betingelser som trengs.   Se også Vedlegg C: Flytdiagram for formidlingstjeneste for overordnet flyt ved bruk av formidlingstjeneste mellom avsender og mottaker.\nInnsynstjenester Når en tjenesteeier ønsker å tilgjengeliggjøre et register for oppslag for brukere, men uten å ha tilgjengelig presentasjon for dette så kan det realiseres ved hjelp av en innsynstjeneste i Altinn. Konseptuelt kan man se en innsynstjeneste som en kombinasjon av en innsendingstjeneste og en meldingstjeneste der hvor det ikke foregår noen behandling av den innsendte informasjonen.\nEn innsynstjeneste bygger på en Web Service eksponert fra tjenesteeierens side og kan benyttes av både portalbrukere og sluttbrukersystemer via Altinn som et mellomledd.\nInnsynstjenester kan i TUL settes opp slik at tjenesteeier kan motta informasjon om brukere som har aktivert en innsynstjeneste. For dette kreves det at et forsendelsesoppsett settes opp i Altinn mot tjenesteeieren (ShipmentDefinition). Denne vil angi metode og overordnet mal (ShipmentOutboundTemplate) forsendelsen skal sendes på. Hver forsendelse består av den definerte malen, samt en eller flere forsendelses-deler som hver representerer en åpnet innsynstjeneste. En forsendelses-del følger et gitt format:\nInnsynstjeneste forsendelses-del (LookupServiceUseConfirmation)\n\u0026lt;LookupServiceUseConfirmation\u0026gt; \u0026lt;ServiceCode\u0026gt; \u0026lt;!--Angir innsynstjenestens tjeneste kode--\u0026gt; \u0026lt;/ServiceCode\u0026gt; \u0026lt;ServiceEdition\u0026gt; \u0026lt;!--Angir innsynstjenestens tjeneste versjon kode--\u0026gt; \u0026lt;/ServiceEdition\u0026gt; \u0026lt;ReporteeNumber\u0026gt; \u0026lt;!--Angir aktuell avgiver som aktiverer innsynstjenesten, fødselsnummer eller organisasjonsnummer--\u0026gt; \u0026lt;/ReporteeNumber\u0026gt; \u0026lt;ReadDateTime\u0026gt; \u0026lt;!--Angir dato og tid når innsynstjenesten ble aktivert--\u0026gt; \u0026lt;/ReadDateTime\u0026gt; \u0026lt;/LookupServiceUseConfirmation\u0026gt;  For mer informasjon om hvordan en innsendingstjeneste tilgjengeliggjøres i portal og for sluttbrukersystemer, se TR435 Brukerdokumentasjon for tjenesteutvikling.\nSamhandlingstjenester En samhandlingstjeneste er ikke som andre tjenestetyper i Altinn da oppgaven til denne er å sette sammen flere andre tjenestetyper til én logisk prosess for brukeren. Dette er uavhengig av om de underliggende tjenestetypene er rettet mot én eller flere tjenesteeiere.\nEt eksempel på en samhandlingstjeneste kan være Skattedialog. Her kan man ha flere underliggende innsendingstjenester, meldingstjenester og innsynstjenester ovenfor Skatteetaten som knyttes sammen til én logisk forretningsprosess. Et annet eksempel vil kunne være Navnedialog. En samhandlingstjeneste som kan knytte sammen innsendingstjenester og meldingstjenester mot flere tjenesteeiere.\nSamhandlingstjenester kan være definert av sluttbrukere (brukerdefinert samhandlingstjeneste – en samleside) eller av tjenesteeiere (tjenesteeierdefinert samhandlingstjeneste – en e-dialog). Den brukerdefinerte samhandlingstjenesten er predefinert i TUL av en tjenesteutvikler. Denne kan instansieres og til en viss grad tilpasses av sluttbruker i SBL. Tjenesteeiere definerer i sin helhet egne samhandlingstjenester ved hjelp av TUL. Disse blir deretter migrert til SBL i likhet med andre tjenestetyper. I integrasjonssammenheng er det de tjenesteeierdefinert samhandlingstjenestene som er interessante.\nEn instans av en samhandlingstjeneste har en unik Case ID tilknyttet – en saks id. Når det da refereres til en instans av en samhandlingstjeneste, beskrives det ved bruk av Case ID.\nFølgende illustrerer mulighetsrommet for Samhandlingstjenester og en typisk kronologisk rekkefølge:\nTUL:\n Definisjon av Altinn-tjenester med tjenestetype “Samhandlingstjeneste\u0026rdquo;.\n Definisjon av tjenestesammensetning. Tjenester som kan velges til å inngå i en samhandlingstjeneste må være av typen innsynstjeneste, meldingstjeneste eller innsendingstjeneste.\n Definisjon av gjenbruk av data mellom deltakende tjenester i samhandlingstjenesten. Produsent og konsument av data settes opp. Merk at kun innsendingstjenester kan settes opp som konsument.\n Definisjon av en tilstandsmaskin som identifiserer forretningsprosessen som et logisk sett av tilstander sammen med tilhørende presentasjon i form av dialogsider (se punkt 5).\n Definisjon av hendelser som kan medføre en tilstandsovergang for samhandlingstjenesten. Betingelser kan knyttes til hendelsene slik at de må oppfylles før en tilstandsovergang kan skje. Hendelsene er typisk knyttet til stadier for de underliggende tjenestene som inngår i samhandlingstjenesten. Hendelser deles inn i forhåndsdefinerte og skreddersydde hendelser. De forhåndsdefinerte hendelse trigges automatisk i Altinn og består av følgende:\n     Hendelses Navn Tjenestetype Portal Sluttbrukersystem Etatssystem     Instantiated Innsendingstjeneste, Innsynstjeneste ✅ ✅    Instantiated Innsendingstjeneste, Meldingstjeneste   ✅   Submitted Innsendingstjeneste ✅ ✅    Archived Alle ✅ ✅    Opened Meldingstjeneste, Innsynstjeneste ✅ ✅    Confirmed Meldingstjeneste ✅ ✅     Tabellen viser de forhåndsdefinerte hendelsene, hvilken tjenestetype de er relatert til, samt om de trigges fra portal, sluttbrukersystem eller etatssystem. For eksempel kan etatssystem instansiere innsendingstjenester eller meldingstjenester, og dermed kun trigge hendelsen Instantiated for disse. Skreddersydde hendelser er hendelser definert av etat. Navn på disse hendelsene må defineres inn i tilstandsmaskinen (se punkt 3). Etaten kan kalle web service med hendelsen, både de forhåndsdefinerte og de skreddersydde, for å trigge en tilstandsovergang (se 8.6.1.6).\n Opplasting av grafikkfiler til bruk i forhåndsdefinert dialogkomponent\n Definisjon av dialogsider for samhandlingstjenesten basert på et sett av 6 forhåndsdefinerte maler og 10 forhåndsdefinerte dialogkomponenter.\n Definisjon av merknadsmaler for samhandlingstjenesten. Etaten kan ved bruk av et eksternt grensesnitt (se 8.6.1.5) sette predefinert merknad på samhandlingstjenesten eller tilhørende underliggende tjenester.\n Oversettelse til flere språk (engelsk, bokmål og nynorsk) for språkstøttet tekst i samhandlingstjenesten.\n Migrering av samhandlingstjeneste til SBL. Alle underliggende tjenesteutgaver som inngår i samhandlingstjenesten må være migrert før selve samhandlingstjenesten kan migreres.\n  For mer informasjon om oppsett av en samhandlingstjeneste i TUL, vennligst se Brukerveiledning for TUL.\nSBL:\n Opprettelse av en sak (instansiering av en spesifikk utgave og versjon av samhandlingstjenesten definert i TUL og migrert til SBL)\n Presentasjon av en sak til sluttbrukeren i et arbeidsområde i SBL, modellert for å gi støtte i prosessen relatert til samhandlingstjenesten med enkel tilgang til de underliggende tjenestene.\n Muliggjøre for sluttbruker og sluttbrukersystemer å interagere med de underliggende tjenestene gjennom henholdsvis dialogsidene for samhandlingstjenesten eller ved hjelp av de eksterne grensesnittene.\n Starte en tjeneste fra tjenestekatalogen som inngår som underliggende tjeneste til en samhandlingstjeneste, og deretter bli presentert med valget om man i stedet skal starte en ny eller åpne en eksisterende samhandlingstjeneste.\n Forårsake tilstandsoverganger som følge av de definerte hendelsene for tilstandsmaskinen.\n Muliggjøre at tjenesteeierssystemer kan sende merknader til saken og underliggende forekomster av tjenesteutgavene som inngår i sakens samhandlingstjeneste.\n Muliggjøre at tjenesteeierssystemer kan sende hendelser til den bestemte saken, eller til alle saker for en bestemt utgave og versjon av samhandlingstjenesten, gjennom eksternt grensesnitt.\n  Merk at en arkivert samhandlingstjeneste ikke vil være tilgjengelig i tjenesteeiers arkiv, kun i brukers arkiv.\nTjenester i forhold til bruk av samhandlingstjenester Nedenfor beskrives funksjonalitet for samhandlingstjenester som kan benyttes av tjenesteeiere.\nInstansier en samhandlingstjeneste I de tilfellene en tjenesteeier ønsker å instansiere en samhandlingstjeneste (typisk knyttet til abonnementsinstanseriering) så kan en velge å instansiere en samhandlingstjeneste for en bruker/kunde.\n   Tjeneste Operasjon Type     CaseAgencySystem InstantiateCollaborationAgencySystem Basic/WS/EC    Samtlige parametere i operasjonen unntatt visibleDateTime og dueDate må sendes inn for å få opprette en sak. visibleDateTime kan benyttes for å sette når samhandlingstjenesten vil være synlig for brukeren frem i tid, om denne ikke angis vil tjenesten være synlig umiddelbart.\nFunksjonelt vil InstantiateCollaborationAgencySystem returnere en referanse til instansen som ble opprettet, caseID. Denne caseID må benyttes av tjenesteeieren på andre tjenester som ønsker å kommunisere med den opprettede instansen. Skulle en time-out oppstå vil ikke samhandlingstjenesten instansieres siden tjenesten er transaksjonshåndtert.\nFor flere detaljer rundt kontrakten vennligst se kapittel 9.10.1, Tjenestekatalog og WSDL.\nHente ut kjørende instanser av samhandlingstjenester Hvis en tjenesteeier har valgt å ikke lagre case ID fra et tidligere grensesnitt (mottatt innsendingstjeneste eller instansiert samhandlingstjeneste) og mottar oppgaver på papir, så kan den utføre oppslag mot Altinn for å finne eventuelle saker (samhandlingstjenesteinstanser). Andre tilfeller der dette kan være aktuelt er hvis en annen tjenesteeier, eller brukeren selv, har instansiert samhandlingstjenesten.\n   Tjeneste Operasjon Type     CaseAgencySystem GetCaseListAgencySystem Basic/WS/EC    GetCaseListAgencySystem kan brukes til to formål:\n Hente ut caseID, tilstand og merknad for kjørende instanser av samhandlingstjenester for bestemt fødselsnummer/organisasjonsnummer (reporteeNumber), tjeneste (externalServiceCode) og tjenesteutgave (externalServiceEditionCode).\n Hente ut caseID, tilstand og merknad for kjørende instanser av bestemt type samhandlingstjeneste basert på tjeneste (externalServiceCode) og tjenesteutgave (externalServiceEditionCode).\n Hente ut tilstand og merknad for bestemt sak basert på fødselsnummer/organisasjonsnummer (reporteeNumber) og CaseID (caseID) For punkt 1 og 2 må parametrene externalServiceCode og externalServiceEditionCode angis, mens parameter caseID må benyttes for punkt 3. Om parameter languageID ikke angis, eller forespurt språk ikke støttes vil språkavhengige returverdier returneres på tjenestens satte standardspråk. Alle andre parametere er obligatoriske og må angis.\n  Operasjonen returnerer informasjon om samhandlingstjenestens unike identifikator, CaseID, navnet på tjenesten, CaseName, og eventuelt om det er satt noen merknader på samhandlingstjenesten ved å returnere den unike identifikatoren, NoticeTemplateID. I tillegg returneres det informasjon om samhandlingstjenestens tilstand i form av visningsvennlig navn basert på språkparameter, CurrentStateFriendlyName, unik identifikator for tilstanden, CurrentStateID, og tilstandens navn, CurrentStateName. Alle disse er definert for tjenesten i TUL.\nCaseID vil kunne benyttes i andre operasjoner mot Altinn, enten alene som for eksempel ved å instansiere en innsendingstjeneste som skal knyttes til samhandlingstjenesten via operasjonen SubmitAndInstantiatePrefilledFormTask (se 8.1.1 og 9.6.1), eller sammen med informasjon om tilstand til å registrere en hendelse for samhandlingstjenesten via operasjonen NotifyEventAgencySystem (se 8.6.1.6 og 9.10.3).\nVennligst observer at hvis en bruker har instansiert flere forekomster av samme samhandlingstjeneste så vil ikke bare én forekomst returneres og derfor må tjenesteeieren basert på tilstand og merknad kunne identifisere den riktige instansen. Rent teknisk kan også tjenesteeiere ha opprettet flere instanser av samme tjenesteutgave om ønskelig. For flere detaljer rundt kontrakten vennligst se kapittel 9.10.2, Tjenestekatalog og WSDL.\nKnytte innsendingstjeneste til sak En tjenesteeier kan forhåndsinstansiere en innsendingstjeneste for en bruker og samtidig knyttet denne til en løpende sak. Dette gjøres ved å sende med den valgfrie parameteren Case ID i operasjonskallet for operasjonen SubmitAndInstantiatePrefilledFormTask. For mer informasjon se Innsendingstjenester (8.1) og operasjonen SubmitAndInstantiatePrefilledFormTask (9.6.1).\nKnytte meldingstjeneste til sak En tjenesteeier kan velge å knytte en meldingsatjeneste til en løpende sak. Dette gjøres ved at den valgfrie parameteren Case ID benyttes i operasjonskallet for meldingstjenesten. For mer informasjon se Meldingstjenester (8.2) og operasjonen InsertCorrespondenceV2 (9.4.1).\nSett merknad på sak eller underliggende tjeneste Ved å sette merknader på tjenester, kan tjenesteeier formidle informasjon til sluttbruker om samhandlingstjenester. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     CaseAgencySystem SetNoticeAgencySystem Basic/WS/EC    Obligatorisk parameter reporteeElementID angir hvilken sak (Case ID), eller tilordnet tjeneste (innsendingstjeneste, meldingstjeneste, innsynstjeneste (kun arkivert)) merknaden skal settes på. Settes merknad på en tilordnet tjeneste som er arkivert (innsendingstjeneste, meldingstjeneste eller innsynstjeneste) må identifikatoren prefikses med AR. Identifikatoren for samhandlingstjenesten kan ha blitt mottatt fra InstantiateCollaborationAgencySystem, en arkivert innsendingstjeneste, eller den kan hentes ved bruk av GetCaseListAgencySystem.\nAlle maler (templates) for merknader må forhåndsdefineres av tjenesteeier på samhandlingstjenesten i tjenesteutviklingsløsningen og refereres til i kallet sammen med key-value par for variabler til merknaden. Mal defineres gjennom obligatorisk parameter NoticeTemplateID. Angis det feil mal eller nøkkel for samhandlingstjenesten vil feilmelding returneres. For flere detaljer rundt kontrakten vennligst se kapittel 9.10.4, Tjenestekatalog og WSDL.\nSende hendelse til sak Tjenesteeier kan påvirke tilstanden for en samhandlingstjeneste ved å registrere en ny hendelse (Event). Et eksempel hvor dette er nyttig er dersom tjenesteeier har mottatt informasjon via en annen kanal enn Altinn (f.eks. ved papirbasert innrapportering), og derfor ønsker å flytte samhandlingstjenesten til neste tilstand.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     CaseAgencySystem NotifyEventAgencySystem Basic/WS/EC    Denne operasjonen tar en entitet av typen StateMachineEventNotificationBE som input. Denne inneholder som de fleste andre for samhandlingstjenester CaseID parameteren som da unikt identifiserer en samhandlingsinstans hendelsen gjelder. Alternativt kan tjenesteeier velge å heller spesifisere tjeneste og tjenesteutgave, via parametrene ExternalServiceCode og ExternalServiceEditionCode. I det tilfellet vil hendelsen internt i Altinn bli kommunisert til alle kjørende instanser for kombinasjonen av nevnte tjeneste og tjenesteutgave. Til sammenligning vil hendelser som skjer innad i Altinn-løsningen kun kommuniseres til den saken som trigget hendelsen.\nI de tilfellene saken er opprettet av bruker selv eller av annen tjenesteeier vil man kunne hente saks id for bestemt samhandlingstjeneste (tjeneste og tjenesteutgave) vha GetCaseListAgencySystem som beskrevet i 8.6.1.2, eller eventuelt fra en allerede innsendt innsendingstjeneste knyttet til saken.\nEvent er obligatorisk parameter for operasjonen som angir hendelsen, mens ReporteeElementID er valgfri og benyttes kun i loggsammenheng i Altinn for å knytte hendelsen opp mot et subelement (dette kan for eksempel være en identifikator for en arkivert innsendingstjeneste tilknyttet samhandlingstjenesten). Hendelsen som skal sendes bør sees i sammenheng med tilstandsmaskinen for den aktuelle samhandlingstjenesten, og de hendelser som er definert der. Merk at en hendelse ikke nødvendigvis vil trigge en tilstandsendring; følgende vil være avgjørende:\n Er hendelsen aktuell for samhandlingstjenestens nåværende tilstand?\n og, finnes betingelser knyttet til hendelsen som ikke er oppfylt?\n  Om 1. eller 2. blir evaluert til false vil det ikke skje en tilstandsendring. Tilstander, hendelser og eventuelle betingelser er alle definert i TUL for samhandlingstjenesten.\nOperasjonen returnerer en liste av StateMachineNotificationResultBE. En liste returneres om hendelsen blir sendt til flere samhandlingsinstanser basert på parametrene ExternalServiceCode og ExternalServiceEditionCode. Om hendelsen kun sendes til en samhandlingstinstans vil kun en entitet returneres. StateMachineNotificationResultBE angir identifikator for samhandlingstjenesten resultatet gjelder for (CaseID), hvorvidt det skjedde en tilstandsendring (IsStateChanged) og dens navn (CurrentStateName). I tillegg angis evt betingelse (ConditionName) og evalueringen av betingelsen (ConditionEvaluationResult). Om det skulle oppstå en feilsituasjon i tilstandsmaskinen vil parameteren HasException være angit som true. Feilinformasjon og feilkode vil da ligge i henholdsvis ExceptionDetail og ErrorCode.\nFor flere detaljer rundt kontrakten vennligst se kapittel 9.10.2, Tjenestekatalog og WSDL.\nEksempler på bruk av tjenestegrensesnitt for samhandlingstjenester De påfølgende avsnittene viser eksempler på bruka av samhandlingstjenester.\nBrukerinstansiert samhandlingstjeneste med én etat Dette eksempelet viser en enkel samhandlingstjeneste som er definert i TUL og som blir instansiert av brukeren.\nTilstandsmaskinen består av to tilstander og det er definert gjenbruk av data mellom en meldingstjeneste og siste innsendingstjeneste. Selve kopieringen av data foregår idet innsendingstjenesten instansieres.\n Figur 3 - Brukerinstansiert samhandlingstjeneste med gjenbruk av data   Etatsinstansiert samhandlingstjeneste med én etat. Dette scenarioet beskriver en samhandlingstjeneste som Skattedialogen hvor etat tar initiativ og instansierer første innsendingstjeneste for brukeren.\n Figur 4 - Etatsinstanisert samhandlingstjeneste   I forhold til forrige eksempel så er eneste forskjellen de to første kallene. Deretter fungerer systemdialogen på samme måte. I tillegg bør det nevnes at gjenbruk av data ikke kan benyttes når etaten instansierer innsendingstjeneste. Dette må i stedet løses på etatens side før innsendingstjeneste instansieres.\nBrukerinstansiert samhandlingstjeneste med to etater med kanaluavhengighet I dette eksempelet så vil en bruker velge å sende inn på papir mens selve samhandlingstjenesten er blitt startet i Altinn.\n Figur 5 - Brukerinstansiert samhandlingstjeneste med to etater med kanaluavhengighet   I dette eksempelet starter samhandlingstjenesten som i første scenario, men deretter velger en bruker å sende inn på papir. Etat 2 vil da bruke oppslagstjenesten knyttet til samhandlingstjenesten og deretter finne riktig samhandlingstjeneste. Deretter vil tilstandsmaskinen bli \u0026ldquo;oppdatert\u0026rdquo; med at oppgave er innsendt og fortsette som før.\nKvitteringer For alle forsendelser inn og ut av Altinn skapes eller oppdateres en kvittering. Kvitteringer bidrar til at tjenesteeier kan får større innsikt i livsløpet fra f.eks. opprettelse av innsending til mottak av arkivert innsendingstjeneste. Kvitteringene skaper også bedre sporbarhet i Altinn løsningen.\nFor formidlingstjenester vil det lages en hovedkvittering for den som laster opp en fil og en underkvittering for hver mottaker av filen. Hovedkvittering med underkvittering kan på den måten brukes til å danne et komplett bilde av opplasting og nedlastinger.Dette kan også benyttes som en enkel kommunikasjonskanal ved at deltakere på forsendelsen kan oppdatere kvitteringen de har fått tildelt med en ny tekst og status.\nFor samhandlingstjenester vil det ikke bli generert kvitteringer da disse ikke arkiveres til tjenesteeiers arkiv. Frittstående varsel vil heller ikke generere kvitteringer. For innsynstjenester vil tjenesteeier kunne motta kvittering for bruk av tjenesten og arkivering av tjenesten. Tjenesteutvikler vil kunne velge om det skal sendes kvittering i disse to tilfellene.\nFor å muliggjøre dette kreves det at tjenesteeier markerer sine forsendelser inn til Altinn med referanser som lagres på kvitteringen. Samme referanse benyttes ved oppslag/kvittering.\nEksempler\na) Ved satsvis innsending av abonnementsdata benyttes xml elementet ServiceOwner/Subscription/ExternalShipmentReference for angivelse av referanse.\nb) Ved sanntid overføring av abonnementsdata benyttes parameteren externalBatchId i web service metoden SubmitSubscription for angivelse av referanse.\nSe xsd referanse for aktuell dataoverføring i kapittelet om Grensesnitt – batch til Altinn, for detaljer om plassering av referanse ved satsvis overføring. For overføring i sanntid henvises det til den aktuelle web service i kapittelet om Grensesnitt – web services.\nMulige kvitteringsoperasjoner:\n Hente kvitteringer for innsendte data Kvittere for mottak av data Hente lister med kvitteringer  Kvitteringsinformasjon kan kun hentes i sanntid. For å søke opp kvitteringer brukes GetReceiptList. Har mann SendersReference evt ExternalShipmentReference vil dette spisse søket. De fleste referanser vil fungere i søkefunksjonaliteten.\nFor flere detaljer rundt kontrakten for GetReceipt, GetReceiptList og SaveReceipt vennligst se henholdsvis kapittel 9.3.1, 9.3.2 og 9.3.3, Tjenestekatalog og WSDL.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     Receipt GetReceipt Basic/WS/EC   Receipt GetReceiptList Basic/WS/EC   Receipt UpdateReceipt Basic/WS/EC    Frittstående varsel Tjenesteeier kan velge å sende frittstående varsler til personer og enheter i Altinn. Dette er varsler som kan sendes til fødselsnummer eller organisasjonsnummer uten at varselet trenger å være tilknyttet et spesifikt element (melding eller skjema).\n   Tjeneste Operasjon Type     NotificationAgencyExternal SendStandaloneNotification Basic/WS/EC   NotificationAgencyExternal SendStandaloneNotificationV2 Basic/WS/EC   NotificationAgencyExternal SendStandaloneNotificationV3 Basic/WS/EC    Operasjonen SendStandaloneNotification benyttes for å sende de frittstående varslene. Operasjonen har støtte for en liste med varsel med helt forskjellige mottakere og formål. For hvert varsel må følgende angis:\n ReporteeNumber angir fødselsnummer eller organisasjonsnummer varselet skal sendes til, den kan brukes til å slå opp mottakeradresse for varselet i brukerens kontaktprofil i tilfelle fødselsnummer, eller angitte kontaktpersoner på enhetsprofilen i tilfelle organisasjonsnummer.\n Service med parameterene ServiceCode og ServiceEdition fungerer som et mottaker filter hvis ReporteeNumber er et organisasjonsnummer. Organisasjonen vil uansett få varsel på sine registrerte varslingsadresser, men listen med personer som har registrert personlig kontaktinformasjon for virksomheten vil bli filtrert. Listen filtreres først basert på personens preferanser. Det vil si listen med tjenester de har registrert at de er interesert i. Neste filtrering er basert på autorisasjon. Personen må ha lesetilgang til tjenesten (Service) på veiene av organisasjonen. Hvis det ikke er angitt noen tjeneste så vil ingen personer få varsel da det blir umulig å autorisere. Service blir ikke benyttet til noe hvis ReporteeNumber er et fødselsnummer.\n ReceiverEndPoints benyttes til å angi om varselet skal sendes som SMS eller epost. Hvis det ikke blir oppgit noe mobilnummer eller epostadresse så vil Altinn forsøke identifisere dette selv. Altinn vil da gjøre oppslag i registre for henholdsvis person og organisasjon basert på angitt avgiver. Hvis avgiver er en person vil Altinn gjøre oppslag i kontakt- og reservasjonsregisteret til Difi og for organisasjoner vil det gjøres oppslag i Kontakt og fullmaktsregisteret for virksomheter knyttet til enhetsregisteret.\n LanguageID og NotificationType vil sammen definere hvilken mal som skal benyttes for varselet. Denne må være forhåndsdefinert i databasen.\n TextTokens med parameteren TokenValue kan benyttes hvis valgt mal har substitusjoner definert. Substitusjoner blir gjort basert på rekkefølgen TokenValue blir angitt i forespørselen. Substitusjonene som varselsmalen har må begynne på 0 og fortsette oppover. Parameteren TokenNum har for tiden ingen funksjon og kan utelates.\n UseServiceOwnerShortNameAsSenderOfSms angir om tjenesteeier selv skal stå som avsender av SMS varsel i stedet for Altinn. For at tjenesteeier skal kunne stå som avsender må tjenesteeier på forhånd bestille registrering av ShortName (maks 11 alfanumeriske tegn) for tjenesteier i Altinn.\n  FromAddress strengen angir fra adresse når transport type er e-post (må være på gyldig e-post format). Denne er valgfri, og hvis ikke angitt vil det for e-post varsler bli brukt en standard Altinn e-post adresse. ShipmentDateTime parameteren kan benyttes hvis varselet ønskes sendt på et senere tidspunkt, hvis ikke angis vil varselet sendes umiddelbart.\nSendStandaloneNotification tjenesten finnes i tre versjoner. Funksjonelt er de identiske, men det er variasjon in responsen:\nVersjon 1; Operasjonen returnerer ingen verdi, kun feilmeldinger.\nVersjon 2; Operasjonen returnerer en streng med mottakere som var reservert mot varsel, med enten en «varsel feilet» eller «varsel feilet delvis» melding. Varsel vil ses på som feilet dersom alle mottakere var reservert og delvis feilet dersom noen, men ikke alle, mottakere var reservert mot varsel.\nVersjon 3; Operasjonen returnerer et resultat-objekt SendStandAloneNotificationResult som inneholder samme return melding som fra Versjon 2, og en liste med resultater for de varsler som ble levert. I disse resultatene er følgende angitt:\n NotificationType inneholder NotificationType fra det originale varselet som ble levert. Brukes til å identifisere hvilket levert varsel resultatet tilhører.\n ReporteeNumber inneholder ReporteeNumber fra det originale varselet som ble levert. Brukes til å identifisere hvilket levert varsel resultatet tilhører.\n EndPoints er en liste med mottakere som mottok varsel. Hvert mottakker objekt inneholder følgende verdier:\n Name er navn på mottaker der dette er tilgjengelig. ReceiverAddress er addressen varselet vil leveres til. TransportType er hva slags transport varsel levers på. RetrieveFromProfile beskriver om mottakker ble hentet fra en organisasjon eller brukers profil.   Det anbefales å bruke kun versjon 3. For flere detaljer rundt kontrakten se kapittel Varseltjeneste\nAutorisasjonsfunksjonalitet for tjenesteeiere Altinn 2 versjon 2 tilbyr at eksterne løsninger kan benytte Altinn som autorisasjons komponent. Dette betyr at eksterne system kan definere eksterne ressurser og regler tilknyttet disse. Deretter kan eksterne systemer verifisere at bruker har tilgang til ressurs. Tjenestene kan aksesseres fra tjenesteeierssystem fra gyldig ip-adresse.\nVerifiseringstjenesten kan også benyttes til å autentisere en brukers tilgang til tjenesteeiers tjenester. Denne typen verifisering benytter de autorisasjonsregler som er definert på tjenesten i TUL.\nImportere eksterne regler Tjenesteeiere har mulighet til å importere eksterne ressurser og regler som senere kan benyttes eksternt til å avgjøre tilgang ved hjelp av tilgangsmekanismenen i Altinn.\n   Tjeneste Operasjon Type     AdministrationExternal ImportAuthorizationPolicy WS    ImportAuthorizationPolicy er operasjonen som tjenesteeiers system kan benytte for å importere de eksterne policyene. Operasjonen tar en XML streng som input parameter. Denne XML strengen må følge det standardiserte formatet XACML For flere detaljer rundt kontrakten vennligst se kapittel 9.8.1, Tjenestekatalog og WSDL.\nEkstern autorisasjon Tjenesteeierne har etter å ha importert eksterne regler muligheten for å gjøre kall mot Altinn for å benytte Altinns autorisasjonskomponent for autorisasjonsavgjørelser. Altinn vil motta forespørsel og ta en avgjørelse basert på de eksterne reglene og ressursene som er lagt inn. Regler som er satt i TUL på en tjeneste er også tilgjengelig for tilsvarende verifisering for å sjekke en brukers tilgang til tjenesten.\nAuthorizationDecisionPointExternal er tjenesten i Altinn II som har ansvaret for alle avgjørelser rundt autorisasjon basert på regler og roller i Altinns autorisasjonskomponent. Operasjonen AuthorizeAccessExternal tar imot en forespørsel på XACML format.\n   Tjeneste Operasjon Type     AuthorizationDecisionPointExternal AuthorizeAccessExternal WS    For flere detaljer rundt kontrakten vennligst se kapittel 9.9.1, Tjenestekatalog og WSDL.\nHente roller GetRoles er tjenesten i Altinn II som tjenesteeiere kan bruke til å hente ut roller etter angitte søkekriterier i søkeobjektet.\n   Tjeneste Operasjon Type     AdministrationExternal GetRoles WS    For flere detaljer rundt kontrakten vennligst se kapittel 9.8.2, Tjenestekatalog og WSDL.\nUthenting av tiltrodd tredjeparts logg Tjenesteeiere vil ha muligheten til å hente ut logg over alle hendelser for innsendte innsendingstjenester.\n   Tjeneste Operasjon Type     TTPArchiveAgencyExternalBasic GetAuditTrailBasic Basic    Operasjonen GetAuditTrailBasic benytter enten parameteren ReporteeNumber eller Username for å identifisere for hvilken bruker eller organisasjon det skal hentes ut for. Reportee parameteren kan da enten være et fødselsnummer eller et organisasjonsnummer, avhengig av hva man ønsker. Parameter Username brukes når man vil angi hente basert på brukervalgt brukernavn.\nVidere må parametrene FromDate og ToDate benyttes for å begrense søket – begge er obligatoriske. For å snevre søket ytterligere kan eventuelt parametrene ExternalServiceCode og ExternalServiceEditionCode benyttes.\nOperasjonen vil returnere en eller flere elementer (TTPElementBE) som angir den interne ReporteeElementID’en, resultat av integritetssjekk (IntegrirtyCheck), samt et XML element (TTPData) som vil inneholde log dataen som er registrert for den aktuelle innsendingen.\nFor flere detaljer rundt kontrakten vennligst se kapittel 9.12.1, Tjenestekatalog og WSDL.\nSluttbrukers meldingsboks En sluttbruker som logger inn i Altinn, vil kunne se en liste med sine tjenesteelementer på siden Min meldingsboks. Det er mange muligheter for å filtrere innholdet i listen, og hvert element kan åpnes på en separat side.\nEn tjenesteeier har mulighet til å presentere innholdet i sluttbrukers meldingsboks i sin egen portal/selvbetjeningsløsning. Forutsetningen er at sluttbrukeren er autentisert og føderert fra IDPorten. Uthenting av sluttbrukers meldingsboks fra Altinn kan være aktuelt for tjenesteeiere som ønsker å tilby et \u0026ldquo;min side\u0026rdquo;-konsept i sin egen løsning, uten å synliggjøre at tjenestene er implementert i Altinn.\nPresenter innhold i sluttbrukers meldingsboks – Altinn API For detaljer om hvordan innhold i sluttbrukers meldingsboks i Altinn kan presenteres i tjenesteeieres egen selvbetjeningsløsning/portal henvises det til detaljert informasjon om Altinn API som finnes på Altinnett:https://altinnett.brreg.no/Altinn-API\nTjenesteeierstyrt rettighetsregister Tjenesteeierstyrt rettighetsregister er innført som en ytterligere mulighet for tjenesteeiere å spesifisere hvem som skal ha tilgang til ulike tjenester i Altinn. Registeret vil kunne benyttes på toppen av eksisterende rolle- og rettighetsfunksjonalitet. Registeret benyttes foreløpig kun for formidlingstjenester.\nBruk av registeret vil introdusere en ekstra sjekk på hvorvidt en konkret bruker har mottatt nødvendige rettigheter av tjenesteeieren til å benytte seg av en spesifikk tjeneste. Informasjon som legges inn i registeret er nøkkelinformasjon om brukeren, tjenestekoder, og rettighet. Konkret funksjonalitet og effekt av operasjoner i registeret vil være avhengig av tjenestetype.\nRegisteret i Altinn tilbyr 3 operasjoner for å hente ut, legge til og slette regler. GetRights operasjonen vil returnere hvilke regler som ligger i registeret, AddRights og DeleteRights er operasjoner for å henholdsvis legge til nye og slette eksisterende regler. Begge de to sistnevnte operasjonen vil returnere en liste med reglene som kom inn sammen med en status for resultatet av endringen for hver regel. Operasjonen er beskrevet i mer detalj i kapittel 9.17.1, 9.17.2 og 9.17.3.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     RegisterSSRAgencyExternal GetRights Basic/WS/EC   RegisterSSRAgencyExternal AddRights Basic/WS/EC   RegisterSSRAgencyExternal DeleteRights Basic/WS/EC    BatchLogging Tjenesteeiere som har levert inn data filer-til behandling har mulighet til å sjekke status og historikk ved å bruke BatchLogging tjenesten i Intermediary.\n   Tjeneste Operasjon Type     BatchLoggingAgencyExternal GetStatusOverview Basic/WS/EC   BatchLoggingAgencyExternal GetDetailedStatus Basic/WS/EC   BatchLoggingAgencyExternal GetDataItem Basic/WS/EC    Status henting er delt opp i 3 nivåer.\nGetStatusOverview henter ut en liste med alle DataBatcher (en levert fil er en DataBatch) som er behandlet basert på søke-kriteria som Tjenesteeier leverer. Denne listen inneholder metadata for filen, og antall feil som er opplevd under behandling av filen.\nGetDetailedStatus henter ut tre lister. Listen med DataBatcher som er blitt behandlet, en liste med de DataItems (Xml objektene som filen består av) som har opplevd feil under behandling og en liste med Issues som er opplevd under behandling. Et Issue refererer til DataItem og DataBatch med en Id verdier, som kan brukes til å referere mellom listene. DataItem listen vil ikke inneholde rå Xml-data.\nGetDataItem henter ut et enkelt DataItem basert på Id. DataItem inneholder metadata og rå Xml-data.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/mappere/generelt/",
	"title": "Generelt",
	"tags": [],
	"description": "Beskrivelse av hva en mapper er og hvordan man går fram for å lage en",
	"content": " Bruksområder Tilgjengeliggjøring av data fra tjenesteeier til Altinn gjør det mulig å utvikle mange ulike tjenester som gir brukere tilgang til etatsspesifikk informasjon. En mapper kan tilby sin informasjon til både innsyns-, innsendings-, og samhandlingstjenester. Et vanlig bruksområde er å tilgjengliggjøre etats-registre som innsynstjenester. Dette lar brukeren se informasjon som er registrert om seg selv eller sin virksomhet\nAlternativt kan en mapper benyttes til å hente informasjon som skal benyttes i en innsendingstjeneste slik at brukeren ikke trenger å fylle ut allerede registrert informasjon. Både innsynstjeneste og innsendingstjeneste kan inngå som en del av en større samhandlingstjeneste. En mapper tilbyr to-veis kommunikasjon slik at skjematjenesten kan overføre spørreparametere for å hente ut spesifikk informasjon som så returneres tilbake.\nDet er ikke hensikten at en mapper skal benyttes til å sende inn data. Til dette skal fortsatt innsendingstjenester benyttes slik at sporbarheten og ikke-benekt-funksjonaliteten i Altinn er ivaretatt.\nProsessen Her oppsummeres prosessene rundt utvikling og forvaltning av mappere.\nDesign Første steg i enhver utviklingsprosess er å designe løsningen som skal lages. For en mapper vil det si å identifisere de tjenestene som skal benytte mapperen og hvilke datasett som disse trenger. Her bør både utviklere som skal lage tjenestene i Altinn, mappere og etatstjenestene komme med innspill på dataformat slik at mapperen, og dermed også utviklingsjobben, blir så enkel som mulig.\nUtvikling Når nødvendige forutsetninger er oppfylt logger man på utviklingsserver via TUL og starter Visual Studio Server. Du får da opp en RDP sesjon mot utviklingsserver. På utviklingsserver startes så opp Visual Studio, og man kan så koble seg til TFS på adressen https://tfs.ai-dev.brreg.no. Her er de nødvendige verktøy og versjonskontrollsystem klargjort for utvikleren.\nUtviklingen av en mapper er godt beskrevet, med både bakgrunnsinformasjon om teknologi og beskrivelse av selve utviklingsjobben. En mapper er i all hovedsak en proxy-tjeneste som er skrevet ved bruk av WCF.\nAlternativt kan man sette opp et eget utviklingsmiljø med Visual Studio installert slik at man får bedre ytelse og egne favoritt-verktøy. Lokalt utviklingsmiljø kan medføre noen vanskeligheter knyttet til tilganger dersom etaten begrenser tilgangen til sine tjenester slik at kun Altinn har tilgang. Utviklede mappere må også testes og verifiseres i TUL av tjenesteeier før de kan kvalitetssikres og installeres.\nSe også Bruk av Visual Studio.\nTest Forutsatt at nødvendige brannmuråpninger er på plass hos altinn og tjenesteeier, så skal man kunne kjøre mapper på utviklingsserver, og utføre eventuelle enhetstester.\nTesting av programvare er en svært viktig del i all utviklingsarbeid. Det er av betydning at man har satt seg ned og tenkt over hvilke kriterier man har over alle tjenestene man ønsker å tilby.\nTesting kan innføres i et hvilket som helst tidspunkt under utviklingen av mapperen. Tradisjonelt har man startet med testing etter at kriteriene er satt og kodingen er ferdig. I mer smidige prosjekter er det vanlig å starte med tester parallelt med at man koder. På den måten kan man hele tiden sjekke at koden møter de kriteriene som er satt, og man kan dermed enkelt gjøre endringer og tilpasse seg.\nEnhetstesting er en metode hvor man kan utføre tester på en spesifikk bit av programmeringskoden, og foregår som regel parallelt med at man utvikler koden. Man kan lett kjøre testene, og se om noe feiler i koden, man får også en fin oversikt over at alt er som forventet og kjører feilfritt. Om det i senere tid blir gjort endringer på den utviklede koden, vil man kunne dra nytte av enhetstestene. De vil enten passere eller feile om man ikke møter kriteriene.\nKriteriene kan for eksempel være:\n Data kommer i riktig format. At man får forventet resultat. Håndtering av feilmeldinger. Programmet bør returnere fornuftige meldinger.  Produksjonssetting Når mapper er ferdig testet bestilles produksjonssetting via selvbetjeningsportalen.\nHer benyttes skjema «Produksjonsetting av tjenester, kodelister og mappere».\nI bestilling er det viktig at man angir navn på mapper, hvilket miljø man vil ha mapperen installert i, teknisk kontaktperson med telefonnummer og hvor det er sjekket inn master/ branch, vi henter fra master om ikke annet er angitt.\nMapper blir sjekket ut og bygget, og installasjonsprosjektet blir testkjørt av oss før det oversendes leverandør for installasjon i respektive miljøer. Dette for å unngå åpenbare feilkilder i prodsettingen.\nInstallasjon Når en mapper er kvalitetssikret kan man gå til neste steg som er installasjon. Når man skal installere en mapper i Altinn må man påse at det er åpnet for tilgang til tjenesteeier sitt system gjennom tjenesteeier sin brannmur i forkant av installasjonen.\nAltinn sin driftsleverandør vil verifisere dette under installasjon av mappere. Deretter vil de installere mapperen det spesifiserte miljøet på Altinn. Dersom mapperen skal installeres i produksjonsmiljøet vil den først installeres og verifiseres i et testmiljø.\nDersom det oppstår feil under installasjon vil det kunne måtte være nødvendig med kontakt mellom driftsleverandør og tjenesteeier sine utviklere og driftere. Det er derfor viktig å ha tilgjengelige ressurser på tjenesteeier sin side under installasjonen.\nInstallasjonstest Etter at en mapper er installert må installasjonen verifiseres av tjenesteier. Dette gjøres gjerne ved bruk av en eller flere tjenester som benytter den installerte mapperen. Dette sikrer både at tjenestene får kontakt med mapperen og at mapperen får kontakt med tjenesteeier sitt system.\nForutsetninger For å kunne utvikle en mapper er det en del forutsetninger som ligger til grunn.\n Brukernavn og passord for tilgang til selvbetjeningsportalen for bestilling av brannmuråpninger, produksjonssetting av mapper og andre tilganger. Dersom du ikke har brukernavn på selvbetjeningsportalen, så kan dette bestilles ved å sende e-post til tjenesteeier@altinn.no.\n Tilgang til utviklingsserver for mapper.\nUtviklere som har gjennomført tjenesteutviklings- eller mapperkurs kan bestille tilgang til utviklingsserver for mappere.\n Bestilling gjøres i selvbetjeningsportal via bestillingsskjema \u0026ldquo;Ny henvendelse\u0026rdquo; -\u0026gt; \u0026ldquo;Tilganger\u0026rdquo; -\u0026gt; «Tilgang til TUL og/eller SERES».\n I skjemaet må det avkrysses for \u0026ldquo;Ønskes det tilgang til avanserte tjenesteutviklingsverktøy (Visual studio og Team Foundation Server)?\u0026rdquo;  Tilgang til TFS.\nAll mapperkode skal sjekkes inn og vedlikeholdes i TFS. Dette betinger at utvikler også har en brukerkonto i Altinns utviklingsmiljø AI-DEV. Bestilling av brukerkonto gjøres i selvbetjeningsportalen via bestillingsskjema \u0026ldquo;Tilgang til Altinns utviklingsmiljø AI-DEV\u0026rdquo;. I feltet «beskrivelse spesielle behov» så må det angis hvilke tjenesteeier(e) man skal utføre utviklingsoppdrag for.\n Åpning i brannmur hos altinn og tjenesteeier.\nFor å kunne teste og bruke mapper, så må tjenesteeier åpne for trafikk inn fra mapper- og utviklingsserver. Informasjon om hvilke IP-adresser som trafikken vil komme fra, er distribuert til de respektive tjenesteeiere. I tillegg må det bestilles åpning for utgående trafikk fra Altinn til tjenesteeier. Bestilling av åpninger gjøres i selvbetjeningsportalen via bestillingsskjema «Åpning i brannmur». I feltet Miljø anbefaler vi at det velges annet, og at man legger inn «Produksjon, TT02 og TUL» i feltet Spesifisér miljø. Man sikrer da at man får alle nødvendige åpninger på plass i en bestilling. For Tjenesteeiere som skal teste mappere i AT-Miljø, så må man også legge til dette. I feltet «Hva gjelder brannmuråpningen?», velges Mapper/ekstern tjeneste. For å sikre at man også får åpnet fra utviklingsserver bør man spesifisere i Andre opplysninger, at det også skal åpnes for trafikk fra utviklingsserver «VDEV»\n  "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/sluttbruker/innlogging/",
	"title": "Innlogging",
	"tags": [],
	"description": "Hvordan logge inn for å gi samtykke",
	"content": "I vårt eksempel med et lånesøknadscase så vil en lånesøker typisk gå til bankens hjemmeside for å søke om lån. Sannsynligvis vil man måtte logge seg inn med BankID for å søke.\nUnderveis i søknaden blir man spurt om å gi samtykke til at lignings- og lønnsopplysninger kan innhentes. Dersom man godtar dette blir man sendt til samtykkesiden i Altinn.\nFor å kunne gi et samtykke i Altinn må brukeren identifisere seg for det offentlige ved å logge inn via ID-porten.\nInnen føderert BankID mellom bankene og ID-porten er mulig, må brukere potensielt logge inn to ganger.\n Innlogging ID-porten   "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/sluttbruker/samtykkesiden/",
	"title": "Samtykkesiden",
	"tags": [],
	"description": "Presentasjon av samtykkesiden",
	"content": "Etter innlogging vil sluttbrukeren bli presentert for en egen samtykkeside.\nFigurene under viser et eksempel på hvordan en samtykkeside kan se ut i et lånesøknadscase:\n Samtykkesiden   Når sluttbruker har gitt samtykke blir rettighetsdelegeringen til datakonsumenten utført og brukeren blir sendt tilbake til siden som er angitt av datakonsument i redirect-URL. Sluttbruker kan også velge å ikke gi samtykke.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/sluttbruker/oversikt-samtykker/",
	"title": "Oversikt samtykker",
	"tags": [],
	"description": "Oversikt over gitte samtykker",
	"content": "Sluttbruker kan i Altinn gå inn på siden \u0026ldquo;Profil\u0026rdquo; for å få oversikt over hvem man har gitt samtykke til.\nFiguren under viser hvordan dette presenteres for bruker.\n Oversikt samtykker   Fra denne siden kan man gå og se nærmere på det enkelte samtykket.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/sluttbruker/trekke-samtykke/",
	"title": "Trekke samtykke",
	"tags": [],
	"description": "Hvordan trekke et samtykke som er gitt",
	"content": "Det vil være mulig å logge seg inn i Altinn og trekke et avgitt samtykke, så fremt man ikke har avgitt et engangssamtykke. Etter at samtykke er trukket vil det ikke lenger være mulig for datakonsumenten å få tilgang til data som sluttbrukeren opprinnelig samtykket til å dele. For å trekke samtykke velger man \u0026ldquo;Se/trekk samtykke\u0026rdquo;.\nHar man avgitt et engangssamtykke vil dette ikke kunne trekkes i Altinn da informasjonen i de fleste tilfeller hentes av datakonsument umiddelbart etter at man har samtykket. Ønsker man at datakonsument skal slette data de har hentet må sluttbruker ta kontakt med datakonsument.\n Engangssamtykke - kan ikke trekkes    Ordinært samtykke - kan trekkes   "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/sluttbruker/aktivitetslogg/",
	"title": "Samtykkelogg",
	"tags": [],
	"description": "Samtykkelogg",
	"content": "Sluttbruker får tilgang til en samtykkelogg på sidene for \u0026ldquo;Profil\u0026rdquo; som viser hvilke samtykker brukeren har gitt, når de har utløpt, når data har blitt hentet osv. Ved å klikke på \u0026ldquo;?\u0026rdquo; ved et gitt samtykke, kan man se hva samtykket gjelder.\n Samtykkelogg   "
},
{
	"uri": "https://altinn.github.io/docs/releases/2015/15-1/",
	"title": "15.1",
	"tags": [],
	"description": "Splitt av data, automatisert deploy, ny prosess-komponent, mastertjenester, ny startside i TUL, type-ahead i klientliste, +++",
	"content": " Som vanlig inneholder februar-versjonen av Altinn endringer for selvangivelsen. I tillegg kommer en rekke forbedringer og feilrettinger i øvrige deler av løsningen.\nMange av endringene i den nye versjonen er ikke synlige for brukerne, men enkelte endringer vil være godt synlige.\nMeldingsboks Sortering av meldinger i arkiv (17349) For å skape bedre oversikt i Min meldingsboks (MMB) ble det i juni 2014 innført en endring i «Til min behandling» i MMB som sørget for at tjenester beholdt sin opprinnelige dato (opprettet eller mottatt) og ikke bruke «sist endret»-dato til sortering i MMB. Nå vil denne endringen også gjelde for skjema som arkiveres (i «Arkivert»). NB! Meldinger som allerede er arkivert vil fortsatt sorteres etter datoen de ble arkivert.\nTjenester Endring av design på knapper i tjenester (16427) Designet på knapperaden moderniseres. Dette gjøres for å få knappene mer synlige, samt å rette en rekke stylingfeil.\nForbedring av brødsmulesti i tjenester (17180) Vi gjør grafiske endringer for brødsmulesti i tjenester (stegene som vises på innsendingstjenester). Vi retter opp i feil og endrer på det visuelle for å få en mer tydelig brødsmulesti.\nKnapp i \u0026ldquo;kontroller skjema\u0026rdquo;-pop-up (16405) Mange brukere blir stående fast i et underskjema når de forsøker gå tilbake til hovedskjema og har feil i det skjemaet de står i. Brukerne ser ikke lenken for å gå tilbake og rette feilene senere. Vi innfører derfor en knapp med «Gå tilbake til hovedskjema og rett feilene senere» til venstre for «Lukk»-knappen. På den måten blir det tydeligere for brukeren at man har to valg.\nFeilretting - Fjerning av tekst på kvitteringssida (15373) Liten feilretting som går ut på å fjerne en overflødig tekst på kvitteringssiden for innsendingstjenester. Teksten som fjernes er «Ingen signeringstekst».\nHåndtering av filvedlegg ved flere signeringssteg (17408) Retting av en feil som fører til at filvedlegg i en del tilfeller ikke vises på signeringsside. Dette gjelder fra og med signeringssteg to for vedlegg som er lagt til på tidligere signeringssteg. I tillegg vil det nå i første signeringssteg inneholde sjekkboks-markør når det er mulig å legge til vedlegg ved signering\nFeilretting - IE 11-feil på siden oversikt skjema og vedlegg (16852) Feilretting som sørger for at det ikke lenger skal være dobbelt opp med «Browse»-knapper under «Legg til filvedlegg» på siden «Oversikt skjema og vedlegg» ved skjemautfylling i Internet Explorer 11.\nFjerning av varsel til avgiver ved parallell signering (17482) Ved parallell signering når avgiver også skal signere skal denne ikke motta melding eller varsel om at signering skal utføres. Melding eller varsel ble tidligere sendt, men dette er nå blitt fjernet.\nFeilretting – Arkiverte meldinger i PSA-meny (17346) En følgefeil fra 14.2 gjorde at arkiverte meldinger ikke ble vist i PSA-menyen. Dette er nå rettet slik at arkiverte meldinger vises i PSA-menyen.\nParallell signering og sluttbrukersystem (16350) Ved parallell signering og innsending fra sluttbrukersystem ble det ikke sendt ut varsel for signering. Dette er nå rettet slik at varsel sendes ut.\nTilgangsstyring Feilretting – Deaktiverte på «Slett roller» (14186) Feilretting som sørger for at knappene for å bla mellom sider i listen på «Slett roller» under Tilgangsstyring ikke skal være deaktivert.\nType-ahead i klientliste (12192) Hvis man har flere enn 10 klienter, gjøres nedtrekkslisten i enkeltvis klientdelegering om til et tekstfelt der man må skrive inn org.nr til klienten. I dette feltet innfører vi type-ahead-funksjonalitet slik at listen viser treff som stemmer med det man skriver inn.\nOppdatere overstyring av rettigheter (13084) Vi innfører mulighet til å oppdatere eksisterende overstyringer av rettigheter. Til nå har man først måttet slette eksisterende overstyring og deretter gjøre ny overstyring.\nFeilretting - Delegering av enkeltrettigheter (17132) Feilretting som sørger for at man ikke får opp feilmelding om at delegering allerede er utført annet enn i tilfeller der delegering faktisk er utført.\nDelegerbar rolle for rettighet til parallell signering (17420) Vi innfører en ny delegerbar rolle til bruk ved parallell signering. Ved parallell signering gis de som angis i skjema som noen som skal signere rettighet til å signere aktuell instans av skjema. Når dette er en virksomhet, kan det være behov for å delegere rettigheten videre, noe som nå kan gjøres via den nye rollen (som vil gjelde alle parallelle signeringer virksomheten skal gjøre).\nInformasjonsportalen Tydeligere markering av punktlister (16403) Feilretting som sørger for at unummererte lister hvor punktene ikke er lenker blir markert som punktlister.\nFeilrettinger i EPiServers redigeringsmodus (16884) Retting av to mindre feil for redaktører. Endringen fører til at sammenligning av versjoner av sider skal fungere, samt at det blir enklere å legge til utheving av innhold.\nKontaktskjema for ABS (17220) Det lages et nytt kontaktskjema for å sende spørsmål til Altinn brukerservice. Dette vil sikre at ABS får mer av informasjonen de trenger for å kunne yte god hjelp til brukerne.\nNy knapp for å gå til tjeneste (14534) Vi innfører en ny knapp for å gjøre det tydeligere hvor man skal klikke for å gå fra informasjonssiden om en tjeneste til selve tjenesten.\nKorrekt innloggingsstatus (15701) Feilretting for å unngå situasjoner der det ser ut som at man er innlogget (man ser hvem som er innlogget og hvem man representerer ved siden av logg ut-knappen), selv om man har fått en timeout.\nEksterne grensesnitt Bedret caching ved migrering av enkeltskjema i skjemasett (16245) Endring som forhindrer at man må vente en time før man kan teste nymigrerte enkeltskjema ved innsending fra sluttbrukersystem på grunn av mellomlagrede data.\nVidereutvikling av REST API (17439) Forbedringer av REST API med bakgrunn i tilbakemeldinger og forretningsmessige behov. Innhold i endringen fastsettes fortløpende (smidig utvikling).\nSubmitAttachmentStreamed (16795) Forbedringer og bedre robusthet i sluttbrukersystemoperasjonen SubmitAttachmentStreamed.\nTjenesteeiers arkiv og trukket samtykke (16266) Feilretting som sikrer tilgang for mottakende etat på elementer som er lagret i tjensteeiers arkiv, selv om sluttbruker har trukket samtykke.\nIntegrasjonsplattform og grensesnitt Orkestrering på CorrespondenceConfirmation outbound shipments (16957) Etter at Download Queue (DQ) ble innført har det blitt opprettet flere meldingstjenester og lenketjenester som feilaktig er blitt knyttet til DQ i stedet for et grensesnitt (ShipmentDefinitionID =0). Når data ble generert til tjenesteeiere fra disse tjenestene ble det sendt melding til PrepareShipmentPart-orkestreringen. Siden grensesnittet ikke eksisterer førte dette til at orkestreringen feilet og meldingen ble suspendert.\nMed bakgrunn i dette endres det i SBL slik at det ikke genereres noen melding til PrepareShipmentPart når ShipmentDefinitionID = 0. I tillegg endrer man i integrasjonsløsningen for å gjøre orkestreringen mer robust, slik at denne ikke suspenderes selv om den skulle motta en ugyldig melding om å sende et element tilknyttet en tjeneste som ikke er tilknyttet noe grensesnitt.\nSpesialbehandling av tegnene \u0026lt; \u0026gt; og \u0026amp; (17157). Enkel endring for å unngå dobbel encoding av spesial tegn i data som overføres til etat. I dagens løsning har det for eksempel vært firmanavn som har inneholdt \u0026lsquo;\u0026lt;\u0026rsquo; som har endt opp som \u0026lsquo;\u0026lt;\u0026rsquo; hos etat.\nReimplementasjon av «Splitt av data»-funksjonalitet (17152) For noen innsendingstjenester skal deler av rapporteringen (hovedskjema/skjema i skjemasett) sendes til flere tjenesteeiere. Selve splitten vil bli definert i TUL (splitt-siden). Ved bruk av denne funksjonaliteten får man en mer fleksibel håndtering av informasjon. Målet med denne endringen er å implementere splitt-data funksjonalitet på skjema nivå. I tillegg vil det på skjemanivå være mulig å gjøre splitting uten bruk av XSLT, noe som vil gi god ytelse. Kryptering på feltnivå, samt splitting på feltnivå vil ikke inngå i denne spesifikke aktiviteten, men være mål for en framtidig release.\nBrukernavn og passord på sendporter etter biztalk-deploy (17733) Feilretting som sørger for bedre håndtering av brukernavn og passord ved biztalk-deploy.\nRefaktorering av sekvensnummerfunksjonalitet (17218) Forbedring av ytelse og robusthet. Modellen for transportsekvens forenkles for å forhindre en del kjente samtidighetsproblemer (deadlocks og timouts) i integrasjonsløsningen relatert til bruk av sekvensnummerfunksjonalitet. I tillegg minimeres behov for låsing av sekvensnummer tabell, slik at lese og skrive operasjoner kan gå uavhenging, unødige databasekall når et grensesnitt ikke har noen sekvens fjernes.\nTeknisk arkitektur HTML som alternativ til PDF (17194) Det innføres støtte for HTML som utskriftsformat i portalen. Om og når dette skal tilgjengeliggjøres styres av tjenesteeier pr. tjenesteutgave. HTML som utskriftsformat vil føre til raskere visning/nedlasting for brukerne og bedre kapasitet i løsningen.\nNB! Endringen blir ikke tilgjengelig umiddelbart etter produksjonssetting av ny versjon.\nOppdatere prosess-komponent (13629) Dagens prosessmotor som understøtter samhandlingstjenester fornyes og forbedres. Støtte for eksisterende prosesser vil videreføres så lenge dette er nødvendig.\nAutomatisert deploy (17274) Deploy av plattform-komponenter automatiseres i systemtestmiljøene.\nMer automatisert enhetstest (17273) Dekningsgrad for automatisert enhetstest økes.\nManglende indekser (15839) Det innføres noen indekser i databasen for enda bedre ytelse.\nEndre datatype i tabell (16739) For å understøtte fremtidig datavekst så må datatype i en tabell i databasen endres.\nTjenesteutviklingsløsning Mastertjeneste som kan gjenbrukes (16684) Vi implementerer nå en løsning som gjør at vi kan definere en innsendingstjeneste som en mastertjeneste i tjenesteutviklingsløsningen. En slik tjeneste vil kunne gjenbrukes slik at man lager en slavetjeneste. Denne slavetjenesten vil være en kopi av mastertjenesten, men ha sin unike ID. På slavetjenesten kan man kun endre hvor dataen skal sendes og gyldighetsdatoen.\nImplementering av nytt visuelt design for startsiden i TUL (16953) Vi gjør endringer på startsiden i TUL slik at den blir mer brukervennlig. Du vil nå få en oversikt over dine sist brukte tjenester og utgaver. Kun de tjenesteeiere du har tilgang til vil vises på startsiden, men det vil være en lenke for å åpne alle tjenesteeiere. Nederst på startsiden vil det være en blog/wiki for kunnskapsdeling.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2017/17-1-1/",
	"title": "17.1.1",
	"tags": [],
	"description": "500 MB på REST og webservices, forbedringer av samtykke samt utvidet API for forms og attachments",
	"content": " Separat POST, PUT og DELETE på forms i REST-api for sluttbruker Separat POST og DELETE på attachments-ressursen, med egen operasjon for streaming av store vedlegg på REST-api for sluttbruker Logging av brukt samtykke og implisitt sletting av engangssamtykke Støtte for vedlegg på opptil 500 MB på REST og webservices  "
},
{
	"uri": "https://altinn.github.io/docs/releases/2015/",
	"title": "2015",
	"tags": [],
	"description": "Endringer innført i 2015",
	"content": "Releaser av Altinn i løpet av 2015\n\r15.3\r\rStøtte for virksomhetssertifikat i REST API, tekniske forbedringer, EIR, innlogging med utenlandsk id (eIDAS), \u0026#43;\u0026#43;\u0026#43;\n\r15.2\r\rNy formidlingstjeneste, forenklet registrering av kontaktinformasjon, forbedret parallell signering, delegering via REST API, \u0026#43;\u0026#43;\u0026#43;\n\r15.1\r\rSplitt av data, automatisert deploy, ny prosess-komponent, mastertjenester, ny startside i TUL, type-ahead i klientliste, \u0026#43;\u0026#43;\u0026#43;\n\r"
},
{
	"uri": "https://altinn.github.io/docs/releases/2017/etablering/",
	"title": "Etablering",
	"tags": [],
	"description": "Bytte av leverandører, nye avtaler, ny teknisk driftsplattform",
	"content": "Ifbm. innføring av nye avtaler og nye leverandører, så ble Altinn flyttet til en ny teknisk driftsplattform.\nHer kan du lese mer om valg av leverandører:\n Pressemelding Forenklingsbloggen  "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakilde/",
	"title": "For datakilde",
	"tags": [],
	"description": "Utføres av datakilde/tjenesteeier",
	"content": "Datakilden vil i de fleste sammenhenger også være tjenesteeier (eier av samtykketjenesten).\nHer beskrives hvilke oppgaver tjenesteeier må utføre for å få realisert en samtykketjeneste i Altinn.\nBeskrivelsen gjelder bruk av samtykke der dataflyten går direkte mellom datakilden og datakonsumenten og hvor tilgang til data autoriseres med innholdet i et token generert av Altinn for datakonsumenten.\nSiden dataflyten går utenom Altinn må datakilde/tjenesteeier tilby et tjenestegrensesnitt som datakonsumentene kan hente data fra.\n\rOpprette tjeneste\r\rOpprettelse av samtykketjeneste i tjenesteutviklingsløsningen (TUL)\n\rAutorisere datakonsument\r\rAutorisere opp datakonsument ved registrering i tjenesteeierstyrt register\n\rInformasjon om token\r\rBruk og verifisering av self contained OAuth-token som mottas fra datakonsument\n\rTest av tjeneste\r\rTeste autorisasjon av datakonsument og samtykketjeneste\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/api/",
	"title": "REST API",
	"tags": [],
	"description": "Dokumentasjon for tjenesteeierdelen av Altinns REST-apier",
	"content": "Altinns REST-api for tjenesteeiere er bare tilgjengelig med bruk av virksomhetssertifikat og krever at man har en apinøkkel med tilgang til \u0026ldquo;serviceowner\u0026rdquo;-ressursene.\nOrganisasjonsnummeret i sertifikatet må matche det som er oppført på etaten som tjenesteeier i Altinns databaser.\nFor å trigge autentisering med virksomhetssertifikat, legger man på parameteren ?ForceEIAuthentication i URI-en.\nTeknisk dokumentasjon av API for tjenesteeiere.\n\r\rRegistrering\r\rHvordan registrere din applikasjon.\n\rAutorisasjon\r\rSpørringer mot Altinns autorisasjonskomponent\n\rKontaktinformasjon\r\rUthenting og søk i kontaktinformasjon for virksomheter\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/mappere/teknologi/",
	"title": "Teknologi",
	"tags": [],
	"description": "Beskrivelse av teknologiene som brukes for å lage en mapper",
	"content": " Teknologi og rammeverk Windows Communication Foundation Windows Communication Foundation (WCF) er en rammeverk for å bygge service orienterte applikasjoner (SOA). WCF lar utviklere bygge løsninger som kan integreres på tvers av plattformer og samarbeider med eksisterende systemer. WCF lar applikasjoner kommunisere med hverandre uavhengig om de er på samme maskin, på tvers av nettverk, eller på forskjellige plattformer. De grunnleggende oppgavene er for å implementere en WCF applikasjon er:\n Definere en service contract Implementere servicen basert på contract Hoste servicen Implementer klient applikasjon  En service contract er det som beskriver hvilke operasjoner en tjeneste tilbyr. En operasjon er definert gjennom en operation contract. Input- og output-verdier til operasjonen kan være enkle eller komplekse typer. De komplekse typene beskrives med en data contract med en eller flere data members. I WCF defineres en service contract med et interface med metoder, mens en datakontrakt er en klasse med klassevariabler. Når tjenesten tilgjengeliggjøres på en web-server blir datakontraktene oversatt til XSD mens tjenestekontraktene blir oversatt til en WSDL med referanse til XSDene. Denne kan deretter distribueres til klientene slik at disse kan kommunisere med tjenesten via SOAP eller andre protokoller.\nService Contract En service contracten er et interface eller en klasse som eksponerer funksjonalitet. Interfacet eller klassen annoteres med [ServiceContract] og eventuelt namespace som vist i eksempelet.\nEksempel på tjenestekontrakt:\n[ServiceContract(Namespace=”brreg.no/api/sampleservice/2012/11/”)] public interface ISampleService { [OperationContract] public string GetString(); [OperationContract] public int GetInt(); }  Metoder som annoteres med [OperationContract] vil være de metoder som blir offentliggjort til konsumenter av servicen. En service contract kan være enten en klasse eller et interface, men det anbefales å bruke interface. Dette gjør det mulig at et service contract interface kan extende en eller flere andre interface, samtidig som at andre klasser kan implementere flere service contracts.\nData Contract Service orienterte WCF applikasjoner er designet slik at de skal kunne brukes mellom forskjellige konsumenter uavhengig av plattform og transportmedium. Derfor annoteres klasser som skal kommuniseres med [DataContract], mens variabler i klassen som vil være dataen som skal sendes/mottas annoteres [DataMember].\nEksempel på en datakontrakt:\nusing System; using System.Runtime.Serialization; [DataContract] public class Person { // This member is serialized. [DataMember] internal string FullName; // This is serialized even though it is private. [DataMember] private int Age; // This is not serialized because the DataMemberAttribute // has not been applied. private string MailingAddress; // This is not serialized, but the property is. private string telephoneNumberValue; [DataMember] public string TelephoneNumber { get { return telephoneNumberValue; } set { telephoneNumberValue = value; } } }  Disse annotasjonene brukes for at klasser og variabler skal bli serialisert ved bruk av WCF sin DataContractSerializer. Det går alternativt an å benytte andre serializere dersom det kreves større kontroll over den serialiserte informasjonen, men det er DataContractSerializer med attributtering som er den anbefalte serializeren.\nVerdt å nevne er at data contracts er uavhengig av access modifier. Det vil si at private variabler i en klasse kan serialiseres og sendes avgårde til konsumering.\nImplementere en tjeneste En tjenestekontrakt må følges av en implementasjon. Dette er en vanlig klasse som implementerer tjenestekontrakt-interfacet. Utvikleren står fritt til å implementere metoden som ønsket så lenge interfacets kontrakt er ivaretatt.\nEksempel på implementasjon av en tjeneste:\npublic class SampleService : ISampleService { public string GetString() { return “Hello world”; } public int GetInt(){ return 42; } }  Kjøre en service For å tilgjengeliggjøre en tjeneste for bruk må denne «hostes» i et kjøretidsmiljø. Dette kan gjøres på ulike måter, men det vanligste er å la Internet Information Services (IIS, Windows sin Web-server) kjøre tjenesten. Dette gjøres ved å legge en .svc-fil sammen med den installerte tjenesten. Denne inneholder informasjon til IIS om hvilken tjeneste som skal tilgjengeliggjøres.\nEksempel på en .svc-fil:\n\u0026lt;%@ServiceHost Language=\u0026quot;C#\u0026quot; Service=\u0026quot;Tempuri.Demo.Service\u0026quot; %\u0026gt;  I .svc-fila angis det hvilket .NET språk tjenesten er skrevet i, om det skal være debuggingsmulighet og hvilken tjeneste som skal hostes. Det skal da refereres til implementasjonen med fullt kodenamespace og ikke tjenestekontrakten.\nUnder utvikling kan man benytte Visual Studio til å hoste tjenesten slik at man ikke trenger å installere løsningen på IIS først. Fra Visual studio kan WCF Test Client benyttes til å teste tjenesten. Dette gjøres ved å starte opp prosjektet fra Visual Studio slik at denne hostes av den innebygde webserveren. Testklienten vil da starte ferdig oppkoblet mot tjenesten slik at tjenesten enkelt kan testes.\nService Reference For å lage en WCF proxy/klient som konsumerer en service contract er man nødt til å sette opp noe som kalles en \u0026ldquo;Service Reference\u0026rdquo; i klient prosjektet. Dette gjøres på følgende måte:\n Verifiser at tjenesten du skal koble til kjører Høyreklikk på prosjektet og velg \u0026quot;Add Service Reference\u0026quot;   Skriv inn URL\u0026#39;en som hosten har som adresse og trykk på GO. Tjenesten vil nå lastes og tilgjengelige operasjoner vil vises. Angi her også hvilket namespace proxy-koden skal ha.   Trykk OK for å generere proxy-klassene.  Nå har du laget en proxy som klient applikasjonen vil bruke til å kalle servicen. Nå har en mulighet til å opprette klient objekter som kan aksessere og bruke metodene som er definert i en Service Contract.\nKonfigurasjon Konfigurasjon av WCF på både klient og server-side gjøres i App.config-filen som ligger med prosjektet. Denne xml-filen inneholder ulike konfigurasjonselementer for applikasjonen. WCF-spesifikk konfigurasjon ligger i xml-elementet system.serviceModel.\nDe viktigste elementene er:\n   Seksjon Beskrivelse     Behaviours Her konfigureres oppførselen til endepunktene. Dette kan være sikkerhetsmekanismer, serialiseringsoppførsel og lignende.   Bindings Her konfigureres det hvordan overføringen skal være. Dette inkluderer hvilken protokoll og overføringsmekanisme som skal benyttes. Her kan også begrensninger på tidsbruk, pakkestørrelse og lignende settes.   Client Her angis konfigurasjonsparametere for klienten. Det vil her listes opp de tjenester klienten kan kobles seg til og hvilke behaviours, bindings og lignende disse skal benytte.   Services Her konfigureres det hvilke tjenester en server skal tilby og hvilke behaviours, bindings og lignende tjenesten skal tilbys med.    Videre lesning    Tema Link     Windows Communication Foundation http://msdn.microsoft.com/en-us/library/vstudio/ms735119(v=vs.90).aspx   Service Contracts http://msdn.microsoft.com/en-us/library/vstudio/ms733070(v=vs.90).aspx   Serialisering http://msdn.microsoft.com/en-us/library/vstudio/ms732038(v=vs.90).aspx   WCF tutorial http://msdn.microsoft.com/en-us/library/ms734712.aspx   Basic WCF Programming Lifecycle http://msdn.microsoft.com/en-us/library/vstudio/ms732098(v=vs.90).aspx    Testrammeverk Testrammeverket i .NET, MSTest framework, eller Visual Studio Unit Testing, er basert på enhetstesting.\nDen anbefalte arbeidsmåten er å opprette et nytt testprosjekt i samme solution som prosjektet man vil teste. Man lager da én kildefil med tester for hver kildefil i kildeprosjektet.\nTestklasser Hver testklasse hører til én kildeklasse. De er annotert med [TestClass]. Navnekonvensjonen er at testklasser navngis som klassen den skal teste, med et Test-postfiks.\nNavngiving og markering av testklasser I hver testklasse vil man kunne definere rutiner, som for eksempel hva man vil gjøre før og etter at man kjører klassen, og før og etter hver test. Metodene for disse rutinene er annotert som:\n[ClassInitialize] [ClassCleanup] [TestInitialize] [TestCleanup]  Testmetoder Testmetoder har postfikset Test i navnet, og er annotert med [TestMethod]. Et eksempel på en testmetode:\n[TestMethod] public void DebiterTest() { // Test }  Det er anbefalt at testmetoder er uavhengig av hverandre, og at de kun tester én funksjon. For eksempel vil metoden over ikke benytte andre testmetoder i det hele tatt, og den vil kun teste om debitering av en konto gjøres riktig. Test av for eksempel kreditering gjøres av en egen metode.\nAssert-klassen Assert-klassen inneholder hjelpemetoder for å verifisere at riktig resultat oppnås. Eksempler på metoder i denne klassen er:\n AreEqual AreNotEqual AreSame AreNotSame IsNull IsNotNull  Under blir det testet at debitering av en konto gjøres riktig. Først settes saldoen på bankkontoen til 11.99. Deretter debiteres den med 11.22. Assert.AreEqual sjekker at den resterende saldoen etter debitering er 0.77.\n[TestMethod] public void DebiterTest() { BankKonto target = new BankKonto(); target.Saldo = 11.99; double beloep = 11.22; target.Debiter(beloep); Assert.AreEqual(0.77, target.Saldo); }  Hvis ikke saldoen hadde vært 0.77 ville Assert.AreEqual kastet en AssertFailedException. Testrammeverket plukker opp AssertFailedException og markerer metodene hvor disse kastes fra som feilede tester.\nKjøre tester For å kjøre tester i Visual Studio velger man Test på hovedmenyen. Der kan du velge å kjøre eller debugge alle eller enkelte tester i løsningen. Resultatet av en kjøring vil vises i et resultatvindu som vist under.\n Videre lesning    Tema Link     Verifying Code by Using Unit Tests https://msdn.microsoft.com/en-us/library/dd264975(v=vs.100).aspx   Creating and Running Unit Tests https://msdn.microsoft.com/en-us/library/ms182532(v=vs.100).aspx   Wikipedia: Unit testing https://en.wikipedia.org/wiki/Unit_testing    "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakilde/opprett-tjeneste/",
	"title": "Opprette tjeneste",
	"tags": [],
	"description": "Opprettelse av samtykketjeneste i tjenesteutviklingsløsningen (TUL)",
	"content": " Opprettelse av samtykketjeneste i tjenesteutviklingsløsningen (TUL) Det må opprettes en tjeneste i TUL som benyttes til samtykke og tilgangskontroll. Til dette benyttes Altinn sin lenketjenestetype. Kun tjenesteutviklere som har vært på kurs i regi av Altinn har tilgang til TUL og kan lage tjenesten.\nDefinering av lenketjeneste Utgavenavnet vil vises for sluttbruker på samtykkesiden så det er viktig å velge et navn som også forteller hva slags data eller informasjon denne tjenesten tilbyr.\nFeltet i URL er påkrevd men har ingen funksjon ved bruk av lenketjeneste i samtykkeøyemed.\nHusk å angi at tjenesten skal bruke tjenesteeierstyrt rettighetsregister. Ved å angi dette vil man sikre at kun registrerte datakonsumenter kan benytte samtykketjenesten. Vi vil senere beskrive hvordan man gir spesifikke organisasjoner eller personer lov til å spørre brukere om samtykke ved å registrere disse i rettighetsregisteret for akkurat denne tjenesteutgaven.\n Utgaveparametre lenketjeneste   Definere samtykketekst Når man skal lage en lenketjeneste som skal benyttes i en samtykketjeneste må man gå inn på Samtykke-fanen i TUL å angi at utgaven skal tillate samtykkebasert deling av data. Da blir det obligatorisk å fylle ut en samtykketekst som vil vises for sluttbruker under samtykkesiden. Samtykketeksten skal forklare nærmere hva brukeren samtykker til. For at samtykke skal være gyldig må det være informert. Det betyr at brukerne får informasjon som gjør at de forstår hva de samtykker til og hvilke konsekvenser det vil få for dem.\nI vårt Lånesøknadscase så bør samtykketeksten si hvilke data banken henter fra Skatteetaten - om det er informasjon om lønn, gjeld eller andre forhold. Samtykketeksten defineres av datakilden (tjenesteeier) men det er hensiktsmessig at datakilden og datakonsumenten blir enige om en tekst som er fornuftig å bruke. For å kunne formatere tekst, legge inn lenker osv. må det benyttes html-kode.\nNB! Det er kun tillatt med 1.000 tegn (eventuell html-kode regnes med).\rDet er i samtykketeksten mulig å benytte metadata-parametre dersom det er ønskelig å spesifisere hvilke del av data man ønsker tilgang til, for eksempel dersom man ønsker tilgang til skattegrunnlaget for et gitt år. Eksempel: \u0026ldquo;Opplysningene som utleveres gjelder for {intektsaar}.\u0026rdquo; Parameter for inntektsår må da være input i url som datakonsument sender sluttbruker til samtykkesiden med. Dersom det er ønskelig at parameteret skal ha et bestemt format så må dette formidles til datakonsument.\nNår token genereres legges metadata med som en egen informasjon slik at datakilde kan verifisere at datakonsument spør om nødvendige data (se her for beskrivelse og validering av token). Metadata lagres sammen med samtykke-kontekst slik at dette vises historisk og i aktivitetslogg.\nHvis det kun skal være mulig for datakonsument å hente data èn gang for det avgitte samtykket så må dette angis ved å huke av for \u0026ldquo;Tillat bare engangssamtykker\u0026rdquo;.\n Utgaveparametre samtykketekst   Sett i forhold til samtykkesiden som sluttbruker får opp i Altinn så er utgavenavnet det som står i rød ramme og samtykketeksten det som ligger i blå ramme i bildet av samtykkesiden nedenfor. Det som ligger i grønn ramme er metadata-parameter for {inntektsaar}:\n Sammenheng mellom TUL og samtykkesiden   Det er mulig å innhente samtykke for flere tjenester (flere datasett) i samme operasjon.\nRegistrere rolle på tjenesten Før man migrerer tjenesten over til testmiljø og produksjon må det registreres en rolle på den. Selve rollen man velger trenger ikke å være delegerbar, men enkeltrettigheter på tjenesten må være delegerbare. Noen roller er ikke delegerbare, for eksempel rollen \u0026ldquo;Privatperson\u0026rdquo;, men dersom man angir i TUL at den skal være delegerbar så betyr dette at det ikke er mulig å delegere selve rollen videre men man kan delegere enkeltrettigheter (når bruker gir samtykke så delegeres det en enkeltrettighet til datakonsument). Som for alle typer tjenester i Altinn så må man vurdere hvem som skal benytte tjenesten og sette rolle ut fra dette. Er man i tvil om hvilken rolle som passer så kan man kontakte Altinn for å få hjelp til å vurdere dette. Det er Altinn som setter rolle på tjenesten så det må sendes en henvendelse via selvbetjeningsportalen eller til tjenesteeier@altinn.no for å få dette utført.\nSikkerhetsnivå: Valgt sikkerhetsnivå for samtykketjenester vil både sette krav til sikkerhetsnivå for bruk av tjenesten og for å kunne gi samtykke til tjenesten gjennom samtykkesiden eller REST API. En lenketjeneste må i utgangspunktet ha minimum sikkerhetsnivå 3. I tillegg til dette håndheves det ett minimumskrav av sikkerhetsnivå 2 for å gi samtykke, selv for tjenester som spesifiserer lavere krav, dette er tilsvarende som annen rettighetsdelegering i Altinn. Er bruker ikke logget inn med høyt nok sikkerhetsnivå vil bruker få samme feilmelding som ved bruk av tjenesten, med beskjed og mulighet til å gå til innlogging med korrekt nivå.\nOversette tjeneste Dersom tjenesten skal være tilgjengelig på flere språk må den oversettes. Dette gjøres i TUL i seksjonen for oversetting. Språk som det kan oversettes til/fra er bokmål, nynorsk og engelsk.\nMigrere tjeneste Før tjenesten kan testes må den migreres til testmiljø (TT02). Etter at den er testet må den migreres til produksjonsmiljøet (PROD).\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakilde/autorisere-datakonsument/",
	"title": "Autorisere datakonsument",
	"tags": [],
	"description": "Autorisere opp datakonsument ved registrering i tjenesteeierstyrt register",
	"content": " Autorisere datakonsument ved registrering i tjenesteeierstyrt register På tjenesteutgaven som er opprettet i TUL må det være angitt at tjenesten skal bruke tjenesteeierstyrt rettighetsregister. Datakonsumenter (organisasjoner eller personer) som skal få hente ut data via tjenesten må registreres i rettighetsregisteret. Dette gjøres ved å benytte webservice RegisterSRRAgencyExternal\nhttps://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternalBasic.svc?wsdl\nog operasjonen AddRights.\nEn detaljert beskrivelse av dette finnes her. Merk at beskrivelsen der er for testmiljø. Ovennevnte url benyttes for produksjonsmiljøet.\nFor å bruke Altinn sine webservices må man ha en etatsbruker og passord. Har man ikke dette kan det bestilles gjennom selvbetjeningsportalen til Altinn eller til tjenesteeier@altinn.no.\nDet finnes også en operasjon for å liste ut gitte rettigheter samt slette rettigheter.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakilde/bruk-av-token/",
	"title": "Informasjon om token",
	"tags": [],
	"description": "Bruk og verifisering av self contained OAuth-token som mottas fra datakonsument",
	"content": " Bruk av self-contained OAuth-token Self-contained OAuth 2.0 token er nøkkelen som datakonsumententen benytter for å få tilgang til data som ligger hos datakilden. Altinn utsteder et signert JSON Web Token (JWT). Tokenet inneholder all informasjon knyttet til de delegerte rettighetene inkludert\n tjenestekoder for lenketjenesten i Altinn fødsels- eller organisasjonsnummer som samtykket tildelte rettigheter til datakonsumenten person- eller organisasjonsnummer for datakonsumenten som har mottatt rettighetene organisasjonsnummer for tredjepart som kan behandle samtykket på vegne av mottaker (dersom dette foreligger) tidspunkt for når samtykke ble gitt tidspunkt for når rettigheten opphører  Det signerte tokenet må verifiseres av datakilde ved å validere signaturen.\nMan kan også lese om JSON webtokens her: https://jwt.io/introduction/.\nFor å verifisere signert token må datakilden benytte Altinn sitt offentlige sertifikat. Nedenfor finnes sertifikatpakker for test- og produksjonsmiljø :\n Testmiljø (TT02) Produksjonsmiljø (gyldig fra 16. april 2018)  JSON Web Token Består av tre punktumseparerte deler:\n Header Payload Signature  Under viser et eksempel på et signert og Base64-encodet self-contained JSON Web Token.\nHeader Header inneholder informasjon om token typen og hvilken hash algoritme som er brukt.\nEncoded eksempel: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkthUGxpMFJUdVVUcl9yUXJWSmhzQkNXQS0yayJ9  Decoded eksempel: { \u0026quot;typ\u0026quot;: \u0026quot;JWT\u0026quot;, \u0026quot;alg\u0026quot;: \u0026quot;RS256\u0026quot;, \u0026quot;x5t\u0026quot;:\u0026quot;mXGy2XES9W3b9beWTKff5XcQf1Q\u0026quot; }  Payload Payload inneholder påstandene (claims) i tokenet. Påstandene er den informasjonen som datakilden trenger for å få bekreftet at datakonsumenten har fått et gyldig samtykke.\nEncoded eksempel: eyJTZXJ2aWNlcyI6WyI0NjI5LDIiLCI0NjI5LDIsaW5udGVrdHNhYXI9MjAxNSIsIjQ2MzAsMiIsIjQ2MzAsMixmcmFPZ01lZD1ub3ZlbWJl ciAyMDE2LHRpbE9nTWVkPWphbnVhciAyMDE3Il0sIkF1dGhvcml6YXRpb25Db2RlIjoiMDkzZDAwNzAtMjJhZC00YzQ5LTlkNzEtZjUzNjdj Zjk5MWI4IiwiT2ZmZXJlZEJ5IjoiMzAwNTAxMDEyMTEiLCJDb3ZlcmVkQnkiOiI5MTA1MTQ0NTgiLCJEZWxlZ2F0ZWREYXRlIjoiMjAxNy0w NC0xOCAwOTozMzoxMyIsIlZhbGlkVG9EYXRlIjoiMjAxNy0wNi0zMCAxMDozMDowMCIsImlzcyI6ImFsdGlubi5ubyIsImV4cCI6MTQ5MjUw MDk0MiwibmJmIjoxNDkyNTAwOTEyfQ  Decoded eksempel: { \u0026quot;Services\u0026quot;: [ \u0026quot;4629_2\u0026quot;, \u0026quot;4629_2_inntektsaar=2016\u0026quot;, \u0026quot;4630_2\u0026quot;, \u0026quot;4630_2_fraOgMed=2017-06\u0026quot;, \u0026quot;4630_2_tilOgMed=2017-08\u0026quot; ], \u0026quot;AuthorizationCode\u0026quot;: \u0026quot;c7dbe642-0fc1-4c3b-8959-8a92e3e1f17d\u0026quot;, \u0026quot;OfferedBy\u0026quot;: \u0026quot;11025802170\u0026quot;, \u0026quot;CoveredBy\u0026quot;: \u0026quot;910514458\u0026quot;, \u0026quot;DelegatedDate\u0026quot;: 1503855661, \u0026quot;ValidToDate\u0026quot;: 1506760200, \u0026quot;iss\u0026quot;: \u0026quot;altinn.no\u0026quot;, \u0026quot;exp\u0026quot;: 1503860347, \u0026quot;nbf\u0026quot;: 1503860317 }  Signature Signature inneholder signert og encoded header og encoded payload. Algoritmen som er benyttet er beskrevet i header.\nEncoded eksempel: pumdz9xtOYk_mojdKU1X_uQlT3DKr4IUxoOSJPiLZ3SB2oy-R4Q40jn8gxdnxBLrGD3W1osra_v3x15Nrx9jsWUIz9eQA3H04cxeehTQBbM MT7XZGU-XnCE34AtQScaDQnyPObPZEQeSvl2nmxNdfjgrzFLsapthiKYNuhv3lzSheTs06Ko3jWHTUg19X_2QSbpOmBVORTai8XeYrm1Tzq _5CSxZo4pQEkxmBpSrtXcC3MuaF7cM514Bt-  Decoded eksempel: For å verifisere signaturen må datakilden benytte Altinns offentlige sertifikat. Se under for detaljer om hvordan signaturen verifiseres.\nInnhold i Payload ServiceCodes Inneholder en string eller et array of strings som representerer tjenestekodene for tjenesten(e) som er omfattet av samtykket brukeren har gitt. ServiceCodes strengen er inneholder to verdier; ServiceCode og ServiceEditionCode separert med underscore.\nVed bruk av metadata for {inntektsaar}, {fraOgMed} og {tilOgMed} i samtykketekst:\nSingle Service:\n\u0026quot;ServiceCodes\u0026quot;: \u0026quot;4629_2\u0026quot;  Multiple Services:\n\u0026quot;ServiceCodes\u0026quot;: [ \u0026quot;4629_2\u0026quot;, \u0026quot;4630_2\u0026quot; ] \u0026quot;Services\u0026quot;: [ \u0026quot;4629_2\u0026quot;, \u0026quot;4629_2,inntektsaar=2016\u0026quot;, \u0026quot;4630_2\u0026quot;, \u0026quot;4630_2_fraOgMed=2017_06\u0026quot;, \u0026quot;4630_2_tilOgMed=2017_08\u0026quot; ],  OfferedBy OfferedBy inneholder Personnummer eller Organisasjonsnummer for den som har gitt samtykke.\nEksempel:\nSSN: \u0026quot;OfferedBy\u0026quot;: \u0026quot;11025802170\u0026quot;\nOrgNo: \u0026quot;OfferedBy\u0026quot;: \u0026quot;999999999\u0026quot;\nCoveredBy CoveredBy inneholder Personnummer eller Organisasjonsnummer for den som har mottatt rettigheter igjennom brukeren samtykke.\nEksempel:\nSSN: \u0026quot;CoveredBy\u0026quot;: \u0026quot;02056260016\u0026quot;\nOrgNo: \u0026quot;CoveredBy\u0026quot;: \u0026quot;910514458\u0026quot;\nHandledBy HandledBy inneholder Organisasjonsnummer for tredjepart som gjennom rettighetsstyring i tjenesteeierstyrt rettighetsregister (SRR) er autorisert til å behandle samtykker på vegne av CoveredBy.\nDenne vil bare være en del av payload dersom det er tredjepart selv som har hentet signert JWT for å bruke dette for å autorisere seg for datakilden utenfor Altinn.\nEksempel:\nOrgNo: \u0026quot;HandledBy\u0026quot;: \u0026quot;910459880\u0026quot;\nValidToDate Dato og tidspunkt for når samtykket utløper\nEksempel: \u0026quot;ValidToDate\u0026quot;: 1506760200\nDelegatedDate Dato og tidspunkt for når samtykket ble gitt.\nEksempel: \u0026quot;DelegatedDate\u0026quot;: 1503855661\nAuthorizationCode / Autorisasjonskode Autorisasjonskoden som er benyttet for å hente det gitte tokenet. Kan brukes av datakilde til å logge bruk av tokene og dermed informere brukeren om at datakonsumenten har hentet data.\nIss iis spesifiserer hvem som har utstedt tokened, som skal verfiseres mot signaturen.\nEksempel: \u0026quot;iss\u0026quot;: \u0026quot;altinn.no\u0026quot;\nExp Unikt tidsstempel som spesifiserer utløpstidspunket for det gitte tokenet.\nEksempel: \u0026quot;exp\u0026quot;: 1474526471\nNbf Unikt tidsstempel som spesifiserer første gang det gitte tokenet kan brukes\nEksempel: \u0026quot;nbf\u0026quot;: 1492500912\nVerifisere JWT Token signatur En enkel måte å teste og verifisere JWT token er jwt.io webpage tool. For å bruke nettsiden:\n Lim inn komplett encodet JWT inkludert header, payload og signature. Velg algoritmen RS256 fra nedtrekksmenyen. Lim inn BASE64 encoded offentlig X-509 sertifikatet til Altinn under “Verify Signature”.\n   Eksempel på decoding og verifisering av signature med jwt.io verktøyet   Eksempel på C# decode og verifisering av signatur Under vises et eksempel på en hjelpemetode som tar inn det offentlige sertifikatet til Altinn og et encoded JWT token som en string. Metoden benytter JwtSecurityTokenHandler Class (System.IdentityModel.Tokens) for å gjøre den faktiske decodingen og verifikasjonen av signaturen, basert på de spesifiserte TokenValidationParameters. Dersom valideringen er en suksess inneholder SecurityToken informasjonselementer som SecurityKeys, ValidFrom and ValidTo, og decodet JSON object som inneholder Header og Payload.\nMSDN links:\n JwtSecurityTokenHandler SecurityToken  private SecurityToken ValidateToken(X509Certificate2 publicCertificate, string tokenString) { var tokenHandler = new JwtSecurityTokenHandler(); // Token Validation Parameters var validationParameters = new TokenValidationParameters() { IssuerSigningKey = new X509SecurityKey(publicCertificate), ValidateAudience = false, ValidateIssuer = true, ValidateLifetime = true, ValidIssuer = \u0026quot;altinn.no\u0026quot; }; SecurityToken securityToken; tokenHandler.ValidateToken(tokenString, validationParameters, outsecurityToken); return securityToken; }  "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakilde/test-tjeneste/",
	"title": "Test av tjeneste",
	"tags": [],
	"description": "Teste autorisasjon av datakonsument og samtykketjeneste",
	"content": " Test av tjeneste i Altinn sitt testmiljø Tjenesten må testes ut i Altinn sitt testmiljø TT02: https://tt02.altinn.no\nForutsetninger for å teste:\n Må være etablert en samtykketjeneste (lenketjeneste) i TUL. Tjenesten må være migrert til TT02. For å teste henting av token via REST-tjeneste trenger man ApiKey knyttet til organisasjonsnummeret man skal teste med. Kan bestilles hos Altinn via selvbetjeningsportalen eller via tjenesteeier@altinn.no Man må ha fiktive testpersoner som kan benyttes i testen. Dette har i de fleste tilfeller tjenesteeier allerede tilgang til men dersom man ikke har dette må man sende en henvendelse til Altinn.\n For å verifisere det signerte tokenet må datakilden benytte Altinn sitt offentlige sertifikat. Dette får man ved å henvende seg til Altinn  Registrere en datakonsument i tjenesteeierstyrt rettighetsregister For å få testet samtykketjenesten må man først registrere en test-datakonsument i tjenesteeierstyrt rettighetsregister (SRR). Dette gjøres ved å benytte webtjenesten \u0026ldquo;RegisterSRRAgencyExternal\u0026rdquo;:\nhttps://tt02.altinn.no/RegisterExternal/RegisterSRRAgencyExternalBasic.svc?wsdl\nDenne har operasjonene AddRights, DeleteRights og GetRights.\nEksempel på en request for å legge til rettigheter (her testet ved bruk av SoapUI):\n Legge til rettighet i tjenesteeierstyrt rettighetsregister   ServiceCode er tjenestekoden og ServiceEditionCode er tjenesteutgavekoden for lenketjenesten. Disse hentes fra TUL.\nReportee angir hvilken organisasjon (eller person) som skal få lov å hente ut data gjennom tjenesten. I Lånesøknadscasen må organisasjonsnummeret til banken som skal få lov til å hente data fra Skatteetaten legges inn. I test legger man inn organisasjonsnummeret til en fiktiv organisasjon man kan teste med.\nAllowedRedirectDomain angir hvilket domene sluttbruker kan sendes til etter at sluttbruker har gitt/ikke gitt samtykke. Dette er en sikkerhetsmekanisme som sørger for at Altinn ikke kan utnyttes til redirects vilkårlig. Det er kun schema/domene/host (ikke path) som legges inn og wildcard (*) kan benyttes for å støtte flere sub-domener. Om schema ikke spesifiseres tillates både HTTP og HTTPS. Egendefinerte schema kan brukes for å sende resultat tilbake til f.eks. mobile applikasjoner. Det er mulig å legge inn flere domener per org.nr. ved å skille de med semikolon. For mer informasjon se her.\nEksempel på å fjerne en gitt rettighet:\n Fjerne rettighet fra tjenesteeierstyrt rettighetsregister   Eksempel på uthenting av gitte rettigheter:\n Uthenting av gitte rettigheter   Det kan hentes pr. tjeneste eller pr. organisasjonsnummer.\nTeste samtykketjenesten Etter å ha registrert en test-datakonsument (fiktivt organisasjonsnummer) i tjenesteeierstyrt rettighetsregister kan man teste ut samtykketjenesten. Dette krever at tjenesten er migrert til TT02 i TUL. En beskrivelse av hvordan man kan opptre som datakonsument for å få testet tjenesten og innveksling av autorisasjonskode i token finnes her.\nSe her for informasjon om oppbygging og verifikasjon av token.\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2017/17-1/",
	"title": "17.1",
	"tags": [],
	"description": "Digital post til virksomheter, dialog med egenregistrerte brukere, nye sider for pålogging, heving av sikkerhetsnivå for SMS, +++",
	"content": " Som vanlig inneholder februar-versjonene av Altinn endringer for selvangivelsen. I tillegg er det en rekke endringer på andre områder.\nAutentisering Heving av Altinn-SMS til nivå 3 (18726) Dagens innlogging med SMS fra Altinn gir sikkerhetsnivå 2. Denne endringen gjør at den kan benyttes til innlogging på nivå 3 etter at bruker bekrefter sine innloggingsopplysninger i profil. Endringen er rettet i hovedsak mot brukere av sluttbrukersystemer, men tilgjengelig for alle brukere som vil benytte Altinn-SMS.\nNye autentiseringssider (19632) Oppdatere til nytt visuelt design på Altinn sine sider for autentisering (innlogging).\nDe nye sidene skal være responsive og universelt utformet.\nStøtte for HTTP POST-kall fra ID-porten (19991) Teknisk endring i kommunikasjon med ID-Porten for å bedre ytelse. Ikke synlig for sluttbruker.\nVideresending av Relaystate-parameter (19078) Feilretting på autentiseringsmodulen for å gjøre korrekt videresending av mottatt parameter ved SAML-autentisering.\nBrukskvalitet Nye feilsider (19631) I dag blir man sendt fra nye portalsider til feilsider i gammel portal. Vi oppdaterer designet for sidene som viser følgende feilmeldinger:\n Generiske feilmeldinger når en uventet teknisk feil oppstår Feilmeldinger når bruker ikke er autorisert Feilmeldinger ved Ajax-funksjonalitet skal gi bruker bedre respons.  De nye sidene skal være responsive og presentere feilmeldinger på riktig språk.\nAutorisasjon Videreutvikling av Altinns autorisasjonskomponent (19781) Autorisasjonskomponenten tilrettelegges for tilgangsstyring for tjenester som ikke er implementert ved hjelp av TUL. Dette innebærer flere mindre endringer:\n Tjenesteutvikler kan spesifisere egen delegeringstekst for en tjenesteutgave Tjenesteeier kan enkelt sjekke hvilke avgivere en gitt bruker har rettigheter på vegne av, for å sjekke om vedkommende skal få tilgang til tjenesteeiers systemer Tjenesteeier kan angi hvilke organisasjoner som skal kunne delegere rettigheter på en gitt tjeneste fra tjenesteeieren Tjenesteeier kan sjekke hvilke rettigheter en gitt bruker har på vegne av en gitt avgiver Rettigheter som er videredelegerte rettigheter fra organisasjon til ansatte skal automatisk slettes når rettighetene som er delegert til organisasjonen trekkes tilbake  Delegeringer som er gjort vises i liste etter at personen er død (18547) Delegeringer vil slettes når den som har fått delegert rettigheter dør. Listen over hvem som har tilgang blir ryddigere – brukere slipper å se navnet til personer som er døde.\nEksterne grensesnitt Forbedringer – egenregistrerte brukere (13275) Vi muliggjør preutfylling, meldinger og varsling til egenregistrerte brukere.\nDette gjør at tjenesteeiere får bedre muligheter til dialog med denne brukergruppen.\nMeldinger skal opprettes selv om varslingsadresse er ugyldig (19221) I dag blir ikke meldinger opprettet om angitt varslingsadresse er ugyldig. Dette rettes. Det gir oss bedre kontroll på innsendte meldinger fra tjenesteeiere, og tjenesteeierne får bedre tilbakemelding på feilede varsler.\nSvakhet i arkivreferanseknytningen på insertcorrespondence (19420) Det vil nå gis bedre tilbakemelding til tjenesteeier på feilsituasjoner på innsending av meldinger med feil arkiv-knytning.\nMy Fields i Download Queue (20398) Vi endrer prosesseringen av skjema-xml som returneres over Download Queue slik at hjelpefelter filtreres bort.\nForbedringer – Samtykkesiden (20401) Vi forbedrer håndteringen av URL til samtykkesiden fra eksterne sider, og innfører støtte for flere tokens i returnurl.\nAltinnMapperContext for SBS/REST-innsendinger (20468) Feilretting for å tilgjengeliggjøre kontekst om bl.a. autentisert bruker og tjeneste (AltinnMapperContext) slik at denne informasjonen kan brukes til automatisk utfylling av felter i skjemainnsendinger også fra REST og webservice.\nFeilretting - logging skjer bare ved avvist instansiering ved innsending fra SBS (18451) Vi innfører bedre logging av feilmeldinger i innsendinger fra sluttbrukersystem.\nTjenester \u0026ldquo;Digital Post til Virksomheter\u0026rdquo; i Altinn (19319) Altinn har rollen som postkasse for næringsliv og private virksomheter. Det utløser behov for omgående endringer slik at flere enn kun dagens tjenesteeiere skal kunne ta dette i bruk. Altinn oppretter flere felles meldingstjenester som kan benyttes til å sende post til virksomhetene. Avsenderne har frihet til å definere navn på avsender, men det vil logges hvem som er avtalepart, og hvem som står for transaksjonen.\nhttps://altinnett.brreg.no/no/Veiledning/Digital-post-til-virksomheter/\nDelegere rettigheter på enkeltinstanser til organisasjoner (20394) I dagens løsning er det mulig å overstyre tilganger på enkeltelementer, men dette er begrenset til at delegeringer kun kan gis til personer. Dette endres nå, slik at delegering på enkeltelementer i meldingsboksen også kan gjøres til organisasjonsnummer.\nSvakhet i regelmotor ved verdioverføringer (18971) Ved oppdatering av underskjema som trigget verdioverføring til hovedskjema har det kunnet skje duplisering eller sletting av verdi i hovedskjema. Dette blir nå rettet ved å endre en svakhet i hvordan felter blir adressert.\nMangler i Altinn regelmotor for SERES skjema (18555) All funksjonalitet i regelmotor er ikke støttet for SERES skjema. En del fungerer bare med OR skjema. Dette blir nå rettet ved å sjekke spesifikt om det er angitt orid notasjon eller xpath.\nMultiplisere og dividere i regelmotor (18958) Det har vært behov for rikere funksjonalitet for å bruke matematiske funksjoner i regelmotor. Støtte for bruk av multiplikasjon, divisjon, konstanter, flere typer avrunding samt utelukkelse av bruk av bokstaver er nå implementert.\nFlere e-post-adresser ved sending av kvittering (17784) Sending av kvittering har så langt bare støttet sending til en mottaker. Kvittering kan nå sendes til flere mottagere adskilt med semikolon.\nBinære vedlegg uten filtype (16998) Det har tidligere vært mulig å legge til vedlegg uten filtype. Dette er ikke lenger mulig. Bruker får en feilmelding og kommer ikke videre dersom det blir forsøkt å legge ved filer uten filtype.\nSortering av vedleggstyper (20411) Vedleggstyper har ikke vært vist i sortert alfabetisk rekkefølge. Vises nå sortert.\nMVA-KID generator – Oversettelse til engelsk (20147) Noen oversettelser til engelsk har manglet i MVA-KID generator. Termintekstene er nå oversatt og med i løsningen.\nRF-1030: Riktig melding hvis ikke kontonummer/utbetalingsmåte oppgis (20430) Validering av kontonummerendring når kontonummer/utbetalingsmåte ikke er oppgitt gir uønsket tekst i tilbakemelding til bruker for RF-1030. Dette er rettet slik at korrekt tekst vises.\nServerside kryptering (16188) Endringen realiserer en løsning for å kryptere, lagre og dekryptere brukers tjenestedata serverside i Altinn.\nBankID-logikk (18633) Bugfix på logikk i BankID-signering, som ikke medfører synlige endringer for sluttbruker.\nIntegrasjonsplattform Fjerning av gammel PrepareShipmentPart-orkestrering (20400) I endring 17626 ble det gjort endringer i forberedelsessteget for dataflyter. Man beholdt likevel også gammel PrepareShipmentPart-orkestrering i en overgangsperiode. Nå er all dataflyt flyttet til nye orkestreringer, og gammel orkestrering kan derfor fjernes.\nDriftsrutiner og registerintegrasjon Feil håndtering ved innlesning av opplysninger fra Enhetsregisteret (17607) Dagens batchoverføring av Enhetsregisterdata forskjellsbehandler ikke første gangs overføring fra andre overføringer. Dataene som overføres legges til. Data som ikke er med i en overføring blir dermed liggende. Det er ønskelig å få denne oppførselen endret slik at utdaterte data blir fjernet. Ved å utføre endringen vil det bli enklere å rette opp opplysningene på ER-kopien som ligger i Altinn. Sluttbrukere med feil i opplysningene fra Enhetsregisteret vil få dette korrigert raskere enn tidligere.\nTeknisk arkitektur Oppgradering av EO.PDF (20482) Oppgradering av bibliotek som benyttes for å generere PDF for å oppnå økt skalerbarhet og bedre ytelse.\nTimeout-håndtering (20483) Forbedret håndtering av tekniske timouts for å oppnå økt robusthet.\nEndre index (18986) Endringer i indeksering for å redusere låsing i databasen.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/beviskoder/",
	"title": "Beviskoder",
	"tags": [],
	"description": "Oversikt over beviskoder i produksjon",
	"content": "Dette er dokumentasjon under arbeid for eBevis-tjenesten som per i dag ikke er produksjonssatt\n\rDenne listen er bygd dynamisk basert på metadata-API-et til eBevis.\n    \n Tilgang Asynkron Maks tilgjengelighet Har parametre  Parametere Dette er parametere som kan eller må oppgis i forespørselen\n  Parameter Type Påkrevd           Verdier i retur Dette er feltene som ligger i svaret\n  Parameter Type Kilde          Eksempel på forespørsel         \n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/mappere/utvikling/",
	"title": "Utvikling",
	"tags": [],
	"description": "Beskrivelse av hvordan man utvikler",
	"content": " En mapper utvikles i prosjektet Services. Dette inneholder en WCF-tjeneste med tilhørende tjeneste- og datakontrakt. Det er støttet opptil .NET versjon 4.6 i både utviklings- og driftsmiljøet.\nI tillegg er det noen støtteklasser som kan benyttes. Strukturen i prosjektet er vist under.\n Kildekode og versjonskontroll Altinn benytter Team Foundation Server med git til versjonskontroll. De nødvendige verktøyene for å kunne sjekke inn og ut kode er tilgjengelig direkte i Visual Studio. For å sjekke inn eller ut kode kan dette gjøres ved å høyreklikke på solution eller prosjektet og velge ulike handlinger der.\nHvordan man skal koble seg til Altinn sin Team Foundation Server er beskrevet her.\nEn god oversikt over bruken av git i Visual Studio kan finnes her og dokumentasjon på git her.\nDefinere Service Contract Det første man gjør når man skal utvikle en mapper er å definere tjenestekontrakten for mapperen. Dette gjøres ved å opprette en Service Contract i filen IMapper.cs. Dette er et interface som beskriver hvilke operasjoner som skal være tilgjengelig på tjenesten. For å angi at interfacet er en WCF-tjenestekontrakt må ServiceContract-attributtet angis. Her må også mapperen sitt namespace angis.\nAlle operasjonene som skal være tilgjengelig på tjenestekontrakten opprettes som metoder i interfacet og markeres med attributtet OperationContract. Alle operasjoner må ta inn et forespørsel-objekt og returnere et respons-objekt. Disse objektene må navngis med «Forespoersel» og «Respons» postfiks.\nEksempel fra Testdepartementet Under er det vist et eksempel på en slik tjenestekontrakt. Her defineres «GetMidlertidigKjoeretillatelse». Denne tjenesten tar inn et forespørsel-objekt og returnerer et respons-objekt.\nEksempelkoden for testdepartementet finnes i TFS på stien $/TTD/Mappers/Foererkort/.\nEksempel på tjenestekontrakt:\nusing System.ServiceModel; namespace Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services { [ServiceContract(Namespace = \u0026quot;http://www.altinn.no/mapperservices/ttd/2011/06\u0026quot;)] public interface IMapper { [OperationContract] TillatelseRespons GetMidlertidigKjoeretillatelse( TillatelseForespoersel forespoersel); } }  Definere datakontrakter All informasjon som skal overføres med WCF-tjenester må angis med datakontrakter. Dette er vanlige kodeklasser som markeres med DataContract-attributter. Klassene skal ligge i filen Transfer.cs. Variabler med DataMember-attributter angir data som skal overføres. Det er fullt mulig å angi komplekse datastrukturer ved å opprette hierarkiske datakontrakter. Forespørsler skal navngis med Forespoersel-postfiks og Respons-objekter med Respons-postfiks, og det er en begrensning på maks 2MB overført data per kall.\nEksempel fra Testdepartementet Testdepartementet sin tjeneste mottar et TillatelseForespoersel-objekt som angir fødselsnummeret for den brukeren som skal hamidlertidig kjøretillatelse.\nusing System.Runtime.Serialization; namespace Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services { [DataContract] public class TillatelseForespoersel { [DataMember] public string Fnr; } }  Når forespørselen om midlertidig kjøretillatelse er behandlet returneres det et respons-objekt som vist under. Dette inneholder et tillatelse-objekt og en tekststreng som viser statusen på tillatelsen. Tillatelse-objektet inneholder igjen en Adresse. På denne måten kan dataene struktureres på en intuitiv måte slik at skjemautviklerene lett kan presentere informasjonen.\nusing System.Runtime.Serialization; namespace Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services { [DataContract] public class TillatelseRespons { [DataMember] public Tillatelse Tillatelse; [DataMember] public string Status; } [DataContract] public class Tillatelse { [DataMember] public string Fnr; [DataMember] public string Navn; [DataMember] public string Godkjent; [DataMember] public string Utloper; [DataMember] public Adresse Adresse; [DataMember] public string Klasser; } [DataContract] public class Adresse { [DataMember] public string Lokasjon; [DataMember] public int Postnummer; [DataMember] public string Poststed; [DataMember] public string AnnenAddresse; } }  Koble til etat-systemet Når man skal koble seg til et etatsystem fra en mapper må denne ha en tjenestereferanse til den tjenesten som skal benyttes. Referansen settes opp ved å følge oppskriften. Adressen avhenger av etatsystemet men kan for eksempel se slik ut:\nhttps://altetat.brreg.no/ttd-war/PortalServices\nNår man kobler seg til etatsystemet vil Visual Studio oppdatere app.config med en del konfigurasjon. Denne konfigurasjonen må også legges til i de konfigurasjonsfilene som installeres på Altinn sine servere.\nDatakonvertering En mapper er i sin enkleste form tilgjengeliggjøring av en etat-tjeneste som en tjeneste i Altinn. For at informasjon skal kunne flyte gjennom mappere må det derfor konverteres mellom mapperens og etatsystemenes datakontrakter.\nKonverteringen må settes opp fordi det ikke er ønskelig at tjenesteeier sine datakontrakter benyttes som datakontrakter for mapperen. Ved å separere kontraktene på denne måten sikrer man at endringer i tjenesteeier sine kontrakter ikke påvirker mapperene sine kontrakter og dermed også skjemaene i Altinn.\nDet andre aspektet er at det å benytte etatens kontrakter som mapperenes kontrakter er uheldig og komplisert. Noen etatsystem tilgjengeliggjør sine tjenester med svakt typet data. Dette er i noen tilfeller nødvendig på grunn av etatsystemets funksjonalitet eller tekniske begrensninger eller krav. Dette er noe som bør unngås dersom det ikke er spesielle årsaker for siden det da kan komplisere utvikling og testing av mapperen.\nKonverteringen gjøres i filen Utility.cs. Her må det implementeres en klasse som heter Converter. Denne klassen inneholder et sett med convert-metoder som konverterer mellom de ulike datakontraktene.\nusing System; using System.Text; namespace Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services { internal class Converter { public static Tillatelse Convert(tillatelseVO vo) { if (vo != null) return new Tillatelse() { Fnr = vo.fnr, Navn = vo.navn, Godkjent = vo.godkjent, Utloper = vo.utloeper, Adresse = Convert(vo.adresseVO), Klasser = Convert(vo.korttyper) }; else return null; } public static Adresse Convert(adresseVO vo) { if (vo != null) return new Adresse() { Lokasjon = vo.lokasjon, Postnummer = vo.postnummer, AnnenAddresse = vo.annenAdresse, Poststed = vo.poststed }; else return null; } } }  Implementere mappertjenesten Selve implementasjonen av mappere gjøres i Mapper.cs. Her er klassen Mapper som implementerer tjenestekontrakten IMapper. Eksempelet under viser en enkel implementasjon av en mapper. Her er blant annet logging utelatt.\nusing System; using System.ServiceModel; using Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services.SvcRef; using System.Configuration; using System.Net; namespace Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services { [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, Namespace = \u0026quot;http://www.altinn.no/mapperservice/ttd/2011/06\u0026quot;)] public class Mapper : IMapper { public TillatelseRespons GetMidlertidigKjoeretillatelse( TillatelseForespoersel forespoersel) { var respons = new TillatelseRespons(); using (var proxy = new PortalServicesClient()) { try { var vo = proxy.getMidlertidigKjoeretillatelse(forespoersel.Fnr); respons.Tillatelse = Converter.Convert(vo); respons.Status = \u0026quot;OK\u0026quot;; } catch (Exception ex) { respons.Status = \u0026quot;Web Service call failed, \u0026quot; + \u0026quot;please contact administrator\u0026quot;; } } return respons; } }  Over er det brukt noen syntaks-elementer som er særegent for .NET. Dette er typen var og block-statementet using.\nTypen var er en uspesifisert variabeltype som kompilatoren bytter ut med korrekt type under kompilering. Under er det vist to kodelinjer som resulterer i samme kompilerte kode. Linje nummer to benytter var-typen. Som det vises av eksempelet gjør var at utvikleren ikke trenger å spesifisere type-informasjonen to ganger. Var er altså kun syntaktisk sukker som gjør utviklingen enklere.\n// Eksplisitt angitt type TillatelseRespons respons = new TillatelseRespons(); // Bruk av var. var respons = new TillatelseRespons();  Blockstatementen using benyttes for å sikre at begrensede ressurser frigis etter bruk. Dette er også kun syntaktisk sukker som sikrer at Dispose-metoden blir kalt etter at en ressurs er benyttet. To ekvivalente eksempler er vist under.\n// Eksplisitt frigjøring av begrensede ressurser. var proxy = new PortalServicesClient(); proxy.getMidlertidigKjoeretillatelse(forespoersel.Fnr); proxy.Dispose(); // Frigjøring av begrensede ressurser ved bruk av using. using (var proxy = new PortalServicesClient()) { proxy.getMidlertidigKjoeretillatelse(forespoersel.Fnr); }  Logging For å kunne overvåke og feilsøke mapperen under utvikling og i produksjon er det viktig at den logger viktige hendelser. Dette inkluderer tjenestekall og feilsituasjoner. Gode logger gjør det enklere å få innsikt i tilstand og ytelse, samt identifisere feilen dersom det skulle oppstå problemer.\nLogging gjøres ved bruk av klassen Trace som er standardfunksjonalitet i .NET-rammeverket. Her kan man spesifisere ulike typer logginnslag gjennom bruk av metodene TraceInformation, TraceWarning og TraceError. Metodene funger likt, men vil markere logginnslaget med ulik alvorlighetsgrad. Hver mapper har sin egen loggfil.\nFor å skru på at Trace skal logges må dette konfigureres i tjenestens config-fil. Dette gjøres som vist under.\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot;?\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;system.diagnostics\u0026gt; \u0026lt;trace autoflush=\u0026quot;true\u0026quot;\u0026gt; \u0026lt;listeners\u0026gt; \u0026lt;add name=\u0026quot;MapperListener\u0026quot; type=\u0026quot;System.Diagnostics.TextWriterTraceListener\u0026quot; initializeData=\u0026quot;Trace.csv\u0026quot; /\u0026gt; \u0026lt;/listeners\u0026gt; \u0026lt;/trace\u0026gt; \u0026lt;/system.diagnostics\u0026gt; \u0026lt;/configuration\u0026gt;  Metoden TraceInformation kan brukes på ulike måter. Under er tre eksempler som bygger opp en formatert streng som viser dagens dato:\nvar message = \u0026quot;Dagens dato er \u0026quot; + DateTime.Now.ToString(); Trace.TraceInformation(message); var format = \u0026quot;Dagens dato er {0}\u0026quot;; Trace.TraceInformation(format,DateTime.Now); var formattedMessage = string.Format(format, DateTime.Now) Trace.Traceinformation(formattedMessage);  I mappere bør man benytte standard oppsett på logginnslagene slik at det er lett å lese loggene i etterkant.\nEt forslag til slikt format er gitt i eksempelet. Her er det fire parametere som benyttes.\n Det første angir tidspunktet for logginnslaget. Det neste viser kilden i form av metodenavnet. Deretter følger type innslag og verdien.  Når man leser loggen kan man da velge å filtrere på ulike typer kilder, innslagstyper og dato.\n// Her hentes informasjon om starttidspunkt og metode som kalles. // Dette gjøres tidlig i metoden. DateTime start = DateTime.Now; string methodName = MethodBase.GetCurrentMethod().Name; // Her logges en feilmelding med Trace.TraceError. // Det som logges er: tidspunktet, metodenavn og feilmelding. // Dette gjøres for alle feilmeldinger som kommer i metoden. Trace.TraceError(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;Exception\u0026quot;, ex.Message)); // Her logges en fullført tjenestekall med Trace.TraceInformation. // Det som logges er: tidspunkt, metodenavn og varighet // Dette gjøres på slutten av alle tjenester Trace.TraceInformation(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;Duration\u0026quot;, (DateTime.Now - start).TotalMilliseconds));  I eksempelet er logging inkludert i mapperimplementasjonen. Her logger man alle tjenestekall som gjøres, samt logger alle feilmeldinger som kastes dersom etatsystemet returnerer feil.\nusing System; using System.ServiceModel; using Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services.SvcRef; using System.Diagnostics; using System.Configuration; using System.Net; using Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services.SvcSecRef; namespace Altinn.SBL.ServiceEngine.LookUp.Mappers.TTD.Services { [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, Namespace = \u0026quot;http://www.altinn.no/mapperservice/ttd/2011/06\u0026quot;)] public class Mapper : IMapper { public TillatelseRespons GetMidlertidigKjoeretillatelse( TillatelseForespoersel forespoersel) { DateTime start = DateTime.Now; TillatelseRespons respons = new TillatelseRespons(); string methodName = MethodBase.GetCurrentMethod().Name; using (var proxy = new PortalServicesClient()) { try { var vo = proxy.getMidlertidigKjoeretillatelse(forespoersel.Fnr); respons.Tillatelse = Converter.Convert(vo); respons.Status = \u0026quot;OK\u0026quot;; } catch (Exception ex) { Trace.TraceError(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;Exception\u0026quot;, ex.Message)); respons.Status = \u0026quot;Web Service call failed, \u0026quot; + \u0026quot;please contact administrator\u0026quot;; } } } else { respons.Status = \u0026quot;Context verification failed, \u0026quot; + \u0026quot;please contact administrator\u0026quot;; } Trace.TraceInformation(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;Duration\u0026quot;, (DateTime.Now - start).TotalMilliseconds)); return respons; } }  I eksempelet over fanges alle feilmeldinger med den generelle try-catchen for Exception. Dette vil sikre at det ikke lekker feil ut fra denne kodeblokken, men det vil samtidig skjule verdifull informasjon fra feilloggen. Det kan derfor være lurt å skille på ulike feil slik at man får et mer differensiert bilde av hva som går feil hvis det skulle inntreffe.\nEn try-catch-sekvens fungerer slik at feilen vil fanges i den første catchen som dekker den aktuelle feilen. Rekkefølgen må derfor være fra mest til minst spesifikk. Et anbefalt minimum er sekvensen FaultException, CommunicationException, TimeoutException og til slutt Exception for å fange alle overskytende feilmeldinger.\ntry { // Utfør kall til tjensteeier sine system. } catch (FaultException ex) { Trace.TraceError(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;FaultException\u0026quot;, ex.Message)); } catch (CommunicationException ex) { Trace.TraceError(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;CommunicationException\u0026quot;, ex.Message)); } catch (TimeoutException ex) { Trace.TraceError(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;Exception\u0026quot;, ex.Message)); } catch (Exception ex) { Trace.TraceError(string.Format(\u0026quot;;{0};{1};{2};{3}\u0026quot;, Clock.GetTimestamp(), methodName, \u0026quot;Exception\u0026quot;, ex.Message)); }  Rammeverk for fellesfunksjonalitet En mapper har tilgang til en del fellesfunksjonalitet. Dette er samlet i Altinn.Common.dll. Denne må legges til i Services-prosjektet som en assembly-referanse. Den samme prosessen må gjøres for to andre assemblys som Altinn.Common er avhengig av. Assemblyene ligger på følgende plassering i versjonskontrollsystemet:\n $/Common/\u0026lt;siste tilgjengelige versjon\u0026gt;/lib/Altinn.Common.dll $/Common/Frameworks/entlib/4.1/bin/Microsoft.Practices.EnterpriseLibrary.Common.dll $/Common/Frameworks/entlib/4.1/bin/Microsoft.Practices.EnterpriseLibrary.Logging.dll  Konfigurasjonsparametere Dersom man har spesielle konfigurasjonsparametere man ikke ønsker å kode inn i en mapper, men heller tilgjengeliggjøre i konfigurasjonsfiler kan dette gjøres ved bruk av AppSettings-seksjonen i konfigurasjonsfilen. Dette er et enkelt «key-value» oppsett der man kan angi verdier som kan hentes ut basert på en oppslagsverdi i koden.\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot; ?\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;appSettings\u0026gt; \u0026lt;add key=\u0026quot;MyKey\u0026quot; value=\u0026quot;MyValue\u0026quot;/\u0026gt; \u0026lt;/appSettings\u0026gt; \u0026lt;/configuration\u0026gt;  For å hente ut igjen slike verdier benyttes ConfigurationManager:\nvar value = ConfigurationSettings.AppSettings[\u0026quot;MyKey\u0026quot;];  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/",
	"title": "Web Service",
	"tags": [],
	"description": "Webservice operasjoner med beskrivelse",
	"content": "Her vises hvilke webservices som tilbys i Altinn. Tjenestene er beskrevet uavhengig av hvilken autentiseringsmetode den enkelte tjenesteeier ønsker å benytte. For ytterligere informasjon er det mulig å se på de tenkniske spesifikasjonene tilgjengelig som WSDLer fra respektive endepunkt og tjenestekatalogen. \rAbonnement\r\rAbonnement - legge ut element i innboksen\n\rAltut\r\rRegistrering av meldinger (ikke videreført)\n\rAutorisasjon\r\rWebservice operasjoner med beskrivelse\n\rBatch logging\r\rHente ut feilmeldinger fra behandling av batch jobber\n\rContext handler\r\rHente ut medadate for elementer\n\rDownloadQueue\r\rHente ut elementer fra DownloadQueue\n\rKvitteringer\r\rHente ut og oppdatere kvitteringer\n\rMeldingstjeneste\r\rOpprette meldinger og hente ut status for disse\n\rPreutfylling\r\rSende ut preutfylte oppgavesett til innboksen\n\rRettigheter\r\rHente ut opplysning om rettigheter\n\rSamhandlingstjeneste\r\rAdministrere samhandlingstjenestene\n\rTjenesteeiers arkiv\r\rHente ut element fra tjenesteeiers arkiv\n\rVarseltjeneste\r\rVarseltjenesten gjør det mulig for tjenesteeiere å opprette varsel uavhengig av andre elementer i meldingsboksen til avgiver.\n\rWebservice mottak\r\rSette opp mottak over webservice\n\rFeilhåndtering\r\rWebservice operasjoner med beskrivelse\n\rFeilkoder\r\rFeilkoder i Altinn\n\rEndepunkter\r\rListe over alle webservice endepunkt\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/hvorfor/",
	"title": "Hvorfor bruke eBevis?",
	"tags": [],
	"description": "Veiledning for bruk av eBevis (tidligere Nasjonal tjeneste for dokumentasjonsbevis - NADOBE)",
	"content": " Med et fokus på deling og gjenbruk av data skal løsningen effektivisere prosesser og gi sanntidsdata med god kvalitet. Nedenfor vil vi informere om de ulike fordelene med eBevis.\nEffektivisering  Dokumentasjonsbevis hentes og lagres digitalt Maskinlesbare bevis gir mulighet for gjenbruk av informasjon Én fellesløsning for alle offentlige oppdragsgivere Systemleverandører lager brukergrensesnitt Gjør det lettere for offentlige etater å dele data med hverandre, og med private virksomheter Alle data som tilbys i eBevis er definert som beviskilder, som kan være fra alt fra ett lite numerisk felt til et stort XML-dokument. I tillegg kan man slå sammen data fra forskjellige kilder. Eksempelvis kan det være ett felt fra Brønnøysundregistrene, to felt fra Skatteetaten og tre felt fra NAV, da det ikke er noe problem å få til dette teknisk sett.  Motvirke arbeidslivskriminalitet  Får sanntidsdata, i stedet for bevis som kan være opptil 6 måneder gamle Bevis hentes direkte fra kilden, og er dermed vanskeligere å forfalske Enklere kontroll av bevis i eventuell kontraktsperiode  Bedre kvalitet på anskaffelsene  Færre avvisninger på grunn av formalfeil Mottaker av bevispakken bruker mindre tid til å kontrollere dokumentasjon  "
},
{
	"uri": "https://altinn.github.io/docs/guides/ebevis/offentlige-anskaffelser/",
	"title": "eBevis ved offentlige anskaffelser",
	"tags": [],
	"description": "",
	"content": " Dette er dokumentasjon under arbeid for eBevis-tjenesten som per i dag ikke er produksjonssatt\n\rProsjektet har gått som et samarbeid mellom Brønnøysundregistrene, Skatteetaten og Difi. Løsningen ble produksjonsatt 01.04.19, med Mercell som pilot.\neBevis er en løsning som er laget for å digitalisere anskaffelsesprosessen, og brukes samtidig som et verktøy for å kontrollere om leverandører er seriøse. eBevis lar offentlige oppdragsgivere/innkjøpere få tilgang til å hente inn definerte sanntidsdata om leverandører i forbindelse med offentlige anskaffelser. Det gjelder både før og etter kontraktinngåelse.\nVed hjelp av samtykkeløsningen i Altinn eller hjemmel, vil løsningen kunne høste og avgi ikke-åpne data, for eksempel skatteopplysninger.\nI anskaffelsesprosessen Oppdragsgiver har gjennom systemløsningen satt opp at eBevis skal benyttes i anskaffelsesprosessen.\nLeverandører vil få informasjon om eBevis gjennom konkurransen, via utfylling av ESPD (egenerklæringsskjemaet), samt ved innsending av tilbudet. Leverandør får da beskjed om at oppdragsgiver vil sjekke dokumentasjonen som trengs, via eBevis. Leverandør fyller ut ESPD i Mercell KGV, hvor de samtidig får opplyst hvilken informasjon som vil bli hentet ut.\nVed innsending av tilbudet får de informasjon om at en forespørsel om fullmakt vil bli mottatt via Altinns meldingstjeneste, da det trengs fullmakt til innhenting av data.\nEtter at fullmakten er gitt og bevispakken er laget, sendes bevispakken videre til oppdragsgivers fagsystem hvor oppdragsgiver nå kan ta stilling til de ulike tilbudene som er mottatt.\nEksempel med samtykke: \nEksempel med kun åpne data: \nEksempel med åpne data og samtykke: \n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/batch/",
	"title": "Batch",
	"tags": [],
	"description": "Webservice operasjoner med beskrivelse",
	"content": " Her følger en oversikt over hvilke batch grensesnitt som tilbys i Altinn.\nInnsendingstjenester Ferdig utfylte skjemaer i Altinn overføres på xml fil til tjenesteeiere. Tjenesteeiere kan motta utfylte skjemaer fortløpende, eller samle opp til rutinemessig overføring. Alternative protokoller som benyttes i Altinn-løsningen i dag er FTP og SFTP. Kun arkiverte elementer for egne skjemaer overføres.\nTjenesteeier må etablere FTP/SFTP mottak, og se til at angitt FTP område til enhver tid er tilgjengelig for Altinn. Opplysninger om FTP adresse, pålogging og frekvens må avtales før valgt overføring kan aktiviseres.\nEn kvittering for forsendelsen genereres når forsendelsen er sendt til tjenesteeier fra Altinn. Tjenesteeier oppdaterer kvitteringen etter mottak ved å gjøre kall til dedikert web service (se SaveReceipt).\nInnsendingsdata som sendes til tjenesteeier fra Altinn er i henhold til “genericbatch.2011.06.xsd\u0026rdquo; som ligger som et separat vedlegg til dette dokumentet. Denne versjonen av XSD er påkrevd for å bruke funksjonalitet for å overføre PDF av skjemasett.\nI forbindelse med definerte vedleggstyper i Altinn, har vi «genericbatch.2013.06.xsd». Den nye versjonen av xsd-en inneholder nye elementer som vedleggstypenavn (attachmentTypeName) og sjekksum, av typen SHA256, for vedlegget (checksum). I tillegg har det blitt innført mulighet for å definere en liste med metadata, med mulighet for å f.eks. oppgi fagsystemnavn. AttachmentTypeName, Checksum og MetaDataList er alle optional og ikke obligatorisk, så xsd-en er bakoverkompatibel med tjenesteeiere som benytter seg av “genericbatch.2011.06.xsd\u0026rdquo; og “genericbatch.2010.10.xsd\u0026rdquo;.\n“Genericbatch.2010.10.xsd\u0026rdquo; vil eksistere videre i en periode før den fases ut. Det er ingen obligatoriske forandringer mellom “genericbatch.2011.06.xsd\u0026rdquo; og “genericbatch.2010.10.xsd\u0026rdquo;, så tjenesteeiere som allerede bruker sistnevnte kan fortsette med det inntil den fases ut.\nTjenesteeier kan opprette flere grensesnitt for overføring av utfylte skjema, og hvert enkelt grensesnitt knyttes til 1 versjon av genericbatch.\n   Element Beskrivelse     DataBatch Rotnode elementet som holder hele overføringen. Alt innenfor dette elementet tilhører en batch   schemaVersion Versjonen av xmlskjemaet. Brukes for fremtidig versjonering av formatet   batchReference Den unike batch-sekvensen innenfor mottakssystemet. Denne blir brukt for å forsikre seg om at det er forventet batchforsendelse som blir mottatt av offentlig enhet   previousReference Forrige sekvensnummer innenfor mottakssystemet (receiverReference)   receiverReference Identifikatoren i Altinn på systemet som skal motta dataene, eksempelvis SLN. Brukes av mottaker for å skille på batcher til forskjellige system hos samme mottaker   timeStamp Tidspunkt for når batchen er generert   formTasksInBatch Antall skjemasett som er i denne databatche   formsInBatch Antall skjema som er i denne databatchen   DataBatch .DataUnits Inneholder en samling av alle skjemaer som sendes   DataBatch .DataUnits. DataUnit Element som inneholder det enkelte skjemaet i batchen. Dette kan enten være hovedskjema eller vedleggsskjema   reportee Identifikatoren til avgiver (organisasjonsnummer/fødselsnummer) som har sendt inn skjemaet   archiveReference Identifikatoren til skjemaet i AltInn-arkivet. Brukes for å koble videre saksgang av skjema hos mottaker med skjemaet i Altinn, ved evt. senere henvendelse til Altinn   archiveTimeStamp Tidspunkt for når skjemaet ble arkivert   DataBatch .DataUnits. DataUnit. MetadataList En samling av metadata informasjon i en liste. Kan f.eks. være fagsystemnavn dersom dette er bestilt aktivert på grensesnitt   DataBatch .DataUnits. DataUnit. Approvers En samling av godkjennere for det enkelte skjema, d.v.s. personer som har signert oppgavesettet   DataBatch .DataUnits. DataUnit. Approvers .Approver Et element som representerer én godkjenner   approverId Identifikatoren til godkjenneren av skjemaet, d.v.s. fødselsnummer   approverTimeStamp Tidspunktet for godkjennelsen av skjemaet   securityLevel Sikkerhetsnivå: notSensitive - Data er godkjent av bruker som er autentisert med sikkerhetsnivå 1, lessSensitive - Data er godkjent av bruker som er autentisert med sikkerhetsnivå 2, sensitive - Data er signert av bruker med sikkerhetsnivå 3, verySensitive - Data er signert av bruker med sikkerhetsnivå 4   DataBatch .DataUnits. DataUnit.FormTask Overordnet element for ferdig utfylt skjemasett   DataBatch .DataUnits. DataUnit.FormTask.ServiceCode Tjenestekode, f.eks. \u0026ldquo;PSA\u0026rdquo;   DataBatch .DataUnits. DataUnit.FormTask.ServiceEditionCode Tjenesteutgavekode, f.eks. \u0026ldquo;2009\u0026rdquo;   DataBatch .DataUnits. DataUnit.FormTask. SOEncryptedSymmetricKey.EncryptedKey Nøkkel som er AES-kryptert med tjenesteeiers sertifikat som benyttes for å dekryptere skjemainnhold   DataBatch .DataUnits. DataUnit.FormTask.SOEncryptedSymmetricKey.CertificateThumbprint Thumbprint av tjenesteeiers sertifikat som ble benyttet for å kryptere nøkkel. Vil unikt angi sertifikatet i de tilfeller hvor tjenesteeier har flere sertifikater registrert i Altinn   DataBatch .DataUnits. DataUnit.FormTask.CaseID Unik identifikator på eventuell samhandlingstjeneste skjemasettet er knyttet til   DataBatch .DataUnits. DataUnit.FormTask.Form Overordnet element for hoved –eller underskjema i et skjemasett   DataBatch .DataUnits. DataUnit.FormTask.Form.DataFormatId Id til skjema fra metadata kilde   DataBatch .DataUnits. DataUnit.FormTask.Form.DataFormatVersion Versjon til skjema fra metadata kilde   DataBatch .DataUnits. DataUnit.FormTask.Form.Reference Unik id per skjema, satt av altinn   DataBatch .DataUnits. DataUnit.FormTask.Form.ParentReference Referanse til hovedskjema. Settes kun i underskjema dersom underskjema forekommer.Tilsvarer verdi i DataBatch .DataUnits. DataUnit.FormTask.Form.Reference for hovedskjema   DataBatch .DataUnits. DataUnit.FormTask.Form.FormData Skjemadata i xml format   DataBatch .MetadataList Overodnet element for all metadata for en batch   DataBatch .Metadata Metadatainfo knyttet til batchen   DataBatch .Attachments Overordnet element for alle vedlegg for en batch   DataBatch .Attachments.Attachment Elementet inneholder ett binært vedlegg (Base64 kodet). Dette kan også være systemgenererte vedlegg, f.eks PDF av skjemasett   archiveReference Identifikatoren til skjemaet i AltInn-arkivet. Brukes til å knytte vedlegget til skjemaet   fileName Det originale filnavnet til vedlegget (gitt av den som sendte det)   InternalFileName Intern filnavnreferanse som brukes hvis vedleggene skal pakkes i en ekstern fil (ZIP). Denne er unik fordi man ikke kan ha like filnavn i et ZIP-arkiv. Filnavnet består av arkivreferansenummer + en Guid   AttachmentType Angir type attachment. Dette gjelder også for systemgenererte vedlegg som PDF (attachmentType=formtask_pdf). Mulige verdier for denne : not_Applicable, BASE64, binary_octet_stream, formtask_pdf, image_gif, text_html, image_bmp, image_jpeg, application_vnd_ms_excel, application_vnd_ms_powerpoint, application_msword, MTOM, application_None, application_vnd_oasis_opendocument_presentation, application_vnd_oasis_opendocument_spreadsheet, application_vnd_oasis_opendocument_text, application_pdf, text_plain, application_postscript, text_richtext, application_rtf, text_rtf, text_xml, application_zip   IsEncrypted Angir om tjenesten er kryptert eller ikke   Checksum Viser sjekksum av filvedlegget, som er generert av Altinn. Sjekksummen er generert av SHA256-algoritmen   attachmenttypename Angir vedleggets vedleggstypenavn. Dette er i henhold til vedleggstypen som er knyttet til tjenesten, f.eks. Lønnslipp, Årsoppgave    Preutfylling Preutfyllingsdata fra tjenesteeier vil ofte bestå av store mengder data. Batch-grensesnittet skal i så fall benyttes. Batch-grensesnittet kan også benyttes av tjenesteeiere som ikke ønsker å benytte web service-grensesnittet. Alternative protokoller som benyttes i Altinn-løsningen i dag er FTP eller SFTP. Tjeneste for oppgavesettet må være definert i tjenesteutviklingsløsningen og migrert til sluttbrukerløsningen før en tjenesteeier kan sende inn preutfyllingsdata for tjenesten via dette grensesnittet.\nVed bruk av FTP/SFTP mottar Altinn fil fra tjenesteeier. Alternativt kan Altinn kan hente hos tjenesteeier vha. de samme protokollene hvis tjenesteeier ikke ønsker å etablere egen FTP server (gjelder kun tjenesteeiere som ikke skal motta meldingsbekreftelser fra Altinn, se avsnitt 10.4.2 Meldingsbekreftelse fra Altinn til tjenesteeier). Opplysninger om FTP adresse, pålogging og frekvens må avtales før valgt kommunikasjonsmåte kan aktiviseres. Dersom Altinn skal hente hos tjenesteeier må tjenesteeier se til at angitt FTP område til enhver tid er tilgjengelig for Altinn.\nEn kvittering for forsendelsen, samt kvitteringer for de enkelte skjemaene i forsendelsen, genereres når forsendelsen er ferdig prosessert i Altinn. Tjenesteeier kan hente ut kvitteringene basert på ExternalShipmentReference/SendersReference som ble oppgitt i preutfyllingsformatet.\nPreutfyllingsdata som sendes til Altinn fra tjenesteeier eller hentes fra Altinn må være i henhold til Prefill-elementet i serviceinitiation.2010.10.xsd. Xsd’en ligger som et separat vedlegg til dette dokumentet. Dette formatet benyttes også for abonnement. Tjenesteeier kan med andre ord sende både preutfyllingsdata og abonnementsdata i samme XML.\nTabellen under beskriver elementer og attributter relevante for preutfylling:\n   Element Beskrivelse     ServiceOwner Rotnode elementet som holder hele overføringen   ServiceOwnerName Forkortelsen for tjenesteeieres navn (XXX-XXX, for eksempel ABC-123), der tre første tegn representerer tjenesteeier og tre siste tegn representerer en avdeling innad hos tjenesteeier. Kun de tre første tegnene er obligatoriske dersom det ikke finnes flere systemer/avdelinger innenfor samme tjenesteeier   ServiceOwner.Prefill Prefill-element og tilhørende under-elementer benyttes av tjenesteeier for å angi preutfyllingsdata til Altinn   SequenceNo Sekvensnummer for preutfyllings-forsendelsen.   ExternalShipmentReference Unik forsendelsesreferanse som settes av tjenesteeier for å identifisere forsendelsen   ServiceOwner.Prefill.Reportee Reportee-element og tilhørende under-elementer angir avgiver og tilhørende preutfyllingsdata   Id Unik identifikator for avgiver, fødselsnummer eller organisasjonsnummer   ServiceOwner.Prefill.Reportee.FormTask FormTask-element og tilhørende under-elementer benyttes av tjenesteeier for å angi preutfyllingsdata for et skjemasett   ExternalServiceCode Angir den tjenestekoden som preutfyllingen gjelder for   ExternalServiceEditionCode Angir tjenesteutgavekoden som preutfyllingen gjelder for   ValidFrom Angir dato for når preutfyllingsdataene er gyldige fra (yyyy-MM-dd)   ValidTo Angir dato for når preutfyllingsdataene er gyldige til (yyyy-MM-dd)   IdentityFieldHashCode Generert hash basert på alle identifiserende felter for det preutfylte oppgavesettet. Identifiserende felter benyttes for å skille mellom flere preutfyllingssett for samme oppgavesett og avgiver   SendersReference Referanse på skjemasett som settes av tjenesteeier, bør være unikt   ReceiversReference Unik referanse som settes av Altinn.   ServiceOwner.Prefill.Reportee.FormTask.IdentifyingFields Overordnet element for identifiserende felter. IdentifyingFields-elementet kan inneholde identifiserende felter som sammen unikt vil identifisere et preutfyllingssett for en avgiver og et skjemasett.   IdentifyingField Verdi for identifiserende felt, kan være slike felter per skjemasett   ServiceOwner.Prefill.Reportee.FormTask.Attachments Inneholder Attachment-elementer for eventuelle binære vedlegg for skjemasettet   ServiceOwner.Prefill.Reportee.FormTask.Attachment Attachment-elementet inneholder data for binære vedlegg   AttachmentName Dette navnet er det som vises for vedlegget i portalen.   FileName Navn på filen for det binære vedlegget.   AttachmentData Data for det binære vedlegget (Base64 kodet)   SendersReference Referanse for vedlegget som settes av tjenesteeier, bør være unikt   Encrypted Flagg som sier om vedlegget er kryptert (true/false)   ServiceOwner.Prefill.Reportee.FormTask.Form Dette elementet inneholder metadata og preutfyllingsdata for et skjema i det preutfylte oppgavesettet   DataFormatId Id til skjema fra metadata kilde   DataFormatVersion Versjon til skjema fra metadata kilde   SendersReference Identifikator for skjemaet i det preutfylte oppgavesettet som settes av tjenesteeier, bør være unikt   ParentReference Referanse til hovedskjema (SendersReference), dersom dette er et underskjema   FormData Dataene for skjemaet. Må legges i en CDATA blokk.   ServiceOwner.Prefill.Reportee.Field Field-elementet og tilhørende under-elementer benyttes av tjenesteeier for å angi preutfyllingsdata på feltnivå (felt-verdi)   Id Unik identifikator for feltet i tjeneste som skal preutfylles, typisk navn på et felt i et skjema   ValidFrom Angir dato for når preutfyllingsdataene er gyldige fra (yyyy-MM-dd)   ValidTo Angir dato for når preutfyllingsdataene er gyldige til (yyyy-MM-dd)   Index Indeks for feltet. Benyttes dersom man skal preutfylle flere felter med samme id   Value Preutfyllingsverdien    Abonnement Abonnementsdata fra tjenesteeier vil ofte bestå av store mengder data. Batch-grensesnittet skal i så fall benyttes. Batch-grensesnittet kan også benyttes av tjenesteeiere som ikke ønsker å benytte web service-grensesnittet. Alternative protokoller som benyttes i Altinn-løsningen i dag er FTP og SFTP. Tjeneste for skjemasettet må være definert i tjenesteutviklingsløsningen og migrert til sluttbrukerløsningen før en tjenesteeier kan sende inn abonnementsdata for tjenesten via dette grensesnittet.\nVed bruk av FTP/SFTP mottar Altinn fil fra tjenesteeier. Alternativt kan Altinn kan hente hos tjenesteeier vha. de samme protokollene hvis tjenesteeier ikke ønsker å etablere egen FTP server (gjelder kun tjenesteeiere som ikke skal motta meldingsbekreftelser fra Altinn, se avsnitt 10.4.2 Meldingsbekreftelse fra Altinn til tjenesteeier). Opplysninger om FTP adresse, pålogging og frekvens må avtales før valgt kommunikasjonsmåte kan aktiviseres. Dersom Altinn skal hente hos tjenesteeier må tjenesteeier se til at angitt FTP område til enhver tid er tilgjengelig for Altinn.\nEn kvittering for forsendelsen, samt kvitteringer for de enkelte skjemaene i forsendelsen, genereres når forsendelsen er ferdig prosessert i Altinn. Tjenesteeier kan hente ut kvitteringene basert på ExternalShipmentReference/SendersReference som ble oppgitt i abonnementsformatet.\nAbonnementsdata som sendes til Altinn fra tjenesteeier eller hentes fra Altinn må være i henhold til Subscription-elementet i serviceinitiation.2010.10.xsd. Xsd’en ligger som et separat vedlegg til dette dokumentet. Dette formatet benyttes også for preutfylling. Tjenesteeier kan med andre ord sende både preutfyllingsdata og abonnementsdata i samme XML.\n   Element Beskrivelse     ServiceOwner Rot-element   ServiceOwnerName Forkortelsen for tjenesteeieres navn (XXX-XXX, for eksempel ABC-123), der tre første tegn representerer tjenesteeier og tre siste tegn representerer en avdeling innad hos tjenesteeier. Kun de tre første tegnene er obligatoriske dersom det ikke finnes flere systemer/avdelinger innenfor samme tjenesteeier   ServiceOwner.Subscription Subscription-element og tilhørende under-elementer benyttes av tjenesteeier for å angi abonnementsdata til Altinn   SequenceNo Sekvensnummer for abonnements-forsendelsen   ExternalShipmentReference Unik referanse som settes av tjenesteeier for å identifisere forsendelsen   ServiceOwner.Subscription.Reportee Reportee-element og tilhørende under-elementer angir avgiver og hva det skal abonneres på   Id Unik identifikator for abonnent, fødselsnummer eller organisasjonsnummer   ServiceOwner.Subscription.Reportee.FormTask FormTask-element og tilhørende under-elementer benyttes av tjenesteeier for å angi abonnementsdata for et skjemasett   ExternalServiceCode Angir den tjenestekoden som abonnementet gjelder for   ExternalServiceEditionCode Angir tjenesteutgavekoden som abonnementet gjelder for   StartDate Dato for når abonnementet skal aktiveres (yyyy-MM-dd)   ExpirationDate Dato for når abonnementet opphører (yyyy-MM-dd)   NextScheduledDate Dato for når abonnementet skal instansieres neste gang (yyyy-MM-dd). Første dato settes av tjenesteeier, neste kalkuleres av runtiejobb i Altinn (basert på periodetype)   NextDueDate Dato for når abonnementet/innsendingstjenesten må være fylt ut av bruker i portal/sluttbrukersystem (yyyy-MM-dd). Første dato settes av tjenesteeier, neste kalkuleres av runtiejobb i Altinn (basert på periodetype)   VisibleDate Dato for når skjemasett som abonnementet gjelder skal være synlig i portal/for sluttbrukersystemer (yyyy-MM-dd)   PeriodType Angir hvor ofte et abonnement skal instansieres. Mulige periodetyper: Annual - årlig, Semiannual - to ganger årlig, Quarterly - tre ganger årlig, Tertiary - fire ganger årlig, Bimonthly - annenhver måned, Monthly - hver måned, Fortnightly - hver 15. dag, Weekly - hver uke, Daily - hver dag, Once- abonnementet instansieres én gang   CaseId Unik identifikator for samhandlingstjenesten   ServiceOwner.Subscription.Reportee.FormTask.IdentifyingFields Overordnet element for identifiserende felter. IdentifyingFields-elementet kan inneholde identifiserende felter som sammen unikt identifisere et allerede innsendt preutfylte skjemasette som abonnenten skal benytte.   IdentifyingField Verdi for identifiserende felt, kan være slike felter per abonnement og må være de(t) samme som finnes på et allerede innsendt preutfylt skjemasett for abonnenten    Melding Meldinger som skal vises til bruker i portal/sluttbrukersystem sendes fra tjenesteeier til Altinn. Åpne– og lesebekreftelser sendes tilbake fra Altinn til tjenesteeier når bekreftelse\u0026reg; er mottatt fra portal/sluttbrukersystem.\nMelding fra tjenesteeier til Altinn Meldingsdata som består av store mengder data skal benytte batch-grensesnittet. Batch-grensesnittet kan også benyttes av tjenesteeiere som ikke ønsker å benytte web service-grensesnittet. Alternative protokoller som benyttes i Altinn-løsningen i dag er FTP og SFTP. En meldingstjeneste må være definert i tjenesteutviklingsløsningen og migrert til sluttbrukerløsningen før en tjenesteeier kan sende inn meldingsdata for tjenesten via dette grensesnittet.\nVed bruk av FTP/SFTP mottar Altinn fil fra tjenesteeier. Opplysninger om FTP adresse, pålogging og frekvens må avtales før valgt kommunikasjonsmåte kan aktiviseres. Dersom Altinn skal hente hos tjenesteeier må tjenesteeier se til at angitt FTP område til enhver tid er tilgjengelig for Altinn.\nDet finnes to batch grensesnitt for registrering av meldinger:\n Correspondence Format skreddersydd for siste versjon av Altinn. Oppdateres etter hvert som Altinn videreutvikles. Skal benyttes av alle nye tjenesteeiere. Altut Format fra tidligere versjon av Altinn, tilbys kun for bakoverkompatibilitet for eksisterende tjenesteeiere, og det vil ikke bli oppdatert etter hvert som Altinn videreutvikles. Det inneholder elementer som ikke lenger er i bruk i Altinn, og enkelte elementer har fått ny funksjonalitet som betyr at eksisterende grensesnitt må endres. Siste versjon av Altinn har funksjonalitet som ikke støttes av Altut formatet.  En kvittering for forsendelsen genereres når forsendelsen er ferdig prosessert i Altinn. Tjenesteeier kan hente ut kvitteringene basert på ShipmentReference/SendersReference som ble oppgitt i meldingsformatet.\nCorrespondence format Meldinger som sendes til Altinn fra tjenesteeier i form av eb batch må være i henhold til schemas.altinn.no.services.intermediary.correspondence.2016.02.xsd. Xsd’en ligger som et separat vedlegg til dette dokumentet. Det er verd å merke seg at namespace til schema er \u0026ldquo;http://schemas.altinn.no/services/intermediary/correspondence/2009/10\u0026quot;.\nThe data in a batch file should have the same strukture, the same element names and functionality as the latest InsertCorrespondence service, but the batch file will be validated with the XSD.\nTabellen under beskriver elementer og attributter relevante for meldinger:\n   Element Beskrivelse     Correspondences Rot-element   SystemUserCode Forkortelsen for tjenesteeieres navn (XXX-XXX, for eksempel ABC-123), der tre første tegn representerer tjenesteeier og tre siste tegn representerer en avdeling innad hos tjenesteeier. Kun de tre første tegnene er obligatoriske dersom det ikke finnes flere systemer/avdelinger innenfor samme tjenesteeier   ShipmentReference Unik referanse som settes av tjenesteeier for å identifisere forsendelsen   SequenceNo Sekvensnummer for forsendelsen. Dersom dette settes må sekvensnummeret være ett nummer høyere enn det forrige sekvensnummeret på meldingsforsendelse for denne tjenesteeieren. I motsatt fall vil forsendelsen avvises i Altinn   Correspondences.Correspondence Correspondence-elementet inneholder ett Correspondence-element per melding   ServiceCode Angir den tjenestekoden som meldingen gjelder for   ServiceEdition Angir tjenesteutgavekoden som meldingen gjelder for   SendersReference Referanse for meldingen i forsendelsen som settes av tjenesteeier, bør være unikt   Reportee Unik identifikator (fødselsnummer eller organisasjonsnummer) for avgiver som skal motta meldingen   Correspondences.Correspondence.Content Inneholder meldingsinnhold, samt eventuelle vedlegg, for meldingen   LanguageCode Språk for melding: 1033 - English, 1044 - Bokmål, 2068 - Nynorsk   MessageTitle Meldingstittel, som vil vises i portal   MessageSummary En kort beskrivelse av meldingen   MessageBody Meldingstekst   Correspondences.Correspondence.Content.Attachments Dette elementet inneholder eventuelle vedlegg tilmeldingen   Correspondences.Correspondence.Content.Attachments.BinaryAttachments Dette elementet inneholder eventuelle binære vedlegg for meldingen   Correspondences.Correspondence.Content.Attachments.BinaryAttachments.BinaryAttachment Inneholder detaljer for ett binært vedlegg   FileName Filnavn for det binære vedlegget   Name Dette er navnet på vedlegget, som det vises i portalen   Encrypted Sier om vedlegget er kryptert. \u0026ldquo;Y\u0026rdquo; (ja) eller ikke \u0026ldquo;N\u0026rdquo; (nei)   Data Data for det binære vedlegget (Base64 kodet)   SendersReference Referanse for vedlegget. Settes av tjenesteeier, bør være unikt   FunctionType Hvilken funksjonstype vedlegget utgjør: Invoice - Faktura, Unspecified - Uspesifisert   AttachmentType Angir MIME-typen for vedlegget (obligatorisk): application_none - ingen MIME type angitt, application_pdf - PDF format, application_msword, Microsoft Word, application_vnd_ms_excel - Microsoft Excel, application_vns_oasis_opendocument_text - Open document (type Text), application_vnd_oasis_opendocument_presentation - Open docment (type Presentation), application_vnd_oasis_opendocument_spreadsheet - Open docment (type Spreadsheet),application_rtf - Rich text format type, application_vnd_ms_powerpoint - Microsoft PowerPoint, application_postscript, application_zip - Type zip, text_plain, text_html, text_xml, text_rtf - Rich text format type, text_richtext - Rich text, binary_octet_stream- Binary format, not_Applicable   DestinationType Hvor vedlegget er tilgjengelig: Default/ShowToAll – tilgjengelig i portal og for sluttbrukersystem, PortalOnly – kun tilgjengelig fra portal, EndUserSystemOnly – kun tilgjengelig fra sluttbrukersystem   Correspondences.Correspondence.Content.Attachments.XmlAttachments Dette elementet inneholder eventuelle XML-vedlegg for meldingen   Correspondences.Correspondence.Content.Attachments.XmlAttachments.XmlAttachment Inneholder detaljer for ett XML-vedlegg. Benyttes hvis det er definert at i TUL at melding skal vises i Infopath skjema. Infopath-skjema må være utviklet som en del av Meldingstjenesten i TUL   SendersReference Referanse for vedlegget. Settes av tjenesteeier, bør være unikt   DataFormatId Id til skjema fra metadata kilde   DataFormatVersion Versjon til skjema fra metadata kilde   FormDataXml Innhold i xml vedlegget. Må legges i en CDATA blokk   Correspondences.Correspondence Forts.   VisibleDateTime Angir når meldingen skal være synlig for sluttbruker i portalen (yyyy-MM-dd)   AllowSystemDeleteDate Angir om meldingen skal kunne slettes av sletterutiner i Altinn.   DueDateTime Angir frist for å bekrefte melding (dersom meldingen må bekreftes)   ArchiveReference Referanse til element i arkiv (dersom en slik referanses finnes)   Correspondences.Correspondence.ReplyOptions Overordnet element som inneholder svaralternativer for meldingen   Correspondences.Correspondence.ReplyOptions.ReplyOption Element som inneholder ett svaralternativ   Correspondences.Correspondence.ReplyOptions.ReplyOption.Service Elementet benyttes hvis man kan svare vha. en tjeneste. Inneholder tjenesteinformasjon   ServiceCode Angir den tjenestekoden for svarmeldingen   ServiceEdition Angir tjenesteutgavekoden for svarmeldingen   Correspondences.Correspondence.ReplyOptions.ReplyOption.ArchiveReference Elementet benyttes hvis man kan svare vha. et arkivert element. Referanse til element i arkiv   Correspondences.Correspondence.ReplyOptions.ReplyOption.Url Elementet benyttes hvis man kan svare vha. en svarlenke   LinkText Tekst til lenken i meldingen   LinkUrl URL til lenke i meldingen   Correspondences.Correspondence Forts.   Correspondences.Correspondence.Notifications Inneholder eventuelle varslinger for meldingen   Correspondences.Correspondence.Notifications.Notification Inneholder data for ett varsel for meldingen   FromAddress Denne adressen vil stå som avsender for varselet. Hvis ikke satt vil avsenderadresse satt i malen benyttes   ShipmentDateTime Tidspunkt for når varselet skal sendes   LanguageCode Angir språk for varselet: 1033 - English, 1044 - Bokmål, 2068 - Nynorsk   NotificationType I hvilken sammenheng varselet skal sendes: Correspondence - Varsel for mottatt melding, Prefill - Varsel for mottatt preutfylt tjeneste/skjema, Pin - Varsel for mottatt pinkode, General - Generell varsel   Correspondences.Correspondence.Notifications.Notification.TextTokens Liste av tekster som skal erstatte maltekster i varselmal   Correspondences.Correspondence.Notifications.Notification.TextTokens.TextToken Element som inneholder tekster som skal erstatte maltekster i meldingsmaler   TokenNum Ikke i bruk, kan utelates   TokenValue Tekst som skal ersatte maltekst. Substitusajonen gjøres i samme rekkefølge som parameterene er angitt. Varselmal må bestilles og lages på forhånd   Correspondences.Correspondence.Notifications.Notification.ReceiverEndPoints Angir mottakere av varselet   Correspondences.Correspondence.Notifications.Notification.ReceiverEndPoints.ReceiverEndPoint Angir en mottaker for et varsel   TransportType Angir om varsel skal sendes som epost eller SMS. Lovlige verdier er: SMS - Altinn vil sende varsel som SMS hvis det er oppgitt et mobilnummer i ReceiverAddress eller avgiver har registrert et eller flere mobilnummer. Hvis avgiver er en organisasjon vil det sendes varsel til alle registrerte mobilnummer.Email - Fungerer på samme måte som SMS, men med epost som kanal.Both - Altinn vil sende varsel både som epost og SMS om mulig. Hvis avgiver kun har registrert en epostadresse vil det sendes varsel som epost. Tilsvarende for mobilnummer. En organisasjon vil få varsel på alle registrerte varslingsadresser.SMSPreferred - Altinn vil sende varsel som SMS hvis avgiver har registrert et mobilnummer. Hvis avgiver ikke har registrert dette vil det isteden bli sendt varsel som epost. Forutsatt at det finnes en registrert epostadresse. En organisasjon vil bli sendt varsel på alle varslingsadresser av riktig type.EmailPreferred - Fungerer på samme måte som SMSPreferred, men med epost som kanal.   ReceiverAddress Mobilnummeret eller epostadressen til mottaker av varsel. Dette må passe med TransportType Email eller SMS. Feltet er valgfritt og hvis feltet er tomt vil Altinn forsøke identifisere riktige mottakere basert på avgiver og TransportType. Feltet må være tomt for TransportType Both, SMSPreferred og EmailPreferred.   Correspondences.Correspondence Forts.   AllowForwarding Angir om meldingen skal kunne videresendes av bruker i portalen   CaseId Unik identifikator for samhandlingstjenesten    Altut format Meldinger som sendes til Altinn fra tjenesteeier må være i henhold til AltUt.xsd. Dette ble etablert i en tidligere versjon av Altinn.\n   Element Beskrivelse     GovOrgan Rotnode i AltUt xml   name Kode som unikt representerer kildesystem, f.eks. \u0026ldquo;ABC-123\u0026rdquo;. Format: XXX_YYYY. De tre første bokstavene er påkrevd og representerer tjenesteeier. De etter understreken representerer avdeling/system, og er valgfritt hvis det ikke finnes flere avdelinger/systemer innenfor samme tjenesteeier   GovOrgan.AltUt Overordnet element   sequenceno Sekvensnummer for forsendelsen. Dersom dette settes må sekvensnummeret være ett nummer høyere enn det forrige sekvensnummeret på meldingsforsendelse for denne tjenesteeieren. I motsatt fall vil forsendelsen avvises i Altinn   GovOrgan.AltUt .Message Starten på en Altut melding   shortName Angir hvilken tjeneste meldingen tilhører. Format: xxxxxx_yyyyyy, hvor \u0026ldquo;xxxxxx\u0026rdquo; angir tjenestekode, mens \u0026ldquo;yyyyyy\u0026rdquo; angir tjenesteutgavekode. Denne sendes tilbake i kvitteringsbatchen til den offentlige enheten. OBS! Dette feltet ble tidligere brukt som meldingsidentifikator, f.eks. \u0026ldquo;Skatteoppgjør 2007\u0026rdquo;. Dette er erstattet med tjenesteinformasjon som nevnt ovenfor   messageReference En unik meldingsreferanse innenfor et shortname. Må angis for at tjenesteeier skal kunne motta meldingsbekreftelser   viewFormat Mappes ikke til AltinnII   allowDelete Mappes ikke til AltinnII   persistent Mappes ikke til AltinnII   GovOrgan.AltUt .Message.RoleReqRead Informasjonen hentes fra TUL   GovOrgan.AltUt .Message.RoleReqDeleteConfirm Informasjonen hentes fra TUL i AltinnII   GovOrgan.AltUt .Message.RoleReqGovAgency Informasjonen hentes fra TUL i AltinnII   GovOrgan.AltUt .Message.Sender Mappes ikke til AltinnII   GovOrgan.AltUt .Message.Sender.Name Mappes ikke til AltinnII   GovOrgan.AltUt .Message.Participant Overordnet element   id Organisasjonsnummer/fødselsnummer til den som skal ha meldingen   GovOrgan.AltUt .Message.Participant.VisibleDate Dato for når meldingen skal være synlig for brukeren i portalen   GovOrgan.AltUt .Message.Participant.DueDate Fristen for når melding må bekreftes   GovOrgan.AltUt .Message.Participant.AltinnArchive Arkivreferansen til et Altinn skjema. Denne kan for eksempel brukes hvis AltUt meldingen er et svar/oppfølging til et skjema som tidligere er sendt inn i Altinn   GovOrgan.AltUt .Message.Participant.LoginSecurityLevel Mappes ikke til AltinnII. Hentes fra pålogging   GovOrgan.AltUt .Message.Participant.AllowUserDeleteDate Mappes ikke til AltinnII   GovOrgan.AltUt .Message.Participant.AllowSystemDeleteDate Datoen for når Altinn kan slette meldingen (sanering)   GovOrgan.AltUt .Message.Participant.VisibleInClientReport Mappes ikke til AltinnII   GovOrgan.AltUt .Message.Participant.RequireConfirmation Mappes ikke til AltinnII. Dette settes i TUL   GovOrgan.AltUt .Message.Participant.Year Året meldingen skal assosieres med Altinn. Benyttes bl.a. for selvangivelsen   GovOrgan.AltUt .Message.Participant.MunicipalNumber Kommunenummeret meldingen skal assosieres med Altinn. Benyttes bl.a. for selvangivelsen   GovOrgan.AltUt .Message.Participant.Content Selv innholdet til AltUt meldingen. Må legges i en CDATA blokk   languageCode Språkkoden til meldingen: 1033 - English, 1044 - Bokmål, 2068 - Nynorsk   GovOrgan.AltUt .Message.Participant.Content.MessageHeader Settes i TUL   GovOrgan.AltUt .Message.Participant.Content.MessageSubject Mappes ikke til AltinnII   GovOrgan.AltUt .Message.Participant.Content.MessageSummery Sammendrag av meldingen(e). Denne vises i sammendragfeltet for meldingen i AltUt vinduet   GovOrgan.AltUt .Message.Participant.Content.Invoice Mappes ikke til AltinnII   GovOrgan.AltUt .Message.Participant.Content.Attachments Inneholder evt. vedlegg   GovOrgan.AltUt .Message.Participant.Content.Attachments.Attachment Inneholder informasjon om ett vedlegg, Base64 kodet   id En unik id innenfor gruppen med vedlegg. Den lagres ikke men må eksistere for bakover kompatibilitet   functionType Felt for å spesifisere hvilken funksjon et vedlegg har: Invoice - Faktura, Unspecified - Uspesifisert   type MIME typen til vedlegget: application_none - ingen MIME type angitt, application_pdf - PDF format, application_msword - Microsoft Word, application_vnd_ms_excel - Microsoft Excel, application_vns_oasis_opendocument_text - Open document (type Text), application_vnd_oasis_opendocument_presentation - Open docment (type Presentation), application_vnd_oasis_opendocument_spreadsheet - Open docment (type Spreadsheet), application_rtf - Rich text format type, application_vnd_ms_powerpoint - Microsoft PowerPoint, application_postscript, application_zip -Type zip, text_plain, text_html, text_xml, text_rtf - Rich text format type, text_richtext - Rich text, binary_octet_stream - Binary format, not_Applicable   filename Filnavnet til vedlegget   name Navnet til vedlegget. Denne brukes som navn på linken til filvedlegget i portalen   GovOrgan.AltUt .Message.Participant.Content.HTML Hvis innholdet skal presenters i HTML legges det her.   GovOrgan.AltUt .Message.NotificationMessages Inneholder evt. varsler   NotificationTypeName En unik streng som definerer en referanse til predefinerte varslingstekster.   GovOrgan.AltUt .Message.NotificationMessages.NotificationMessage Inneholder informasjon om ett varsel   participantId Fødselsnummer til mottaker av varselet   GovOrgan.AltUt .Message.NotificationMessages.NotificationMessage.SMSPhoneNumbers Telefonnummeret det skal sendes varsler til, kan være flere   GovOrgan.AltUt .Message.NotificationMessages.NotificationMessage.SMSPhoneNumbers.SMSPhoneNumber Telefonnummeret til den som skal ha varsling på SMS   GovOrgan.AltUt .Message.NotificationMessages.NotificationMessage.EmailAddresses Adressen det skal sendes mailvarsler til, kan være flere   GovOrgan.AltUt .Message.NotificationMessages.NotificationMessage. EmailAddresses.EmailAddress Emailadressen til den som skal ha varsling   GovOrgan.AltUt .Message.ReplyMessages Overordnet element for svaralternativer   GovOrgan.AltUt .Message.ReplyMessages.ReplyMessage Element for ett svaralternativ   GovOrgan.AltUt .Message.ReplyMessages.ReplyMessage.Form Mappes ikke til AltinnII. Vil ikke kunne referere til AltinnI-tjenester fra AltinnII. I stedet for skjemanummer brukes ServiceCode   formNumber Mappes ikke til AltinnII   version Mappes ikke til AltinnII   GovOrgan.AltUt .Message.ReplyMessages.ReplyMessage.Form.ServiceCode Tjenestekoden og tjenesteutgavekoden til en service som AltinnII tilbyr, underscore mellom de to verdiene. Format: Tjenestekode_tjenesteutgavekode   GovOrgan.AltUt .Message.ReplyMessages.ReplyMessage.Form.ServiceURL Mappes ikke til AltinnII. Angis i stedet som lenke i meldingen (body)   GovOrgan.AltUt .Message.ReplyMessages.ReplyMessage.Form.ArchiveReference Arkivreferansen til et skjema. Den offentlige enheten kan be brukeren om at et skjema fra arkiv skal kopieres, aktiviseres og sendes inn på nytt med tilleggsinformasjon.NB: Betinger at det er mulig å aktivisere skjemaet fra sluttbrukerens meldingsboks    Meldingsbekreftelse fra Altinn til tjenesteeier Correspondence For at tjenesteeiere skal kunne vite om meldinger er lest og evt. bekreftet av mottaker leverer Altinn regelmessig informasjon om dette til de enkelte tjenesteeiere. Tjenesteeiere som benytter nytt grensesnitt for innsending av meldinger til Altinn, vil også få bekreftelser tilsendt på nytt format. Informasjonen leveres i batcher på FTP/SFTP protokoll, og xml formatet på filen er i henhold til schemas.altinn.no.services.intermediary.correspondence.confirmations.2009.10.xml.\nTjenesteeier må etablere FTP/SFTP område som Altinn kan aksessere vha. avtalt brukernavn og passord.\nBekreftelsene som sendes til tjenesteeier fra Altinn er i henhold til correspondence.confirmations.2010.10.xsd formatet. Xsd’en ligger som et separat vedlegg til dette dokumentet.\nNår data sendes ut fra Altinn lages en kvittering i Altinn som forteller at data er sendt til tjenesteeier.\nTabellen under beskriver elementer og attributter relevante for meldingsbekreftelser:\n   Element Beskrivelse     CorrespondenceConfirmations Rot element for rapport over leste og bekreftede meldinger i Altinn siden forrige batch   SequenceNo Sekvensnummer for denne forsendelsen (valgfritt). Hvis satt må verdien være ett nummer høyere enn sekvensnummeret ved forrige forsendelse. Hvis ikke verdien er økt med 1vil forsendelsen feile   PreviousSequenceNo Sekvensnummer for forrige forsendelse (valgfritt, men må med hvis SequenceNo er satt)   SystemUserCode Kode som representerer en system bruker, f.eks. SKD-PSA, hvor de tre første tegnene angir tjenesteeier (påkrevd) og de etter understreken representerer avdeling/system hos tjenesteeieren (valgfritt)   ShipmentDateTime Dato som forteller når meldingsbekreftelsen ble sendt   CountConfirmationsInShipment Antall bekreftelser i forsendelsen   CorrespondenceConfirmations.Confirmation En lest/godkjent melding   ServiceCode Angir den unike tjenestekoden., f.eks. \u0026ldquo;PSA\u0026rdquo;   ServiceEdition Tjenesteutgavekode, f.eks. \u0026ldquo;2009\u0026rdquo; (valgfritt). Hvis det ikke settes vil siste utgave benyttes   Reportee Fødselsnummer til bruker som har bekreftet melding   CorrespondenceReference Tjenesteeiers referanse på meldingen   CorrespondenceConfirmations.Confirmation.Read Bekreftelse på at melding er åpnet/lest   ReadDateTime Tidspunkt for når melding ble bekreftet lest   CorrespondenceConfirmations.Confirmation.Confirmed Beskjed om at bruker har bekreftet meldingen   UserSSN Brukerens fødselsnummer   ConfirmedDateTime Bekreftings tidspunkt   ConfirmedRoleList Brukerens rolleliste på godkjennings tidspunktet   AuthenticationMethod Brukerens login nivå ved godkjenning    AltUtConfirmationBatch For at tjenesteeiere skal kunne vite om meldinger er lest og evt. bekreftet av mottaker leverer Altinn regelmessig informasjon om dette til de enkelte tjenesteeiere. Tjenesteeiere som benytter gammelt grensesnitt for innsending av meldinger til Altinn (AltUt.xsd), vil også få bekreftelser tilsendt på gammelt format. Informasjonen leveres i batcher på FTP/SFTP protokoll, og xml formatet på filen er i henhold til AltUtConfirmationBatch.xsd\nTjenesteeier må etablere FTP/SFTP område som Altinn kan aksessere vha. avtalt brukernavn og passord.\nNår data sendes ut fra Altinn lages en kvittering i Altinn som forteller at data er sendt til tjenesteeier.\n   Element Beskrivelse     AltUtConfirmationBatch Rot note. Rapport over leste og bekreftede meldinger i Altinn siden forrige batch   batchReference Referansenummeret til batchen   previousReference Referansenummeret til den forrige batchen som ble sendt   receiverReference Tjenesteeiersystemet som mottar bekreftelsene   timestamp Tidsstempelet når batchen ble generert   confirmationsInBatch Antall confirmations som finnes i batchen   AltUtConfirmationBatch.AltUtConfirmations Samling av lest/bekreftet elementer   AltUtConfirmationBatch.AltUtConfirmations.Confirmation En lest/godkjent Altut melding   participantId Organisasjonsnummer/fødselsnummer til den som meldingen ble sendt inn til   shortName Som for AltUt meldingen benyttes dette feltet til tjenestekode og tjenesteutgavekode. Format xxxxxx_yyyyyy, hvor \u0026ldquo;xxxxxx\u0026rdquo; angir tjenestekode, mens \u0026ldquo;yyyyyy\u0026rdquo; angir tjenesteutgavekode.   messageReference Kan benyttes til å unikt referere en melding innenfor samme shortName   AltUtConfirmationBatch.AltUtConfirmations.Confirmation.Read Informasjon om lesing av den aktuelle Altut meldingen   AltUtConfirmationBatch.AltUtConfirmations.Confirmation.Read .ReadDateTime Tidsstempel for når meldingen er lest   AltUtConfirmationBatch.AltUtConfirmations.Confirmation.Confirmed Informasjon om bekrefting av den aktuelle Altut meldingen   participantId Fødselsnummeret til første personen som har bekreftet meldingen   AltUtConfirmationBatch.AltUtConfirmations.Confirmation.Confirmed ConfirmedDateTime Tidsstempel for når meldingen er bekreftet   AltUtConfirmationBatch.AltUtConfirmations.Confirmation.Confirmed ConfirmationRoleList Space-separert liste med rollene som brukeren som bekreftet meldingen har   AltUtConfirmationBatch.AltUtConfirmations.Confirmation.Confirmed.LoginMethod Innloggingsnivået som en brukeren hadde da vedkommende bekreftet meldingen. Denne kan være: 1 - Innlogging med bare passord, 2 - Innlogging med pinkode, 4 - Innlogging med PKI.   AltUtConfirmationBatch.Signature Element som inneholder signaturinformasjon. Elementet er ikke obligatorisk, og er ikke i bruk    CorrespondenceUsageData Tjenesteeier vil kunne definere i tjenesteutviklingen av en meldingstjeneste å motta en rapport over ikke leste, leste og bekreftede meldinger etter et gitt antall dager etter at meldingen er sendt ut. Informasjonen kan konfigureres til å overleveres via FTP/SFTP ved enten at Altinn leverer til tjenesteeier, eller at tjenesteeier henter fra Altinn.\nFølgende er et eksempel på formatet informasjonen vil bli levert på:\nCorrespondenceUsageData\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot; ?\u0026gt; \u0026lt;CorrespondenceUsageData xmlns=\u0026quot;http://schemas.altinn.no/services/intermediary/correspondence/usagedata/2009/10\u0026quot;\u0026gt; \u0026lt;ShipmentDateTime\u0026gt;2010-08-26T08:02:11\u0026lt;/ShipmentDateTime\u0026gt; \u0026lt;CorrespondenceUsage\u0026gt; \u0026lt;Service\u0026gt; \u0026lt;ServiceOwnerCode\u0026gt;SERVICEOWNER\u0026lt;/ServiceOwnerCode\u0026gt; \u0026lt;ServiceName\u0026gt;Service Name\u0026lt;/ServiceName\u0026gt; \u0026lt;ServiceEdition\u0026gt; \u0026lt;ServiceEditionID\u0026gt;xxxx\u0026lt;/ServiceEditionID\u0026gt; \u0026lt;ServiceEditionVersion\u0026gt; \u0026lt;ServiceEditionVersionName\u0026gt;ABC\u0026lt;/ServiceEditionVersionName\u0026gt; \u0026lt;Correspondence\u0026gt; \u0026lt;ReporteeID\u0026gt;[SSN/ORG]\u0026lt;/ReporteeID\u0026gt; \u0026lt;CorrespondenceStatusType\u0026gt;[Status]\u0026lt;/CorrespondenceStatusType\u0026gt; \u0026lt;SentCorrespondenceDatetime\u0026gt;[Time]\u0026lt;/SentCorrespondenceDatetime\u0026gt; \u0026lt;/Correspondence\u0026gt; \u0026lt;Correspondence\u0026gt;...\u0026lt;/Correspondence\u0026gt; \u0026lt;/ServiceEditionVersion\u0026gt; \u0026lt;/ServiceEdition\u0026gt; \u0026lt;/Service\u0026gt; \u0026lt;Service\u0026gt;...\u0026lt;/Service\u0026gt; \u0026lt;/CorrespondenceUsage\u0026gt; \u0026lt;/CorrespondenceUsageData\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/diverse/",
	"title": "Diverse",
	"tags": [],
	"description": "Mindre brukt funksjonalitet i TUL.",
	"content": "Mindre brukt funksjonalitet i TUL.\n\rAdministrators oppgaver\r\rOppgaver for administrator fra den enkelte tjenesteeier.\n\rBegrepsliste\r\rListe over mye brukte begreper i tjenesteutviklingsløsningen.\n\rEkstern stil\r\rFunksjonalitet som gjør det mulig å presentere Altinn-tjenester uten at Altinns visuelle profil er synlig.\n\rEnhetstest\r\rDet å verifisere enkeltdeler av en tjenesteutgave hver for seg.\n\rSlette tjeneste og utgave\r\rDet er mulig å slette en tjeneste eller en tjenesteutgave fra TUL dersom du skulle ønske det.\n\rSøk på tjenesteutgaver for gitt overføringsmetode\r\rSøkeside hvor tjenesteeier kan søke på utgaver som benytter gitt overføringsmetode ved innsending\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/mappere/testing/",
	"title": "Testing",
	"tags": [],
	"description": "Beskrivelse av hvordan man tester mappere",
	"content": " Testene til en mapper skrives i prosjektet Tests. Her ligger filen UnitTests.cs som skal inneholde alle filene.\nProsjektstrukturen er som vist under.\n Testene vil benyttes av Altinn for verifikasjon og kodegjennomgang før installasjon, så det er viktig at testene er dekkende for funksjonaliteten. De må også kunne kjøres i TUL slik at Altinn får verifisert at de kjører feilfritt.\nKoble seg til en mapper Når man skal skrive tester mot en mapper må disse ha en tjenestereferanse til den mapperen som skal testes, og derfor må referansen settes opp.\nEksempel på adressen som skal benyttes er vist her:\nhttp://localhost:8888/mapperservices/ttd/\nPort 8888 og mapperservices må benyttes på grunn av sikkerhetsrelaterte restriksjoner i Tjenesteutviklingsløsningen (TUL).\nSkrive tester En enhetstest er en test som kun tester en liten del eller en metode i applikasjonen. Man bør skrive så mange tester som mulig, for å sørge for at feil blir fanget opp. Når man har tester som feiler er det enkelt å se hvor i koden feilen ligger.\nMan bør teste:\n Input data. Test formatet på data som kommer fra brukere og at det er brukt riktige verdier (tall, string, spesialtegn, dato) Output data. Svar som blir sendt til brukeren, bør sjekkes. Null-verdier. Svar som blir sendt til brukeren bør ikke inneholde null verdier. Dette kan få koden til å feile. Dette gjelder spesielt for noder med undernoder i datastrukturen da utviklere ofte glemmer å håndtere nullverdier på slike steder. Sjekk om mapperen fanger opp \u0026ldquo;Exceptions\u0026rdquo;, og at brukerne får en forståelig og oversiktlig feilmelding. Man skal skrive positive og negative tester  Se også hvordan tester skrives i .NET-rammeverket.\nPositive tester Når man lager positive tester gir man systemet korrekte data å teste med. Dette tester såkalt «happy-path» der systemet får forventede data og da skal returnere gyldige svar.\nEksempel på en positiv test:\nusing System; using Microsoft.VisualStudio.TestTools.UnitTesting; using Tests.SvcRef; using System.Text; namespace Tests { [TestClass] public class UnitTests { [TestMethod] public void TestGetMidlertidigKjoeretillatelse() { using (var proxy = new MapperClient()) { var forespoersel = new TillatelseForespoersel() { Fnr = \u0026quot;16127378945\u0026quot; }; var respons = proxy.GetMidlertidigKjoeretillatelse(forespoersel); if (respons != null) { Assert.AreEqual(\u0026quot;Harry Hole\u0026quot;, respons.Tillatelse.Navn); Assert.IsTrue(respons.Tillatelse.Klasser.Contains(\u0026quot;A1 \u0026quot;)); Assert.IsTrue(respons.Tillatelse.Klasser.Contains(\u0026quot;A \u0026quot;)); Assert.IsTrue(respons.Tillatelse.Klasser.Contains(\u0026quot;B \u0026quot;)); Assert.AreEqual(\u0026quot;Veiveien 5\u0026quot;, respons.Tillatelse.Adresse.Lokasjon); Assert.AreEqual(9020, respons.Tillatelse.Adresse.Postnummer); Assert.AreEqual(\u0026quot;Tromsdalen\u0026quot;, respons.Tillatelse.Adresse.Poststed); Assert.AreEqual(\u0026quot;Pb 202, 9000, Tromsø\u0026quot;, respons.Tillatelse.Adresse.AnnenAddresse); } else throw new AssertFailedException(\u0026quot;Ingen midlertidig \u0026quot; + \u0026quot;kjøretillatelse funnet. Sjekk om ekstern web service er \u0026quot; + \u0026quot;tilgjengelig, eller om søknad er innlevert og godkjent\u0026quot;); } } } }  Negative tester Negative tester lages for å avsløre hvordan mapper opptrer når feil/ulovlige input parametre er anvendt. Eksempler på slike parametere kan være tekst i datofelt, negative årstall og null-verdier.\nEksempel på en negativ test der det blir sendt inn feil fødselsnummer og det forventes at tjenesten setter statusen til noe annet enn OK:\nusing System; using Microsoft.VisualStudio.TestTools.UnitTesting; using Tests.SvcRef; using System.Text; using System.Reflection; using System.IO; namespace Tests { [TestClass] public class UnitTests { [TestMethod] public void TestFeilmeldingGetMidlertidigKjoeretillatelse() { using (var proxy = new MapperClient()) { var assemblyPath = Assembly.GetExecutingAssembly().Location; var relativePath = @\u0026quot;..\\..\\..\\..\\Tests\\ElenaFjaer.xml\u0026quot;; var combinedPath = Path.Combine(assemblyPath, relativePath); var xml = new StreamReader(combinedPath).ReadToEnd(); var forespoersel = new TillatelseForespoersel() { Fnr = \u0026quot;12126101528\u0026quot;, AltinnMapperContext = Convert.ToBase64String( System.Text.Encoding.UTF8.GetBytes(xml)) }; var respons = proxy.GetMidlertidigKjoeretillatelse(forespoersel); if (respons != null) { Assert.AreEqual(\u0026quot;Systemet finner ikke kjøretillatelse for \u0026quot; + \u0026quot;oppgitt fødselsnummer.\u0026quot;, respons.Status); } else throw new AssertFailedException(\u0026quot;Ingen midlertidig for \u0026quot; + \u0026quot;kjøretillatelse funnet. Sjekk om ekstern web service er for \u0026quot; + \u0026quot;tilgjengelig, eller om søknad er innlevert og godkjent\u0026quot;); } } } }  Dokumentere testene Det er viktig at testene blir dokumentert. Når testen er nøye dokumentert og det er beskrevet hva som forventes av testen. Blir det enklere å vedlikeholde testene og mapperene senere.\nLegg til kommentarer på hver av testmetodene. Kommentaren bør beskrive:\n Hvilken mappertjeneste testmetoden tester. Beskrive hva mappertjenesten gjør. Beskriv hva som er hensikten med testmetoden.  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/",
	"title": "Vedlegg",
	"tags": [],
	"description": "Skjemautvikling i InfoPath, utforming av brukergrensesnitt og brukervennlige tjenester, bruk av Visual Studio, web service oppslag, regelmotor, mapperutvikling, etc.",
	"content": "Diverse vedlegg til tjenesteutviklingen i TUL. Merk at skjermdumper fra SBL vil være illustrasjoner og vil ikke nødvendigvis alltid være oppdaterte.\n\rA: Skjemautvikling i InfoPath\r\rDette vedlegget tar for seg hvordan man stegvis utvikler et Altinn-skjema / innsendingstjeneste i InfoPath.\n\rB: Utforming av brukergrensesnitt for skjema\r\rDette vedlegget tar for seg retningslinjer/forslag for utforming av sider av skjema i InfoPath.\n\rC: Utforming av brukervennlige tjenester\r\rDette vedlegget tar for seg hvordan man kan lage brukervennlige tjenester.\n\rD: InfoPath kodestandard\r\rDette vedlegget inneholder en oversikt over kodestandard for InfoPath.\n\rE: InfoPath navnestandard\r\rDette vedlegget inneholder en oversikt over navnestandard for felter, grupper, skript og skjema i InfoPath.\n\rF: Bruk av Visual Studio\r\rHjelp til å komme i gange med utvikling av mappere i Visual Studio.\n\rG: Web Service-oppslag fra InfoPath\r\rDette vedlegget inneholder en beskrivelse av hvordan man kan gjøre web service-oppslag fra et InfoPath-skjema.\n\rMappere\r\rImplementasjonsguide for mapperutvikling i Altinn.\n\rRegelmotor\r\rUtviklingshåndbok for Altinn regelmotor. Regelmotoren er et alternativ til å utvikle logikk i C# og InfoPath.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/datakonsument/",
	"title": "For datakonsument",
	"tags": [],
	"description": "Utføres av datakonsument",
	"content": "Personer eller organisasjoner kan gjennom Altinn gi samtykke til at data om dem kan deles mellom datakilder (f.eks Skatteetaten) og datakonsumenter (offentlige og private enheter).\nSiden selve flyten av data går utenom Altinn så må datakonsumenten avtale kommunikasjonsform med datakilden. Datakilden og datakonsumenten står fritt til å velge kommunikasjonsform og det kan for eksempel være via webservice, REST eller FTP.\nInformasjon til datakonsumenter om betjeningskonsept og varsling av drifthendelser i Altinn finnes på Altinnett\n\rKomme i gang\r\rForutsetninger for å ta i bruk samtykketjenesten\n\rBe om samtykke\r\rHvordan sende sluttbruker til samtykkesiden i Altinn\n\rHente token\r\rHvordan veksle inn autorisasjonskode i token\n\rLogge bruk av samtykke\r\rHvordan logge at man har hentet data som sluttbruker har samtykket til deling av\n\rTest av samtykke\r\rTest av samtykketjeneste i Altinn sitt testmiljø\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/grensesnitt/",
	"title": "Grensesnitt",
	"tags": [],
	"description": "Webservice operasjoner med beskrivelse",
	"content": " I parameter listene under finnes en del parametere som er formater med italic. Disse er interne for Altinn og vil bli fjernet eller endret til noe som gir mer mening for eksternt som en del av en forbedring på alle kontrakter jfr. forbedringspunkt Prod100006098 – Disse er heller ikke kommentert\nReporteeArchiveExternal    Tjenesteoperasjon Kort beskrivelse     GetArchivedFormTask Henter alle skjema og vedlegg for et arkivert skjemasett.   GetAttachmentData Henter de binære vedleggene til et arkivert element   GetArchivedLookup Henter en arkivert innsynstjeneste    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nReporteeArchiveExternal.GetArchivedFormTaskV2 Denne operasjonen henter alle skjema og vedlegg for et skjemasett arkivert i Altinn. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reporteeElementId Unik identifikator for et element i arkivet.   languageID Språk id. Benytt verdien 0 (uspesifisert) da skjemasett vil hentes med språket den ble arkivert med. Språk id: 1033-English, 1044-Bokmål, 1083-Samisk, 2068- Nynorsk   Returverdi Beskrivelse   archivedFormTask Et arkiv objekt (ArchivedFormTaskBEV2) som inneholder alle detaljer for skjemasettet.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ArchivedFormTaskBEV2    ReporteeElementID Unik identifikator for skjemasettet i Altinn   LastChanged Dato og tidspunkt for når skjemasettet sist var endret (yyyy-MM-ddThh:mm:ss)   ReporteeID Unik identifikator for avgiver i Altinn som skjemasettet tilhører   ArchivedDateTime Dato og tidspunkt for når skjemasettet ble arkivert (yyyy-MM-ddThh:mm:ss)   ServiceOwner Tjenesteeier som tilbyr tjenesten som skjemasettet tilhører   InvoiceInformation Betalingsinformasjon tilknyttet skjemasettet, desimaltall   ArchivedFormList Liste med arkiv-objekter (ett objekt av typen ArchivedFormBE per skjema i skjemasettet), som inneholder detaljer for skjemaene i skjemasettet   ArchivedAttachmentList Liste med Arkiv-objekter (ett objekt av typen ArchivedAttachmentBE per vedlegg i skjemasettet), som inneholder detaljer for vedleggene i skjemasettet.   ArchivedFormTaskSigningStepList Liste med arkiv-objekter av typen ArchivedFormTaskSigningStepBE, som inneholder signeringsinformasjon for hvert signeringssteg for skjemasettet.   ExternalServiceCode Tjenestekode (for eksempel ”PSA”) for tjenesten som skjemasettet tilhører.   ExternalServiceEditionCode Tjenesteutgavekode (for eksempel ”2009”) for tjenesten som skjemasettet tilhører.   ssnOrgNumber Inneholder enten fødselsnummer eller organisasjonsnummer tilhørende ReporteeID   PasswordEncryptedSymmetricKey Passordkryptert symmetrisk nøkkel for å dekryptere eventuell sensitive felter.   SOEncryptedSymmetricdKey Samme symmetriske nøkkel som over, men kryptert med tjenesteeiers sertifikat. Tjenesteeier kan da bruke privat nøkkel til å dekryptere denne nøkkelen.   ArchiveTaskList Liste med arkiv-objekter av typen ArchiveTaskBEV2.   ArchivedFormBE    FormID Unik identifikator for skjemaet i Altinn   FormName Navn på skjemaet   FormDataXML XML som inneholder selve skjemadataene.   ParentReference Referanse til hovedskjemaets FormID (dersom skjemaet er et underskjema).   FormPresentationFieldValue Presentasjonsfeltverdi for skjemaet.   PaymentInformationE2B E2B-formatert kvittering for skjemaet.   PaymentInformationHTML HTML-formatert kvittering for skjemaet.   DataFormatId Den unike id for et spesifikt skjema, dette er typisk gitt av metadata leverandør   DataFormatVersion Versjonen av en gitt DataFormatID, som sammen med den gir et unikt skjema (spesifikasjon)   FormPaymentInfo Betalingsinformasjon vedlagt skjemaet.   FormSummary Beskrivelse av skjemaet   ArchivedAttachmentBEV2    AttachmentID Unik identifikator for vedlegget i Altinn.   AttachmentName Navn på vedlegget.   FileName Navn på fil for vedlegg. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   AttachmentData Innholdet/dataene i vedlegget.   CreatedDateTime Dato og tidspunkt for når vedlegget ble opprettet (yyyy-MM-ddThh:mm:ss).   SendersReference Referanse satt av sluttbruker- eller etatssystem som har sendt vedlegget.   IsEncrypted Boolsk verdi som sier om vedlegget er kryptert   ArchivedFormTaskSigningStepBEV2    SignatureID Unik identifikator for signaturen i Altinn.   SignedByUser Unik Altinn id på bruker som har gjennomført signering   SignedByUserSSN Fødselsnummer til bruker som har gjennomført signering   SignedByUserName Navn på bruker som har gjennomført signering.   CreatedDateTime Dato og tidspunkt for når signeringen ble gjennomført (yyyy-MM-ddThh:mm:ss).   Signature Signaturen, binært formatert.   SignatureText Tekst for signatur.   AuthenticationLevelID Unik Altinn id for autentiseringnivået for signaturen   AuthenticationMethod Unik Altinn id for autentiseringsmetoden til brukeren ved signering.   CertificateIssuedByName Hvem som har utsted det eventuelle sertifikat som ble brukt ved signering   CertificateIssuedForName Hvem dette sertifikatet har blitt utstedt til.   CertificateValidFrom Når er sertifikatet gyldig fra   CertificateValidTo Når er sertifikatet gyldig til   SignedAttachmentList Liste med AttachmentIDs for vedlegg som er signert med denne signaturen.   SignedFromList Liste med FormIDs for skjemaer som er signert med denne signaturen.   IsSigningAllRequired Angir om signering er utført for alle elementer i skjemasett: YES – signering på alle skjema. NO – valgfri signering på skjema. SET_PER_FORM – valg for signering satt på skjema nivå   ProcessStepID Den unike identifikatoren for steget signaturen gjelder for   ArchiveTaskBEV2    EndUserSystemID Sluttbrukersystem identifikator.   LastChanged Angir dato for sist endring.   NumberOfSignaturesAdded Antall signaturer som er lagt til.   ProcessStepID_FK Intern ID for prosessteg.   SentComplete Angir om element ble sent som komplett fra sluttbrukersystem.   TaskID Identifikator for elementet, samme som ReporteeElementID   UserDefinedNumberOfSignaturesRequired Antall signaturer krevd for et evt brukerstyrt signeringssteg.   WorkflowReference Intern ID forarbeidsflyt.    ReporteeArchiveExternal.GetAttachmentDataV2 Denne operasjonen benyttes for å hente ut data for ett gitt vedlegg. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     AttachmentID Unik identifikator for et vedlegg   Returverdi Beskrivelse   Attachment Binær vedlegg objekt av typen AttachmentBEV2 som inneholder alle detaljer for et vedlegg.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     AttachmentBEV2    AttachmentID Unik identifikator for vedlegget i Altinn   AttachmentName Navn på vedlegget.   FileName Navn på fil for vedlegg. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   AttachmentData Innholdet/dataene i vedlegget.   CreatedDateTime Dato og tidspunkt for når vedlegget ble opprettet (yyyy-MM-ddThh:mm:ss).   SendersReference Referanse satt av sluttbruker- eller etatssystem som har sendt vedlegget.   IsEncrypted Boolsk verdi som sier om vedlegget er kryptert.   AttachmentTypeID MIME-typen for vedlegget   AttachmentFunctionTypeID Angir funksjon for vedlegget: Invoice, Unspecified   ReporteeElementID Referanse til element (skjemasett eller melding) som vedlegget tilhører. Unik id i Altinn.   CreatedByUserID Bruker id for bruker som har lagt ved vedlegget.   IsAddedAfterFormFillin Angir om vedlegget er lagt til etter utfylling.   IsAssociatedToFormSet Angir om vedlegget er knyttet til skjemasett eller ikke – brukes for å slette vedlegg som er lastet opp men ikke lagt til skjemasettet.   DestinationType     ReporteeArchiveExternal.GetAttachmentDataStreamed Denne operasjonen benyttes for å hente ut data for ett gitt vedlegg i det tilfelle vedlegg er større en 30MB. GetAttachmentData må kalles for å få detaljene om den binær filen returnerte av denne metoden.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     AttachmentID Unik identifikator for et vedlegg.   Returverdi Beskrivelse   Attachment Stream som inneholder et binær vedlegg.    ReporteeArchiveExternal.GetArchivedLookup Denne operasjonen benyttes for å hente en arkivert innsynstjeneste.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Brukes fødselsnummer. Til bruk både til autentisering og evt. signering   userPassword Brukes passord. Til bruk både til autentisering og evt. signering   userPinCode Pinkode. Til bruk både til autentisering og evt. signering   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementId Referanse til innsynstjenesten som skal hentes.   languageID Språkkode for det språket innsynstjenesten skal hentes med. Språk id:1033-English, 1044-Bokmål, 2068-Nynorsk   Returverdi Beskrivelse   archivedLookup Objekt av typen ArchivedLookupExternal som inneholder informasjon om innsynstjenesten    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ArchivedLookupExternal    AllowForwarding Angir om innsynstjenesten kan videresendes i portalen.   ArchiveDateTime Angir dato for når innsynstjenesten ble arkivert.   LanguageTypeId Språkkoden.   LookupID Unike identifikatoren for denne innsynstjenesten, samme som ReporteeElementId.   LookupPDF Entitet av typen AttachementBEV2 som inneholder data og metadata om PDF.   AttachmentBEV2    AttachmentID Ikke satt.   AttachmentName Navn på vedlegget.   FileName Navn på fil for vedlegg. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   AttachmentData Innholdet/dataene i vedlegget.   CreatedDateTime Ikke satt.   SendersReference Ikke brukt i dette tilfellet.   IsEncrypted Ikke brukt i dette tilfellet.   AttachmentTypeID MIMEMIME-typen for vedlegget, en enum men vil alltid i dette tilfellet være satt til: application_pdf-PDF   AttachmentFunctionTypeID Angir funksjon for vedlegget, satt til Unspecified   ReporteeElementID Referanse til den arkiverte innsynstjenesten. Unik id i Altinn.   CreatedByUserID Ikke satt.   IsAddedAfterFormFillin Ikke brukt i dette tilfellet.   IsAssociatedToFormSet Ikke brukt i dette tilfellet.   DestinationType Enum, men ikke brukt i dette tilfellet.    IntermediaryInbound    Tjenesteoperasjon Kort beskrivelse     GetAltinnSubmissionStatus Kalkulerer og returnerer estimert tid for når en oppgave sendt til Altinn vil være ferdig prosessert   SubmitFormTask Lar et sluttbrukersystem sende et skjemasett til Altinn   CompleteAndSign Lar et sluttbrukersystem komplettere og signere et skjemasett i Altinn    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nIntermediaryInbound.GetAltinnSubmissionStatus Denne operasjonen kalkulerer og returnerer estimert tid for når en oppgave sendt til Altinn vil være ferdig prosessert.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     N/A    Returverdi Beskrivelse   Minutes Estimert tid (antall minutter) for når man kan forvente at en innsendingstjeneste sendt til Altinn vil være ferdig prosessert.    IntermediaryInbound.SubmitFormTask Denne operasjonen lar et sluttbrukersystem sende et skjemasett til Altinn. Operasjonen returnerer en kvittering til sluttbrukersystemet som inneholder status for innsendingen.\nVed innsending fra sluttbrukersystem tar Altinn en kopi av innsendt skjemasett og prosesserer denne kopien på liknende måte som ved innsending i SBL (portalen). Denne kopien kan modifiseres slik at felter legges til eller skrives over. Deretter utføres en sammenlikning av den originalt innsendte XML-en med sikte på å detektere feil i innsendingen, for eksempel at kalkylene stemmer overens med det som forsøkes sendt inn.\nDenne sammenlikningsprosessen er dokumentert i mer detalj i kapittel 10, Vedlegg B - Regler for sammenlikning av skjemasett.\nTabellen under beskriver datakontrakten for operasjonen.\n   userSSN Brukers fødselsnummer. Til bruk både til autentisering og evt. signering     userPassword Brukers passord. Til bruk både til autentisering og evt. signering   userPinCode Pinkode. Til bruk både til autentisering og evt. signering   authMethod Autentiseringsmetode. Til bruk både til autentisering og evt. signering   formTaskShipment Objekt av typen FormTaskShipmentBE som inneholder detaljer om forsendelsen   Returverdi Beskrivelse   Receipt Objekt av typen ReceiptExternalBE med kvitteringsinformasjon for forsendelsen.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     FormTaskShipmentBE    Reportee Unik identifikator for avgiver for denne forsendelsen, fødselsnummer eller organisasjonsnummer   ExternalShipmentReference Referanse for forsendelsen. Referansen settes av sluttbrukersystem og kan dermed benyttes ved senere forespørsler mot Altinn for denne forsendelsen, bør derfor være unik.   FormTasks Ett objekt av typen FormTask med detaljer for skjemasettet i denne forsendelsen   Attachments Liste med vedleggs-objekter av typen Attachment som inneholder detaljer for vedlegg i forsendelsen   Signatures Objekt av typen Signature som inneholder signeringsdetaljer for forsendelsen   IsUserDelegationLocked Setter hvorvidt et brukerstyrt signeringssteg skal være låst (true) eller ikke (false). Kun betydning hvis avsender har tilstand som ”Trusted partner”.   UserDefinedNumberOfSignaturesRequired Setter hvor mange brukerstyrte signeringer det må være i et eventuelt brukerstyrt signeringssteg for dette skjemasettet   EncryptedKey Objekt av typen EncryptedKeyBE som inneholder informasjon brukt for dekryptering av sensitive felter.   CaseID ID til samhandlingstjenesten som innsendingen eventuelt skal knyttes til   FormTask    ServiceCode Unik tjenestekode for tjenesten.   ServiceEdition Tjenesteutgavekode.   Forms Liste med Form-objekter (ett for hvert skjema i oppgavesettet)   Attachment    Name Navn på vedlegg (som det vises i portal).   EndUserSystemReference Referanse for vedlegg (settes av sluttbrukersystem, bør være unik).   ParentReference Angir EndUserSystemReference for skjemaet som vedlegget hører til.   FileName Filnavn for vedlegget. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   Encrypted Angir om vedlegget er kryptert.   AttachementData Selve dataene for vedlegget, byte-array.   AttachmentTypeName Angir type vedlegg for tjenester som har vedleggsvalidering og –regler   Signature    EndUserSystemReference Referanse til signaturen som ble utført i sluttbrukersystem (satt av sluttbrukersystem, bør være unik).   EndUserSystemUserId Identifikator for bruker som var logget på sluttbrukersystemet og gjennomførte signeringen.   EndUserSystemLoginDateTime Dato og tidspunkt for når bruker logget inn i sluttbrukersystem (yyyy-MM-ddThh:mm:ss).   EndUserSystemSignatureDateTime Dato og tidspunkt for når signeringen i sluttbrukersystemet ble gjort (yyyy-MM-ddThh:mm:ss).   EndUserSystemVersion Versjonsnummer for sluttbrukersystemet.   EndUserSystemSignatureLogId Unik id for logginnslag for signeringen.   Form    Completed Dette flagget indikerer at et skjema er sendt inn komplett fra et sluttbrukersystem.   DataFormatId Den unike id for et spesifikt skjema, dette er typisk gitt av metadata leverandør   DataFormatVersion Versjonen av en gitt DataFormatID, som sammen med den gir et unikt skjema (spesifikasjon)   EndUserSystemReference Referanse for skjema, satt av sluttbrukersystemet. Kan benyttes til å spørre etter kvittering på skjema ved å benytte ReferenceTypeName.SendersReference.   FormData Skjemadata. Må legges i en CDATA blokk.   DelegatedUserBE    SSN Fødselsnummer for bruker som skal signere.   Name Og etternavn til bruker som skal signere   NumberOfSignaturesAllowed Antall signaturer denne kan gjøre   EncryptedKeyBE    ReporteeSymmetricKey Objekt av typen ReporteeSymmetricKeyBE.   ServiceOwnerSymmetricKeys Objekt av typen ServiceOwnerSymmetricKeyBE.   **ReporteeSymmetricKeyBE **    Key Symmetrisk nøkkel brukt til å kryptere sensitive felter, kryptert med brukers passord.   ReporteeNumber Fødselsnummer eller organisasjonsnummer for avgiver   ServiceOwnerSymmetricKeyBE    ServiceOwnerCode Tjenesteeierkode   CertificateId Unik identifikator for sertifikatet brukt til å kryptere den symmetriske nøkkelen angitt i parameteren Key under.   Key Symmetrisk nøkkel brukt til å kryptere sensitive felter, kryptert med tjenesteeiers sertifikat.   ReceiptExternalBE    ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel for senere uthenting av status/kvittering.   ReceiptText Tekst i kvitteringen.   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken,   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss).   ReceiptTypeName    ReceiptTypeName Angir hva kvittering gjelder. Mulige verdier: FormTask - Skjemasett, Correspondence - Melding, PINCODE - PIN-koder, Subscription - Abonnement, Outbound - Forsendelse sendt fra Altinn, PreFill - Preutfyllingsdata, RegisterDLS - DLS registerdata, RegisterDSF - DSF registerdata, RegisterER - ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp - Innsynstjeneste   ReceiptStatusCode Status for forsendelse som kvitteringen gjelder: OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering).   References Liste med ReferenceBE-objekter for kvitteringen.   SubReceipts Liste med tilhørende ReceiptExternalBE-objekter (dersom denne kvitteringen er en hovedkvittering)   ReferenceBE    ReferenceValue Selve referansen (verdien) satt på kvitteringen. Typisk forsendelsesreferansen   ReferenceTypeName Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Benyttes ikke, SendersReference - Referanse satt av avsender for del av en forsendelse, ParentReferenc - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen, OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres, ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, ArchiveReference - Arkivreferanse    IntermediaryInbound.UpdateFormData Denne operasjonen lar et sluttbrukersystem oppdatere et skjemasett i Altinn. Operasjonen returnerer en kvittering til sluttbrukersystemet som inneholder status for oppdateringen.\nTabellen under beskriver datakontrakten for operasjonen.\n   Property Beskrivelse     userSSN Brukers fødselsnummer. Til bruk både til autentisering og evt. signering   userPassword Brukers passord. Til bruk både til autentisering og evt. signering   userPinCode Pinkode. Til bruk både til autentisering og evt. signering   authMethod Autentiseringsmetode. Til bruk både til autentisering og evt. signering   formTaskUpdate Objekt av typen FormTaskUpdate som inneholder detaljer om oppdateringen   Returverdi Beskrivelse   Receipt Objekt av typen ReceiptExternalBE med kvitteringsinformasjon for oppdateringen.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     FormTaskUpdate    ExternalShipmentReference Referanse for forsendelsen. Referansen settes av sluttbrukersystem og kan dermed benyttes ved senere forespørsler mot Altinn for denne forsendelsen, bør derfor være unik.   FormUpdateList Objekt av typen FormUpdateList, som er en liste med objekter av typen FormUpdate   reporteeElementId Unik identifikator for skjemasettet i Altinn som skal oppdateres   FormUpdate    DataFormatId Den unike id for et spesifikt skjema, dette er typisk gitt av metadata leverandør. Denne må alltid oppgis, uavhengig av om det er et nytt skjema eller en oppdatering.   DataFormatVersion Versjonen av en gitt DataFormatID, som sammen med den gir et unikt skjema (spesifikasjon). Denne må alltid oppgis, uavhengig av om det er et nytt skjema eller en oppdatering.   FormData Skjemadata. Må legges i en CDATA blokk.   FormId Unik identifikator for skjemaet som skal oppdateres. Om FormId er satt til 0 vil et nytt skjema bli laget.   SendersReference Referanse satt av sluttbruker. Denne må være unik for hvert enkelt skjema i skjemasettet.    IntermediaryInbound.CompleteAndSign Denne operasjonen lar et sluttbrukersystem komplettere og signere en skjemainnsending i Altinn. Operasjonen returnerer en kvittering til sluttbrukersystemet som inneholder status for innsendingen.\nOperasjonen er ment å kunne brukes for å sluttføre skjemainstanser som ligger til utfylling. For eksempel kan dette være instanser som er opprettet i portal eller vha SubmitFormTask, og som har fått lagt til ytterligere vedlegg vha SubmitAttachmentStreamed.\n   Input Beskrivelse     userSSN Brukers fødselsnummer. Til bruk både til autentisering og evt. signering   userPassword Brukers passord. Til bruk både til autentisering og evt. signering   userPinCode Pinkode. Til bruk både til autentisering og evt. signering   authMethod Autentiseringsmetode. Til bruk både til autentisering og evt. signering   reporteeElementId Arbeidsflytreferanse som skal kompletteres og signeres.   signatures Liste med objekter av typen Signature som brukes til signering.   languageId Språkkode:1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   Returverdi Beskrivelse   Receipt Objekt av typen ReceiptExternalBE med kvitteringsinformasjon for forsendelsen.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ReceiptSearchExternalBE    ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel ved senere oppdatering av kvittering   References Liste med ReferenceBE-objekter for kvitteringen   ReceiptExternalBE    ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel ved senere oppdatering av kvittering.   ReceiptText Tekst i kvitteringen, kan inneholde variasjoner over følgende kvitteringssvar: Deleted, Warning - \u0026ldquo;soft error\u0026rdquo;, Error - \u0026ldquo;feil\u0026rdquo;, Successfully Instantiated, Schema Validation OK, Not A Valid Signature, Form Validation Failed, SchemaValidationError\u0026gt;\u0026ldquo;feil\u0026rdquo;, Shipment Already Exists : ::External Shipment Reference : \u0026ldquo;extshipref\u0026rdquo;, Service Edition Code is Missing ::External Shipment Reference : \u0026ldquo;extshipref\u0026rdquo;, SignAndSend Completed Successfully, Not A Valid Service :; ServiceCode : \u0026ldquo;service code\u0026rdquo;, ServiceEdition : \u0026ldquo;serviceedition\u0026rdquo; ; ::External Shipment Reference : \u0026ldquo;external shipment ref\u0026rdquo;, Not A Valid DataFormatId Or DataFormatVersion; DataFormatVersion : \u0026ldquo;dataformatversion\u0026rdquo;, DataFormatId : \u0026ldquo;dataformatid\u0026rdquo; ; ::External Shipment Reference : \u0026ldquo;external shipment ref\u0026rdquo;, Argument Null Exception - Intermediary Inbound :ExternalShipmentReference, Invalid reportee, Your request suffered from a non-functional error, There exist no valid services with given service code/ edition code :\u0026ldquo;service code\u0026rdquo;/\u0026ldquo;serviceedition\u0026rdquo; ::External Shipment Reference : \u0026ldquo;external shipment ref\u0026rdquo;   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptTypeName Angir hva kvittering gjelder. Mulige verdier: FormTask - Skjemasett, Correspondence - Melding, PINCODE - PIN-koder, Subscription - Abonnement, Outbound - Forsendelse sendt fra Altinn, PreFill - Preutfyllingsdata, RegisterDLS - DLS registerdata, RegisterDSF - DSF registerdata, RegisterER - ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp - Innsynstjeneste   ReceiptTemplate Status for forsendelse som kvitteringen gjelder: OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering)   References Liste med ReferenceBE-objekter for kvitteringen   SubReceipts Liste med tilhørende Receipt-objekter (dersom denne kvitteringen er en hovedkvittering)   ReferenceBE    ReferenceValue Selve referansen (verdien) satt på kvitteringen. Typisk forsendelsesreferansen   ReferenceTypeName Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Benyttes ikke, SendersReference - referanse satt av avsender for del av en forsendelse, ParentReference - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen (Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen), OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse (Settes av Altinn og kan ikke endres), ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, ArchiveReference - Arkivreferanse   Signature    EndUserSystemReference Referanse til signaturen som ble utført i sluttbrukersystem (satt av sluttbrukersystem, bør være unik)   EndUserSystemUserId Identifikator for bruker som var logget på sluttbrukersystemet og gjennomførte signeringen.   EndUserSystemLoginDateTime Dato og tidspunkt for når bruker logget inn i sluttbrukersystem (yyyy-MM-ddThh:mm:ss).   EndUserSystemSignatureDateTime Dato og tidspunkt for når signeringen i sluttbrukersystemet ble gjort (yyyy-MM-ddThh:mm:ss).   EndUserSystemVersion Versjonsnummer for sluttbrukersystemet.   EndUserSystemSignatureLogId Unik id for logginnslag for signeringen.    IntermediaryInboundStreamed    Tjenesteoperasjon Kort beskrivelse     SubmitAttachmentStreamed Legger til vedlegg til eksisterende innsendinger som står til utfylling i Altinn.    Operasjonen brukes til å legge til vedlegg for en aktiv skjemainstans opprettet i portal eller vha webservice (SubmitFormTask).\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     StreamedAttachmentBasicBE, StreamedAttachmentECBE eller StreamedAttachmentExternalBE Objekt med vedleggsinformasjon, datastrøm for vedleggsdata og autentiseringsinformasjon (mindre forskjeller etter hvilket endepunkt man benytter).   Returverdi Beskrivelse   ReceiptExternalStreamedBE Objekt av typen ReceiptExternalStreamedBE som inneholder detaljer for kvitteringen.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ReceiptExternalStreamedBE    ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel ved senere oppdatering av kvittering   ReceiptText Tekst i kvitteringen, kan inneholde variasjoner over følgende kvitteringssvar: Deleted   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptTypeName Angir hva kvittering gjelder. Mulige verdier: Angir hva kvittering gjelder. Mulige verdier: FormTask - Skjemasett, Correspondence - Melding, PINCODE - PIN-koder, Subscription - Abonnement, Outbound - Forsendelse sendt fra Altinn, PreFill - Preutfyllingsdata, RegisterDLS - DLS registerdata, RegisterDSF - DSF registerdata, RegisterER - ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp - Innsynstjeneste   ReceiptStatusCode Status for forsendelse som kvitteringen gjelder: Status for forsendelse som kvitteringen gjelder: OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering).   StreamedAttachmentExternalBE    userSSN Brukers fødselsnummer. Til bruk både til autentisering og evt. signering   userPassword Brukers passord. Til bruk både til autentisering og evt. signering   authMethod Autentiseringsmetode. Til bruk både til autentisering og evt. signering   userPinCode Pinkode. Til bruk både til autentisering og evt. signering   ReporteeElementId Arbeidsflytreferanse for innsendingen man ønsker å legge til vedlegg på   EndUserSystemReference Referanse for vedlegg (settes av sluttbrukersystem, bør være unik)   FileName Filnavn. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   Name Navn på vedlegg   AttachmentTypeName Type vedlegg   CheckSum Checksum for vedleggsdata   dataStream Datastrøm   StreamedAttachmentBasicBE    systemPassword Passord for sluttbrukersystem definert i portal   systemUserName Systemid for sluttbrukersystem definert i portal   userSSN Brukers fødselsnummer. Til bruk både til autentisering og evt. signering   userPassword Brukers passord. Til bruk både til autentisering og evt. signering   ReporteeElementId Arbeidsflytreferanse for innsendingen man ønsker å legge til vedlegg på   EndUserSystemReference Referanse for vedlegg (settes av sluttbrukersystem, bør være unik)   FileName Filnavn. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   Name Navn på vedlegg   AttachmentTypeName Type vedlegg   CheckSum Checksum for vedleggsdata   dataStream Datastrøm   StreamedAttachmentECBE    userName Brukernavn opprettet i portal i forbindelse med virksomhetssertifikat   password Passord opprettet i portal i forbindelse med virksomhetssertifikat   ReporteeElementId Arbeidsflytreferanse for innsendingen man ønsker å legge til vedlegg på   EndUserSystemReference Referanse for vedlegg (settes av sluttbrukersystem, bør være unik)   FileName Filnavn Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   Name Navn på vedlegg   AttachmentTypeName Type vedlegg   CheckSum Checksum for vedleggsdata   dataStream Datastrøm    Receipt    Tjenesteoperasjon Kort beskrivelse     GetReceiptListV2 Henter ut alle kvitteringer tilhørende en kvitteringstype og/eller fra et gitt tidsrom   GetReceiptV2 Henter ut en kvittering basert på enten unik identifikator eller referanse   UpdateReceipt Kan benyttes av sluttbrukersystemer for å oppdatere en kvittering ved mottak av data.    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nDet blir opprettet teknisk kvittering for hver forsendelse, basert på hvilke referanser sluttbrukersystemet setter. Dersom eksterne referanser gjenbrukes antar vi at det gjelder den samme forsendelsen, og oppdaterer tidligere kvittering. For at kvitteringer skal kunne hentes og oppdateres hensiktsmessig er det derfor viktig at sluttbrukersystem benytter unike referanser både på selve forsendelsen og underelementer av denne.\nGetReceiptV2 Denne operasjonen henter en kvittering basert på, enten unik identifikator for kvitteringen eller en referanse for kvitteringen. Kvitteringen kan være knyttet til et skjemasett innsendt via Altinn fra sluttbruker eller sluttbrukersystem, data sendt fra tjenesteeier til Altinn (meldinger, PIN-koder, abonnement eller prefilldata) eller data sendt fra Altinn til tjenesteeier.\nNavnet på operasjonen kan variere noe fra grensesnitt til grensesnitt. Operasjonen heter for eksempel GetReceiptBasicV2 på basic (SOAP 1.1) grensesnittet. En eldre versjon av operasjonen med navn GetReceipt finnes fortsatt, men kan i fremtiden bli fjernet.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     ReceiptSearch Objekt av typen ReceiptSearch som inneholder nødvendige søkeparametre for å hente ut en kvittering.   Returverdi Beskrivelse   Receipt Objekt av typen Receipt som inneholder alle data for en kvittering som tilfredsstilte det gitte søkekriteriet.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ReceiptSearch    ReceiptId Unik identifikator en kvittering i Altinn.   References Liste med referansen som skal brukes i søket. I praksis er det kun en referanse som benyttes i søket. Følgende referansetyper kan benyttes i søk: ArchiveReference, OutboundShipmentReference, BatchReference, EndUserSystemReference, ExternalShipmentReference, SendersReference   Receipt    ReceiptId Unik identifikator kvitteringen i Altinn   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss).   ReceiptType Angir hva kvittering gjelder.Mulige verdier: NotSet – Brukes når type er ukjent, FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE – Bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd, BrokerService – Overføring av fil på en Formidlingstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering. (IKKE I BRUK)   ReceiptStatus Status for forsendelse som kvitteringen gjelder:NotSet – Status er ukjent, OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer i et hierarki vil ParentReceiptId vise til ReceiptId for hovedkvitteringen i hierarkiet.   References Liste med referanser   SubReceipts Liste med tilhørende kvitteringer. Dersom denne kvitteringen er en hovedkvittering med barn. Et hierarki kan ha kun 2 nivåer. (En kvittering som selv er et barn skal ikke ha barn.)   Reference    ReferenceType Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Referanse satt av avsender for del av en forsendelse. For eksempel vedlegg. Brukes sjeldent da referanser fra sluttbruker ofte lagres som SendersReference, SendersReference - Referanse satt av avsender for del av en forsendelse, ParentReference - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, ReceiversReference- Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen, ArchiveReference - Arkivreferanse   ReferenceValue Selve referansen (verdien). Vil variere basert på type referanse. Se over.    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     30008 Ingen kvittering funnet for angitt kvitterings ID eller referanse    GetReceiptListV2 Denne operasjonen kan kalles for å hente ut alle kvitteringer av en gitt kvitteringstype. I tillegg kan søket begrenses ved hjelp av en til og fra dato. Dette vil gi en liste med kvitteringer som ble sist endret i tidsrommet. Kvitteringstyper er obligatorisk, mens datoer er valgfritt.\nNavnet på operasjonen kan variere noe fra grensesnitt til grensesnitt. Operasjonen heter for eksempel GetReceiptListBasicV2 på basic (SOAP 1.1) grensesnittet. En eldre versjon av operasjonen med navn GetReceiptList finnes fortsatt, men kan i fremtiden bli fjernet.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     receiptTypeName Angir hva kvittering gjelder. Mulige verdier: NotSet – Brukes når type er ukjent, FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE – Bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd, BrokerService – Overføring av fil på en Formidlingstjeneste   dateFrom Finner kvitteringer endret etter angitt dato   dateTo Finner kvitteringer endret før angitt dato   Returverdi Beskrivelse   ReceiptList Liste med kvitteringer av typen Receipt. (Vil være en tom liste hvis ingen kvitteringer ble funnet.)    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     Receipt    ReceiptId Unik identifikator kvitteringen i Altinn   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken.   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptType Angir hva kvittering gjelder. Mulige verdier:NotSet – Brukes når type er ukjent, FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE – Bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd, BrokerService – Overføring av fil på en Formidlingstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering. (IKKE I BRUK)   ReceiptStatus Status for forsendelse som kvitteringen gjelder: NotSet – Status er ukjent, OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer i et hierarki vil ParentReceiptId vise til ReceiptId for hovedkvitteringen i hierarkiet.   References Liste med referanser.   SubReceipts Liste med tilhørende kvitteringer. Dersom denne kvitteringen er en hovedkvittering med barn. Et hierarki kan ha kun 2 nivåer. (En kvittering som selv er et barn skal ikke ha barn.)   Reference    ReferenceType Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Referanse satt av avsender for del av en forsendelse. For eksempel vedlegg. Brukes sjeldent da referanser fra sluttbruker ofte lagres som SendersReference, SendersReference - Referanse satt av avsender for del av en forsendelse, ParentReference - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen, ArchiveReference - Arkivreferanse   ReferenceValue Selve referansen (verdien). Vil variere basert på type referanse. Se over    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     30101 Kan ikke utføre et søk etter kvitteringer av typen NotSet. (NotSet er default verdi hvis receiptTypeName parameteret ikke oppgis.)   30102 Oppgitt fra dato er høyere en oppgitt til dato    UpdateReceipt Operasjonen UpdateReceipt kan benyttes når tjenesteeier har behov for å oppdatere en kvittering i Altinn. Dette gjøres typisk når Altinn har sendt en batch forsendelse til tjenesteeier. Kvitteringen skal da oppdateres med at tjenesteeier har mottatt batch forsendelsen.\nAltinn vil endre kvitteringsteksten til å inneholde informasjon om hvem som utførte oppdateringen. For eksempel: \u0026ldquo;Receipt updated by EndUserSystem: 355. \u0026lt;ny tekst.\u0026gt;\u0026ldquo;\nNavnet på operasjonen kan variere noe fra grensesnitt til grensesnitt. Operasjonen heter for eksempel UpdateReceiptBasic på basic (SOAP 1.1) grensesnittet. En eldre versjon av operasjonen med navn SaveReceipt finnes fortsatt, men kan i fremtiden bli fjernet.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     ReceiptSave Informasjon om hvilken kvittering som skal oppdateres samt den nye informasjonen som skal legges på kvitteringen. Objektet må minimun inneholde ny statuskode og tekst. ReceiptId eller ArchiveReference brukes til å identifisere kvitteringen.   Returverdi Beskrivelse   Receipt Kvitteringen slik den frermstår etter oppdateringen    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ReceiptSave    ReceiptId Unik identifikator for kvittering i Altinn. Kan benyttes for å spesifisere hvilken kvittering som skal oppdateres   ArchiveReference Arkivreferanse i Altinn. Kan benyttes for å spesifisere hvilken kvittering som skal oppdateres. Hvis det finnes flere kvitteringer som har samme arkivreferanse, så vil den nyeste (den med høyest ReceiptId) bli valgt.   ReceiptText Oppdateringstekst for kvittering. Obligatorisk   ReceiptStatus Status for forsendelse som kvitteringen gjelder.Obligatorisk: OK, UnExpectedError, ValidationFailed, Rejected   References Liste med referanser man eventuelt ønsker å legge til på kvitteringen. Alle referansetyper utenom NotSet og OwnerPartyReference er gyldige, men det bør begrenses til følgende (Unntak kan gjøres etter avtale med forvaltning.)   SubReceipts Liste med barnekvitteringer som også ønskes oppdatert i tillegg til hovedkvitteringen. Barne kvitteringer MÅ identifiseres med ReceiptId. Dette kan ikke benyttes til å lage nye barnekvitteringer   Receipt    ReceiptId Unik identifikator kvitteringen i Altinn.   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptType Angir hva kvittering gjelder. Mulige verdier: NotSet – Brukes når type er ukjent, FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE – Bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd, BrokerService – Overføring av fil på en Formidlingstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering. (IKKE I BRUK)   ReceiptStatus Status for forsendelse som kvitteringen gjelder: NotSet – Status er ukjent, OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer i et hierarki vil ParentReceiptId vise til ReceiptId for hovedkvitteringen i hierarkiet   References Liste med referanser   SubReceipts Liste med tilhørende kvitteringer. Dersom denne kvitteringen er en hovedkvittering med barn. Et hierarki kan ha kun 2 nivåer. (En kvittering som selv er et barn skal ikke ha barn.)   Reference    ReferenceType Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Referanse satt av avsender for del av en forsendelse. For eksempel vedlegg. Brukes sjeldent da referanser fra sluttbruker ofte lagres som SendersReference, SendersReference - Referanse satt av avsender for del av en forsendelse, ParentReference - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, ReceiversReference- Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen, ArchiveReference - Arkivreferanse   ReferenceValue Selve referansen (verdien). Vil variere basert på type referanse. Se over    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     30008 Fant ikke noen kvittering som kunne oppdateres   0 Kan ikke ha både kvitterings id og arkivreferanse som input. (Feilkode blir ikke angitt grunnet en feil.)   0 Søk må ha enten kvitterings id eller arkivreferanse som input. (Feilkode blir ikke angitt grunnet en feil.)   0 System/bruker har ikke tilgang til kvitteringen som forsøkes oppdatert. (Feilkode blir ikke angitt grunnet en feil.)    Correspondence    Tjenesteoperasjon Kort beskrivelse     GetCorrespondenceForEndUserSystemV2 Benyttes for å hente detaljer for en spesifikk melding i Altinn   DeleteCorrespondence Benyttes for å slette en melding i Altinn   SaveCorrespondenceConfirmation Benyttes for å bekrefte en melding i Altinn   ArchiveCorrespondenceFromEndUserSystem Benyttes for å arkivere en melding i Altinn    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nCorrespondence.GetCorrespondenceForEndUserSystemV2 Denne operasjonen benyttes for å hente detaljer for en spesifikk melding fra Altinn. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er:AltinnPin, SMSPin   correspondenceID Unik identifikator for en melding i Altinn   LanguageID Språkkode for det språket meldingen skal hentes med. Språk id: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk, Hvis ikke språk er spesifikt kan 0 angis som vil returnere standard språk for denne meldingen   Returverdi Beskrivelse   correspondenceForEndUserSystem Et objekt av typen CorrespondenceForEndUserSystemBEV2 som inneholder alle detaljer om meldingen    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     CorrespondenceForEndUserSystemBEV2    Correspondence Objekt av typen CorrespondenceBEV2 som inneholder alle detaljer for selve meldingen.   CorrespondenceLinkList Liste med objekter av typen CorrespondenceLinkBE, som inneholder eventuelle linker for meldingen.   AttachmentList Liste med objekter av typen AttachmentBE, som inneholder detaljer for eventuelle vedlegg for meldingen.   InternalNotificationList Liste med InternalNotification-objekter, som inneholder detaljer for eventuelle varsler for meldinger.   CorrespondenceBEV2    CorrespondenceID Unik identifikator for meldingen   CorrespondenceStatus Angir status for meldingen (CorrespondenceStautsTypeV2): Created-Meldingen er opprettet, Read-Meldingen er lest, Replied-Sluttbruker har svart på meldingen, ChangedByGovAgency-Tjenesteeier har gjort endringer på meldingen, ChangedByUser-Sluttbruker har gjort endringer på meldingen, Confirmed-Meldingen er bekreftet, DeletedByUser-Meldingen er slettet av sluttbruker, DeletedByAltinn-Altinn har slettet meldingen (for eksempel ved sanering), Archived-Meldingen er arkivert   ArchiveReference Unik referanse for melding i Altinn arkiv   LanguageID Språk id: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   CorrespondenceSummary Meldingsingress   CorrespondenceSummary Meldingsingress   CorrespondenceTxt Tekst i meldingen   Header Meldings tittel / hode   SentBy Angir avsender av melding   CorrespondenceSubject Angir emne for meldingen   IsConfirmationNeeded Angir om bruker må bekrefte melding   SentTo Navn på mottaker av melding   DateSent Angir dato og tidspunkt for når meldingen var sendt (yyyy-MM-ddThh:mm:ss)   DueDate Dersom meldingen har en frist angis dato for dette her (yyyy-MM-dd)   Reportee Unik identifikator i Altinn for mottaker av melding   AuthenticatedUser Angir bruker som har bekreftet melding   ConfirmationDate Angir dato for når meldingen ble bekreftet (yyyy-MM-ddThh:mm:ss)   UserID Angir bruker som har bekreftet melding   Description Navn på tjenesteeier som opprettet meldingen   CorrespondenceName Navn på meldingstjenesten   ExternalSystemReference Angir unik referanse for meldingen (satt av tjenesteeier)   CorrespondenceTitle Tittel på melding   CustomMessageData Felt for attributter spesifikke for den gitte Altinn tjeneste. For eksempel informasjon om kommunenummer på selvangivelsen. Bruk av spesifikke attributter avtales spesielt for de(n) aktuelle Altinn-tjenesten(e)   AllowForwarding Angir om meldingen kan videresendes eller ikke   CaseID Angir samhandlingstjeneste case ID om meldingen er tilknyttet en samhandlingstjeneste   CorrespondenceLinkBE    LinkType Angir hvilken type informasjon linken gir: Form, ServiceCode, ServiceURL, ArchiveReference   LinkURL Angir URL   LinkText Angir teksten som vises for linken   AttachmentBEV2    AttachmentID Unik identifikator for vedlegget i Altinn.   AttachmentName Navn på vedlegget   FileName Navn på fil for vedlegg. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   AttachmentData Innholdet/dataene i vedlegget   CreatedDateTime Dato og tidspunkt for når vedlegget ble opprettet (yyyy-MM-ddThh:mm:ss)   SendersReference Unik referanse satt av etatssystem som har sendt vedlegget   IsEncrypted Boolsk verdi som sier om vedlegget er kryptert   AttachmentTypeID MIME-typen for vedlegget:   AttachmentFunctionTypeID Angir funksjon for vedlegget: Unspecified, Invoice   ReporteeElementID Referanse til element (skjemasett eller melding) som vedlegget tilhører. Unik id i Altinn.   CreatedByUserID Bruker id for bruker som har lagt ved vedlegget.   IsAddedAfterFormFillin Angir om vedlegget er lagt til etter utfylling.   IsAssociatedToFormSet Angir om vedlegget er knyttet til skjemasett eller ikke   DestinationType Angir hvor vedlegget er tilgjengelig: Default/ShowToAll – tilgjengelig i portal og for sluttbrukersystem, PortalOnly – kun tilgjengelig fra portal, EndUserSystemOnly – kun tilgjengelig fra sluttbrukersystem    Correspondence.DeleteCorrespondence Denne operasjonen kan benyttes av sluttbrukersystemer for å slette en aktiv melding i Altinn.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Unik identifikator for en melding i Altinn       Returverdi Beskrivelse     N/A Returnerer ingenting hvis alt er OK    Correspondence.SaveCorrespondenceConfirmation Denne operasjonen kan benyttes av sluttbrukersystemer for å bekrefte en melding i Altinn.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Unik identifikator for en melding i Altinn   Returverdi Beskrivelse   N/A Returnerer ingenting hvis alt er OK    Correspondence.ArchiveCorrespondenceFromEndUserSystem Denne operasjonen kan benyttes av sluttbrukersystemer for å arkivere en melding i Altinn.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Unik identifikator for en melding i Altinn   Returverdi Beskrivelse   Receipt Objekt av typen ReceiptBE med kvitteringsinformasjon for forsendelsen    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ReceiptBE    ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel for senere uthenting av status/kvittering.   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken,   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptTypeName Angir hva kvittering gjelder. Mulige verdier: FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE – Bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering   ReceiptStatusCode Status for forsendelse som kvitteringen gjelder: OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering).   References Liste med ReferenceBE-objekter for kvitteringen   SubReceipts Liste med tilhørende Receipt-objekter (dersom denne kvitteringen er en hovedkvittering)   ReferenceBE    ReferenceValue Selve referansen (verdien) satt på kvitteringen. Typisk forsendelsesreferansen   ReferenceTypeName Angir type referanse: ExternalShipmentReference-Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference-Benyttes ikke, SendersReference-Referanse satt av avsender for del av en forsendelse, ParentReference-Referansen viser til et hovedskjema, WorkFlowReference-Arbeidsflytreferanse, BatchReference-Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference-Referanse til en forsendelse sendt fra Altinn, ReceiversReference-Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, OwnerPartyReference-Referanse til eier av kvittering, fødselsnummer eller organisasjonsnummer, PartyReference-Referanse til aktør for kvittering, fødselsnummer eller organisasjonsnummer, ArchiveReference-Arkivreferanse    ReporteeElementList\n   Tjenesteoperasjon Kort beskrivelse     GetReporteeElementListV2 Henter en liste med elementer fra arbeidsliste og arkiv.   DeleteReporteeElement Benyttes for å slette et element i arbeidsliste i Altinn   GetFormSetElementsV2 Henter ut et spesifikt skjemasett basert på en gitt ID   GetCorrespondenceListForArchiveRef Henter ut arkivert melding basert på bl.a. arkiv referanse   GetCorrespondenceListForReportee Henter ut meldinger for en gitt avgiver    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nReporteeElementList.DeleteReporteeElement Denne operasjonen benyttes for å slette elementer i en avgivers arbeidsliste eller arkiv. GetReporteeReporteeElementList kalles gjerne i forkant av kall til denne tjenesten for å hente og identifisere et element og finne identifikator (reporteeElementCode) for det elementet man ønsker å slette.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reporteeElementCode Unik identifikator for et element i Altinn. Denne er sammensatt av et prefiks som beskriver hvilken type elementet har og elementets retporteeElementID. ulige prefiks for element typer: Altinn 1, aktivt: A1E. Altinn 1, arkivert: A1A. Altinn 2, aktivt:A2E. Altinn 2, arkivert: A2A   Returverdi Beskrivelse   Result Angir om elementet ble slettet    ReporteeElementList.GetFormSetElementsV2 Henter ut et spesifikt skjemasett basert på en gitt ID. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reporteeElementID Identifikator for skjemasett man ønsker å hente ut   languageID Språk id: Språk id: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   Returverdi Beskrivelse   FormSetElementList Liste med objekter av typen FormSetElementBEV2, som beskriver skjemaene i skjemasett man ønsker å hente ut.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     FormSetElementBEV2    IconFileName MIME-typen   ItemID    ItemName    ItemURL URL for elementet.   ItemType Angir type element: MainForm, SubForm, BinaryAttachment   ValidationStatusType Angir valideringsstatus for elementet: NotSet, Valid, NonValid, NotValidated, NotApplicable   CreatedByUserID Bruker id for bruker som har opprettet elementet   DestinationType Angir hvor vedlegget er tilgjengelig: Default/ShowToAll – tilgjengelig i portal og for sluttbrukersystem, PortalOnly – kun tilgjengelig fra portal, EndUserSystemOnly – kun tilgjengelig fra sluttbrukersystem   IsAddedAfterFormFillin Angir om vedlegget er lagt til etter utfylling   IsAssociatedToFormSet Angir om vedlegget er knyttet til skjemasett eller ikke – brukes for å slette vedlegg som er lastet opp men ikke lagt til skjemasettet.   IsSigningMandatory Angir om skjema krever signering eller ikke. Verdien her er kun gjeldende om signeringssteget sier at skjema selv bestemmer signering (IsSigningAllRequired satt til SET_PER_FORM)    ReporteeElementList.GetReporteeElementListV2 Henter en liste med elementer fra arbeidsliste og arkiv. Listen inneholder detaljer for ett element for en avgiver. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   Search Objekt av typen ExternalSearchBEV2 som inneholder søkekriterier for utvalget elementer man ønsker å hente ut.   languageID Språkkode på elementet som skal hentess ut. Språk id: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk, Hvis ikke språk er spesifikt kan 0 angis som vil returnere standard språk for denne meldingen   Returverdi Beskrivelse   reporteeElementList En liste med ReporteeElementBEV2-objekter som inneholder detaljer for ett element for en avgiver    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ExternalSearchBEV2    ToDate Startdato for perioden man ønsker å hente ut elementer for (yyyy-MM-dd).   FromDate Sluttdato for perioden man ønsker å hente ut elementer for (yyyy-MM-dd).   SearchName Navn på søk. Benyttes kun dersom dette er et lagret søk.   ToBeProcessed Boolsk verdi som, hvis satt til true, angir at man ønsker å filtrere på tjenester som er ufullstendige/ikke-komplett.   SearchString Fritekstsøk som kan brukes for å matche hele eller deler av tjenestenavnet på elementer man ønsker å hente ut.   ServiceCodeList Liste med tjenester (string) som man ønsker å filtrere på.   SentAndArchived Boolsk verdi som, hvis satt til true, angir at man ønsker å filtrere på tjenester som er sendt og arkivert.   ToBeProcessedByOthers Filter for å angi at man bare ønsker å se sine elementer som i øyeblikket er til behandling hos andre aktører   ServiceOwnerCode Tjenesteeier som man ønsker å filtrere utrekket på.   Reportee Fødselsnummer/organisasjonsnummer for avgiver som man ønsker å hente ut elementer for.   ArchiveReference Fritekstfelt hvor man kan angi hele eller deler av en arkivreferanse som man ønsker å filtrere på.   CaseID Begrenser søket mot bestemt samhandlingstjenesteinstans.   CollectionPages Benyttes for å begrense resultatet til samlesider (samhandlingstjeneste)   EDialogue Benyttes for å begrense resultatet til e-dialoger (samhandlingstjeneste)   ReporteeElementBEV2    AllowDelete En boolsk verdi som angir om bruker som hentet elementet fra arkiv har rettighet til å slette elementet.   AllowNewCopy Boolsk verdi som sier om man kan opprette kopi av elementet   Altinn1ArchiveUnitId Unik identifikator for elementet i arkivet dersom dette er et element som er arkivert i Altinn I. Behøver ikke settes.   Altinn1FormCode Angir skjema id i AltinnI. Behøver ikke settes   Altinn1FormId Angir skjema versjon AltinnI. Behøver ikke settes   Altinn1FormInstanceID Angir element id i AltinnI. Behøver ikke settes.   Altinn1FormORNo Angir OR-id i AltinnI. Behøver ikke settes.   Altinn1ParticipantID Angir unik id for tilhørende AltinnI bruker. Behøver ikke settes.   Altinn1ReferenceType Angir referansetype satt i AltinnI. Behøver ikke settes.   Altinn1WorkflowProcessId Arbeidsflytreferanse for elementet dersom elementet er arkivert i AltinnI. Behøver ikke settes.   ArchiveId Unik identifikator for elementet i arkiv. ReporteeElementId, ArchiveId eller Altinn1ArchiveUnitId må settes, men bare en av gangen.   ArchiveReference Unik arkivreferanse som vises for elementet på avgivers hovedside.   CaseID Eventuelt referanse til samhandlingstjeneste elementet er knyttet opp mot   CorrespondenceStatus Angir status for elementet (dersom elementet er av type meldingstjeneste). Mulige statuser er: Created - Meldingen er opprettet, Read - Meldingen er lest, Replied - Sluttbruker har svart på meldingen, ChangedByGovAgency - Tjenesteeier har gjort endringer på meldingen, ChangedByUser -Sluttbruker har gjort endringer på meldingen, Confirmed - Meldingen er bekreftet, DeletedByUser -Meldingen er slettet av sluttbruker, DeletedByAltinn - Altinn har slettet meldingen (for eksempel ved sanering), Archived - Meldingen er arkivert   DueDate Frist på elementet. Ikke satt for elementer i arkiv.   EndUserSystemID Id som benyttes for å hente navn på sluttbrukersystem   ExternalServiceCode Tjenestekode for elementet, for eksempel ”PSA”   IsCaseArchived Angir om samhandlingstjenesten er arkivert.   IsMatched Intern parameter.   LastChangedBy Navn på bruker/sluttbrukersystem eller tjenesteeier som sist endret elementet.   LastChangedByID Unik identifikator for bruker/sluttbrukersystem eller tjenesteeier som sist endret elementet.   LastChangedDate Dato for når elementet sist ble endret (yyyy-MM-dd).   LastChangeType Type endring som ble gjort sist elementet ble endret: Sent, Saved, Archived   Notice Eventuell merknad på elementet tilhørende en samhandlingstjeneste.   ParentCaseName Eventuelt navn på samhandlingstjenesten elementet er knyttet mot   ReporteeElementCode Angir element id hvor forkortelse for element typen er lagt til som prefiks. Mulige prefiks for element typer er: aktivt - A2E, arkivert - A2A   ReporteeElementId Unik identifikator for elementet.   ReporteeElementOwner Unik identifikator for avgiver som elementet tilhører.   ReporteeElementType Type element: Correspondence - meldingstjeneste, FormTask - innsendingstjeneste, Collaboration -samhandlingstjeneste, LookUp - innsynstjeneste   ReporteeName Navn på avgiver som vises for elementet i avgivers hovedside.   RoleRequirement Rollekrav for å utføre neste steg i arbeidsflyt. Ikke satt for elementer i arkiv.   RoleRequirementAltinn1Element Rollekrav for å utføre neste steg i arbeidsflyt dersom elementet er instansiert i AltinnI. Ikke satt for elementer i arkiv. Behøver ikke settes for AltinnII elementer.   SEReporteeElementID Unik identifikator for elementet brukt før det arkiveres.   ServiceEditionVersion Angir versjon på tjenesten.   ServiceOwner Angir tjenesteeier som tilbyr tjenesten som elementet tilhører.   ServiceOwnerCode Tjenesteeierkode brukt for å angi tjenesteeier navn   ServiceOwnerDescription Tjenesteeiers navn.   Status Status for elementet: NotOpenedNoConfirmationReq, NotOpenedConfirmationReq, OpenedNoConfirmedReq, OpenedNotConfirmed, Confirmed, FillIn, SignIn, Archive, SendIn, Active, Finished   Statusname Navn på status (med språkstøtte).   TaskStatus Angir status for elementet (dersom elementet er av type innsendingstjeneste). Elementet kan ha en av følgende statuser: FormFilling - Innsendingstjenesten er under utfylling, Signing - Innsendingstjenesten er klar for signering, SendIn - Innsendingstjenesten er klar for innsending, ParallelSigning - Innsendingstjenesten er til brukerstyrt signering, Archive - nnsendingstjenesten er arkivert   Title Tittel på elementet som vises i avgivers hovedside    ReporteeElementList.GetCorrespondenceListForArchiveRef Henter ut arkiverte melding(er) basert på arkiv ID.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reportee Fødselsnummer eller organisasjonsnummer for avgiver   archiveReference Arkivreferanse i Altinn   fromDate Hvis satt, må alle returnerte elementer ha dato større enn denne   toDate Hvis satt, må alle returnerte elementer ha dato mindre enn denne   languageID Filtrerer på språk: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   Returverdi Beskrivelse   reporteeElementList En liste med ReporteeElementBE-objekter som inneholder detaljer for ett element for en avgiver.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ReporteeElementBE    AllowDelete En boolsk verdi som angir om bruker som hentet elementet fra arkiv har rettighet til å slette elementet.   AllowNewCopy Boolsk verdi som sier om man kan opprette kopi av elementet.   Altinn1ArchiveUnitId Unik identifikator for elementet i arkivet dersom dette er et element som er arkivert i Altinn I. Behøver ikke settes.   Altinn1FormCode Angir skjema id i AltinnI. Behøver ikke settes   Altinn1FormId Angir skjema versjon AltinnI. Behøver ikke settes   Altinn1FormInstanceID Angir element id i AltinnI. Behøver ikke settes.   Altinn1FormORNo Angir OR-id i AltinnI. Behøver ikke settes.   Altinn1ParticipantID Angir unik id for tilhørende AltinnI bruker. Behøver ikke settes.   Altinn1ReferenceType Angir referansetype satt i AltinnI. Behøver ikke settes.   Altinn1WorkflowProcessId Arbeidsflytreferanse for elementet dersom elementet er arkivert i AltinnI. Behøver ikke settes.   ArchiveId Unik identifikator for elementet i arkiv. ReporteeElementId, ArchiveId eller Altinn1ArchiveUnitId må settes, men bare en av gangen   ArchiveReference Unik arkivreferanse som vises for elementet på avgivers hovedside.   CorrespondenceStatus Angir status for elementet (dersom elementet er av type meldingstjeneste). Mulige statuser er: Created - Meldingen er opprettet, Read - Meldingen er lest, Replied - Sluttbruker har svart på meldingen, ChangedByGovAgency - Tjenesteeier har gjort endringer på meldingen, ChangedByUser - Sluttbruker har gjort endringer på meldingen, Confirmed - Meldingen er bekreftet, DeletedByUser -Meldingen er slettet av sluttbruker, DeletedByAltinn - Altinn har slettet meldingen (for eksempel ved sanering)   DueDate Frist på elementet. Ikke satt for elementer i arkiv   EndUserSystemID Id som benyttes for å hente navn på sluttbrukersystem   ExternalServiceCode Tjenestekode for elementet, for eksempel ”PSA”   LastChangedBy Navn på bruker/sluttbrukersystem eller tjenesteeier som sist endret elementet.   LastChangedByID Unik identifikator for bruker/sluttbrukersystem eller tjenesteeier som sist endret elementet.   LastChangedDate Dato for når elementet sist ble endret (yyyy-MM-dd).   LastChangeType Type endring som ble gjort sist elementet ble endret: Sent, Saved, Archived   ReporteeElementCode Angir element id hvor forkortelse for element typen er lagt til som prefiks. Mulige prefiks for element typer er: aktivt - A2E, arkivert - A2A   ReporteeElementId Unik identifikator for elementet.   ReporteeElementOwner Unik identifikator for avgiver som elementet tilhører.   ReporteeElementType Type element: Correspondence - meldingstjeneste, FormTask - innsendingstjeneste   ReporteeName Navn på avgiver som vises for elementet i avgivers hovedside.   RoleRequirement Rollekrav for å utføre neste steg i arbeidsflyt. Ikke satt for elementer i arkiv.   RoleRequirementAltinn1Element Rollekrav for å utføre neste steg i arbeidsflyt dersom elementet er instansiert i AltinnI. Ikke satt for elementer i arkiv. Behøver ikke settes for AltinnII elementer.   ServiceOwner Angir tjenesteeier som tilbyr tjenesten som elementet tilhører.   ServiceOwnerCode Tjenesteeierkode brukt for å angi tjenesteeier navn   Status Status for elementet: NotOpenedNoConfirmationReq, NotOpenedConfirmationReq, OpenedNoConfirmedReq, OpenedNotConfirmed, Confirmed, FillIn, SignIn, Archive, SendIn   Statusname Navn på status (med språkstøtte)   TaskStatus Angir status for elementet (dersom elementet er av type innsendingstjeneste). Elementet kan ha en av følgende statuser: FormFilling - Innsendingstjenesten er under utfylling, Signing - Innsendingstjenesten er klar for signering, SendIn - Innsendingstjenesten er klar for innsending   Title Tittel på elementet som vises i avgivers hovedside.    ReporteeElementList.GetCorrespondenceListForReportee Henter ut meldinger for en avgiver.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reportee Fødselsnummer eller organisasjonsnummer for avgiver   fromDate Hvis satt, må alle returnerte elementer ha dato større enn denne   toDate Hvis satt, må alle returnerte elementer ha dato mindre enn denne   languageID Filtrerer på språk: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   Returverdi Beskrivelse   reporteeElementList En liste med ReporteeElementBE-objekter som inneholder detaljer for ett element for en avgiver.    Tabellen under beskriver datakontrakten for operasjonen\n   Property Beskrivelse     ReporteeElementBE    AllowDelete En boolsk verdi som angir om bruker som hentet elementet fra arkiv har rettighet til å slette elementet.   AllowNewCopy Boolsk verdi som sier om man kan opprette kopi av elementet.   Altinn1ArchiveUnitId Unik identifikator for elementet i arkivet dersom dette er et element som er arkivert i Altinn I. Behøver ikke settes.   Altinn1FormCode Angir skjema id i AltinnI. Behøver ikke settes   Altinn1FormId Angir skjema versjon AltinnI. Behøver ikke settes   Altinn1FormInstanceID Angir element id i AltinnI. Behøver ikke settes.   Altinn1FormORNo Angir OR-id i AltinnI. Behøver ikke settes.   Altinn1ParticipantID Angir unik id for tilhørende AltinnI bruker. Behøver ikke settes.   Altinn1ReferenceType Angir referansetype satt i AltinnI. Behøver ikke settes.   Altinn1WorkflowProcessId Arbeidsflytreferanse for elementet dersom elementet er arkivert i AltinnI. Behøver ikke settes.   ArchiveId Unik identifikator for elementet i arkiv   ArchiveReference Unik arkivreferanse som vises for elementet på avgivers hovedside   CorrespondenceStatus Angir status for elementet (dersom elementet er av type meldingstjeneste). Mulige statuser er: Created - Meldingen er opprettet, Read - Meldingen er lest, Replied - Sluttbruker har svart på meldingen, ChangedByGovAgency - Tjenesteeier har gjort endringer på meldingen, ChangedByUser -Sluttbruker har gjort endringer på meldingen, Confirmed - Meldingen er bekreftet, DeletedByUser - Meldingen er slettet av sluttbruker, DeletedByAltinn - Altinn har slettet meldingen (for eksempel ved sanering)   DueDate Frist på elementet. Ikke satt for elementer i arkiv   EndUserSystemID Id som benyttes for å hente navn på sluttbrukersystem   ExternalServiceCode Tjenestekode for elementet, for eksempel ”PSA”   LastChangedBy Navn på bruker/sluttbrukersystem eller tjenesteeier som sist endret elementet   LastChangedByID Unik identifikator for bruker/sluttbrukersystem eller tjenesteeier som sist endret elementet   LastChangedDate Dato for når elementet sist ble endret (yyyy-MM-dd).   LastChangeType Type endring som ble gjort sist elementet ble endret: Sent, Saved, Archived   ReporteeElementCode Angir element id hvor forkortelse for element typen er lagt til som prefiks. Mulige prefiks for element typer er: aktivt - A2E, arkivert - A2A   ReporteeElementId Unik identifikator for elementet.   ReporteeElementOwner Unik identifikator for avgiver som elementet tilhører   ReporteeElementType Type element: Correspondence - meldingstjeneste, FormTask - innsendingstjeneste   ReporteeName Navn på avgiver som vises for elementet i avgivers hovedside   RoleRequirement Rollekrav for å utføre neste steg i arbeidsflyt. Ikke satt for elementer i arkiv.   RoleRequirementAltinn1Element Rollekrav for å utføre neste steg i arbeidsflyt dersom elementet er instansiert i AltinnI. Ikke satt for elementer i arkiv. Behøver ikke settes for AltinnII elementer.   ServiceOwner Angir tjenesteeier som tilbyr tjenesten som elementet tilhører   ServiceOwnerCode Tjenesteeierkode brukt for å angi tjenesteeier navn   Status Status for elementet: NotOpenedNoConfirmationReq, NotOpenedConfirmationReq, OpenedNoConfirmedReq, OpenedNotConfirmed, Confirmed, FillIn, SignIn, Archive, SendIn   Statusname Navn på status (med språkstøtte).   TaskStatus Angir status for elementet (dersom elementet er av type innsendingstjeneste). Elementet kan ha en av følgende statuser: FormFilling, - Innsendingstjenesten er under utfylling, Signing -Innsendingstjenesten er klar for signering, SendIn -Innsendingstjenesten er klar for innsending   Title Tittel på elementet som vises i avgivers hovedside.    ServiceMetadata    Tjenesteoperasjon Kort beskrivelse     GetAvailableServices Henter en liste med gyldige tjenester i Altinn   GetFormTaskSchemaDefinitions Henter spesifikasjoner (.xsd) for alle skjemaer i en gitt innsendingstjeneste    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nServiceMetadata.GetAvailableServicesV2 Denne operasjonen returnerer en liste med gyldige tjenester i Altinn. Operasjonen er versjonert, og finnes i både V2 og V3 versjon som tilbyt noe ulik funksjonalitet.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     languageID Språk kode for å filtrere tjenester. Hvis 0 angis blir verdien satt til standard språkvalg. Språkkoder: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   Returverdi Beskrivelse   availableServiceList Liste med AvailableServiceBEV2-objekter som inneholder detaljer for en gyldig innsendingstjeneste.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     AvailableServiceBEV2    ServiceOwnerCode Kode for tjenesteeier som tilbyr denne tjenesten   ServiceOwnerName Navn på tjenesteeier som tilbyr tjenesten   ServiceName Navn på tjenesten   ExternalServiceCode Angir kode for tjenesten, for eksempel ”PSA”   ExternalServiceEditionCode Angir utgave av tjenesten, for eksempel ”2009”   ServiceEditionVersionName Angir versjon på tjenesten   ServiceEditionVersionId Angir identifikator for versjonen av tjenesten   ValidFrom Startdato for tidsrommet som tjenesten er gyldig i (yyyy-MM-ddThh:mm:ss)   ValidTo Sluttdato for tidsrommet som tjenesten er gyldig i (yyyy-MM-ddThh:mm:ss)   BuildPackageVersion Et unikt versjonsnummer internt i Altinn   IsMatched Intern parameter   ServiceType Angir type tjeneste: Correspondence – meldingstjeneste, Reporting – innsendingstjeneste, Collaboration – samhandlingstjeneste, Lookup –Iinnsynstjeneste    ServiceMetadata.GetAvailableServicesV3 Denne operasjonen returnerer en liste med gyldige tjenester i Altinn, filtrert på søkeparameterene som blir sendt inn. Operasjonen er versjonert, siste versjon er V3.\nTabellen under beskriver datakontrakten for operasjonen.\n   Property Beskrivelse     AvailableServiceBEV2    ServiceOwnerCode Kode for tjenesteeier som tilbyr denne tjenesten.   ServiceOwnerName Navn på tjenesteeier som tilbyr tjenesten.   ServiceName Navn på tjenesten.   ExternalServiceCode Angir kode for tjenesten, for eksempel ”PSA”.   ExternalServiceEditionCode Angir utgave av tjenesten, for eksempel ”2009”.   ServiceEditionVersionName Angir versjon på tjenesten.   ServiceEditionVersionId Angir identifikator for versjonen av tjenesten.   ValidFrom Startdato for tidsrommet som tjenesten er gyldig i (yyyy-MM-ddThh:mm:ss).   ValidTo Sluttdato for tidsrommet som tjenesten er gyldig i (yyyy-MM-ddThh:mm:ss).   BuildPackageVersion Et unikt versjonsnummer internt i Altinn   IsMatched Intern parameter.   ServiceType Angir type tjeneste: Correspondence – meldingstjeneste, Reporting – innsendingstjeneste, Collaboration – samhandlingstjeneste, Lookup – innsynstjeneste    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ServicesSearchExternalBE    ServiceType Angir type tjeneste: Correspondence – meldingstjeneste, Reporting – innsendingstjeneste, Collaboration – samhandlingstjeneste, Lookup – innsynstjeneste   ServiceOwnerCode Kode for tjenesteeier som tilbyr denne tjenesten.   ExternalServiceCode Angir kode for tjenesten, for eksempel ”PSA”.   ExternalServiceEditionCode Angir utgave av tjenesten, for eksempel ”2009”.   AvailableServiceBEV3    ServiceOwnerCode Kode for tjenesteeier som tilbyr denne tjenesten.   ServiceOwnerName Navn på tjenesteeier som tilbyr tjenesten.   ServiceName Navn på tjenesten.   ExternalServiceCode Angir kode for tjenesten, for eksempel ”PSA”.   ExternalServiceEditionCode Angir utgave av tjenesten, for eksempel ”2009”.   ServiceEditionVersionName Angir versjon på tjenesten.   ServiceEditionVersionId Angir identifikator for versjonen av tjenesten.   ValidFrom Startdato for tidsrommet som tjenesten er gyldig i (yyyy-MM-ddThh:mm:ss).   ValidTo Sluttdato for tidsrommet som tjenesten er gyldig i (yyyy-MM-ddThh:mm:ss).   BuildPackageVersion Et unikt versjonsnummer internt i Altinn   IsMatched Intern parameter.   ServiceType Angir type tjeneste: Correspondence – meldingstjeneste, Reporting – innsendingstjeneste, Collaboration – samhandlingstjeneste, Lookup – innsynstjeneste   AttachmentRuleTypeBEList Liste som angir hvilke vedleggstyper som er knyttet til tjenesten   AttachmentRuleTypeBE    AttachmentTypeName Unikt navn for vedleggstypen, benyttes for å spesifisere vedleggstype når vedlegg sendes inn.   AttachmentTypeNameLanguage Visningsnavn for vedleggstypen basert på angitt språk.   MinAttachmentCount Minimum antall vedlegg av denne typen som må være med for å etterfølge kravene for vedleggstypen.   MaxAttachmentCount Maksimum antall vedlegg av denne typen som må være med for å etterfølge kravene for vedleggstypen.   MaxFileSize Maksimum tillatt filstørrelse for vedleggstypen.   AllowedFileTypes Kommaseparert liste over tillatte filtypeendelser for vedleggstypen.   IsXSDValidationRequired Verdi som angir om XSD validering av vedlegg vil bli gjort for denne vedleggstypen. XSD kan mottas fra tjenesteeier.    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     30013 Angitt ExternalServiceCode er på ugyldig format   30005 Angitt ServiceOwnerCode er på ugyldig format   40039 Når ExternalServiceEditionCode er angitt må også ExternalServiceCode angis    ServiceMetadata.GetFormTaskSchemaDefinitions Denne operasjonen returnerer spesifikasjoner (.xsd) for alle skjemaer i en gitt innsendingstjeneste.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     externalServiceCode Angir tjenestekode på innsendingstjenesten man ønsker å hente spesifikasjoner for   externalServiceEditionCode Angir tjenesteutgavekode for innsendingstjeneste   Returverdi Beskrivelse   logicalFormSchemaDefinitionList Liste med LogicalFormSchemaDefinitionBE-objekter som inneholder meldingsspesifikasjon for et gitt skjema    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     LogicalFormSchemaDefinitionBE    LogicalFormID Unik identifikator for et gitt skjema i Altinn   DataFormatXsd Meldingsspesifikasjon for skjemaet   DataFormatProviderTypeID    DataFormatID Den unike id for et spesifikt skjema, dette er typisk gitt av metadata leverandør   DataFormatVersion Versjonen av en gitt DataFormatID, som sammen med den gir et unikt skjema (spesifikasjon)    Workflow    Tjenesteoperasjon Kort beskrivelse     DoSendingInAction Setter arbeidsflyt til neste steg i forhold til et skjemasett hvis skjema utfylling er ferdig og dette skjema ikke har definert noen signeringssteg.   DoSigning Utfører signering hvis en skjemasett lå klart til signering   GetAvailableActionsV2 Returnerer hvilken handling som er mulig å utføre for en gitt innsendingstjeneste i Altinn   GetNextWorkflowStateTypeInProcessFlowV2 Denne operasjonen returnerer neste steg (steget etter gjeldende steg) i arbeidsflyt for en gitt innsendingstjeneste   GetProcessDetailsV2 Denne operasjonen returnerer alle steg i arbeidsflyten for en gitt innsendingstjeneste; både steg som allerede er utført og steg som skal utføres   GetSigningText Henter ut signeringsteksten for et element i Altinn   SetBackToFormFilling Kan kalles fra et sluttbrukersystem for å sette en innsendingstjeneste i Altinn tilbake til utfyllingssteg   PrepareUserControlledSigningBasic Benyttes til å sette opp det brukerstyrte signeringssteget   GetProcessStepIDForParallelSigningBasic Henter stegnummeret for det brukerstyrte signeringssteget    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nWorkflow.DoSendingInAction DoSendingInAction kan kalles fra et sluttbrukersystem for å sende inn en innsendingstjeneste (uten signeringssteg) som allerede ligger ferdig utfylt i Altinn.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Angir element i Altinn som skal sendes inn   Returverdi Beskrivelse   N/A     Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     60035 Man har prøvd å arkivere et ReporteeElement som allerede er arkivert   60037 Man har prøvd å sende inn et ReporteeElement som ikke har blitt validert, da element ikke er i en completed state    Workflow.DoSigning DoSigning kan kalles fra et sluttbrukersystem for å signere en innsendingstjeneste som ligger klart til signering i Altinn. Dersom dette er siste signeringssteg vil tjenesten også sendes inn.\nListen med FormID og AttachmentID som skal signeres kan hentes av sluttbrukersystemet ved å gjøre et kall til ReporteeElementList.GetFormSetElementsV2 i ReporteeElementList endepunktet.\nReporteeElementListExternalBasic.GetFormSetElementsBasicV2[reporteeElementID] returnerer:\n*Når Vedlegg:* \u0026amp;lt;b:ItemID\u0026amp;gt;184863\u0026amp;lt;/b:ItemID\u0026amp;gt; \u0026amp;lt;b:ItemName\u0026amp;gt;Chrysanthemum.jpg\u0026amp;lt;/b:ItemName\u0026amp;gt; \u0026amp;lt;b:ItemType\u0026amp;gt;BinaryAttachment\u0026amp;lt;/b:ItemType\u0026amp;gt; *For HovedSkjema:* \u0026amp;lt;b:ItemID\u0026amp;gt;109813\u0026amp;lt;/b:ItemID\u0026amp;gt; \u0026amp;lt;b:ItemName\u0026amp;gt;RF-1215 Selskapsoppgave for deltakerliknet selskap 2012\u0026amp;lt;/b:ItemName\u0026amp;gt; \u0026amp;lt;b:ItemType\u0026amp;gt;MainForm\u0026amp;lt;/b:ItemType\u0026amp;gt; \u0026amp;lt;b:ItemURL\u0026amp;gt;PrintPDF.aspx?FormId=109813\u0026amp;lt;/b:ItemURL\u0026amp;gt; *Når Underskjema:* \u0026amp;lt;b:ItemID\u0026amp;gt;109814\u0026amp;lt;/b:ItemID\u0026amp;gt; \u0026amp;lt;b:ItemName\u0026amp;gt;RF-1233 Selskapets oppgave over deltakerens formue og inntekt i deltakerliknet selskap 2012\u0026amp;lt;/b:ItemName\u0026amp;gt; \u0026amp;lt;b:ItemType\u0026amp;gt;SubForm\u0026amp;lt;/b:ItemType\u0026amp;gt; \u0026amp;lt;b:ItemURL\u0026amp;gt;PrintPDF.aspx?FormId=109814\u0026amp;lt;/b:ItemURL\u0026amp;gt; \u0026amp;lt;b:ValidationStatusType\u0026amp;gt;Valid\u0026amp;lt;/b:ValidationStatusType\u0026amp;gt; Parameterer ItemID gir korrelert verdi som skal benyttes i WorkflowServiceExternalBasic.DoSigningBasic for å utføre signering av valgte skjema/vedlegg: \u0026amp;lt;ns:selectedForms\u0026amp;gt; \u0026amp;lt;arr:int\u0026amp;gt;\\[ItemID fra WS GetFormSetElementsBasicV2 \\]\u0026amp;lt;/arr:int\u0026amp;gt; … \u0026amp;lt;/ns:selectedForms\u0026amp;gt; … \u0026amp;lt;ns:selectedAttachments\u0026amp;gt; \u0026amp;lt;arr:int\u0026amp;gt;184863\u0026amp;lt;/arr:int\u0026amp;gt; \u0026amp;lt;arr:int\u0026amp;gt;184864\u0026amp;lt;/arr:int\u0026amp;gt; … \u0026amp;lt;/ns:selectedAttachments\u0026amp;gt;  Tabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Angir element i Altinn som skal signeres   selectedForms Angir en liste med FormIDs for skjemaer som skal signeres   selectedAttachments Angir en liste med AttachmentIDs for vedlegg som skal signeres (kan hentes ut vha ItemID i operasjonen GetFormSetElementsV2 når ItemType er satt til BinaryAttachment).   signatureText Signeringstekst   endUserSystemLoginDateTime Dato og tidspunkt for når bruker logget inn i sluttbrukersystem (yyyy-MM-ddThh:mm:ss)   endUserSystemSignatureDateTime ato og tidspunkt for når signeringen i sluttbrukersystemet ble gjort (yyyy-MM-ddThh:mm:ss)   endUserSystemVersion Versjonsnummer for sluttbrukersystemet   endUserSystemUserId Identifikator for bruker som var logget på sluttbrukersystemet og gjennomførte signeringen   enduserSystemReference Referanse til signaturen som ble utført i sluttbrukersystemet (satt av sluttbrukersystem, bør være unik)   endUserSystemSignatureLogId Unik id i sluttbrukersystemet for logginnslag for signeringen   Returverdi Beskrivelse   N/A     Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     14 Dette er en generell autoriserings feil, og vil forekomme i et par situasjoner; a. Man prøver å signere et ReporteeElement som man ikke har tilgang til. b. Man prøver å signere et ReporteeElement som står i feil status. (For eksempel Utfylling.)   60035 Man har prøvd å signere og arkivere et ReporteeElement som allerede er arkivert.   60036 Denne brukeren har allerede signert dette ReporteeElementet.    Workflow.GetAvailableActionsV2 Denne operasjonen returnerer hvilken handling som er mulig å utføre for en gitt innsendingstjeneste i Altinn. Dette er basert på hvilket steg i arbeidsflyten tjenesten befinner seg på, samt hvilke rettigheter bruker i sluttbrukersystemet har. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Angir element i Altinn   Returverdi Beskrivelse   userCurrentAction UserCurrentActionV2-objektet vil inneholde en av seks mulige handlinger: NoAction, Sign, FormFilling, SendIn, SignAndSendIn, DoSignDelegation, Delegering for brukerstyrt signering    Workflow.GetNextWorkflowStateTypeInProcessFlowV2 Denne operasjonen returnerer neste steg (steget etter gjeldende steg) i arbeidsflyt for en gitt innsendingstjeneste. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reporteeElementID Angir element i Altinn.   Returverdi Beskrivelse   userCurrentAction UserCurrentActionV2-objektet vil inneholde en av seks mulige handlinger: NoAction, Sign, FormFilling, SendIn, SignAndSendIn, DoSignDelegation, Delegering for brukerstyrt signering    Workflow.GetProcessDetailsV2 Denne operasjonen returnerer alle steg i arbeidsflyten for en gitt innsendingstjeneste; både steg som allerede er utført og steg som skal utføres. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reporteeElementID Angir element i Altinn   Returverdi Beskrivelse   processDetailsList En liste med ProcessDetailsBEV2-objekter, som inneholder detaljer for alle steg for gitte innsendingstjeneste    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ProcessDetailsBEV2    SequenceNumber Sekvensnummer i arbeidsflyt for gjeldende steg   ProcessStepId Unik identifikator for steget   ActivityTypeId Angir type steg: FormFilling, Signing, SendIn   UserId Identifikator for bruker som har gjennomført steget (dersom steget er gjennomført av bruker)   ServiceOwnerId Identifikator for tjenesteeier som har gjennomført steget (dersom steget er gjennomført av tjenesteeier).   EndUserSystemID Identifikator for sluttbrukersystem som har gjennomført steget (dersom steget er gjennomført av sluttbrukersystem).   ReporteeId Identifikator for avgiver for tjenesten   ReporteeName Navn på avgiver   CreatedDateTime Dato og tidspunkt for når tjenesten kom til gjeldende steg (yyyy-MM-ddThh:mm:ss)   IsCurrentStep Angir om dette steget er gjeldende steg i arbeidsflyt for innsendingstjeneste   LastModifiedDate Dato og tidspunkt for når det sist ble gjort endringer på tjenesten for dette steget (yyyy-MM-ddThh:mm:ss)   IsOptionalSigningStep Angir om signering er valgfritt for prosessen   IsOptionalSigningStepIndicator Angir om signering er valgfritt for steget   ParallelSigningSeqNumber Angir stegnummeret et eventuelt brukerstyrt signeringssteg har i arbeidsflyten for tjenesten    Workflow.GetProcessDetailsBasicV3 Denne operasjonen returnerer alle steg i arbeidsflyten for en gitt innsendingstjeneste; både steg som allerede er utført og steg som skal utføres. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     reporteeElementID Angir element i Altinn   Returverdi Beskrivelse   processDetailsList En liste med ProcessDetailsBEV3-objekter, som inneholder detaljer for alle steg for gitte innsendingstjeneste    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ProcessDetailsBEV2    SequenceNumber Sekvensnummer i arbeidsflyt for gjeldende steg   ProcessStepId Unik identifikator for steget.   ActivityTypeId Angir type steg: FormFilling, Signing, SendIn, Deleted   UserId Identifikator for bruker som har gjennomført steget (dersom steget er gjennomført av bruker).   ServiceOwnerId Identifikator for tjenesteeier som har gjennomført steget (dersom steget er gjennomført av tjenesteeier).   EndUserSystemID Identifikator for sluttbrukersystem som har gjennomført steget (dersom steget er gjennomført av sluttbrukersystem).   ReporteeId Identifikator for avgiver for tjenesten.   ReporteeName Navn på avgiver.   CreatedDateTime Dato og tidspunkt for når tjenesten kom til gjeldende steg (yyyy-MM-ddThh:mm:ss).   IsCurrentStep Angir om dette steget er gjeldende steg i arbeidsflyt for innsendingstjeneste.   LastModifiedDate Dato og tidspunkt for når det sist ble gjort endringer på tjenesten for dette steget (yyyy-MM-ddThh:mm:ss).   IsOptionalSigningStep Angir om signering er valgfritt for prosessen   IsOptionalSigningStepIndicator Angir om signering er valgfritt for steget   ParallelSigningSeqNumber Angir stegnummeret et eventuelt brukerstyrt signeringssteg har i arbeidsflyten for tjenesten.    Workflow.GetSigningText Denne operasjonen henter ut signeringsteksten for et element i Altinn. Språkkoden angir hvilket språk man ønsker teksten på. Dersom valgt språk ikke støttes for denne tjenesten vil teksten returneres på default språk.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   externalServiceCode Tjenestekode (for eksempel ”PSA”) for tjenesten som skjemasettet tilhører. Settes bare hvis reporteeElementID er ukjent.   externalServiceEditionCode Tjenesteutgavekode (for eksempel ”2009”) for tjenesten som skjemasettet tilhører. Settes sammen med externalServiceCode.   reporteeElementID Angir element i Altinn. Settes ikke hvis externalServiceCode/ externalServiceEditionCode er satt.   languageID Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   Returverdi Beskrivelse   tekst Signeringstekst    Workflow.SetBackToFormFilling Denne operasjonen kan kalles fra et sluttbrukersystem for å sette en innsendingstjeneste i Altinn tilbake til utfyllingssteg.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Angir element i Altinn   Returverdi Beskrivelse   N/A     Workflow.PrepareUserControlledSigning Denne operasjonen benyttes for å forberede det brukerstyrte signeringssteget for en innsendingstjeneste.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Angir elementet i Altinn   delegatedUserBEList Liste med DelegatedUserBE som angir hvilke brukere som kan signere det brukerstyrte signeringssteget   parallelSigningStepLocked Angir om det brukerstyrte steget skal være låst eller ei, kan kun brukes av ”Trusted partner”   userDefinedNumberOfSignaturesRequired Angir antallet signaturer som kreves for det brukerstyrte signeringssteget   Returverdi Beskrivelse   N/A N/A    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     DelegatedUserBE    SSN Fødselsnummer for bruker som skal signere.   Name Og etternavn til bruker som skal signere.   NumberOfSignaturesAllowed Antall signaturer denne kan gjøre.    Workflow.GetProcessStepIDForParallelSigning Denne operasjonen benyttes for å hente prosess steg ID for det brukerstyrte signeringssteget.\nTabellen under beskriver datakontrakten for operasjonen.\n   userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres     userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Angir elementet i Altinn   Returverdi Beskrivelse   Id ID til det brukerstyrte signeringssteget, returneres 0 betyr det at valgt element ikke har et brukerstyrt signeringssteg    Workflow.GetSigningSummaryHTML Operasjon innført av webSA for å kunne understøtte samme funksjonaliteten som man har i Altinn I, med visning av kvitteringssammendrag på signeringssiden/signeringssteget, og ikke bare på kvitteringssiden etter arkivering.\nTabellen under beskriver datakontrakten for operasjonen.\n   userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres     userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   reporteeElementID Angir elementet i Altinn   Returverdi Beskrivelse   GetSigningSummaryHTMLBasicResult Returnerer kvitteringssammendrag for en innsendingstjeneste tilsvarende som i portal    PrefillEUSExternal\n   Tjenesteoperasjon Kort beskrivelse     GetPrefillData Henter preutfyllingsdata for angitt avgiver og tjenesteutgave, og returnerer preutfyllingsdata    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nPrefillEUSExternal.GetPrefillData Denne operasjonen kan kalles fra et sluttbrukersystem for å hente preutfyllingsdata for en gitt avgiver og tjenesteutgave.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   ReporteeNumber Fødselsnummer eller organisasjonsnummer det skal hentes ut prefill for   ExternalServiceCode Tjenestekode for tjenesten som skjemasettet tilhører   ExternalServiceEditionCode Tjenesteutgavekode for tjenesten som skjemasettet tilhører   Returverdi Beskrivelse   preFillData Objekt av typen PreFillDataBE, som inneholder status på hvorvidt preutfyllingsdata ble funnet eller ikke, samt en liste med objekter av typen PreFillFormFieldDataBE, som inneholder selve preutfyllingsdataene og andre metadata.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     PreFillDataBE    Status Status som angir om preutfyllingsdata ble funnet eller ikke. Mulige statuser er: INVALIDINPUT - Input er ikke valid, PREFILLDATAFOUND - Preutfyllingsdata ble funnet og returnert, PREFILLDATANOTFOUND - Ingen gyldige preutfyllingsdata ble funnet   PreFillFormTaskBEList Liste med objekter av typen PrefillFormTaskBE   PrefillFormTaskBE    ExternalServiceCode Angir den unike tjenestekoden dataene gjelder   ExternalServiceEditionCode Angir tjenesteutgavekode dataene gjelder   ExternalShipmentReference Unik referanse som settes av tjenesteeier for å identifisere forsendelsen   IdentityFieldHashCode Settes ikke av tjenesteeier. Brukes internt i Altinn   PreFillAttachments Liste (PrefillAttachmentBE-objekter) som inneholder binære vedlegg for oppgavesettet   PreFillForms Liste (PrefillFormBE-objekter) som inneholder preutfylte skjema og metadata for et oppgavesett, ett skjema per objekt   PreFillIdentityFields Liste (PrefillIdentityFieldBE-objekter) som inneholder identifiserende felter for det preutfylte oppgavesettet   PrefillNotifications Liste (NotificationBE-objekter) med varsler for det preutfylte oppgavesettet   ReceiversReference Referanse som settes av Altinn   Reportee Fødselsnummer eller organisasjonsnummer som identifiserer hvem dataene gjelder   SendersReference Referanse på preutfylt skjemasett som settes av tjenesteeier   ServiceOwnerCode Kode som unikt representerer kildesystem, f.eks. ”ABC-123”. Format: XXX_YYYY. De tre første bokstavene er påkrevd og representerer tjenesteeier. De etter understreken representerer avdeling/system, og er valgfritt hvis det ikke finnes flere avdelinger/systemer innenfor samme tjenesteeier.   ValidFromDate Angir fra når preutfyllingsdata er gyldig (yyyy-MM-dd)   ValidToDate Angir til når preutfyllingsdata er gyldig (yyyy-MM-dd)   PrefillAttachmentBE    AttachmentData Data for det binære vedlegget.   AttachmentName Dette er navnet på vedlegget, som det vises i portalen.   AttachmentType MIME-typen for vedlegget   FileName Navn på fil for det binære vedlegget. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   SendersReference Referanse for vedlegget. Settes av tjenesteeier   PrefillFormBE    DataFormatID Id til skjema fra metadata kilde   DataFormatVersion Versjon til skjema fra metadata kilde   FormDataXML Preutfyllingsdata for skjemaet. En CDATA blokk   SendersReference Referanse for skjemaet satt av tjenesteeier   PreFillIdentityFieldBE    FieldValue Verdi for identifiserende felt, som benyttes for å skille preutfyllingsdata for samme tjenesteutgave og avgiver fra hverandre   NotificationBE    FromAddress Avsender adresse (e-post). Hvis ikke satt benyttes avsenderadresse satt i varselmalen   ShipmentDateTime Når varsel skal sendes til mottaker   LanguageCode Språk kode: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   NotificationType En unik streng som definerer en referanse til predefinerte varslingstekster   TextTokens Liste av tekster som skal erstatte maltekst i varselmal   ReceiverEndPoints Liste av mottaker adresser (ReceiverEndPointBE)   ReceiverEndPoint    ReceiverAddress Adressen (telefonnummer eller e-postadresse) for mottakspunktet   TransportType Type varsling: Email, SMS, Instant Message (IM), Both email \u0026amp; sms   TextTokenSubstitutionBE    TokenNum Id på maltekst som skal erstattes i varselmal. Varselmal må bestilles og lages på forhånd   TokenValue Tekst som skal ersatte maltekst    PrefillEUSExternal.GetPrefillDataV2 Denne operasjonen kan kalles fra et sluttbrukersystem for å hente preutfyllingsdata for en gitt avgiver og tjenesteutgave.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn.   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   ReporteeNumber Fødselsnummer eller organisasjonsnummer det skal hentes ut prefill for   ExternalServiceCode Tjenestekode for tjenesten som skjemasettet tilhører   ExternalServiceEditionCode Tjenesteutgavekode for tjenesten som skjemasettet tilhører   PrefillList SBS kan be om preutfylling for spesifikke skjema/underskjema med en opsjonell liste over ønskede skjema. Listen inneholder verdi/verdier som refererer til skjema basert på dets DataFormatID. Det skal ikke være nødvendig å måtte angi DataFormatVersion siden man allerede kjenner til ExternalServiceCode, ExternalServiceEditionCode + DataFormatID, som gir nok informasjon til å finne det aktuelle (under-)skjema. Merk at dette er en liste, slik at man kan hente preutfylling for flere skjema samtidig   PrefillList.DataFormatID Liste med en eller flere verdier. Verdien peker på hvilket skjema i et skjemasett man ønsker å hente preutfylling for   returnAllFormTasks Verdi for å bestemme om Altinn skal returnere alle gyldige skjemaset eller kun det siste. Dersom verdien ikke er definert eller er definert til ‘false’ så returneres kun siste skjemasettet som er preutfylt. Dersom verdien er definert til ‘true’ så returneres de etterspurte skjemaene i alle gyldige preutfylte skjemaset. Det er kun i tilfeller der det er prefill på skjemanivå at det kan returneres mer en ett oppgavesett.   Returverdi Beskrivelse   preFillData Objekt av typen PreFillDataBE, som inneholder status på hvorvidt preutfyllingsdata ble funnet eller ikke, samt en liste med objekter av typen PreFillFormFieldDataBE, som inneholder selve preutfyllingsdataene og andre metadata    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     PreFillDataBE    PrefillDataFound Samlestatus: Angir om det finnes eller ikke finnes Preutfylling (Tilsvarer: SOPrefillDataFound or RegisterPrefillDataFound)   SOPrefillDataFound Angir om det finnes eller ikke finnes Preutfylling fra tjenesteeier   RegisterPrefillDataFound Angir om det finnes eller ikke finnes Preutfylling fra Register   PreFillFormTaskBEList Liste med objekter av typen PrefillFormTaskBE   PrefillFormTaskBE    ExternalServiceCode Angir den unike tjenestekoden dataene gjelder   ExternalServiceEditionCode Angir tjenesteutgavekode dataene gjelder   ExternalShipmentReference Unik referanse som settes av tjenesteeier for å identifisere forsendelsen   IdentityFieldHashCode Settes ikke av tjenesteeier. Brukes internt i Altinn   PreFillAttachments Liste (PrefillAttachmentBE-objekter) som inneholder binære vedlegg for oppgavesettet   PreFillForms Liste (PrefillFormBE-objekter) som inneholder preutfylte skjema og metadata for et oppgavesett, ett skjema per objekt   PreFillIdentityFields Liste (PrefillIdentityFieldBE-objekter) som inneholder identifiserende felter for det preutfylte oppgavesettet   PrefillNotifications Liste (NotificationBE-objekter) med varsler for det preutfylte oppgavesettet   ReceiversReference Referanse som settes av Altinn   Reportee Fødselsnummer eller organisasjonsnummer som identifiserer hvem dataene gjelder   SendersReference Referanse på preutfylt skjemasett som settes av tjenesteeier   ServiceOwnerCode Kode som unikt representerer kildesystem, f.eks. ”ABC-123”. Format: XXX_YYYY. De tre første bokstavene er påkrevd og representerer tjenesteeier. De etter understreken representerer avdeling/system, og er valgfritt hvis det ikke finnes flere avdelinger/systemer innenfor samme tjenesteeier.   ValidFromDate Angir fra når preutfyllingsdata er gyldig (yyyy-MM-dd)   ValidToDate Angir til når preutfyllingsdata er gyldig (yyyy-MM-dd)   PrefillAttachmentBE    AttachmentData Data for det binære vedlegget   AttachmentName Dette er navnet på vedlegget, som det vises i portalen   AttachmentType MIME-typen for vedlegget   FileName Navn på fil for det binære vedlegget. Filavnet kan ikke inneholde tegn som \u0026ldquo;:\u0026rdquo; og \u0026ldquo;\\\u0026ldquo;.   SendersReference Referanse for vedlegget. Settes av tjenesteeier   PrefillFormBE    DataFormatID Id til skjema fra metadata kilde   DataFormatVersion Versjon til skjema fra metadata kilde   FormDataXML Preutfyllingsdata for skjemaet. Dataene er lagret som en CDATA blokk. Preutfyllingsdata omfatter eventuell oppgavesettpreutfylling, eventuell feltpreutfylling og eventuell registerpreutfylling   SendersReference Referanse for skjemaet satt av tjenesteeier   PreFillIdentityFieldBE    FieldValue Verdi for identifiserende felt, som benyttes for å skille preutfyllingsdata for samme tjenesteutgave og avgiver fra hverandre   NotificationBE    FromAddress Avsender adresse (e-post). Hvis ikke satt benyttes avsenderadresse satt i varselmalen   ShipmentDateTime Når varsel skal sendes til mottaker   LanguageCode Språk kode: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   NotificationType En unik streng som definerer en referanse til predefinerte varslingstekster   TextTokens Liste av tekster som skal erstatte maltekst i varselmal   ReceiverEndPoints Liste av mottaker adresser (ReceiverEndPointBE)   ReceiverEndPoint    ReceiverAddress Adressen (telefonnummer eller e-postadresse) for mottakspunktet   TransportType Type varsling: Email, SMS, Instant Message (IM), Both email \u0026amp; sms   TextTokenSubstitutionBE    TokenNum Id på maltekst som skal erstattes i varselmal. Varselmal må bestilles og lages på forhånd   TokenValue Tekst som skal ersatte maltekst    Case\n   Tjenesteoperasjon Kort beskrivelse     GetCaseList Henter en liste med detaljer for aktive samhandlingstjenester. Operasjonen kan også kalles for å hente ut detaljer for én spesifikk samhandlingstjeneste   InstantiateCollaboration Oppretter en ny samhandlingstjeneste og starter arbeidsflyten for tjenesten   ArchiveCase Avslutter arbeidsflyten for en samhandlingstjeneste    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nCase.GetCaseList Operasjonen kan benyttes for å hente ut en liste med detaljer for aktive samhandlingstjenester eller detaljer for én spesifikk samhandlingstjeneste.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   caseID Unik identifikator for en samhandlingstjeneste   externalServiceCode Unik tjenestekode for en tjeneste   externalServiceEditionCode Unik kode for en tjenesteutgave   languageID Språk id. Benytt verdien 0 (uspesifisert) da skjemasett vil hentes med språket den ble arkivert med. Språk id: 1033-English, 1044-Bokmål, 1083-Samisk, 2068-Nynorsk   reporteeNumber Fødselsnummer eller organisasjonsnummer for de tjenester man ønsker å hente ut   Returverdi Beskrivelse   CaseBEList En liste med objekter av typen CaseBE    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     CaseBE    CaseID Identifikator for samhandlingstjenesten.   CaseName Samhandlingstjenestens navn.   Comments Kommentarer på samhandlingstjenesten.   CurrentStateFriendlyName Visningsvennlig navn på samhandlingstjenestens tilstand.   CurrentStateID Identifikator for samhandlingstjenestens tilstand.   CurrentStateName Navn på samhandlingstjenestens tilstand.   Notice Merknad på samhandlingstjenesten.   NoticeTemplateID Identifikator for merknaden på samhandlingstjenesten    Tabellen under angir mulige feilkoder for operasjonen:\n   60001 Angitt CaseID er ikke gyldig     60002 Enten tjenestekode og tjenesteutgavekode eller identifikator for samhandlingstjeneste må angis   60012 Angitt avgiver er ikke gyldig   60014 Angitt CaseID er arkivert   60015 Angitt CaseID er slettet    Case.InstantiateCollaboration Denne operasjonen kan kalles fra et sluttbrukersystem for å opprette en instans av en samhandlingstjeneste.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   externalServiceCode Tjenestekode for type samhandlingstjenesten som skal opprettes   externalServiceEditionCode Tjenesteutgavekode for type samhandlingstjenesten som skal opprettes   reporteeNumber Fødselsnummer eller organisasjonsnummer samhandlingstjeneste instansen skal opprettes for   externalSystemReference Unik referanse for samhandlingstjenesten   visibleDateTime Dato for når samhandlingstjenesten blir synlig i portal (yyyy-MM-dd)   dueDate Samhandlingstjenestens frist angis her (yyyy-MM-dd)   Returverdi Beskrivelse   CaseId Identifikator for den opprettede samhandlingstjeneste instansen    Tabellen under angir mulige feilkoder for operasjonen:\nCase.ArchiveCase Denne operasjonen kan kalles fra et sluttbrukersystem for å arkivere en samhandlingstjeneste.\nSluttbrukersystemet kan velge å angi at samhandlingstjenesten skal arkiveres uavhengig av om tjenestene som tilhører samhandlingstjenesten er arkivert. Dette vil medføre at tilhørende tjenester vil frikobles fra samhandlingstjenesten.\n   Input Beskrivelse     userSSN Fødselsnummer til bruker i sluttbrukersystemet som skal autentiseres   userPassword Passordet bruker (i sluttbrukersystemet) har registrert for sin bruker i Altinn   userPinCode Pinkode for valgt engangskodetype (authMethod)   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   caseID Unik identifikator for samhandlingstjenesten som skal arkiveres   forceArchive Angir om elementer som ikke er klare for å arkiveres sammen med samhandlingstjenesten skal frikobles   Returverdi Beskrivelse   ArchivedCaseID Arkiv identifikator for den arkiverte samhandlingstjenesten    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     60001 Angitt CaseID er ikke gyldig   60006 Samhandlingstjenesten har fremdeles aktive meldingstjenester   60007 Samhandlingstjenesten har fremdeles aktive innsendingstjenester   60013 Angitt samhandlingstjeneste er ikke gyldig, eller har blitt arkivert/slettet    KeyManagement    Tjenesteoperasjon Kort beskrivelse     GetCertificates Henter offentlig sertifikat for tjenesteeiere relatert til en tjeneste som støtter kryptering av sensitiv informasjon    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nKeyManagement.GetCertificates Operasjonen kan benyttes for å hente ut en liste med offentlige sertifikater for tjenesteeiere tilhørende tjeneste som støtter kryptering av sensitiv informasjon.\n   Input Beskrivelse     externalServiceCode Unik tjenestekode for en tjeneste   externalServiceEditionCode Unik kode for en tjenesteutgave   Returverdi Beskrivelse   CertificateBEList En liste med objekter av typen CertificateBE    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     CertificateBE    Certificate Det offentlige sertifikatet for tjenesteeieren som skal benyttes til å kryptere sensitiv informasjon   CertificateId Unik identifikator for sertifikatet, benyttes til å identifisere hvilket sertifikat det er brukt ved innsending   ServiceOwnerId Unik identifikator på tjenesteeieren sertifikatet tilhører    SystemAuthentication    Tjenesteoperasjon Kort beskrivelse     GetAuthenticationChallenge Autentiserer bruker, og returnerer engangskode for tjenestekall    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nSystemAuthentication.GetAuthenticationChallenge For å sikre autentisering av en person i Altinn gjennom web service operasjonskall benyttes et tjenestekall som tar i mot informasjon om hvilken bruker som skal autentiseres. Web servicen sender tilbake en melding om hvilken engangskode basert på input om hvilke autentiseringsmetode som ønsker benyttes. Den identifiserte engangskoden operasjonen gir beskjed om i respons må da benyttes ved neste tjenestekall. (Se avsnitt om autentisering og hvordan benytte denne web service operasjonen)\nDenne tjenesten vil gi tilbakemelding om hvilken engangskode som skal benyttes og også sende en engangskode per SMS hvis dette er valgt autentisering metode.\n   Input Beskrivelse     challengeRequest Objekt av typen AuthenticationChallengeRequestBE som representerer hvem som ønsker tilgang   Returverdi Beskrivelse   autenticationChallenge Objekt av typen AuthenticationChallengeBE med info om autentiseringstatus, forteller om kallet var suksess eller ikke:    Hvis meldingen inneholder ”OK” så er forespørsel OK og teksten i Message-feltet i denne responsen gir mer informasjon til bruker    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     AuthenticationChallengeRequestBE    SystemUserName Id eller brukernavn som unikt identifiserer sluttbrukersystemet eller brukeren i Altinn.   UserSSN Fødselsnummer til bruker i sluttbrukersystemet eller brukernavnet som skal autentiseres   UserPassword Passordet person har registrert for sin bruker i Altinn   AuthMethod Angir hvilken engangskodetype bruker ønskes utfordret på   AuthenticationChallengeBE    Status Status på forespørsel:   Message Informasjon utover status   ValidFrom Tidspunkt pin de gyldig fra   ValidTo Tidspunkt pin utløper    ArchiveCommonExternal\n   Tjenesteoperasjon Kort beskrivelse     GeneratePaymentInformation Genererer betalingsinformasjon i xml-format til sluttbrukersystem.    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nArchiveCommonExternal.GetPaymentInformation Denne operasjonen genererer betalingsinformasjon i xml-format til sluttbrukersystem.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     systemUserName Id som unikt identifiserer sluttbrukersystemet eller brukernavnet i Altinn   systemPassword Passord til sluttbrukersystemet eller brukernavnet i Altinn   userSSN Brukers fødselsnummer. Til bruk til autentisering ved evt. Signering   userPassword Brukers passord. Til bruk til autentisering ved evt. Signering   userPinCode Pinkode. Til bruk til autentisering ved evt. signering   authMethod Angir hvilken engangskodetype bruker (i sluttbrukersystemet) vil autentiseres med. Gyldige typer for denne verdien er: AltinnPin, SMSPin   dataFormatID Dataformat   reportee Fødselsnummer eller organisasjonsnummer   year År man ønsker å hente ut betalingsinfo fra   periodeNumber Periode man ønsker å hente ut betalingsinfo fra. Denne verdien er avhengig av hvilken verdi parameteren periodeType har. F.eks for periodType=1 er kun 1 gyldig,da det er kun 1 periode for årlig innrapportering. For periodeType=2 er 1 og 2 som er gyldige, for periodeType=3 er det 1,2 og 3 de gyldige verdiene, osv   periodeType Type innrapporteringsperiode. Denne kan ha følgende verdier: 1 - årlig,2 - halvårlig,3 - hver 4 måned, 4 - kvartalsvis, 5 - annenhver måned, 6 - månedlig, 26 - annenhver uke, 52 - ukentlig, 365 - daglig   municipalNumber Kommunenummer   formType Type skjema. Kan være 1 - tillegsoppgave, 2 - endringsoppgave og 3 - hovedoppgave   externalServiceCode Unik tjenestekode for en tjeneste   externalServiceEditionCode Unik kode for en tjenesteutgave    BrokerService – Formidlingstjenester (WS)    Tjenesteoperasjon Kort beskrivelse     GetAvailableFiles Henter en avgivers tilgjengelige formidlingstjenester med metadata og referanse for nedlasting   InitiateBrokerService Forbereder opprettelse av en formidlingstjeneste ved å sende inn nødvendig metadata, hvorpå fil kan strømmes opp.   UploadFileStreamed Strømmer opp fil for en gitt referanse basert på opprettelse av formidlingstjeneste   DownloadFileStreamed Strømmer ned fil for formidlingstjeneste basert på referanse    Se avsnittet URI til alle Altinn tjenester / aliasoversikt for endepunkter kapittel 8.3 for informasjon om endepunkter for tjenesteoperasjonene.\nBrokerService.GetAvailableFiles Operasjonen henter ut tilgjengelige formidlingstjenester som en mottaker kan laste ned.\nListen med filer vil bli filtrert basert på rettigheter.\n Innlogget system må ha rettighetene som kreves for å kunne lese elementer (på tjenesten) på vegne av avgiver. Avgiver må fortsatt ha lese rettigheter på tjenesten. (Kan ha mistet rettighetene etter at filen ble opprettet.) Innlogget bruker har riktig autentiseringsnivå. For eksempel vil data system innlogging gi nivå 2. Dette vil skjule filer fra tjenester som krever nivå 3.  Hvis en eller flere av disse testene ikke går ok så vil filene det gjelder bli skjult for brukeren. Metoden vil ikke gi noen feilmelding på dette.\n   Input Beskrivelse     searchParameters Objekt av typen BrokerServiceSearch som representerer søkekriteriene for oppslaget mot formidlingstjenestene   Returverdi Beskrivelse   BrokerServiceAvailableFileList Objekt av typen BrokerServiceAvailableFileList som inneholder en liste over tilgjengelige formidlingstjenester med informasjon som passer søkekriteriene    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     BrokerServiceSearch    Reportee Angir for hvilken avgiver formidlingstjenestene skal sjekkes for. Påkrevd felt.   FileStatus Angir status for formidlingstjenesten det skal søkes for. Mulige verdier er: Uploaded – betyr at formidlingstjenesten er lastet opp av avsender og tilgjengelig for nedlasting. Downloaded – betyr at formidlingstjenesten allerede er lastet ned fra Altinn, men fremdeles tilgjengelig for nedlasting. Feltet er påkrevd   ExternalServiceCode Angir tjenestekoden til formidlingstjenesten det skal søkes etter. Må benyttes i sammenheng med ExternalServiceEditionCode. Feltet er valgfritt.   ExternalServiceEditionCode Angir tjenesteutgavekoden til formidlingstjenesten det skal søkes etter. Må benyttes i sammenheng med ExternalServiceCode. Feltet er valgfritt.   MinSentDateTime Angir dato og klokkeslett for å begrense resultatsett av formidlingstjenester sent inn etter angitt tidspunkt, (yyyy-MM-ddThh:mm:ss).   MaxSentDateTime Angir dato og klokkeslett for å begrense resultatsett av formidlingstjenester sent inn før angitt tidspunkt, (yyyy-MM-ddThh:mm:ss).   BrokerServiceAvailableFile    FileReference Filreferanse på GUID format som benyttes til å laste ned formidlingstjenesten ved bruk av BrokerServiceStreamed.DownloadFileStreamed (se 6.14.4)   FileName Filnavnet til formidlingstjenesten   FileSize Størrelsen på filen til formidlingstjenesten   ReceiptID Identifikator for kvitteringen tilhørende denne forsendelsen og mottaker. Dette er en underkvittering til hoved-kvitteringen sender forholder seg til.   FileStatus Viser status for formidlingstjenesten. Mulige verdier er: Uploaded – betyr at formidlingstjenesten er lastet opp av avsender og tilgjengelig for nedlasting. Downloaded – betyr at formidlingstjenesten allerede er lastet ned fra Altinn, men fremdeles tilgjengelig for nedlasting   Reportee Organisasjonsnummer eller fødselsnummer som representerer avsenderen av formidlingstjenesten   SentDate Viser dato og klokkeslett for når formidlingstjenesten ble sent til Altinn, (yyyy-MM-ddThh:mm:ss)   ExternalServiceCode Angir tjenestekoden til formidlingstjenesten   ExternalServiceEditionCode Angir tjenesteutgavekoden til formidlingstjenesten   SendersReference Angir en referanse for formidlingstjenesten satt av avsender   IsSftpDownloadOnly Dette feltet angir om formidlingstjenesten kun kan lastes vha. SFTP kanalen på grunn av størrelsen    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     40210 Tjenestekoder, ExternalServiceCode og/eller ExternalServiceEditionCode, mangler eller er satt til 0   40214 Verdi for avgiver er ikke på forventet format for organisasjonsnummer eller fødselsnummer    BrokerService.InitiateBrokerService Denne operasjonen starter prosessen for å laste opp en ny formidlingstjeneste. Avsender må starte med å laste opp metadata om tjenesten og hvem som skal motta. Når Altinn har verifisert dette vil mottaker få en referanse som videre benyttes for å laste opp selve payloaden.\n   Input Beskrivelse     brokerServiceInitiation Objekt av typen BrokerServiceInitiation som representerer informasjon tilsvarende manifest.xsd (se 6.15.1) og mottakere (se 6.15.2) for formidlingstjenesten.   Returverdi Beskrivelse   string Referanse på GUID format som benyttes for opplasting gjennom BrokerServiceStreamed.UploadFileStreamed (se 6.14.3)    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     BrokerServiceInitiation    Manifest Objekt av typen Manifest. Feltet er påkrevd   RecipientList Liste med objekter av typen BrokerServiceRecipientExternalBE. Feltet er påkrevd   Manifest    ExternalServiceCode Angir tjenestekoden til formidlingstjenesten som skal opprettes. Feltet er påkrevd   ExternalServiceEditionCode Angir tjenesteutgavekoden til formidlingstjenesten som skal opprettes. Feltet er påkrevd   SendersReference Referanse som formidlingstjenesten skal knyttes til. Bør være unik. Feltet er påkrevd   Reportee Organisasjonsnummer eller fødselsnummer som angir avgiver for formidlingstjenesten. Feltet er påkrevd   FileList Liste av objekter av typen File. Ment for å kunne utveksle informasjon om innholdet i formidlingstjenesten etter avtale mellom avsender og mottaker – innhold valideres eller endres ikke av Altinn. Feltet er ikke påkrevd   PropertyList Liste av objekter av typen Property. Ment for å kunne utveksle ytterlige egenskaper om formidlingstjenesten med nøkkel og verdi etter avtale mellom avsender og mottaker – innhold valideres eller endres ikke av Altinn. Feltet er ikke påkrevd   File    FileName Ment for å kunne angi filnavn. Feltet er påkrevd   CheckSum Ment for å kunne angi sjekksummen for fil   Property    PropertyKey Nøkkel for egenskap. Feltet er påkrevd   PropertyValue Verdi for egenskapen definert. Feltet er påkrevd   Recipient    PartyNumber Organisasjonsnummer eller fødselsnummer for ønsket mottaker av formidlingstjenesten. Feltet er påkrevd    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     40201 Den aktuelle avgiveren har ikke rettigheter til å sende formidlingstjenesten   40202 En eller flere av mottakerne oppgitt finnes ikke, eller har ikke nok rettigheter til å motta formidlingstjenesten   40210 Tjenestekoder, ExternalServiceCode og/eller ExternalServiceEditionCode, mangler eller er satt til 0 og angir ikke en formidlingstjeneste   40211 Bruker er ikke autorisert til å utføre aktuell handling   40216 Brukeren er på et sikkerhetsnivå lavere enn påkrevd    BrokerServiceStreamed.UploadFileStreamed Operasjonen benyttes for å strømme formidlingstjenestens innhold til Altinn basert på en referanse mottatt gjennom kallet til BrokerService.InitiateBrokerService.\n   Input Beskrivelse     StreamedPayloadExternalBE[1] Objekt av typen StreamedPayloadExternalBE som inneholder informasjon og selve stream av fil som opplastes   Returverdi Beskrivelse   ReceiptExternalStreamedBE Objekt av typen ReceiptExternalStreamedBE som inneholder detaljer for kvitteringen    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     StreamedPayloadExternalBE    Reference Angir referansen payload skal knyttes til. Denne referansen mottas gjennom kallet til InitiateBrokerService, se 6.14.2. Feltet er påkrevd   Reportee Organisasjonsnummer eller fødselsnummer som angir avgiver for formidlingstjenesten. Feltet er påkrevd   FileName Navnet på filen som skal lastes opp.   DataStream Datastrømmen for fil som lastes opp   ReceiptExternalStreamedBE    ReceiptId Unik identifikator for kvitteringen i Altinn. Benyttes for eksempel ved senere oppdatering av kvittering   ReceiptText Tekst i kvitteringen som angir vellykket opplasting: “Upload of file {filnavn} was successful. Recipients can now download the file.” Eventuelle feil vil returneres som AltinnFaults   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptTypeName Angir hva kvittering gjelder. Vil i bruk på denne operasjonen alltid returnere BrokerService   ReceiptStatusCode Status for forsendelse som kvitteringen gjelder: OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering). For denne operasjonen vil den alltid være 0    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     40201 Den aktuelle avgiveren har ikke rettigheter til å sende formidlingstjenesten.   40204 Filen som lastes opp er for stor for opplasting over web service. Bruk SFTP istedenfor.   40205 Ingen data for fil ble mottatt.   40206 Filen som er mottatt er ikke på forventet ZIP-format.   40208 En fil er allerede lastet opp på den angitte referansen.   40209 Opplastet fil er stoppet av virussjekk.   40211 Bruker er ikke autorisert til å utføre aktuell handling.   40212 Oppgitt filreferanse refererer ikke til en formidlingstjeneste.   40213 Angitt avgiver stemmer ikke med informasjon i Altinn.   40216 Brukeren er på et sikkerhetsnivå lavere enn påkrevd.    BrokerServiceStreamed.DownloadFileStreamed Operasjonen benyttes for å strømme formidlingstjenestens innhold fra Altinn til mottaker basert på en referanse for formidlingstjenesten som kan hentes ved å benytte BrokerService.GetAvailableFiles.\n   Input Beskrivelse     string fileReference Angir referansen for formidlingstjeneste som skal strømmes ned. Denne referansen hentes gjennom kallet GetAvailableFiles, se 6.14.1. Feltet er påkrevd.   string reportee Organisasjonsnummer eller fødselsnummer som angir avgiver for formidlingstjenesten. Feltet er påkrevd   Returverdi Beskrivelse   Stream Datastrømmen for formidlingstjenestefilen    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     40204 Filen som lastes ned er for stor for nedlasting over web service. Bruk SFTP istedenfor.   40207 Den gitte referansen har ikke fil klar for nedlasting.   40211 Bruker er ikke autorisert til å utføre aktuell handling.   40212 Oppgitt filreferanse refererer ikke til en formidlingstjeneste.   40213 Angitt avgiver stemmer ikke med informasjon i Altinn.   40215 Angir at mottaker ikke har nødvendige rettigheter til å laste ned formidlingstjenesten.   40216 Brukeren er på et sikkerhetsnivå lavere enn påkrevd    BrokerService.ConfirmDownloaded Operasjonen benyttes til å bekrefte at man har fått lastet ned en formidlingstjeneste fil i sin helhet. Operasjonen bør kalles rett etter at det er blitt gjort en nedlasting hvis dette gikk bra. Resultatet er at avsender kan se hvem av filens mottakere som har fått hentet filen.\n   Input Beskrivelse     string fileReference Angir referansen til filen som skal bekreftes nedlastet. Obligatorisk.   string reportee Organisasjonsnummer eller fødselsnummer som angir mottaker av filen. Obligatorisk    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     40211 Bruker er ikke autorisert til å utføre aktuell handling   40212 Oppgitt filreferanse refererer ikke til en formidlingstjeneste   40213 Angitt avgiver stemmer ikke med informasjon i Altinn   40215 Angir at mottaker ikke har nødvendige rettigheter   40216 Brukeren er på et sikkerhetsnivå lavere enn påkrevd    Formidlingstjenester (SFTP) Avsendere og mottakere av formidlingstjenester kan benytte seg av egen SFTP server på Altinn til å henholdsvis laste opp og ned filer. Som tidligere nevnt vil ikke Altinn forholde seg til eller validere ZIP-filen som lastes opp utover to nøkkelfiler i selve ZIP-filen.\nManifest.xml Denne må lastes opp som del av ZIP-filen og validere mot XSD som spesifisert under. Inneholder nøkkelinformasjon om hva slags type formidlingstjeneste det er, og hvem som er avsender. Enkelte felter vil bli oppdatert av Altinn i forbindelse med tilgjengeliggjøring til mottakere. Manifest filen vil være del av ZIP-pakken som mottaker laster ned.\n   Element Påkrevd Beskrivelse     BrokerServiceManifest Ja Rotnode   ExternalServiceCode Ja Angir tjenestekoden til formidlingstjenesten som skal benyttes   ExternalServiceEditionCode Ja Angir tjenesteutgavekoden til formidlingstjenesten som skal benyttes   SendersReference Ja Angir avsenders referanse, som kan benyttes til å søke opp kvittering   Reportee Ja Angir organisasjonsnummer eller fødselsnummer for avgiver   SentDate Nei Dato for når formidlingstjenesten ble mottatt av Altinn. Settes av Altinn, (yyyy-MM-ddThh:mm:ss)   FileList Nei Liste med filer i formidlingstjenesten. Kan angis av avsender. Avsender og mottaker(e) avtaler bruk, Altinn videreformidler kun informasjonen   File Nei Representerer en fil   FileName Ja Angir navn på fil   CheckSum Nei Angir checksum for filen   PropertyList Nei Liste med egenskaper i tilknytning til formidlingstjenesten. Kan angis av avsender. Avsender og mottaker(e) avtaler bruk, Altinn videreformidler kun informasjonen   Property Nei Representerer en egenskap   PropertyKey Ja Egenskapens nøkkel   PropertyValue Ja Egenskapens verdi    Recipients.xml Denne må lastes opp som del av ZIP-filen og validere mot XSD som spesifisert under. Benyttes av avsender til å angi hvem som skal være mottakere av formidlingstjenesten. Recipients filen vil av Altinn fjernes fra ZIP-pakken som mottaker kan laste ned.\n   Element Påkrevd Beskrivelse     BrokerServiceRecipientList Ja Rotnode   Recipient Ja Node for hver enkelt mottaker   PartyNumber Ja Angir organisasjonsnummer eller fødselsnummer for mottaker av formidlingstjenesten    LookUpExternal – Innsynstjenester (WS)\nExecuteLookUp Operasjonen benyttes for å utføre oppslag mot en innsynstjeneste i Altinn.\n   Input Beskrivelse     LookUpRequest Objekt av typen LookUpRequestExternalBE som spesifiserer tjeneste, reportee og spørring/input til innsynstjenesten   Returverdi Beskrivelse   ExecuteLookUpResult (string) Svar fra innsynstjenesten som en tekststreng    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten\n   Property Beskrivelse     LookUpRequest    QueryData Input/spørring til innsynstjenesten som en tekststreng   Reportee Organisasjonsnummer eller fødselsnummer som angir avgiver for innsynstjenesten. Feltet er påkrevd   ServiceCode Angir tjenestekoden til innsynstjenesten som skal benyttes. Feltet er påkrevd   ServiceEditionCide Angir tjenesteutgavekoden til innsynstjenesten som skal opprettes. Feltet er påkrevd    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     40028 Kombinasjonen av ServiceCode og ServiceEditionCode er ikke en gyldig innsynstjeneste   450067 Innsynstjenesten er ikke konfigurert med en Mapper og støtter derfor ikke direkte kall gjennom LookUpExternal eller REST API   450068 Returneres dersom LookUp Mapper returnerer «Bad Request» feil kode   450069 Returneres dersom LookUp Mapper returnerer «Forbidden» feil kode    AuthorizationExternal – TokenExternal (WS)\nGetAccessToken Operasjonen benyttes av for å veksle inn autorisasjonskoder, fra samtykke delegering av rettigheter, i en referanse token eller en JWT token.\n   Input Beskrivelse     AuthorizationCode (Guid) Authorisasjonskode (Guid) som skal veksles inn i en authorisasjons token   SelfContained (boolean) Boolsk verdi for om man ønsker en Self-Contained JWT token eller, en referanse token som retur verdi   Returverdi Beskrivelse   AuthorizationAccessTokenResponse Objekt av typen AuthorizationAccessTokenResponseExternalBE som inneholder enten en Referanse Token eller en Self-Contained JWT Token    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     AuthorizationAccessTokenResponse    ReferenceToken Referanse token som en Guid verdi, som kan benyttes opp mot AuthorizationDecisionPointExternal.AuthorizeAccessExternalV2 for å benytte regler knytt til ett spesifikt samtykke   SelfContainedToken Enkodet Self-Contained JWT token som en tekststreng, som kan benyttes som autorisasjon direkte mot tjenesteeiers systemer    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     50028 Brukes dersom authorisasjonskoden er ugyldig, eller koden ikke tilhører sluttbruker    Sammenheng mellom nye og gamle Altinn web services Nedenfor vises en oversikt som mapper web service grensesnitt tilgjengelige i AltinnI med de som tilbys i AltinnII versjon 1:\n   AltinnI operasjon AltinnII ver. 1 operasjon Kommentar AltinnII     DataExchange.ActiveForms ServiceMetadata.GetAvailableServices AltinnII er tjenesteorientert, ikke skjemaorientert.   DataExchange.AltInnStatus IntermediaryInbound.GetAltinnSubmissionStatus    DataExchange.BatchReceiptPw ReporteeArchiveExternal.GetArchivedFormTask AltinnII operasjonen henter kun skjemasett, ikke vedlegg   DataExchange.BatchReceiptPw ReporteeArchiveExternal.GetAttachmentData AltinnII operasjonen henter kun vedlegg, ikke skjemasett   DataExchange.GetSchemaDefinition ServiceMetadata.GetFormTaskSchemaDefinitions    DataExchange.RequestAuthenticationChallengePw SystemAuthentication. GetAuthenticationChallenge    DataExchange.RequestInfoText Workflow.GetSigningText    DataExchange.RequestPrefillData Prefill.GetPrefillData AltinnII versjon 2   DataExchange.SubmitBatchPw IntermediaryInbound.SubmitFormTask    MessageReceiptExchange.GetAltUtMessage Correspondence.GetCorrespondenceForEndUserSystemV2    N/A Correspondence.DeleteCorrespondence Ny web service operasjon i AltinnII   N/A Correspondence.SaveCorrespondenceConfirmation Ny web service operasjon i AltinnII   MessageReceiptExchange.GetAltUtMessageListForArchiveRef ReporteeElementList.GetCorrespondenceListForArchiveRef    MessageReceiptExchange.GetAltUtMessageListForParticipant ReporteeElementList.GetCorrespondenceListForReportee    N/A ReporteeElementList.DeleteReporteeElement Ny web service operasjon i AltinnII   N/A ReporteeElementList.GetFormSetElementsV2 Ny web service operasjon i AltinnII   N/A ReporteeElementList.GetReporteeElementListV2 Ny web service operasjon i AltinnII   MessageReceiptExchange.GetReceipt Receipt.GetReceipt    MessageReceiptExchange.GetReceiptList Receipt.GetReceiptList    N/A Receipt.UpdateReceipt Ny web service operasjon i AltinnII   N/A Workflow.DoSendingInAction Ny web service operasjon i AltinnII   N/A Workflow.DoSigning Ny web service operasjon i AltinnII   N/A Workflow.GetAvailableActionsV2 Ny web service operasjon i AltinnII   N/A Workflow.GetNextWorkflowStateTypeInProcessFlowV2 Ny web service operasjon i AltinnII   N/A Workflow.GetProcessDetailsV2 Ny web service operasjon i AltinnII   N/A Workflow.SetBackToFormFilling Ny web service operasjon i AltinnII    "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/mappere/installasjon/",
	"title": "Installasjon",
	"tags": [],
	"description": "Beskrivelse av hvordan man lager installasjonspakker og får dem installert i test og produksjon",
	"content": " Installasjon av mappere For å lage et installasjonsprosjekt til mapperen lager vi et Visual Studio Installer prosjekt av typen Web Setup. Vi kaller det SetupInternal.\n SetupInternal prosjektet:\n  Filesystem settes opp slik at:\nTemp katalogen legges CustomActions.dll og env_variables.csv\n I web Application Folder legges Mapper.svc og web.config,\n I tillegg er det viktig at VirtualDirectory er satt rett i properties:\n I bin legger Altinn.Mapper.Common.dll og Primary output from Services.\n I customActions editor må CustomActionData settes til:\n/Targets=[TARGETDIR]\\web.config /Environment=[ENVIRONMENT] /VariablesCSV=[TEMP]\\env_variables.csv:   User interface editor\n "
},
{
	"uri": "https://altinn.github.io/docs/guides/samtykke/begrepsliste/",
	"title": "Begrepsliste",
	"tags": [],
	"description": "Begrepsliste samtykke",
	"content": "   Begrep Forklaring     Altinn autorisering Verifisere at man har lov til å be om samtykke på en gitt tjeneste Opprette og vedlikeholde nødvendige autorisasjonstilganger Videresende sluttbruker til datakonsument Svare på autorisasjonsforespørsler    APIkey Application programming interface key en unik identifikator som det er knyttet tilgangsrettigheter til knyttes til datakonsument sitt organisasjonsnummer benyttes av datakonsument i tokenforespørsler mot Altinn    Authorization code/ Autorisasjonskode Kode som brukes av datakonsumenten til å få tak i Oauth token. Identifiserer et spesifikt samtykke   CoveredBy Mottaker av samtykket – Dersom dette er en person kreves også etternavn på person. (CoveredByName)   Datakilde Enhet som teknisk har data for bruker eller organisasjon Verifisere mot autorisasjon om datakonsument har nødvendige tilganger    Datakonsument Part som ønsker tilgang til data Ansvaret for å sende sluttbruker til Altinn for delegering av rettigheter til tjenestene Ansvarlig for å be om data fra datakilde    DelegationContext Beskrivelse fra datakonsument på hva som er formålet med samtykket.   LanguageCode Angir hvilket språk sluttbruker skal få opp samtykkesiden på. Kan velge mellom engelsk (en), bokmål (nb-NO) og nynorsk (nn-NO)   Metadata For å gi ekstra metadata til samtykketeksten kan det defineres en eller flere samtykkeparameter som generelt er valgfri men kan påtvinges av utformingen av samtykketeksten som er definert av datakilde (eks. 4629_2_inntektsaar=2016)   Oauth token OAuth er en åpen standard for autorisasjon, ofte brukt som en måte for Internett-brukere å logge på tredjeparts nettsteder ved hjelp av sine Microsoft, Google , Facebook eller Twitter-kontoer uten å oppgi passordet sitt.   OfferedBy Hvem som gir samtykket   RedirectUrl Hvor bruker blir sendt når delegering er gjennomført   Resources Tjenestekode og tjenesteutgavekode på tjenesten som datakilde har definert som samtykketjeneste. Kan også være flere tjenester dersom det skal samtykkes til å dele data fra flere datasett hos en eller flere datakilder.   ResponseType Vil alltid være code. Angir at man skal ha en autorisasjonskode i retur som skal benyttes for å hente token   ServiceCodes Representerer tjenestekodene for tjenesten(e) som er opprettet av datakilde   Sluttbruker Den som gir samtykke til utlevering av sine data eller en organisasjon sine data   Tjenesteierstyrt rettighetsregister Tjenesteeier/datakilde kan kreve at tjenesten skal benytte Tjenestestyrt register: Benyttes for å kontrollere Hvem som kan spør om tilgang til data gjennom deres samtykketjenester Hvilket domene sluttbruker skal bli sendt videre til etter å ha gitt/ikke gitt samtykke    ValidToDate Gyldighetsperiode for samtykket    "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/vedlegg/mappere/diverse/",
	"title": "Diverse",
	"tags": [],
	"description": "Bruk av mappere med Altinn-kontekst, REST/WCF",
	"content": " Avanserte konsepter Context I tjenestene i Altinn har man tilgang til en del informasjon om den konteksten tjenesten kjører i. Dette inkluderer hvilken bruker som har åpnet tjenesten, språkinnstillinger og lignende. I mange tilfeller er dette nyttig informasjon å overføre til bakenforliggende systemer slik at informasjon kan filtreres basert på pålogget bruker eller virksomhet.\nEn måte å overføre denne informasjonen på er å hente den ut fra skjema og sende med felter som datakontrakten. Ulempen med denne fremgangsmåten er at mapperen ikke kan garantere at verdiene er korrekte da tjenesteutviklere selv kan manipulere disse verdiene. For å hente ut verifiserbare verdier må AltinnContext benyttes. Dette er en base64-encoded tekststreng som kan verifiseres i mapperen slik at ulike context-verdier kan hentes ut sikkert.\nFor å benytte AltinnContext i mapperen må forespørseldatakontrakten inneholde et tekstfelt for AltinnMapperContexten som vist under.\n[DataMember] public string AltinnMapperContext;  Når forespørselen mottas må AltinnMapperContext lastes inn og verifiseres. Dette gjøres ved kall til klassen Verificator som legges i Utility.cs.\ninternal class Verificator { public static bool Verify(string altinnMapperContext, out AltinnMapperContext context) { var verified = false; var methodName = MethodBase.GetCurrentMethod().Name; AsymmetricAlgorithm key = XmlSignatureUtility.GetSPICertificatePublicKey(); verified = XmlSignatureUtility.VerifySignaturewithRSAKeyAndExtractObject( altinnMapperContext, key, out context); if (!verified) return false; if (context.CurrentService.ServiceOwnerCode!= \u0026quot;TTD\u0026quot;) return false; return true; } }  Deretter kan mapperen aksessere innholdet på følgende måte. Det er kun et utvalg av verdiene som er hentet ut i eksempelet under. Skal noen felter sjekkes som en del av verifikasjonen av tjenestekallet skal dette gjøres i Verificator-klassen.\nAltinnMapperContext context = null; var verified = Verificator.Verify(foresporsel.AltinnMapperContext, out context); var serviceCode = context.CurrentService.ServiceCode; var serviceEditionCode = context.CurrentService.ServiceEditionCode; var serviceOwnerCode = context.CurrentService.ServiceOwnerCode; var ssn = context.UserEntity.SSN; var reporteeName = context.ReporteeEntity.ReporteeName; var language = context.UserEntity.Language;  \u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot;?\u0026gt; \u0026lt;AltinnMapperContext xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xmlns:xsd=\u0026quot;http://www.w3.org/2001/XMLSchema\u0026quot;\u0026gt; \u0026lt;Timestamp\u0026gt;2012-05-28T13:01:49.8498603+02:00\u0026lt;/Timestamp\u0026gt; \u0026lt;ContextOrigin\u0026gt;User.Current\u0026lt;/ContextOrigin\u0026gt; \u0026lt;UserEntity\u0026gt; \u0026lt;UserID\u0026gt;55315\u0026lt;/UserID\u0026gt; \u0026lt;UserType\u0026gt;SSNIdentified\u0026lt;/UserType\u0026gt; \u0026lt;Username /\u0026gt; \u0026lt;SSN\u0026gt;01025801659\u0026lt;/SSN\u0026gt; \u0026lt;LastName\u0026gt;FJÆR\u0026lt;/LastName\u0026gt; \u0026lt;FirstName\u0026gt;ELENA\u0026lt;/FirstName\u0026gt; \u0026lt;MiddleName /\u0026gt; \u0026lt;ReporteeNumber\u0026gt;910457055\u0026lt;/ReporteeNumber\u0026gt; \u0026lt;AuthenticatedLevel\u0026gt;2\u0026lt;/AuthenticatedLevel\u0026gt; \u0026lt;AuthenticatedMethod\u0026gt;AltinnPIN\u0026lt;/AuthenticatedMethod\u0026gt; \u0026lt;Language\u0026gt;1044\u0026lt;/Language\u0026gt; \u0026lt;/UserEntity\u0026gt; \u0026lt;ReporteeEntity\u0026gt; \u0026lt;ReporteeID\u0026gt;50121508\u0026lt;/ReporteeID\u0026gt; \u0026lt;ReporteeNumber\u0026gt;910457055\u0026lt;/ReporteeNumber\u0026gt; \u0026lt;ReporteeType\u0026gt;Organization\u0026lt;/ReporteeType\u0026gt; \u0026lt;ReporteeName\u0026gt;SKÅNEVIK OG HAMRESANDEN REGNSKAP\u0026lt;/ReporteeName\u0026gt; \u0026lt;/ReporteeEntity\u0026gt; \u0026lt;CurrentService\u0026gt; \u0026lt;ReporteeElementID\u0026gt;0\u0026lt;/ReporteeElementID\u0026gt; \u0026lt;ServiceOwnerCode\u0026gt;TTD\u0026lt;/ServiceOwnerCode\u0026gt; \u0026lt;ServiceCode\u0026gt;2794\u0026lt;/ServiceCode\u0026gt; \u0026lt;ServiceEditionCode\u0026gt;987\u0026lt;/ServiceEditionCode\u0026gt; \u0026lt;FormID\u0026gt;0\u0026lt;/FormID\u0026gt; \u0026lt;/CurrentService\u0026gt; \u0026lt;Signature xmlns=\u0026quot;http://www.w3.org/2000/09/xmldsig#\u0026quot;\u0026gt; \u0026lt;SignedInfo\u0026gt; \u0026lt;CanonicalizationMethod Algorithm=\u0026quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315\u0026quot; /\u0026gt; \u0026lt;SignatureMethod Algorithm=\u0026quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1\u0026quot; /\u0026gt; \u0026lt;Reference URI=\u0026quot;\u0026quot;\u0026gt; \u0026lt;Transforms\u0026gt; \u0026lt;Transform Algorithm=\u0026quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature\u0026quot; /\u0026gt; \u0026lt;/Transforms\u0026gt; \u0026lt;DigestMethod Algorithm=\u0026quot;http://www.w3.org/2000/09/xmldsig#sha1\u0026quot; /\u0026gt; \u0026lt;DigestValue\u0026gt;uDzmSNfcC97AvgXtKV1G2STIEqQ=\u0026lt;/DigestValue\u0026gt; \u0026lt;/Reference\u0026gt; \u0026lt;/SignedInfo\u0026gt; \u0026lt;SignatureValue\u0026gt;O515Ufngnm11VKUawo7U/mpdWrg8n9V0nGwObwatYfjO/jSDrUM2XForcZSkC/wbSa6Ko2N+p0+iQ+RwAq/0A7ltrhlP8yfNxHSFdSIy7zDyP+80pr3Vl4RQj9ujO1QnB6DPgg0Lfdo0fg9DNcKsVwOB/MHp6Uw77MmjTOxDYQo=\u0026lt;/SignatureValue\u0026gt; \u0026lt;KeyInfo\u0026gt; \u0026lt;KeyValue\u0026gt; \u0026lt;RSAKeyValue\u0026gt; \u0026lt;Modulus\u0026gt;pnWPDVG3XHlo8N69T7uAG2dLoZb93/rey3XqQJ0hmeGQpBqtdrxVrgJRfZsGbhkgY8m3Gm3g5DclI+8CvKreXDOo2bDolYIrt4+yUNJyvv6sWlMqXiotujshrasWcwuPL8op1taXV1sx22wBsm5gVAHJs91RDOBM+XIrmKWrvK8=\u0026lt;/Modulus\u0026gt; \u0026lt;Exponent\u0026gt;AQAB\u0026lt;/Exponent\u0026gt; \u0026lt;/RSAKeyValue\u0026gt; \u0026lt;/KeyValue\u0026gt; \u0026lt;/KeyInfo\u0026gt; \u0026lt;/Signature\u0026gt; \u0026lt;/AltinnMapperContext\u0026gt;  Sikkerhet Sertifikat Kommunikasjonen mellom en mapper i Altinn og tjenesteeier må gå kryptert via SSL eller TSL (via https). Dette krever et gyldig sertifikat. Dersom ikke serveren har et sertifikat utstedt av en godkjent sertifikatutsteder vil WCF avbryte operasjonen på grunn av manglende verifikasjon av sertifikatet.\nTo-veis sertifikat autentisering For å sikre overføringen av informasjon mellom mapperen og etatsystemene kan to-veis-sertifikater benyttes. Dette skrus på ved å legge til en endpointbehavior i config-filen som skrur på clientsertifikater i mapperen.\n\u0026lt;configuration\u0026gt; \u0026lt;system.serviceModel\u0026gt; \u0026lt;behaviors\u0026gt; \u0026lt;endpointBehaviors\u0026gt; \u0026lt;behavior name=\u0026quot;ECBehavior\u0026quot;\u0026gt; \u0026lt;clientCredentials\u0026gt; \u0026lt;clientCertificate storeLocation=\u0026quot;CurrentUser\u0026quot; storeName=\u0026quot;My\u0026quot; x509FindType=\u0026quot;FindByThumbprint\u0026quot; findValue=\u0026quot;3636E9BD1B32A1DA1A43E34EB8DE637289C03345\u0026quot;/\u0026gt; \u0026lt;/clientCredentials\u0026gt; \u0026lt;/behavior\u0026gt; \u0026lt;/endpointBehaviors\u0026gt; \u0026lt;/behaviors\u0026gt; \u0026lt;/system.serviceModel\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;!-- Legges til på bindingen til tjenesten --\u0026gt; \u0026lt;security mode=\u0026quot;Transport\u0026quot;\u0026gt; \u0026lt;transport clientCredentialType=\u0026quot;Certificate\u0026quot; proxyCredentialType=\u0026quot;None\u0026quot; realm=\u0026quot;\u0026quot; /\u0026gt; \u0026lt;/security\u0026gt; \u0026lt;!-- Legges til som parameter på endpointet til tjenesten--\u0026gt;  Dersom to-veis sertifikater skal benyttes vil mapperen kun være testbar i TUL og ikke på lokalt utviklermiljø. Dette skyldes at Altinn sine sertifikater ikke vil bli distribuert til brukerene.\nOverstyre sertifikat under utvikling Dersom ikke serveren har et sertifikat utstedt av en godkjent sertifikatutsteder vil WCF avbryte operasjonen på grunn av manglende verifikasjon av sertifikatet. Dette kan unngås ved å legge inn en overstyring av denne funksjonaliteten. Det gjøres ved å legge inn en callback på ServerCertificateValidation-verifikasjonen på ServicePointManageren. Merk at man bør ha gyldige sertifikater også testservere også dette bare må gjøres unntaksvis og kun under utvikling. Overstyring av sertifikatsjekken må ikke være med i produksjonsklar kode.\npublic Mapper() { // For development purposes // Remove before building .MSI ServicePointManager.ServerCertificateValidationCallback += new System.Net.Security.RemoteCertificateValidationCallback( delegate(object sender, X509Certificate cert, X509Chain chain, System.Net.Security.SslPolicyErrors error) { return true; }); }  For å unngå å måtte fjerne og legge til kode kan det være et parameter i config som skrur av eller på denne mekanismenavhengig av hvilket miljø koden kjører i.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/endepunkter-oversikt/",
	"title": "Endepunkter",
	"tags": [],
	"description": "Beskrivelse av hvilken funksjonalitet som finnes med referanser til hvilke web services som benyttes",
	"content": " URI til alle Altinn tjenester / aliasoversikt for endepunkter Web servicene beskrevet i dokumentet er angitt uten informasjon om endepunkt. En web service operasjon kan kalles med forskjellige endepunkter ut fra hvilken autentiseringsmetode tjenesteeier ønsker å benytte.\nDet tilbys opp til tre forskjellige endepunkter for hver web service operasjon:\n Basic Http (SOAP 1.1)\nTradisjonell interoperabel web service. System og bruker informasjon angis som parameter til operasjoner. Altså i body av SOAP requesten. WS Http (SOAP 1.2 med WS-Security username token)\nStøtte for nye web service standarder WS* WS Http (SOAP 1.2 med WS-Security X.509 token) (markert som EC)\nStøtte for ny web standarder WS*, dvs. bl.a. at sertifikat ligger i SOAP headeren. I tillegg krever Altinn et brukernavn og passord som parameter til operasjoner. Dette blir med som en del av body i SOAP requesten.  For eksempel:\nWeb service operasjonen GetReceipt kan aksesseres ved å kalle endepunktet.\nHvis man ønsker å bruke/autentisere vha. WS* standarden, eller kalle endepunktet ”GetReceiptBasic” hvis man ønsker tradisjonell web service aksessering.\nNedenfor følger en oversikt over alle Altinn tjenester, og en aliasoversikt som viser kobling mellom endepunkter, endepunkt operasjon og basis operasjon (operasjon som kalles av endepunktoperasjon, og som er beskrevet i dette dokumentet). Den vil også angi nyeste versjon for operasjonen for endepunktet:\n          ReporteeArchiveExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetArchivedFormTaskV2 WS Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternal.svc GetArchivedFormTaskExternalV2    Basic Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalBasic.svc GetArchivedFormTaskBasicV2    EC https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalEC.svc GetArchivedFormTaskEC   GetAttachmentDataV2 WS Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternal.svc GetAttachmentDataExternalV2    Basic Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalBasic.svc GetAttachmentDataBasicV2    EC https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalEC.svc GetAttachmentDataEC   GetAttachmentDataStreamed WS Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalStreamed.svc GetAttachmentDataExternalStreamed    Basic Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalStreamedBasic.svc GetAttachmentDataStreamedBasic    EC https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalStreamedEC.svc GetAttachmentDataStreamedEC   GetArchivedLookup WS Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternal.svc GetArchivedLookupExternal    Basic Http https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalBasic.svc GetArchivedLookupBasic    EC https://www.altinn.no/ArchiveExternal/ReporteeArchiveExternalEC.svc GetArchivedLookupEC   IntermediaryInbound     Basis operasjon URI/Endepunkt Endepunkt operasjon   SubmitFormTask WS Http https://www.altinn.no/IntermediaryExternal/IntermediaryInbound.svc SubmitFormTask    Basic Http https://www.altinn.no/IntermediaryExternal/IntermediaryInboundBasic.svc SubmitFormTaskBasic    EC https://www.altinn.no/IntermediaryExternal/IntermediaryInboundExternalEC.svc SubmitFormTaskEC   GetAltinnSubmissionStatus WS Http https://www.altinn.no/IntermediaryExternal/IntermediaryInbound.svc GetAltinnSubmissionStatus    Basic Http https://www.altinn.no/IntermediaryExternal/IntermediaryInboundBasic.svc GetAltinnSubmissionStatusBasic    EC https://www.altinn.no/IntermediaryExternal/IntermediaryInboundExternalEC.svc GetAltinnSubmissionStatusEC   CompleteAndSignShipment WS Http https://www.altinn.no/IntermediaryExternal/IntermediaryInbound.svc CompleteAndSignShipment    Basic Http https://www.altinn.no/IntermediaryExternal/IntermediaryInboundBasic.svc CompleteAndSignShipmentBasic    EC https://www.altinn.no/IntermediaryExternal/IntermediaryInboundExternalEC.svc CompleteAndSignShipmentEC   SubmitFormTask WS Http https://www.altinn.no/IntermediaryExternal/IntermediaryInbound.svc UpdateFormData    Basic Http https://www.altinn.no/IntermediaryExternal/IntermediaryInboundBasic.svc UpdateFormDataBasic    EC https://www.altinn.no/IntermediaryExternal/IntermediaryInboundExternalEC.svc UpdateFormDataEC   IntermediaryInboundStreamed     Basis operasjon URI/Endepunkt Endepunkt operasjon   SubmitAttachmentStreamed Basic Http https://www.altinn.no/IntermediaryExternal/IntermediaryInboundStreamed.svc SubmitAttachmentStreamed    Basic Http https://www.altinn.no/IntermediaryExternal/IntermediaryInboundBasicStreamed.svc SubmitAttachmentStreamedBasic    EC https://www.altinn.no/IntermediaryExternal/IntermediaryInboundExternalECStreamed.svc SubmitAttachmentStreamedEC   ReceiptExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetReceiptV2 WS Http https://www.altinn.no/IntermediaryExternal/ReceiptExternal.svc GetReceiptV2    Basic Http https://www.altinn.no/IntermediaryExternal/ReceiptExternalBasic.svc GetReceiptBasicV2    EC https://www.altinn.no/IntermediaryExternal/ReceiptExternalEC.svc GetReceiptECV2   GetReceiptListV2 WS Http https://www.altinn.no/IntermediaryExternal/ReceiptExternal.svc GetReceiptListV2    Basic Http https://www.altinn.no/IntermediaryExternal/ReceiptExternalBasic.svc GetReceiptListBasicV2    EC https://www.altinn.no/IntermediaryExternal/ReceiptExternalEC.svc GetReceiptListECV2   UpdateReceipt WS Http https://www.altinn.no/IntermediaryExternal/ReceiptExternal.svc UpdateReceipt    Basic Http https://www.altinn.no/IntermediaryExternal/ReceiptExternalBasic.svc UpdateReceiptBasic    EC https://www.altinn.no/IntermediaryExternal/ReceiptExternalEC.svc UpdateReceiptEC   CorrespondenceExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetCorrespondenceForEndUserSystemV2 WS Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternal.svc GetCorrespondenceForEndUserSystemsExternalV2    Basic Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternalBasic.svc GetCorrespondenceForEndUserSystemBasicV2    EC https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternalEC.svc GetCorrespondenceForEndUserSystemsEC   DeleteCorrespondence[1] WS Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternal.svc DeleteCorrespondenceExternal    Basic Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternalBasic.svc DeleteCorrespondenceBasic   SaveCorrespondenceConfirmation WS Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternal.svc SaveCorrespondenceConfirmationExternal    Basic Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternalBasic.svc SaveCorrespondenceConfirmationBasic    EC https://www.altinn.no/ServiceEngineExternal/CorrespondenceExternalEC.svc SaveCorrespondenceConfirmationEC   ReporteeElementList     Basis operasjon URI/Endepunkt Endepunkt operasjon   DeleteReporteeElement WS Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternal.svc DeleteReporteeElementExternal    Basic Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternalBasic.svc DeleteReporteeElementBasic    EC https://www.altinn.no/ServiceEngineExternal/ReporteeElementListEC.svc DeleteReporteeElementEC   GetFormSetElementsV2 WS Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternal.svc GetFormSetElementsExternalV2    Basic Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternalBasic.svc GetFormSetElementsBasicV2    EC https://www.altinn.no/ServiceEngineExternal/ReporteeElementListEC.svc GetFormSetElementsEC   GetReporteeElementListV2 WS Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternal.svc GetReporteeElementListExternalV2    Basic Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternalBasic.svc GetReporteeElementListBasicV2    EC https://www.altinn.no/ServiceEngineExternal/ReporteeElementListEC.svc GetReporteeElementListEC   GetCorrespondenceListForArchiveRef WS Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternal.svc GetCorrespondenceListForArchiveRef    Basic Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternalBasic.svc GetCorrespondenceListForArchiveRefBasic    EC https://www.altinn.no/ServiceEngineExternal/ReporteeElementListEC.svc GetCorrespondenceListForArchiveRefEC   GetCorrespondenceListForReportee WS Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternal.svc GetCorrespondenceListForReportee    Basic Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternalBasic.svc GetCorrespondenceListForReporteeBasic    EC https://www.altinn.no/ServiceEngineExternal/ReporteeElementListEC.svc GetCorrespondenceListForReporteeEC   GetFormSetData WS Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternal.svc GetFormSetData    Basic Http https://www.altinn.no/ServiceEngineExternal/ReporteeElementListExternalBasic.svc GetFormSetDataBasic    EC https://www.altinn.no/ServiceEngineExternal/ReporteeElementListEC.svc GetFormSetDataEC   ServiceMetadataExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetAvailableServicesV2 WS http https://www.altinn.no/ServiceEngineExternal/ServiceMetaDataExternal.svc GetAvailableServicesV2    Basic Http https://www.altinn.no/ServiceEngineExternal/ServiceMetaDataExternalBasic.svc GetAvailableServicesBasicV2   GetFormTaskSchemaDefinitions WS http https://www.altinn.no/ServiceEngineExternal/ServiceMetaDataExternal.svc GetSchemaDefinitionsForFormTask    Basic Http https://www.altinn.no/ServiceEngineExternal/ServiceMetaDataExternalBasic.svc GetFormTaskSchemaDefinitionsBasic   Workflow     Basis operasjon URI/Endepunkt Endepunkt operasjon   DoSendingInAction WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc DoSendingInAction    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc DoSendingInActionBasic   DoSigning WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc DoSigning    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc DoSigningBasic   GetAvailableActionsV2 WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc GetAvailableActionsV2    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc GetAvailableActionsBasicV2   GetNextWorkflowStateTypeInProcessFlowV2 WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc GetNextWorkflowStateTypeInProcessFlowV2    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc GetNextWorkflowStateTypeInProcessFlowBasicV2   GetProcessDetailsV2 WS httphttps://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc GetProcessDetailsV2    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc GetProcessDetailsBasicV2   GetProcessDetailsV3 WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc GetProcessDetailsV3    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc    GetSigningText Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc GetSigningTextExternal    WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc GetSigningText   SetBackToFormFilling WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc SetBackToFormFilling    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc SetBackToFormFillingBasic   PrepareUserControlledSigning WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc PrepareUserControlledSigning    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc PrepareUserControlledSigningBasic   GetProcessStepIDForParallelSigning WS http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternal.svc GetProcessStepIDForParallelSigning    Basic http https://www.altinn.no/ServiceEngineExternal/WorkflowServiceExternalBasic.svc GetProcessStepIDForParallelSigningBasic   PrefillEUSExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetPrefillData WS http https://www.altinn.no/ServiceEngineExternal/PreFillEUSExternal.svc GetPrefillData    Basic http https://www.altinn.no/ServiceEngineExternal/PreFillEUSExternalBasic.svc GetPrefillDataBasicV2    EC https://www.altinn.no/ServiceEngineExternal/PreFillEUSExternalEC.svc GetPrefillDataEC   Case     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetCaseList WS http https://www.altinn.no/ServiceEngineExternal/CaseExternal.svc GetCaseListExternal    Basic http https://www.altinn.no/ServiceEngineExternal/CaseExternalBasic.svc GetCaseListExternalBasic    EC https://www.altinn.no/ServiceEngineExternal/CaseEC.svc GetCaseListEC   InstantiateCollaboration WS http https://www.altinn.no/ServiceEngineExternal/CaseExternal.svc InstantiateCollaborationExternal    Basic http https://www.altinn.no/ServiceEngineExternal/CaseExternalBasic.svc InstantiateCollaborationExternalBasic    EC https://www.altinn.no/ServiceEngineExternal/CaseEC.svc InstantiateCollaborationEC   ArchiveCase WS http https://www.altinn.no/ServiceEngineExternal/CaseExternal.svc ArchiveCaseExternal    Basic http https://www.altinn.no/ServiceEngineExternal/CaseExternalBasic.svc ArchiveCaseExternalBasic    EC https://www.altinn.no/ServiceEngineExternal/CaseEC.svc ArchiveCaseEC   KeyManagement     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetCertificates WS http https://www.altinn.no/ArchiveExternal/KeyManagementExternal.svc GetCertificatesBasic    Basic http https://www.altinn.no/ArchiveExternal/KeyManagementExternalBasic.svc GetCertificatesExternal    EC https://www.altinn.no/ArchiveExternal/KeyManagementEC.svc GetCertificatesEC   SystemAuthentication     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetAuthenticationChallenge Basic http https://www.altinn.no/AuthenticationExternal/SystemAuthentication.svc GetAuthenticationChallenge   BrokerService     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetAvailableFiles WS http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternal.svc GetAvailableFiles    Basic http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalBasic.svc GetAvailableFilesBasic    EC https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalEC.svc GetAvailableFilesEC   InitiateBrokerService WS http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternal.svc InitiateBrokerService    Basic http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalBasic.svc InitiateBrokerServiceBasic    EC https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalEC.svc InitiateBrokerServiceEC   UploadFileStreamed WS http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalBasicStreamed.svc UploadFileStreamed    Basic http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalBasicStreamed.svc UploadFileStreamedBasic    EC https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalECStreamed.svc UploadFileStreamedEC   DownloadFileStreamed WS http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalBasicStreamed.svc DownloadFileStreamed    Basic http https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalBasicStreamed.svc DownloadFileStreamedBasic    EC https://www.altinn.no/ServiceEngineExternal/BrokerServiceExternalECStreamed.svc DownloadFileStreamedEC    Alle URI er angitt med produksjonsadresse. Frem til produksjonssetting må https://www.altinn.no erstattes med peker til testmiljø\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/funksjonelle-scenario/",
	"title": "Funksjonelle scenario",
	"tags": [],
	"description": "Beskrivelse av hvilken funksjonalitet som finnes med referanser til hvilke web services som benyttes",
	"content": " Altinn tilbyr flere tjenester innenfor flere funksjonelle områder for sluttbrukersystemer og dets brukere. Dette kapittelet beskriver hvilken funksjonalitet som finnes med referanser til hvilke web services som benyttes. Oversikt over den web service, operasjon og parametere til disse er beskrevet i en egen seksjon , samt at ytterligere detaljer kan finnes i Tjenestekatalogen og WSDL’en for tjenesten.\nDe funksjonelle områder som finnes er:\n Autentisering og autorisasjon av sluttbrukersystem og brukere Benytte innsendingstjeneste Benytte meldingstjeneste Benytte formidlingstjeneste Benytte innsynstjeneste Benytte samhandlingstjeneste  Autentisering og autorisasjon av sluttbrukersystem og bruker Alle tjenesteoperasjoner som kan benyttes av et sluttbrukersystem vil alltid bruke et sluttbrukersystem id eller brukernavn og tilhørende passord for å autentisere system og autorisere rettigheter til at systemet har rettigheter til å utføre handlinger på vegne av en juridisk enhet.\nFor å utføre tjenesteoperasjoner på vegne av bruker er det også mulig å autentisere seg ved bruk av brukerens brukerprofil brukernavn og tilhørende passord, på samme måte som man ville brukt sluttbrukersystem id og passord. For å kunne bruke denne autentiseringsmetoden må man aktivere dette på sin brukerprofil side. Tjenesteoperasjoner som autentiseres med brukernavn kan kun gi rettighet til å utføre handlinger på vegne av denne brukeren.\nI de tilfeller i grensesnitt-beskrivelsene hvor det refereres til systemUserName vil man også kunne bruke brukerens brukernavn og passord for å autentisere seg, i stedet for en sluttbrukersystem ID.\nUtover dette vil det for noe funksjonalitet også være et behov for å autentisere den unike brukeren som benytter sluttbrukersystemet og autorisere at vedkommende har rettigheter til å levere eller hente spesifikke data eller utføre operasjoner på vegne av en juridisk enhet. Denne sjekken utføres ved at sluttbrukersystem først kaller en web service som autentiserer en bruker og ber om en spesifikk engangskode som skal sendes inn sammen med kallet til den web servicen som krever autentisering og autorisasjon av en bruker. Denne engangskoden kan være basert på følgende typer:\n Engangskode fra brev bestilt på Altinn Engangskode tilsendt per SMS (for registrert Altinn bruker)  Altinn vil svare på denne henvendelsen med å referere til hvilken engangskode som skal benyttes eller ved å sende en SMS til registrert mobiltelefonnummer på bruker.\nSluttbrukersystemet må håndtere skjermdialogen med brukeren og sørge for at informasjonen Altinn returnerer på forespørsel om hvilken engangskode som må sendes med web service kallet vises frem, og at engangskoden innhentes fra bruker og sendes med i neste kall til den tjenesteoperasjonen som krever autentisering / autorisasjon.\nEn slik autentisering / autorisasjonshandling er gyldig i 30 minutter fra første forespørsel blir gjort, og vil deretter fornyes med 30 minutters gyldighet hver gang en web service operasjon som benytter denne informasjonen blir kalt. Denne fornyingen vil gjøres inntil en maksimal grense på 8 timer.\nHvis det går for langt tid mellom hvert kall slik at gyldighetsperioden utløper må brukeren pånytt måtte autentiseres / autoriseres med ny engangskode.\nDet er en fordel om sluttbrukersystemet implementerer en klokkenedtelling etter at engangskoden blir mottatt slik at brukeren til enhver tid vet hvor lenge den nåværende engangskoden kan brukes. Dette vil redusere antall SMS utsendinger og medføre at engangskodebrev vil ha lenger holdbarhet. I tilfeller der engangskoden er/blir ugyldig, er det en fordel om sluttbrukersystem enkelt gir brukeren tilgang til å hente engangskoden på nytt og deretter sende inn den signerte forsendelsen på nytt.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic    Uthenting av tilgjengelige tjenester Sluttbrukersystemer kan alltid hente informasjon om hvilke innsendingstjenester, meldingstjenester, innsynstjenester og samhandlingstjenester (baser på parameter ServiceType i operasjonen GetAvailableServices) som til enhver tid er tilgjengelige og aktive i Altinn, samt hente de XML skjema som inngår i et skjemasett for en innsendingstjeneste. GetAvailableServicesV3 inkluderer mulighet for å filtrere resultatene fra de tilgjengelige tjenestene slik at man kan finne akkurat de tjenestene man leter etter.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Type Operasjon     ServiceMetadata GetAvailableServicesV2 Basic/WS   ServiceMetadata GetAvailableServicesV3 Basic/WS   ServiceMetadata GetFormTaskSchemaDefinitions Basic/WS    Benytt innsendingstjeneste Å benytte en innsendingstjeneste betyr å sende skjemadata fra et sluttbrukersystem med eventuelle vedlegg og eventuelt signere disse før en innsending. Men i dette scenarioet inngår også det å behandle en innsending gjennom livssyklus fra opprettelse, gjennom arbeidsflyt til oversendelse eller sletting.\nInnsendingstjenester er tilknyttet en arbeidsflyt som består av følgende steg:\n Utfylling – Alle påkrevde skjemafelter fylles med data Validering – data valideres funksjonelt og iht. regler som er angitt i et skjema Signering – En spesifikk autentisert bruker juridisk godkjenner de data som sendes inn Bekreft og Send inn – Data arkiveres og oversendes til tjenesteeier.  I forkant av disse fire arbeidsflytstegene kan bruker av sluttbrukersystemet også velge å hente ut preutfyllingsdata fra Altinn. Preutfyllingsdataene kan benyttes for å forenkle utfylling av innsendingstjenesten.\nFor noen tjenester vil man også kunne ha en såkalt brukerstyrt parallell signering. Med dette menes det at innsender selv kan velge et antall brukere som skal signere et steg i arbeidsflyten. For tjenester som har dette steget kan dette angis som del av innsendingen, eller gjøres som et separat tjenestekall.\nFra et sluttbrukersystem kan ett eller flere av disse stegene gjøres direkte gjennom ett eller flere tjenestekall. De ulike stegene er nærmere beskrevet i påfølgende kapitler.\nHent preutfyllingsdata Preutfyllingsdata er data for et gitt skjemasett og en gitt avgiver som sendes fra tjenesteeier til Altinn, og lagres i Altinn. Preutfyllingsdata brukes for å forenkle utfylling av innsendingstjenester, ved at sluttbrukersystemer henter ut preutfyllingsdata i forkant av innsending, for så å benytte dataene ved innsending av skjemasettet.\nFor å hente ut prefill data benyttes parametrene ReporteeNumber (fødselsnummer eller organisasjonsnummer), ExternalServiceCode (tjenestekode), og ExternalServiceEditionCode (tjenesteutgavekode).\nGetPrefillData Operasjonen returnerer en status og en liste med PreFillFormTask. Statusen indikerer om input er valid, eller hvorvidt det eksisterer prefill data for tjenesten det etterspørres for. PreFillFormTask er en liste fordi det kan eksistere flere preutfyllingsdata for samme skjemasett og avgiver. Settene med preutfyllingsdata er i så fall skilt ved hjelp av identifiserende felter satt av tjenesteeier i PreFillIdentityFieldBE. FieldValue. Det bør verifiseres at preutfylt data som benyttes er gyldig ved å sjekke PrefillFormTaskBE.ValidFromDate og PrefillFormTaskBE.ValidToDate\nPreutfylt skjemadata ligger i elementet PrefillFormBE.FormDataXML. Dette elementet følger tjenestens dataformat (XSD) og inneholder de preutfylte dataene. Den kan da benyttes som utgangspunkt for sluttbrukersystemet i stedet for å opprette en blank XML basert på dataformatet.\nGetPrefillDataV2 Ifm versjon 13.1 Altinn, tilgjengelig i TT2 (PROD 25. februar 2013) kan SBS nå benytte en ny operasjon for å hente ned preutfylte skjema.\nDefault vil denne operasjonen kun returnere preutfylt hovedskjema hvis det finnes preutfylte data. Informasjon om hva slags type prefilldata returneres med et sett av true/false parametere. Man kan velge eksplisitt å få returnert prefill for spesifikke skjema innenfor et skjemasett. Det er ikke lagt inn mulighet for å skille eksakt hvilke data som kommer fra hvilken kilde, bare hvilke kilder som er benyttet. Merk også at det er kun relevante felter med prefilldata som returneres, altså må SBS selv generere det endelige SOAP-kallet og skjema-XML ihht. XSD som tidligere. I tidligere versjon (GetPrefillData) var det kun én type prefillkilde som kunne hentes ned til SBS (ferdigutfylt skjema fra Tjenesteeier). Nå vil alle typer prefillkilder samt alle prefillmetoder en tjenesteeier kan benytte gi SBS tilgang til de samme data som i portal.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Prefill GetPrefillData Basic/WS/EC   Prefill GetPrefillDataV2 Basic/WS/EC    Send inn skjemasett Dette steget innebærer å oversende data i henhold til XML-spesifikasjoner som utgjør tjenesten. Sluttbrukersystem kan selv velge om skjemasettet skal sendes komplett og/eller signert:\n Komplett / Ikke komplett Komplett betyr at alle påkrevde data leveres fra sluttbrukersystem Ikke komplett betyr at ikke alle felter kunne fylles ut i sluttbrukersystem og at utfylling må ferdigstilles på Altinn portal. Signert / usignert Hvis en innsending sendes komplett er det også mulig å signere (ett signeringssteg) disse fra sluttbrukersystemet gjennom samme innsending.  Inneholder skjemaet som skal sendes inn et brukerstyrt signeringssteg, kan informasjon for delegering for dette steget sendes sammen med skjemadata. For det første må parameter UserDefinedNumberOfSignaturesRequired angi det totale antallet av signaturer som skal til for å gå videre til neste steg etter det brukerstyrte signeringssteget. Hvilke brukere som så skal delegeres rettighet til å signere angis så i listen over DelegatedUserBE der brukerens fødselsnummer (SSN) og etternavn (Name) må angis. Hvis tjenesten tillater, kan en bruker signere mer enn en gang, i så tilfelle settes NumberOfSignaturesAllowed til antallet signaturer som er ønsket fra denne brukeren. Om bruker kun skal signere en gang må parameteren settes til 1.\nSendes innsendingstjenesten fra en juridisk enhet som regnes som en Trusted partner, det vil si at den har rettigheter til å opprette instanser av innsendingstjenester for andre brukere, kan denne velge å fylle ut informasjon om brukerstyrt signering og låse steget slik at dette ikke kan editeres av bruker selv. For å gjøre dette settes parameter IsUserDelegationLocked til true.\nHvis deler av skjemasettet inneholder sensitive felter må disse krypteres. Se 4.3.10 for utdypende beskrivelse av hvordan dette skal gjøres.\nSkjemaet som sendes inn kan knyttes til en samhandlingstjeneste. For å gjøre dette settes parameter CaseID til samhandlingstjenestens unike identifikator (se 4.7.1 for hvordan denne identifikatoren kan hentes).\nDersom skjemasettet skal signeres må sluttbrukersystem i forkant av innsending hente ut signeringsteksten for tjenesten, slik at denne kan presenteres for bruker som skal utføre signeringen.\nHvis alle krav til en komplett innsendingstjeneste er ivaretatt i forhold til validering av data og nødvendig signering så vil innsendingen blir arkivert og oversendt tjenesteeier.\nEnkelte tjenester i Altinn har definert regler for vedleggene som kan legges ved skjemasettet. Nærmere informasjon om disse reglene kan hentes ut med GetAvailableServicesV3. For å angi hvilken type vedlegg man sender med, benytter man AttachmentTypeName-feltet i vedleggsentiteten. Man kan sende inn vedlegg til skjemasett på tjenester med vedleggsregler både med SubmitFormTask IntermediaryInbound.SubmitFormTask, SubmitAttachmentStreamed og IntermediaryInboundStreamed.SubmitAttachmentStreamed.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeElementList GetReporteeElementListV2 Basic/WS/EC   Workflow GetSigningText Basic/WS   IntermediaryInbound SubmitFormTask Basic/WS/ EC    Sjekk transportkvittering for innsending Når en innsending mottas fra sluttbrukersystem vil en transportkvittering returneres umiddelbart etter mottak. Transportkvitteringen vil inneholde informasjon om hvert enkelt element i innsendingen, med detaljer på hva kvitteringen gjelder og valideringsstatus på innsendingen. Mottak og prosessering av innsendte data skjer i flere trinn, vil kvitteringen endre status etter hvert som innsendingen behandles. En innsending kan ikke regnes å være mottatt og godtatt før transportkvitteringen viser at validering og videre prosesseringen for innsendingen er fullført i Altinn.\nDet vil derfor fra et sluttbrukersystem ofte være nødvendig å etterspørre kvittering flere ganger inntil en godkjent status blir returnert fra Altinn.\nVed innsending fra SBS utfører Altinn en prosess med formålet å stoppe innsendinger med feil, for eksempel i kalkyler. Denne prosessen er nærmere beskrevet i kapittel 10, Vedlegg B - Regler for sammenlikning av skjemasett, og viser blant annet hvilke kriterier som gjelder for å generere advarsler og feil i kvitteringene.\nDe statuser en transportkvittering typisk vil kunne vise under mottak og prosessering og videresending til etat er:\n Mottatt – Innsendingen er teknisk mottatt i Altinn og avsender er autentisert og autorisert Godtatt – Innsendingen er teknisk validert og videresendt til prosessering Prosessert – Innsendingen er prosessert og godtatt i Altinn. Sendt tjenesteeier – Innsendingen er sendt til tjenesteeier Mottatt tjenesteeier – Meldingen er mottatt av tjenesteeier.  Det er ikke alle tjenesteeiere som har mulighet til å bekrefte et mottak på en spesifikk innsending så Sendt tjenesteeier vil i mange tilfellervære endelig status.\nEventuelt kan status være:\n Avvist – Innsendingen er avvist  Hvis innsending feiler i et av stegene vil også dette beskrives i transportkvitteringen. Slike feil vil oftest være pga. feil i format, valideringsfeil på funksjonelle data, duplikat innsending eller ikke tilstrekkelige rettigheter i forhold til avgiver for et sluttbrukersystem eller en signerer.\nDet er ingen begrensning på hvor mange ganger en kvittering kan etterspørres, og disse vil være tilgjengelig i en lengre periode etter innsending.\nDet henstilles allikevel sluttbrukersystemene om ikke å overdrive hvor ofte en transportkvittering etterspørres da dette potensielt kan medføre ekstra treghet i systemet og prosessering av data vil forsinkes.\nEn tommelfingerregel på å vente minimum 5 sekunder mellom innsending og hver enkelt kvitteringsforespørsel kan legges til grunn, eller la brukeren av sluttbrukersystemet selv be om oppdatert transportkvittering.\nEn kvittering kan etterspørres med alle kjente referanser for innsendingen:\n Sluttbrukersystem referanse på innsending eller enkeltskjema Altinn transportkvittering returnert som respons på innsending Altinn innsendingsreferanse Tjenesteeier referanse  Det vil også finnes kvitteringshistorikk som viser de forskjellige kvitteringstekster / statuser en innsending historisk har hatt og tidspunkt for når disse ble satt.\nMerk at ReferenceTypeName av typen WorkFlowReference representerer ReporteeElementID, altså den unike identifikatoren for det detaktive elementet.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Receipt GetReceiptList Basic/WS   Receipt GetReceipt Basic/WS    Legge til vedlegg til innsendt skjemasett Dersom man skal laste opp store vedlegg til et skjemasett, kan man bruke SubmitAttachmentStreamed-metoden for å legge til et vedlegg til en innsending som ligger til utfylling i meldingsboksen.\nDette gjøres ved å benytte arbeidsflytreferansen (WorkflowReference) man får fra kvitteringskallet etter vellykket innsending og instansiering som ReporteeElementId-parameter i SubmitAttachmentStreamed-metoden. Når man har lagt til alle aktuelle vedlegg kan skjemasettet signeres og arkiveres ved å bruke samme arbeidsflytreferanse som inn-parameter i CompleteAndSign (alternativt tilsvarende metoder i Workflow).\nTjenester og tjenesteoperasjoner som inngår i beskrevetfunksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Receipt GetReceipt Basic/WS   IntermediaryInboundStreamed SubmitAttachmentStreamed Basic/WS   IntermediaryInbound CompleteAndSign Basic/WS    Styr arbeidsflyt for innsendingstjeneste Altinn tillater at enkeltstående arbeidsflytsteg utføres fra sluttbrukersystem uten innlogging i portalen. Den mest vanlige typen aksjon å ta fra sluttbrukersystem vil være å utføre et enkeltstående signeringssteg, men det vil være støtte for flere andre operasjoner som er tilgjengelig i portalen. Et annet eksempel er å flytte et skjema tilbake til utfylling, eller hente ut arbeidsflythistorikk for et skjema.\nEt praktisk eksempel på bruk kan være at en sluttbruker sender inn sitt skjema til Altinn, og legger ved signaturinformasjon. Skjemaet opprettes, valideres, og signeres i første steg. Dette er et skjema som krever revisorsignering, og derfor blir ikke skjema arkivert, men liggende å vente på at revisor skal signere. På dette tidspunkt kan revisor benytte ”signer skjema” funksjonaliteten fra sitt sluttbrukersystem, og signere og sende inn skjema. Dermed vil skjema kunne passere gjennom avanserte arbeidsflyter uten at man behøver å logge inn i portalen.\nOperasjonen GetAvailableActionsV2 vil kunne kalles for et gitt element for å sjekke hvilken handling som skal utføres. For en tjeneste som er opprettet ikke komplett og innehar et brukerstyrt signeringssteg vil denne operasjonen kunne returnere verdien DoSignDelegation. Sluttbrukersystemet kan i så tilfelle benytte operasjonen PrepareUserControlledSigning til å delegere signering til brukere. Denne operasjonen tar inn reporteeElementID for å angi elementet som skal behandles. Videre må en delegatedUserBEList fylles med innhold, der Name skal angi etternavn og SSN er fødselsnummer for brukeren som skal signere, samt at NumberOfSignaturesAllowed kan settes avhengig av hvor mange signaturer denne personen kan angi avhengig av om tjenesten tillater flere signaturer fra samme bruker. userDefinedNumberOfSignaturesRequired må settes for å angi det totale antallet signaturer som kreves for det parallelle steget. Videre må parallelSigningStepLocked settes. Denne parameteren er kun tilgjengelig for avgivere som er definert som Trusted partner, og brukes til å låse forberedingen til det parallelle signeringssteget – det vil si at bruker selv ikke kan endre hvem og hvor mange som skal signere.\nFunksjonaliteten i hver enkelt av de tilgjengelige funksjonene forklares i detalj under.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeElementList GetReporteeElementListV2 Basic/WS/EC   Workflow GetAvailableActionsV2 Basic/WS   Workflow GetProcessDetailsV2 Basic/WS   Workflow GetNextWorkflowStateTypeInProcessFlowV2 Basic/WS   Workflow DoSendingInAction Basic/WS   Workflow DoSigning Basic/WS   Workflow SetBackToFormFilling Basic/WS   Workflow PrepareUserControlledSigning Basic/WS   Workflow GetProcessStepIDForParallelSigning Basic/WS    Slett innsendingstjeneste Et sluttbrukersystem kan velge å slette et aktivt eller arkivert element fra arbeidsliste eller fra arkivet i Altinn. Dette innebærer at elementet ikke lenger vil være synlig i portal eller tilgjengelig for sluttbrukersystem.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeElementList DeleteReporteeElement Basic/WS/EC    Se arkivert innsendingstjeneste Når en innsendingstjeneste sendes inn, enten fra et sluttbrukersystem eller i portal, opprettes det en kvittering for den arkiverte innsendingstjenesten. Kvitteringen kan senere hentes opp både for portalbruker, sluttbrukersystem og fra tjenesteeiers system. I kvitteringen ligger det funksjonalitet for å sende kvitteringen på e-post, vise utskriftsversjon av det innsendte oppgavesettet samt eventuell visning av digital signatur.\nVed innsending fra sluttbrukersystem vil det genereres en kvittering som angir status for forsendelsen (nærmere beskrevet i kapittel 4.3.3, Sjekk transportkvittering for innsending).\nDette må ikke forveksles med transportkvittering som beskrives i avsnitt Sjekk transportkvittering for innsending.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeArchiveExternal GetArchivedFormTask Basic/WS/EC    Finn aktive og arkiverte innsendingstjenester Et sluttbrukersystem kan hente ut detaljer på innsendingstjenester fra Altinn, både aktive som er opprettet i arbeidsflyt, og de som er sendt inn og arkivert. For å gjøre dette kalles typisk først en søkeoperasjon med filtrering som returnerer en liste (GetReporteeElementListV2). Deretter kan et enkelt element hentes med alle detaljer.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeElementList GetReporteeElementListV2 Basic/WS/EC   ReporteeElementList GetFormSetElementsV2 Basic/WS/EC   ReporteeArchiveExternal GetAttachmentData Basic/WS/EC    Hent prosesseringsstatus Sluttbrukersystem kan hente ut estimert tid (minutter) for hvor lang tid prosesseringen av en innsendingstjeneste vil ta.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     IntermediaryInbound GetAltinnSubmissionStatus Basic/WS/EC    Innsending av skjema med sensitive felt fra sluttbrukersystem Altinn versjon 2 støtter innsending av tjenester med sensitive felt. Slike skjema kan også sendes inn via sluttbrukersystem. For å støtte dette må sluttbrukersystem kryptere data før den sendes inn via web tjenester.\nPrinsippet som brukes er at hvert enkelt sensitivt felt krypteres med en symmetrisk nøkkel. Nøkkelen som genereres må være 128 bit lang. Algoritmen for å kryptere hvert enkelt felt skal være AES.\nSensitive felt i skjema som skal sendes inn til Altinn vil alltid være strengverdier i XSD. Dette fordi en kryptert verdi alltid vil overføres som en streng, og det vil ikke være mulig å validere den krypterte verdien.\nNår skjema er kryptert må den symmetriske nøkkelen krypteres ved hjelp av det offentlige sertifikatet til tjenesteeier. Algoritmen som benyttes for denne krypteringen er RSA. Sertifikatet til tjenesteeier hentes ut ved hjelp av operasjonen GetCertificatesExternal på tjenesten KeyManagementExternal. Basert på tjeneste og tjenesteutgave returneres en liste med gyldige sertifikater og ID for hver enkelt tjenesteeier som skal motta skjemadata. I de fleste tilfeller vil dette bare være et sertifikat da de fleste innsendingstjenester bare har en mottaker av skjemadata.\nHvis sluttbruker ønsker muligheten til å dekryptere data ved et senere tidspunkt må også den symmetriske nøkkelen sendes inn kryptert med et egendefinert passord. Dette passordet må minimum være på 8 tegn. Ved uthenting fra arkiv ved hjelp av sluttbrukersystem kan man da benytte passordet for å dekryptere den symmetriske nøkkelen for deretter å dekryptere feltene som har krypterte data.\nTjenesten som benyttes for å sende inn sensitive skjema er samme som vanlige skjema, SubmitFormTask), se også kapittel 4.3.2. Parameteren FormData settes da som vanlig, men nodene er kryptert som beskrevet over. I tillegg må data om brukt nøkkel fylles ut:\n\u0026amp;lt;ns:EncryptedKey\u0026amp;gt; \u0026amp;lt;!--Optional:--\u0026amp;gt; \u0026amp;lt;ns:ReporteeSymmetricKey\u0026amp;gt; \u0026amp;lt;!--Dette den symmetriske nøkkelen kryptert med selvvalgt passord--\u0026amp;gt; \u0026amp;lt;ns:Key\u0026amp;gt;\u0026amp;lt;/ns:Key\u0026amp;gt; \u0026amp;lt;/ns:ReporteeSymmetricKey\u0026amp;gt; \u0026amp;lt;ns:ServiceOwnerSymmetricKeys\u0026amp;gt; \u0026amp;lt;!--Zero or more repetitions:--\u0026amp;gt; \u0026amp;lt;ns:ServiceOwnerSymmetricKeyBE\u0026amp;gt; \u0026amp;lt;!--Dette er ID til sertifikat brukt til å kryptere nøkkel for tjenesteier. Id ble mottatt i kallet GetCertificatesExternal sammen med sertifikat--\u0026amp;gt; \u0026amp;lt;ns:CertificateId\u0026amp;gt;\u0026amp;lt;/ns:CertificateId\u0026amp;gt; \u0026amp;lt;!--Dette er den symmetriske nøkkelen kryptert med tjenesteeiers sertifikat angitt av id over--\u0026amp;gt; \u0026amp;lt;ns:Key\u0026amp;gt;\u0026amp;lt;/ns:Key\u0026amp;gt; \u0026amp;lt;/ns:ServiceOwnerSymmetricKeyBE\u0026amp;gt; \u0026amp;lt;/ns:ServiceOwnerSymmetricKeys\u0026amp;gt; \u0026amp;lt;/ns:EncryptedKey\u0026amp;gt;  For å hente etaten (eller etatenes) offentlige sertifikat benyttes tjenesten KeyManagement og operasjonen GetCertificates. Denne tar som input de to påkrevde parameterne externalServiceCode og externalServiceEditionCode, og returnerer basert på disse hvilket hvilke) sertifikat (returparameter Certificate) som skal benyttes til å kryptere data. Når data sendes inn til Altinn må den unike identifikatoren for sertifikatet også sendes med (returparameter CertificateId). En tom liste returneres om ikke kombinasjonen av externalServiceCode og externalServiceEditionCode er definert for sensitive personopplysninger i TUL, eller ikke eksisterer.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     KeyManagement GetCertificates Basic/WS/EC    Signering ved hjelp av XMLDsig Det er i Altinn mulig for tjenesteeier å kreve digital signering ifølge XMLDSig standarden i tillegg til Altinns vanlig sikkerhets funksjonalitet. For tjenester som krever dette må hvert skjema signeres med et Signature element. Signature element må tilpasse XMLDSig standard og er beskrevet i mer detalj i kapittel 5.3.\nBenytt meldingstjeneste Meldingstjenester benyttes av tjenesteeiere for å sende informasjon eller tilbakemelding på innsendte data til sluttbrukere/avgivere i Altinn. Sluttbrukersystemer har mulighet for å hente ut meldinger for avgivere, samt utføre visse handlinger på tjenestene, deriblant å arkivere en melding.\nHent melding Det er mulig å hente ut meldinger for avgivere i Altinn, både aktive og arkiverte meldinger. Meldingene hentes først gjennom å hente en liste basert på søkeparametere, deretter kan en spesifikk melding hentes med identifikator for en ønsket melding. Denne identifikatoren vil være retur parameter for liste objektet.\nNår en melding hentes vil det også sendes en lesevarsling til tjenesteeier dersom de har bedt om dette. Både når man henter listen og den spesifikke meldingen vil man basert på parameteren CaseID kunne se om den aktuelle meldingstjenesten er knyttet til en samhandlingstjeneste.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeElementList GetReporteeElementListV2 Basic/WS/EC   Correspondence GetCorrespondenceForEndUserSystemV2 Basic/WS/EC    Bekreft melding For noen meldingstjenester krever tjenesteeier at bruker bekrefter at meldingen er lest. Denne bekreftelsen kan også gjøres fra sluttbrukersystem i tillegg til portal. Meldingen i Altinn oppdateres da med lesebekreftelsen, samt hvem som har bekreftet meldingen og tidspunkt for når dette ble gjort.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Correspondence SaveCorrespondenceConfirmation Basic/WS/EC    Slett melding Grensesnittet for meldingstjenester har støtte for å slette aktive (ikke arkiverte) meldinger. Den autentiserte brukeren må ha skrivetilgang til elementet som ønskes slettet. Det er to former for sletting i Altinn. Det er permanent sletting og flytting av element til papirkurv. Sletteoperasjonen vil utføre permanent sletting hvis avgiver er en person. Hvis avgiver er en organisasjon vil elementet bli flyttet til papirkurv.\nPermanent slettede elementer vil ikke kunne gjennopprettes. Elementet blir helt borte. Elementer som flyttes til papirkurv vil kunne gjennopprettes i sluttbrukerportalen. Det er foreløpig ikke laget noe funksjonalitet for gjennoppretting over SOAP grensesnittet.\nHvis meldingen ikke har vært lest ved slettetidspunktet vil det likevel kunne sendes en lesevarsling til tjenesteeier. Tjenesteeier får på denne måten en indikasjon på at sluttbruker har tatt stilling til meldingen. Er det ønskelig å hindre bruker i å slette uleste meldinger må dette implementeres i sluttbrukerapplikasjonen.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Correspondence DeleteCorrespondence Basic/WS    Arkiver melding Et sluttbrukersystem kan velge å arkivere en melding. Arkiveringen kan kun gjennomføres dersom meldingen er ferdig behandlet, dvs. meldingen må være lest og bekreftet (dersom bekreftelse kreves).\nFor å arkivere meldingen benyttes parameteren CorrespondenceID for å angi den unike identifikatoren for meldingstjenesten som skal arkiveres (denne identifikatoren tilsvarer ReporteeElementID). Operasjonen returnerer kvittering til sluttbrukersystemet.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Correspondence ArchiveCorrespondenceFromEndUserSystem Basic/WS/EC    Benytt formidlingstjeneste Formidlingstjenester handler om å transportere data fra en eller flere avgivere til en eller flere mottakere, hvor Altinn fungerer som mellommann som sørger for transport og infrastruktur. Altinn er sådan en passiv part i prosessen, og både avsender og mottaker må benytte grensesnitt tilgjengeliggjort av Altinn.\nInnholdet i en formidlingstjeneste er data som er bestemt mellom aktørene som inngår i en formidlingstjeneste, og er ikke kjent av Altinn.\nData som skal overføres må pakkes i en ZIP-fil. For SFTP kanalen må den inneholde to forhåndsdefinerte Altinn XML filer for å definere metadata (manifest.xml) og mottakere (recipients.xml). Ved bruk av web service sendes først metadata og mottaker liste, før ZIP-arkivet overføres i en egen operasjon.\nDet er viktig at ZIP-arkivet sin interne liste med filnavn blir enkodet med UTF-8. Dette vil gi best støtte for filnavn med tegn utenfor ASCII tabellen. Det kan for eksempel bli feil med bokstavene æ, ø og å hvis man ikke angir UTF-8. Utover dette kan ZIP-filen i prinsippet inneholde hva som helst av data. Utover viruskontroll gjør ikke Altinn noen form for validering eller prosessering av dataene, men sørger for at oppgitt metadata og mottakerinformasjon er korrekt og validerer, samt holder orden på kvitteringer og sporingsinformasjon om forsendelsen.\nI tillegg til innhold i ZIP-fil kan avsender og mottaker også avtale bruk av FileList og PropertyList som er en del av manifestet. FileList kan benyttes til å oversende informasjon om innhold i formidlingstjenesten samt checksum for verifikasjon. PropertyList er en liste med nøkkel og verdi par som kan settes fritt for å overføre ytterligere informasjon i formidlingstjenesten.\nFormidlingstjenester er tenkt brukt primært for formidlinger:\n B2B (Business-to-Business), B2G (Business-to-Government), G2B (Government-to-Business), eller G2G(Government-To-Government)  Når en avsender laster opp en formidlingstjeneste vil Altinn verifisere metadata og mottakere. Når dette er gjort vil forsendelsen gjøres tilgjengelig for mottakere for nedlasting. Samtidig vil Altinn opprette et kvitteringshierarki med en hovedkvittering tilhørende avsender, samt en underkvittering per mottaker. Hver underkvittering vil inneholde status på nedlastingen for denne mottakeren. Alle kvitteringer vil være knyttet til referanse satt av avsender. Avsender og mottaker kan også utveksle ytterligere statustekst på disse kvitteringene gjennom web service. På denne måten kan avsender følge opp status for hver enkelt mottaker.\nTiden en formidlingstjeneste vil være tilgjengelig for nedlasting i Altinn vil kunne variere fra tjeneste til tjeneste og styres av tjenesteeier. Dette betyr at filene etter en viss tidsperiode vil bli slettet selv om filene ikke er lastet ned av en eller flere av mottakerne.\nFormidlingstjenesten kan av tjenesteeier også settes opp til å benytte seg av et tjenesteeier styrt rettighetsregister. Dette registeret kan begrense hvem som har tilgang til spesifikke tjenester på avgiver nivå, og styres av tjenesteeier.\nFormidlingstjenesten beskrives nedenfor i fire scenarioer ift. avsender og opplasting av filer vs. mottaker og nedlasting av filer, samt hvilken kanal opp- og nedlaster kan benytte. Se også Vedlegg C: Flytdiagram for formidlingstjeneste for overordnet flyt.\nLaste opp filer til mottaker(e) (WS) Når avsender ønsker å benytte web service for å laste opp og gjøre en formidlingstjeneste tilgjengelig for mottakere gjøres dette ved først å sende nødvendig metadatainformasjon til Altinn. Dette gjøres gjennom kallet InitiateBrokerService. Her må avsender gi informasjon tilsvarende innholdet i manifest.xsd og receipients.xsd (som definert i kapittel 6.15), men som del av tjenestekallet. Dette er blant annet nøkkelinformasjon om tjenesten som skal benyttes, avsenders referanse, og hvem som skal være mottaker av formidlingstjenesten. Se kapittel 6.14.2 for mer informasjon om operasjonen InitiateBrokerService.\nSom respons på denne tjenesten vil avsender motta en referanse, denne referansen benyttes så som nøkkel til å laste opp faktisk ZIP-fil gjennom operasjonen UploadFileStreamed. Etter at payload er lastet opp til Altinn, vil den gjøres tilgjengelig for angitte mottakere, og avsender får en kvittering på forsendelsen. Denne kvitteringen inneholder en kvitterings ID som avsender kan benytte for å hente et kvitteringshierarki som inneholder en hovedkvittering med en eller flere underkvitteringer. Hver enkelt underkvittering vil her representere forsendelsen til en mottaker, med tilhørende status på hvorvidt formidlingstjenesten er lastet ned eller ikke. Se kapittel 6.15.3 for mer informasjon om operasjonen UploadFileStreamed, og kapittel 6.4.1 for informasjon om GetReceiptV2.\nBatch grensesnitt eller tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste / Fil Operasjon / Format Type     BrokerService InitiateBrokerService Basic/WS/EC   BrokerServiceStreamed UploadFileStreamed Basic/WS/EC   Receipt GetReceiptV2 Basic/WS    Laste opp filer til mottaker(e) (SFTP) For formidlingstjenester tilbyr Altinn også en SFTP kanal for opp- og nedlasting. Denne kan blant annet benyttes dersom informasjonen som skal deles med mottakere er av en viss størrelse (ca. 200MB eller mer), da disse ikke vil være mulig å laste opp og ned gjennom web service kanalen.\nAvsender kobler seg da opp mot Altinns SFTP kanal ved hjelp av bruker opprettet i portal. Denne brukeren vil autentiseres mot SFTP serveren ved hjelp av brukernavn, passord og sertifikat. Se kapittel 8.2 Registrere SFTP-bruker for mer informasjon om hvordan slike brukere opprettes. Ved pålogging opprettes det en virtuell filstruktur basert på tilgjengelige formidlingstjenester. Se kapittel 4.5.3 for mer informasjon om formatet på denne filstrukturen.\nAvhengig av hvordan SFTP-klient benyttes, vil man laste opp nye formidlingstjenester til en egne opplastningsmappe. Filene som lastes opp her må være på et ZIP-format, og inneholde en manifest.xml og recipients.xml i henhold til kapittel 6.15.1 og 6.15.2. Altinn vil etter at fil er ferdig opplastet starte prosessering av filen. Dette innebærer blant annet validering av informasjon oppgitt i manifest-filen samt validering av mottakere oppgitt i Recipients. Ved en vellykket validering av opplastet data opprettes det en kvitteringshierarki med en hovedkvittering samt underkvitteringer for hver mottaker. For å hente denne kvitteringsdataen vil avsender benytte seg av operasjonen GetReceiptV2. For å kunne søke opp korrekt kvittering bør SendersReference som ble oppgitt i manifestfilen benyttes som søkeparameter. Se mer om GetReceiptV2 i kapittel 6.4.1.\nSe også Figur 2: Opp- og nedlasting over SFTP i kapittel 11.\nBatch grensesnitt eller tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste / Fil Operasjon / Format Type     BrokerService SFTP-server Opplasting av ZIP-fil inneholdende payload, manifest.xml og recipients.xml iht. spesifikasjon angitt i avsnitt 6.15 SFTP   Receipt GetReceiptV2 Basic/WS    Laste ned filer fra avsender (WS) En mottaker av formidlingstjenester kan benytte seg av web servicer for å sjekke og eventuelt laste ned tilgjengelige filer. Ved å benytte operasjonen GetAvilableFiles kan mottaker enkelt få en oversikt over hvilke filer som er tilgjengelig i Altinn. Denne operasjonen gir informasjon om formidlingstjenesten, samt status – hvorvidt den allerede er lastet ned av mottaker. Se kapittel 6.14.1 for mer informasjon om GetAvailableFiles.\nBasert på referansen som hentes i GetAvailableFiles kan mottaker så benytte seg av operasjonen DownloadFileStreamed til å laste nedformidlingstjenesten. Denne tjenesten er basert på strømming av data. Tilslutt må mottaker bekrefte at de har mottatt filen ved å utføre et kall til ConfirmDownloaded. Dette gjør at avsender kan se at mottaker har hentet ned filen. Se kapittel 6.14.4 for mer informasjon.\nSom mottaker har man tilgang til underkvittering som gjelder for akkurat denne mottakeren. Mottaker kan da benytte GetReceiptV2 til å hente kvittering med tilhørende status, samt UpdateReceipt til å legge på en kvitteringstekst som også avsender vil ha tilgang til. Se henholdsvis kapittel 6.4.1 og 6.4.3 for mer informasjon om disse operasjonen.\nBatch grensesnitt eller tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste / Fil Operasjon / Format Type     BrokerService GetAvailableFiles Basic/WS/EC   BrokerServiceStreamed DownloadFileStreamed Basic/WS/EC   Receipt GetReceiptV2 Basic/WS   Receipt UpdateReceipt Basic/WS    Laste ned filer fra avsender (SFTP) Som ved opplasting, støtter Altinn også nedlasting over SFTP. På samme måte må en egen SFTP-bruker opprettes i portalen, se kapittel 8.2.\nNår bruker logger på Altinns SFTP server vil det opprettes en egen virtuell filstruktur. Denne bygges blant annet opp basert på informasjon om formidlingstjenester tilgjengelig for nedlasting som mottaker. Filstrukturen som presenteres vil være bygd opp med følgendemappestruktur:\n Upload – benyttes til å droppe filer som skal lastes opp til Altinn. Download – mappe som samler alle formidlingstjenester tilgjengelig for bruker. \u0026lt;Avgiver\u0026gt; - egen mappe for hver enkelt avgiver bruker kan representere. \u0026lt;Tjenestekode\u0026gt; - egen mappe for hver enkelt tjenestekode det finnes formidlingstjenester for. \u0026lt;Tjenesteutgavekode\u0026gt; - egen mappe for hver enkelt tjenesteutgave. \u0026lt;Filer for formidlingstjenesten\u0026gt; - en eller flere ZIP-filer som er tilgjengelig for nedlasting.  SFTP-klient kan navigere denne filstrukturen og laste ned ønskede filer. En implementasjon av SFTP-klient kan således også direkte basert på denne oppbyggingen sammen med informasjon hentet fra web service GetAvailableFiles hente ut filer basert på status. Se kapittel 6.14.1 for mer informasjon om operasjonen GetAvailableFiles.\nNår en fil er lastet ned fra Altinns SFTP-server vil Altinn markere denne filen som nedlastet og oppdatere metadata og kvittering. Mottaker av formidlingstjenesten kan verifisere dette ved å hente underkvittering som tilhører den konkrete overføringen. Til dette benyttes operasjonen GetReceiptV2 ved å angi kvitteringsidentifikator mottatt gjennom GetAvilableServices, eller ved å søke på referansen SendersReference som oppgitt i mottatt manifest fil. Se kapittel 6.4.1 for mer informasjon om GetReceiptV2.\nDersom avsender og mottaker ønsker, kan ytterligere informasjon om status utveksles ved å oppdatere kvittering relatert til mottakers fil. Mottaker kan da benytte operasjon UpdateReceipt til å legge på fritekst. Avsender kan på sin side hente denne basert på GetReceiptV2 operasjonen. Se kapittel 6.4.3 for mer informasjon om UpdateReceipt.\nNår man benytter nedlasting med SFTP er det ikke nødvendig å bekrefte nedlastingen med noe kall til ConfirmDownloaded. Det blir gjort automatisk.\nBatch grensesnitt eller tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste / Fil Operasjon / Format Type     BrokerService SFTP-server Nedlasting av ZIP-fil inneholdende payload og manifest.xml iht. spesifikasjon angitt i avsnitt 6.15 SFTP   BrokerService GetAvailableFiles Basic/WS/EC   Receipt GetReceiptV2 Basic/WS   Receipt UpdateReceipt Basic/WS    Benytt innsynstjeneste Innsynstjenester er en tjenestetype i Altinn som benyttes for å presentere data fra tjenester som tilbys av tjenesteeiere, og kan sees på som et oppslag mot tjenesteeiers system. Grensesnitt for å aksessere tjenestene eksponeres til sluttbrukersystemer gjennom Altinn, og Altinn formidler responsen fra tjenestene til sluttbrukersystemet.\nSluttbrukersystemer kan velge å lagre en signert kopi av en innsynstjeneste som benyttes. Den signerte innsynstjenesten lagres da i brukers arkiv i Altinn. En innsynstjeneste som ikke er signert og arkivert vil ikke være tilgjengelig i Altinn etter at den er benyttet.\nOperasjonene tilgjengelig vil variere fra innsynstjeneste til innsynstjeneste. Hver tjenesteeier vil eksponere sitt eget sett av operasjoner relatert til sine innsynstjenester, og funksjonaliteten for disse kan variere. Generelt vil operasjonene returnere data for innsynstjenesten, og enkelte vil også muliggjøre arkivering av dataen.\nFinn arkiverte innsynstjenester Et sluttbrukersystem kan hente ut detaljer på arkiverte innsynstjenester. For å gjøre dette kalles typisk først en søkeoperasjon med filtrering som returnerer en liste (GetReporteeElementListV2). Merk at operasjonen vil returnere parameter ReporteeElementType med type LookUp for innsynstjenester.\nDeretter kan et enkelt element hentes med alle detaljer ved å benytte operasjonen GetArchivedLookup. Parameter reporteeElementID benyttes her som input for å identifisere den unike innsynstjenesten som skal hentes. Operasjonen returnerer dataen fra den arkiverte innsynstjenesten i form av binærdata som en PDF i parameteren LookupPDF.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeElementList GetReporteeElementListV2 Basic/WS/EC   ReporteeArchiveExternal GetArchivedLookup Basic/WS/EC    Gjøre oppslag på innsynstjenester En sluttbruker eller sluttbrukersystem kan gjøre oppslag på innsynstjenester som er konfigurert med mulighet for direkte kall i Altinn. Dette gjøres ved kall til ExecuteLookUp operasjonen med input om hvilken innsynstjeneste man skal benytte (ServiceCode og ServiceEditionCode), hvem avgiver at oppslaget er (Reportee) og selve spørringen til tjenesten (QueryData). QueryData oppgis som en tekststreng og vil variere etter hvilke operasjoner innsynstjenesten tilbyr.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   LookUpExternal ExecuteLookUp Basic/WS/EC    Benytt samhandlingstjeneste En samhandlingstjeneste er en tjeneste som knytter sammen andre tjenester. Samhandlingstjenester kan være definert av sluttbrukere (samleside) eller av tjenesteeiere (e-dialog). Gjennom samhandlingstjenester kan sluttbrukere og sluttbrukersystemer benytte et sett med tjenester som for bruker og/eller tjenesteeier hører naturlig sammen.\nNedenfor beskrives funksjonaliteten som kan benyttes fra sluttbrukersystemer for samhandlingstjenester. En tjeneste som er del av en samhandlingstjeneste instans kan også behandles individuelt, det vil si at all funksjonalitet som er tilgjengelig for sluttbrukersystemer for f.eks. innsendingstjenester kan også benyttes for innsendingstjenester som er del av en samhandlingstjeneste. En instans av en samhandlingstjeneste er definert som en sak, ”case”, og der hvor det skal refereres til en spesifikk instans av en samhandlingstjeneste benyttes derfor parameteren CaseID.\nFinn aktive og arkiverte samhandlingstjenester En liste over samhandlingstjenester kan hentes ut ved å kalle GetReporteeElementListV2 med søkeparametre som begrenser søket til samhandlingstjenester. For å søke etter kun samhandlingstjenester kan man benytte parameteren CollectionPages eller EDialogue, for å henholdsvis begrense søk til samlesider eller e-dialoger. Eventuelt kan også parameteren CaseID angis med den unike identifikatoren for en spesifikk samhandlingstjeneste, operasjonen vil i så fall kun returnere informasjon om denne. Merk at operasjonen vil returnere parameter ReporteeElementType med type Collaboration for samhandlingstjenester.\nInformasjon som vil bli returnert vil variere etter hva slags tjeneste informasjonen gjelder. For samhandlingstjenester vil blant annet følgende parametre returneres:\n CaseID - unik identifikator for samhandlingstjenesten IsCaseArchved - angir om samhandlingstjenesten er arkivert Notice – eventuell merknad på samhandlingstjenesten  For tjenester som er tilknyttet en samhandlingstjeneste vil parameteren ParentCaseName angi den unike referansen til samhandlingstjenesten den tilhører.\nSluttbrukersystemer kan også hente en liste med detaljer for aktive samhandlingstjenester, det vil si samhandlingstjenester som ikke har blitt arkivert, ved hjelp av operasjonen GetCaseList. Denne operasjonen vil kunne hente ut detaljer over alle samhandlingstjenester\n av en bestemt tjeneste og utgave ved å benyttes parametrene externalServiceCode og externalServiceEditionCode eller for én bestemt samhandlingstjeneste ved å bruke parameteren caseID  Sammen med disse parametrene kan også languageID og reporteeNumber sendes inn for å begrense resultatet.\nDenne operasjonen returnerer:\n CaseID – informasjon om samhandlingstjenestens unike identifikator CaseName – navnet på tjenesten Comments – eventuelle kommentarer satt av bruker på samhandlingstjenesten CurrentStateFriendlyName – visningsvennlig navn basert på språkparameter CurrentStateID – unik identifikator for tilstanden CurrentStateName – tilstandens navn Notice – eventuelle merknader fra etat satt på samhandlingstjenesten  Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   ReporteeElementList GetReporteeElementListV2 Basic/WS/EC   Case GetCaseList Basic/WS/EC    Opprett ny samhandlingstjeneste Sluttbrukersystemer kan opprette en ny instans av en samhandlingstjeneste, og dermed starte arbeidsflyten for tjenesten. Det er kun tjenesteeierdefinerte samhandlingstjenester som kan opprettes fra sluttbrukersystemer.\nParametrene externalServiceCode og externalServiceEditionCode i operasjonen InstantiateCollaboration angir type instans av samhandlingstjeneste som skal opprettes, og reporteeNumber angir fødselsnummer eller organisasjonsnummer den opprettes for. Disse er obligatoriske parametre. I tillegg til disse kan externalSystemReference, visibleDateTime og dueDate sendes inn. visibleDateTime angir når tjenesten skal være synlig i portalen, om denne ikke angis vil den umiddelbart bli synlig.\nOperasjonen returnerer den unike identifikatoren, CaseID, som kan benyttes videre til for eksempel å opprette instanser av innsendingstjenester knyttet til samhandlingstjenesten.\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Case InstantiateCollaboration Basic/WS/EC    Avslutt samhandlingstjeneste Sluttbrukersystem kan velge å avslutte en aktiv samhandlingstjeneste. Innsendings- og meldingstjenester som inngår i samhandlingstjenesten må være arkivert før samhandlingstjenesten kan arkiveres som helhet.\nAlternativt kan sluttbrukersystemet benytte parameteren forceArchive. Settes denne til true vil samhandlingstjenesten bli arkivert med mindre det er aktive meldingstjenester knyttet til samhandlingstjenesten. Eventuelle aktive innsendingstjenester vil bli atskilt fra den arkiverte samhandlingstjenesten. Om forceArchive settes til false vil samhandlingstjenesten ikke bli arkivert om det fremdeles er aktive elementer tilknyttet den.\nParameter caseID angir samhandlingstjenesten som skal arkiveres, og operasjonen vil ved vellykket arkivering returnere en arkiv identifikator for samhandlingstjenesten\nTjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet:\n   Tjeneste Operasjon Type     SystemAuthentication GetAuthenticationChallenge Basic   Case ArchiveCase Basic/WS/EC    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/abonnement/",
	"title": "Abonnement",
	"tags": [],
	"description": "Abonnement - legge ut element i innboksen",
	"content": " Subscription Subscription inneholder operasjoner relatert til abonnement på tjenester i Altinn.\nSubmitSubscription SubmitSubscription kalles for å lagre abonnement for ett eller flere skjemasett i Altinn. Det er mulig å sende abonnementsdata for mer enn ett oppgavesett i ett kall til SubmitSubscription. Skjemasettet må være definert som en tjeneste i tjenesteutviklingsløsningen og migrert til Altinn før en tjenesteeier kan sette opp abonnement for et skjemasett. Operasjon GetAvailableServices kan kalles for å sjekke om tjenesten for skjemasettet eksisterer i Altinn.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     externalBatchId Unik id for forsendelse. Denne defineres og settes av tjenesteeier. Returneres i kvittering. Identifikatoren kan senere benyttes av tjenesteeier for å hente ut kvittering for den gitte forsendelsen   SubscriptionDetails Liste med SubscriptionDetailsBE-objekter som inneholder metadata og abonnement   Property Beskrivelse   SubscriptionDetailsBE    SubscriptionList Liste med abonnement (SubscriptionBE-objekter)   SystemUserCode Kode som unikt representerer kildesystem, f.eks. \u0026ldquo;ABC-123\u0026rdquo;. Format: XXX_YYYY. De tre første bokstavene er påkrevd og representerer tjenesteeier. De etter understreken representerer avdeling/system, og er valgfritt hvis det ikke finnes flere avdelinger/systemer innenfor samme tjenesteeier   SubscriptionBE    ReporteeId Fødselsnummer eller organisasjonsnummer som identifiserer hvem dataene gjelder   StartDate Dato for når abonnementet skal aktiviseres (yyyy-MM-dd)   ExpirationDate Dato for når abonnementet opphører (yyyy-MM-dd)   NextScheduleDate Dato for når abonnementet skal instansieres neste gang (yyyy-MM-dd). Første dato settes av tjenesteeier, neste kalkuleres av runtiejobb i Altinn (basert på periodetype)   NextDueDate Dato for når abonnementet/innsendingstjenesten må være fylt ut av bruker i portal/sluttbrukersystem (yyyy-MM-dd). Første dato settes av tjenesteeier, neste kalkuleres av runtiejobb i Altinn (basert på periodetype)   VisibleDate Dato for når abonnementet skal være synlig i portal/for sluttbrukersystemer (yyyy-MM-dd)   SubscriptionPeriodType Angir hvor ofte abonnementet skal instansieres (obligatorisk): Annual - årlig, Semiannual - to ganger årlig, Quarterly - tre ganger årlig, Tertiary - fire ganger årlig, Bimonthly - annenhver måned, Monthly - hver måned, Fortnightly - hver 15. dag, Weekly - hver uke, Daily - hver dag, Once -abonnementet instansieres én gang   IdentityFields Liste (SubscriptionIdentityField-objekt) som inneholder identifiserende felter for det abonnementet. Settes kun hvis abonnementet skal kobles til et gitt preutfylt skjemasett   ExternalServiceEditionCode Utgave av tjenesten det skal opprettes abonnement for   ExternalServiceCode Unik identifikator for tjenesten det skal opprettes abonnement for   CaseId Valgfri referanse til samhandlingstjeneste skjema skal knyttes til   SubscriptionIdentityField    FieldValue Verdi for identifiserende feltet. Må angis hvis abonnement skal kobles til et preutfylt skjemasett. Se avsnitt Identifiserende felter for mer info   ReceiptBE    ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel ved senere oppdatering av kvittering   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptTypeName Angir hva kvittering gjelder. Mulige verdier: FormTask - Skjemasett, Correspondence - Melding, PINCODE - PIN-koder, Subscription - Abonnement, Outbound - Forsendelse sendt fra Altinn, PreFill - Preutfyllingsdata, Broker - Formidlingstjeneste, RegisterDLS - DLS registerdata, RegisterDSF - DSF registerdata, RegisterER - ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp - Innsynstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering   ReceiptStatusCode Status for forsendelse som kvitteringen gjelder: NotSet (standardverdi som brukes når status ikke er satt – skal ikke kunne mottas som verdi), OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering)   References Liste med ReferenceBE-objekter for kvitteringen   SubReceipts Liste med tilhørende Receipt-objekter (dersom denne kvitteringen er en hovedkvittering)   ReferenceBE    ReferenceValue Selve referansen (verdien) satt på kvitteringen. Typisk forsendelsesreferansen   ReferenceTypeName Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Benyttes ikke, SendersReference - Referanse satt av avsender for del av en forsendelse, ParentReference - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen, ArchiveReference - Arkivreferanse    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/altut/",
	"title": "Altut",
	"tags": [],
	"description": "Registrering av meldinger (ikke videreført)",
	"content": " AltUt For bakoverkompatibilitet tilbys AltUt grensesnittet for registrering av meldinger til eksisterende tjenesteeiere. Nye tjenesteeiere skal benytte grensesnittet correspondence. AltUt grensesnittet blir ikke lenger oppdatert ettersom Altinn videreutvikles.\nSubmitAltutMessagePw Operasjonen SubmitAltutMessagePw benyttes av eksisterende tjenesteeiere for å sende meldinger til avgivere i Altinn.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     altutMessage Meldingen som skal sendes til Altinn. Må være i henhold til AltUt.xsd (versjon 6.0)   Password Tjenesteeiers passord   Returverdi Beskrivelse   submitAltutMessagePwResult Kvittering for innsendingen. Er i henhold til GovOrganReceipt.xsd (versjon 6.0)    Se avsnitt Batch grensesnitt – Altut format for bilde av xml struktur i Altut.xsd.\nTabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten\n   Property Beskrivelse     altutMessage (AltUt.xsd)    Se definisjonen på xsd i avsnittet Batch grensesnitt – Altut format        Element Beskrivelse     GovOrganReceipt Rotnode   schemaVersion Versjon på kvittering   GovOrganReceipt.DataUnitInReceipt Elementet inneholder status på og tidspunkt for forsendelse, samt elementer for melding til kallende system   receiptType Kvitteringstype (valgfritt): PREFILL, ALTUT   status Status på innsending   timeReceived Tidspunkt for innsending   GovOrganReceipt.DataUnitInReceipt.Message Overordnet element   GovOrganReceipt.DataUnitInReceipt.Message.MessageEntry Elementet inneholder melding som beskriver resultat for forsendelse    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/autorisasjon/",
	"title": "Autorisasjon",
	"tags": [],
	"description": "Webservice operasjoner med beskrivelse",
	"content": " AuthorizationAdministration AuthorizationAdministration er tjenesten i Altinn for import av eksterne regler og ressurser brukt til å ta avgjørelser der Altinns autorisasjonskomponent benyttes. Er tilknyttet tjenesten AuthorizationDecisionPointExternal som benytter importert informasjon.\nImportAuthorizationPolicy Operasjon for å importere XACML regler for ekstern autorisering.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     authorizationRulesXml XML på XACML standard som inneholder autorisasjonsreglene   Returverdi Beskrivelse   Boolsk Returnere status for regelimporten, true, vellykket eller false, feilet    Altinn spesifikke elementer XACML-forespørselen:\n   Foreldrenode AttributeId AttributeValue verdier     Subject urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:rolecode Kode for rollen   Subject urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:authenticationlevel Autentiseringsnivå 0, 1, 2, 3, 4. Hvilke nivå som skal kreves for en resurs.   Subject urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:delegatable true / false kan rettigheten delegeres videre   Subject urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:external-resource Ekstern ressursdefinisjon   Subject urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id Read Write Sign ArchiveRead ArchiveDelete ServiceOwnerArchiveRead Delegate   Subject urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:rolecode Kode for rollen    Følgende er et eksempel på valid XACML for eksterne regler: AuthorizationPolicy\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;utf-8\u0026quot;?\u0026gt; \u0026lt;xacml:Policy xmlns:xacml=\u0026quot;urn:oasis:names:tc:xacml:2.0:policy:schema:os\u0026quot; xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xsi:schemaLocation=\u0026quot;urn:oasis:names:tc:xacml:2.0:policy:schema:os http://docs.oasis-open.org/xacml/2.0/access_control-xacml-2.0-policy-schema-os.xsd\u0026quot; PolicyId=\u0026quot;#1\u0026quot; Version=\u0026quot;1.0\u0026quot; RuleCombiningAlgId=\u0026quot;urn:oasis:names:tc:xacml:1.0:rule-combiningalgorithm:deny-overrides\u0026quot;\u0026gt; \u0026lt;xacml:Description\u0026gt;This is an example RolePolicy XACML and how it should be sent from external systems to add external rules\u0026lt;/xacml:Description\u0026gt; \u0026lt;xacml:Target/\u0026gt; \u0026lt;xacml:Rule RuleId=\u0026quot;#1\u0026quot; Effect=\u0026quot;Permit\u0026quot;\u0026gt; \u0026lt;xacml:Description\u0026gt;This is a rule giving a person with DAGL READ for the external resource NAVRF1030\u0026lt;/xacml:Description\u0026gt; \u0026lt;xacml:Target\u0026gt; \u0026lt;xacml:Subjects\u0026gt; \u0026lt;xacml:Subject\u0026gt; \u0026lt;xacml:SubjectMatch MatchId=\u0026quot;urn:oasis:names:tc:xacml:2.0:function:string-equal\u0026quot;\u0026gt; \u0026lt;xacml:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt;DAGL\u0026lt;/xacml:AttributeValue\u0026gt; \u0026lt;xacml:SubjectAttributeDesignator AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:rolecode\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;/\u0026gt; \u0026lt;/xacml:SubjectMatch\u0026gt; \u0026lt;xacml:SubjectMatch MatchId=\u0026quot;urn:oasis:names:tc:xacml:2.0:function:string-equal\u0026quot;\u0026gt; \u0026lt;xacml:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#integer\u0026quot;\u0026gt;2\u0026lt;/xacml:AttributeValue\u0026gt; \u0026lt;xacml:SubjectAttributeDesignator AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:authenticationlevel\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;/\u0026gt; \u0026lt;/xacml:SubjectMatch\u0026gt; \u0026lt;xacml:SubjectMatch MatchId=\u0026quot;urn:oasis:names:tc:xacml:2.0:function:string-equal\u0026quot;\u0026gt; \u0026lt;xacml:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#boolean\u0026quot;\u0026gt;false\u0026lt;/xacml:AttributeValue\u0026gt; \u0026lt;xacml:SubjectAttributeDesignator AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:delegatable\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;/\u0026gt; \u0026lt;/xacml:SubjectMatch\u0026gt; \u0026lt;/xacml:Subject\u0026gt; \u0026lt;/xacml:Subjects\u0026gt; \u0026lt;xacml:Resources\u0026gt; \u0026lt;xacml:Resource\u0026gt; \u0026lt;xacml:ResourceMatch MatchId=\u0026quot;urn:oasis:names:tc:xacml:2.0:function:string-equal\u0026quot;\u0026gt; \u0026lt;xacml:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#integer\u0026quot;\u0026gt;NAVRF1030\u0026lt;/xacml:AttributeValue\u0026gt; \u0026lt;xacml:ResourceAttributeDesignator AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:external-resource\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;/\u0026gt; \u0026lt;/xacml:ResourceMatch\u0026gt; \u0026lt;/xacml:Resource\u0026gt; \u0026lt;/xacml:Resources\u0026gt; \u0026lt;xacml:Actions\u0026gt; \u0026lt;xacml:Action\u0026gt; \u0026lt;xacml:ActionMatch MatchId=\u0026quot;urn:oasis:names:tc:xacml:2.0:function:string-equal\u0026quot;\u0026gt; \u0026lt;xacml:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt;Read\u0026lt;/xacml:AttributeValue\u0026gt; \u0026lt;xacml:ActionAttributeDesignator AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string \u0026quot;/\u0026gt; \u0026lt;/xacml:ActionMatch\u0026gt; \u0026lt;/xacml:Action\u0026gt; \u0026lt;/xacml:Actions\u0026gt; \u0026lt;/xacml:Target\u0026gt; \u0026lt;/xacml:Rule\u0026gt; \u0026lt;/xacml:Policy\u0026gt;  GetRoles Operasjon for å hente ut en liste over roller etter angitte søkekriterier\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     systemUserName Org.nummer for enheter, fødselsnummer for enkeltpersoner   systemPassword Passord   roleSearchBE ExternalRoleSearchBE-objekt   Returverdi Beskrivelse   ExternalRoleBEList Liste med ExternalRoleBE-objekter   Returverdi Beskrivelse    ExternalRoleBE   RoleTypeSource    RoleCode Rollekode   RoleName Navn på rolle   OfferedBy Enhet/bruker som rollen gjelder for   Enhet/bruker som innehar rollen Enhet/bruker som innehar rollen   DelegatedBy Enhet/bruker som har delegert rollen    ExternalRoleSearchBE   CoveredByParty Enhet som innehar rollen   CoveredByUser Bruker som innehar rollen   LanguageID Språkid (English 1033, Bokmål 1044, Nynorsk 2068)   OfferedByParty Enhet som rollen gjelder for   RoleCodeFilter Filtrer med spesific rollekode. Støtte for kun 1 rolle om gangen    Dersom man sender med verdi i søket (RoleSearch-objektet) for OfferedByParty, kan man ikke samtidig sende med verdier for både CoveredByUser og CoveredByParty, og man kan heller ikke søke på OfferedParty uten å sende med verdi for enten CoveredByUser eller CoveredByParty.\nEksempelkall:\n\u0026lt;soap:Envelope xmlns:soap=\u0026quot;http://www.w3.org/2003/05/soap-envelope\u0026quot; xmlns:ns=\u0026quot;http://www.altinn.no/services/Authorization/Administration/2010/10\u0026quot; xmlns:ns1=\u0026quot;http://schemas.altinn.no/services/Authorization/Administration/2009/10\u0026quot;\u0026gt; \u0026lt;soap:Header/\u0026gt; \u0026lt;soap:Body\u0026gt; \u0026lt;ns:GetRoles\u0026gt; \u0026lt;ns:roleSearchBE\u0026gt; \u0026lt;ns1:CoveredByParty\u0026gt;orgnummer1\u0026lt;/ns1:CoveredByParty\u0026gt; \u0026lt;ns1:CoveredByUser\u0026gt;\u0026lt;/ns1:CoveredByUser\u0026gt; \u0026lt;ns1:LanguageID\u0026gt;1044\u0026lt;/ns1:LanguageID\u0026gt; \u0026lt;ns1:OfferedByParty\u0026gt;orgnummer2\u0026lt;/ns1:OfferedByParty\u0026gt; \u0026lt;ns1:RoleCodeFilter\u0026gt;\u0026lt;/ns1:RoleCodeFilter\u0026gt; \u0026lt;/ns:roleSearchBE\u0026gt; \u0026lt;/ns:GetRoles\u0026gt; \u0026lt;/soap:Body\u0026gt; \u0026lt;/soap:Envelope\u0026gt;  GetReportees Operasjon for å hente ut en liste over mulige avgivere for et gitt fødselsnummer.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     userSSN Fødselsnummeret til brukeren det skal hentes avgivere for – pålagt parameter   retrieveInActiveReportee Flagg for å sette om også inaktive avgivere skal returneres, standard False – valgfri parameter   RetrieveSubEnitiy Flagg for å sette om også underenheter skal returneres, standard False – valgfri parameter   maximumReporteeCount Verdi for maksimum antall avgivere som skal returneres, standard satt til alle – valgfri parameter   Returverdi Beskrivelse   ExternalReporteeBEList Liste med ExternalReporteeBE-objekter   Returverdi Beskrivelse   ExternalReporteeBEList Liste med ExternalReporteeBE-objekter   Returverdi Beskrivelse    ExternalReporteeBE   Name Avgivers navn   OrganizationNumber Organisasjonsnummer for denne avgiveren hvis dette er en organisasjon   SSN Fødselsnummer for denne avgiveren hvis dette er en person   ReporteeType Typebeskrivelse for hvilken type avgiver dette er: None, Person, Organization, eller SelfIdentified (ikke et praktisk mulig scenario i denne sammenhengen)    GetReporteeByTempKey Operasjon for å hente ut informasjon om avgiver basert på nøkkel opprettet for lenketjenesten. Nøkkelen er kun gyldig i en tidsbegrenset periode, og kan kun benyttes en gang.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     tempKey Nøkkel som angitt i lenketjenestens request URL, vil utgå etter at informasjon er hentet ut – pålagt parameter   Returverdi Beskrivelse   ExternalReporteeBE ExternalReporteeBE-objekt   Returverdi Beskrivelse    ExternalReporteeBE   Name Avgivers navn   OrganizationNumber Organisasjonsnummer for denne avgiveren hvis dette er en organisasjon.   SSN Fødselsnummer for denne avgiveren hvis dette er en person   ReporteeType Typebeskrivelse for hvilken type avgiver dette er: None, Person, Organization, eller SelfIdentified (ikke et praktisk mulig scenario i denne sammenhengen)    AuthorizationDecisionPointExternal AuthorizationDecisionPointExternal er en tjeneste Altinn tilbyr til tjenesteeiere som ønsker å benytte Altinns autorisasjonskomponent. Tjenesten kan benyttes til autorisasjon både for eksterne resurser og for tjenester. Autorisasjons regler settes henholdsvis ved hjelp av AuthorizationAdministration tjenesten og i TUL.\nPåfølgende kapitler beskriver tjenesteoperasjonene for denne tjenesten.\nAuthorizeAccessExternalV2 Operasjon som benytter XACML standarden og regler lagret i Altinn til å returnere en autorisasjonsbeslutning.\nBesluttningsgrunnlaget til autorisasjon for eksterne resurser er de regler som tjenesteeier selv setter ved hjelp av tjenesten AutorizationAdministration når resursen defineres. Besluttningsgrunnlaget til autorisasjon for tjenester er de regler som tjenesteeier har satt på tjenesten i TUL.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     XACMLRequest XACML standardisert forespørsel   Returverdi Beskrivelse   Resultat XACML standardisert svar    Tjenesten benytter en XSD til å validere input.\nI tillegg er det en del regler relatert til utfylling som XSD ikke klarer fange opp. XACML-forespørselen skal inneholde en kombinasjon av følgende elementer:\n   Foreldrenode AttributeId AttributeValue verdier     Subject urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:ssn Utførende brukers fødselsnummer   Subject urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:orgno Utførende organisasjons organisasjonsnummer   Subject urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:oauth-accesstoken Referanse token for et spesifikk samtykke utførende bruker/org skal benytte. Må hentes fra AuthorizationExternal/TokenExternalEC.svc tjenesten.   Resource urn:oasis:names:tcurn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno:xacml:2.0:resource:urn:altinn:reportee-ssn Avgivers fødselsnummer   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno Avgivers organisasjonsnummer   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:external-resource Ekstern ressursdefinisjon   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode Eksterne tjenestekode   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode Ekstern utgavekode (tilhørende overnevnte tjenestekode)   Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reporteeelementid Den unike id\u0026rsquo;en til et reportee element   Action urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id Read Write Sign ArchiveRead ArchiveDelete ServiceOwnerArchiveRead Delegate   Environment urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment De ulike miljøer    Mulige Subject kombinasjoner: 1. Utførende brukers fødselsnummer (urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:ssn) eller utførende oranisasjons org.nummer (urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:orgno) 2. Utførende brukers fødselsnummer (urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:ssn) eller utførende oranisasjons org.nummer (urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:orgno), og referanse token for relatert samtykke (urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:oauth-accesstoken).\nMulige Resource kombinasjoner: 1. Avgivers fødselsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn) eller avgivers organisasjonsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno), og ekstern tjenestekode og utgavekode (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode og urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode) 2. Avgivers fødselsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn) eller avgivers organisasjonsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno), og ekstern ressursdefinisjon (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:external-resource). 3. Avgivers fødselsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn) eller avgivers organisasjonsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno), og ReporteeElementId (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reporteeelementid).\nSigneringsrettigheter oppfører seg noe annerledes enn de andre. Signering er en rettighet som kun kan gis på konkrete prosesssteg i livsløpet til et element. For å kunne gi helt korrekt svar på om en person har lov til å signere er Altinn derfor avhengig av å få oppgitt id til et reporteeelement.\nUnntaket fra dette er om en tjeneste har kun ett signeringssteg. I et slikt tilfelle kan Altinn anta at når det endelig skal signeres så vil aktivt prosesssteg være dette ene steget. På slike tjenester er det derfor trygt å oppgi tjenestekoder istedenfor reporteeelementid.\nHvis en tjeneste har flere signeringssteg vil Altinn velge det første signeringssteget i prosessen. Dette kan i enkelte tilfeller føre til feil konklusjon. Hvis for eksempel en revisor skal signere et element i signeringssteg 2 (etter regnskapsfører), så kan Altinn svare negativt på spørsmål om revisor kan signere (benytter sign steg 1) selv om revisor vil få lov når elementet endelig kommer til revisors signeringssteg i prosessen.\nAltinn selv har ikke mulighet til å sjekke signeringsrettighet uten å ha id til et reporteeelement. Sjekk av signeringsrettighet basert på tjenestekoder er logikk laget spesielt for AuthorizeAccessExternalV2.\nDet må også angis hvilke miljø det gjelder (urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment)\nNedenfor vises eksempler på gyldige forespørsler:\nAuthorizationRequest\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;Request xmlns=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os\u0026quot; xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xsi:schemaLocation=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os http://docs.oasis-open.org/xacml/access_control-xacml-2.0-context-schema-os.xsd\u0026quot;\u0026gt; \u0026lt;!-- Altinn Sample Request. --\u0026gt; \u0026lt;!-- This authorization request tries to verify if user 07037612345 is allowed to --\u0026gt; \u0026lt;!-- perform read operation on external resource belonging to reportee 010203401944 --\u0026gt; \u0026lt;!-- there is a registered consent for the record. --\u0026gt; \u0026lt;Subject\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:ssn\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;07037512345\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Subject\u0026gt; \u0026lt;Resource\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;010203401944\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:external-resource\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;RF1080NAV\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Resource\u0026gt; \u0026lt;Action\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;Read\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Action\u0026gt; \u0026lt;Environment\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;AT6\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Environment\u0026gt; \u0026lt;/Request\u0026gt;  \u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;Request xmlns=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os\u0026quot; xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xsi:schemaLocation=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os http://docs.oasis-open.org/xacml/access_control-xacml-2.0-context-schema-os.xsd\u0026quot;\u0026gt; \u0026lt;!-- Altinn Sample Request. --\u0026gt; \u0026lt;!-- This authorization request tries to verify if user --\u0026gt; \u0026lt;!-- 06069460079 is allowed to perform sign operation --\u0026gt; \u0026lt;!-- on behalf of reportee 910453777 --\u0026gt; \u0026lt;!-- on service 2298, edition 60804 --\u0026gt; \u0026lt;Subject\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:ssn\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;06069460079\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Subject\u0026gt; \u0026lt;Resource\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;910453777\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;2298\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;60804\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Resource\u0026gt; \u0026lt;Action\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;Sign\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Action\u0026gt; \u0026lt;Environment\u0026gt; \u0026lt;Attribute AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;AttributeValue\u0026gt;TT02\u0026lt;/AttributeValue\u0026gt; \u0026lt;/Attribute\u0026gt; \u0026lt;/Environment\u0026gt; \u0026lt;/Request\u0026gt;  Operasjonen returnerer XML som også følger XACML standarden. Under vises et eksempel på en response.\nAuthorizationResponse\n\u0026lt;xacml:Response xmlns:tns=\u0026quot;urn:oasis:names:tc:xacml:2.0:policy:schema:os\u0026quot; xmlns:xacml=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os\u0026quot; xmlns:xsi=\u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot; xsi:schemaLocation=\u0026quot;urn:oasis:names:tc:xacml:2.0:context:schema:os http://docs.oasis-open.org/xacml/2.0/access_control-xacml-2.0-context-schema-os.xsd\u0026quot;\u0026gt; \u0026lt;xacml:Result ResourceId=\u0026quot;\u0026quot;\u0026gt; \u0026lt;xacml:Decision\u0026gt;Permit\u0026lt;/xacml:Decision\u0026gt; \u0026lt;xacml:Status\u0026gt; \u0026lt;xacml:StatusCode Value=\u0026quot;urn:oasis:names:tc:xacml:2.0:response:urn:altinn:ok\u0026quot; /\u0026gt; \u0026lt;xacml:StatusMessage\u0026gt;\u0026lt;/xacml:StatusMessage\u0026gt; \u0026lt;/xacml:Status\u0026gt; \u0026lt;tns:Obligations\u0026gt; \u0026lt;tns:Obligation FulfillOn=\u0026quot;Permit\u0026quot; ObligationId=\u0026quot;\u0026quot;\u0026gt; \u0026lt;tns:AttributeAssignment AttributeId=\u0026quot;urn:oasis:names:tc:xacml:2.0:obligation:urn:altinn:authenticationlevel\u0026quot; DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#string\u0026quot;\u0026gt; \u0026lt;tns:AttributeValue DataType=\u0026quot;http://www.w3.org/2001/XMLSchema#integer\u0026quot;\u0026gt;3\u0026lt;/tns:AttributeValue\u0026gt; \u0026lt;/tns:AttributeAssignment\u0026gt; \u0026lt;/tns:Obligation\u0026gt; \u0026lt;/tns:Obligations\u0026gt; \u0026lt;/xacml:Result\u0026gt; \u0026lt;/xacml:Response\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/batchlogging/",
	"title": "Batch logging",
	"tags": [],
	"description": "Hente ut feilmeldinger fra behandling av batch jobber",
	"content": " BatchLoggingAgencyExternal Denne tjenesten gir tjenesteeier tilgang til feil som har forekommet under behandling av batch jobber. Som en del av denne tjeneste-beskrivelsen vil følgende stikkord bli brukt:\n DataBatch - referer til en batch fil levert til altinn av tjenesteeier. DataItem - en Xml entitet i DataBatch. I en Correspondence fil vil for eksempel en enkel Correspondence være et DataItem. Issue - en feil, warning eller informasjons melding som forekom under behandling av DataBatch og DataItem.  GetStatusOverview Denne operasjonen gir en oversikt over DataBatcher som er blitt behandlet, og antall Issues som er opplevd under behandling.\n   Input Beskrivelse     BatchLoggingRequest Angir søke-kriterier for DataBatcher og DataItems   Returverdi Beskrivelse   BatchLoggingResult Resultat for søke-kriterier   Property Beskrivelse    BatchLoggingRequest   SystemUserCode Angir hvilken tjenesteeier requesten gjelder for. SystemUserCode er spesifikk for en gitt ShipmentDefinition, og er vanligvis angitt i filen som er blitt levert til Altinn   DataBatchType? Angir hva slags type Batch som ønskes returnert. Mulige verdier er: ActivateSubscription – Aktivering av en eksisterende subscription, Notification – Utsending av varsel, Correspondence – Innlesing av correspondence, Prefill – Innlesing av prefill, RgisterDSFProperty – Innlesing av DSF property, RegisterDSFPropertyAdd – Innlesing av DSF property husnumre, RegisterDSFStreet – Innlesing av DSF gate, RegisterDSFStreetAdd – Innlesing av DSF Gate husnumre, RegisterDSFUser – Innlesing av DSF person, RegisterER – Innlesing av organisasjons-data, Subscription – Innlesing av Subscription data   BatchLoggingDateTimeRequest Angir en Til og Fra dato hvor fil-innlesing blir gjort   FileName Angir filnavn på DataBatch. Må være eksakt fullt filnavn. (Correspondence.xml må altså angis som «Correspondence.xml»   DataBatchId? Angir en spesifikk DataBatchId å returnere data for   Sequence? Angir et spesifikt sekvensnummer å returnere data for. Sequence blir satt i hver fil som leveres til Altinn   FromIssueId? Begynn å returnere Issues fra denne IssueId. Det leveres aldri mer enn 10.000 issues fra et enkelt kall, så i tilfelle hvor mer enn 10.000 issues eksisterer vil resterende issues kunne returneres ved bruk av denne verdien    BatchLoggingStatusOverview   DataBatches (List) Liste av DataBatcher funnet med søke-kriterier   NumberOfIssues Totalt antall Issues som er blitt returnert    DataBatch   StartDate Når behandling av DataBatch startet   EndDate Når DataBatch var ferdig behandlet   DataBatchId Unik identifikator for DataBatch   Sequence Sekvensnummer angitt i DataBatch   ShipmentId Identifikator for Shipment opprettet for DataBatch   FileName Filnavn for DataBatch   NumberOfIssues Antall feil opplevd for DataBatch    Tabellen under angir feilmeldinger.\n   Feilkode Beskrivelse     31033 BatchLoggingRequest var ikke riktig angitt    GetDetailedStatus Denne operasjonen gir en oversikt over DataBatcher som er blitt behandlet, med tilhørende Issue og metadata for DataItem.\n   Input Beskrivelse     BatchLoggingRequest Angir søke-kriterier for DataBatcher og DataItems   Returverdi Beskrivelse   BatchLoggingResult Resultat for søke-kriterier   Property Beskrivelse    BatchLoggingDetailedStatus   DataBatches (List DataBatch) Liste av DataBatcher funnet med søke-kriterier   DataItems (List DataItem) Liste med metadata for DataItems som har opplevd Issues under behandling   Issues (List Issue) Liste med feil opplevt under DataBatch behandling   NumberOfIssues Totalt antall Issues som er blitt returnert    DataItem   DataItemId Unik identifikator for DataItem   DataBatchId Unik identifikator for DataBatch som DataItem hører til.   Line Linjenummer for DataItem i fil   Position Posisjon for DataItem i fil   Data Rå Xml data for DataItem. Returneres kun i GetDataItem (9.18.3)   State Status på DataItem   ServiceCode Tjenestekode for DataItem   ServiceEditionCode Tjenesteversjonskode for DataItem    Issue   DataItemId? DataItem for Issue   DataBatchId DataBach for Issue   ErrorDateTime Når Issue oppstod   IssueType Typen Issue som er opplevd    IssueType   Code ErrorCode for IssueType   Description Feilmelding for IssueType   Level Hvor alvorlig Issuet var. Verdier som kan avgis er: Other, Information, Warning, Error, Critical    GetDataItem Denne operasjonen returnerer metadata og rå Xml data for en spesifikk DataItem (Xml-entitet) som har feilet under behandling.\n   Input Beskrivelse     dataItemId Spesifikk identifikator for et DataItem   DataItem Inneholder metadata og rå Xml data for et DataItem    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/contexthandler/",
	"title": "Context handler",
	"tags": [],
	"description": "Hente ut medadate for elementer",
	"content": " Context handler Context handler er en modul i Altinn som tilbyr metadata for elementer i Altinn. Et element kan for eksempel være en innsending fra en sluttbruker. Meta-data (eller context data som det kalles her) for elementet vil da inneholde informasjon om hvem som er avgiver, hvilke tjeneste elementet er knyttet til og hvilket prosess steg det er i.\nDette er informasjon som benyttes internt i Altinn for å avgjøre om en bruker har tilgang til å utføre en gitt operasjon på et gitt element. Tjeneste eiere kan bruke informasjonen på tilsvarende måte ved å benytte Altinn sin eksterne autorisasjonssjekk (se eget kapittel om AuthorizationDecisionPointExternal).\nGetReporteeElementContextExternal Denne operasjonen som tar som input en reporteeelementid og returnerer et objekt med en samling detaljer, meta-data, om elementet.\nTabellen under beskriver datakontrakten for operasjonen. (Merk at det finnes ulike grensesnittrelaterte variasjoner mellom Basic, WS-Security og EC grensesnittene.)\n   Input Beskrivelse     reporteeElementId Unik identifikator for et spesifikk reportee element   Returverdi Beskrivelse   ReporteeElementContextExternalBE Entitet med meta-data om elementet det ble spurt på. (Flere detaljer under)    ReporteeElementContextExternalBE   Reportee Unik id for avgiver knyttet til et element. Dette er somregel personnummer eller organisasjonsnummer   ServiceCode Tjenestekoden til tjenesten som elementet er knyttet til   ServiceEditionCode Tjenesteversjonskode til tjenesten som elementet er knyttet til   ServiceType Angir hva slags tjeneste elementet er knyttet til. De mest vanlige typene er Correspondence og FormTask. Henholdsvis melding fra etat og innsending fra sluttbruker   ProcessStepID Dette er en ID som indikerer hva slags prosess steg elementet står i. Dette er mest aktuelt ved innsendinger hvor et element går gjennom for eksempel skrive steg, signeringssteg og innsending    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/downloadqueue/",
	"title": "DownloadQueue",
	"tags": [],
	"description": "Hente ut elementer fra DownloadQueue",
	"content": " DownloadQueue DownloadQueue inneholder operasjoner for å hente ned en liste over elementer som ligger i tjeneste-eiers DownloadQueue. For å bruke DownloadQueue må tjenesteeier spesifisere dette når man utvikler tjenesten i TUL. Ved å sette tjenesteutgaven til å bruke DownloadQueue, vil innleverte skjemaer på denne tjenesten oppdatere DownloadQueue, og tjenesteeier vil dermed kunne hente ut disse ved å sende en forespørsel til Altinn. Når det ligger flere enn 500 elementer i DownloadQueue, vil ikke nyere elementer lengre hentes når man bruker GetDownloadQueueItems operasjonen. For å få tilsendt nyere elementer må DownloadQueueItems fjernes fra DownloadQueue ved å bruke PurgeItem-operasjonen. DownloadQueue funksjonaliteten har støtte for MTOM. Påfølgende kapitler beskriver tjenesteoperasjonenene for denne tjenesten.\nGetDownloadQueueItems Denne operasjonen henter en liste over DownloadQueueItems i tjenesteeiers DownloadQueue. Den henter et maksimum av 500 metadataobjekter med arkivreferanse knyttet til den innsendte meldingen. Den henter alltid de eldste objektene først. Man kan velge å filterere hentede objekter basert på ServiceCode.\n   Input Beskrivelse     ServiceCode ServiceCode som man ønsker å filtrere hentede DownloadQueueItems på. Denne inputen er valgfri   Returverdi Beskrivelse   DownloadQueueItemList En liste med metadata-objekter som beskriver arkivreferanse, ServiceCode, ServiceEdition, reportee, reporteetype og arkiveringstidspunkt for aktive (non-purged) DownloadQueueItems for tjenesteeier   Property Beskrivelse    DownloadQueueItemExternalBEList    DownloadQueueItemExternalBEList.DownloadQueueItemExternalBE   ArchiveReference Innsendingens arkiv-referanse   ServiceCode Tjenestekode   ServiceEditionCode Tjenesteutgavekode   ReporteeId Organisasjons eller fødselsnummer for Reportee   ReporteeType Type reportee: Person, Organisasjon, Selvregistrert bruker   ArchivedDate Arkiveringsdato   ShipmentMetadataList En liste med ShipmentMetadata-objekter, der hvert objekt inneholder Key (feltnavn) og Value. Retur av ShipmentMetadata forutsetter at det ved utvikling av tjenesten er spesifisert metadatafelt, og at det er angitt at DownloadQueue skal benyttes for tjenesten.    PurgeItem Denne operasjonen lar tjenesteeier markere et enkelt DownloadQueueItem som purged. Dette DownloadQueueItem vil deretter ikke lenger bli hentet når GetDownloadQueueItems operasjonen blir kjørt.\n   Input Beskrivelse     ArchiveReference Arkiv-referanse til DownloadQueueItem som skal markeres som purged    GetArchivedFormtaskDQ Denne operasjonen henter et arkivert FormTask object med tilhørende forms, signatur og attachment.\n   Input Beskrivelse     ArchiveReference Arkiv-referanse til DownloadQueueItem som skal hentes ned   ReturVerdi Beskrivelse   ArchivedFormTaskExternalDQBE Et ArchivedFormTask element    ArchivedFormTaskExternalDQBE   Property Beskrivelse   ServiceCode Tjenestekode   ServiceEditionCode Tjenesteutgavekode   CaseId Unik identifikator på eventuell samhandlingstjeneste skjemasettet er knyttet til   SOEncryptedSymmetricKey Representer informasjon for tjenesteeier kryptering. Se SOEncryptedSymmetricKeyDQBE   Approvers Liste med personer som har signert. Se ApproverDQBE   Forms Liste med alle forms som følger med i formsettet til formtasken. Se ArchivedFormExternalDQBE   Attachments Liste med alle vedlegg som er relatert til formtasken. Se ArchivedAttachmentExternalDQBE   Reportee Personnummer, organisasjonsnummer eller brukernavn på avgiver   ArchiveReference Unik id for formtasken slik den er lagret i tjenesteeierarkivet   ArchiveTampStamp Dato og tid for når elementet ble arkivert   CorrelationReference (Ikke i bruk)    SOEncryptedSymmetricKey   Property Beskrivelse   EnkryptedKey AES-nøkkel som er RSA-kryptert med tjenesteeiers sertifikat. Denne AES-nøkkelen benyttes for å dekryptere skjemainnhold   CertificateThumbPrint Thumbprint av tjenesteeiers sertifikat som ble benyttet for å kryptere AES-nøkkel. Vil unikt angi sertifikatet i de tilfeller hvor tjenesteeier har flere sertifikater registrert i Altinn    ApproverDQBE   Property Beskrivelse   ApproverID Identifikatoren til godkjenneren av skjemaet, d.v.s. fødselsnummer   AppprovedTimeStamp Tidspunktet for godkjennelsen av skjemaet   SecurityLevel Sikkerhetsnivå: notSensitive - Data er godkjent av bruker som er autentisert med sikkerhetsnivå 1, lessSensitive - Data er godkjent av bruker som er autentisert med sikkerhetsnivå 2, sensitive - Data er signert av bruker med sikkerhetsnivå 3, verySensitive - Data er signert av bruker med sikkerhetsnivå 4    ArchiveFormExternalDQBE   Property Beskrivelse   DataformatID Id til skjema fra metadata kilde   DataformatVersionID Versjon til skjema fra metadata kilde   Reference Unik id per skjema, satt av altinn   ParentReference Referanse til hovedskjema. Settes kun i underskjema dersom underskjema forekommer   FormData Skjemadata i xml format. ’My’ og ‘altinn’ elementer og deres namespace deklarasjoner i alle elementer er fjernet fra formdata xml    ArchivedAttachmentExternalDQBE   Property Beskrivelse   ArchiveReference Unik id for formtask elementet vedlegget er assosiert med   FileName Det orginale navnet til filen   AttachmentType Vedleggets innholds type. (MimeType)   IsEncrypted En verdi som indikerer om vedlegget er kryptert av innsender1   AttachmentData Det faktiske inholdet i filen. Tjenesten leverer dette som MTOM og vil inkludere alle filer på opp til 30 MB. Større vedlegg må lastes ned for seg selv ved hjelp av streaming operasjonen   AttachmentId En unik id på vedlegget slik det er lagret i tjenesteeierarkivet   AttachmentTypeName Det tekniske navnet på vedleggsregelen som ble valgt hvis tjenesten har en eller flere slike regler   AttachmentTypeNameLanguage Det oversatte navnet til vedleggsregelen    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/kvittering/",
	"title": "Kvitteringer",
	"tags": [],
	"description": "Hente ut og oppdatere kvitteringer",
	"content": " Receipt Tjenesten Receipt inneholder operasjoner for å oppdatere og hente kvitteringer i Altinn.\nGetReceiptV2 Denne operasjonen henter en kvittering basert på enten unik identifikator for kvitteringen eller en referanse for kvitteringen. Kvitteringen kan være knyttet til et skjemasett innsendt via Altinn fra sluttbruker eller sluttbrukersystem, data sendt fra tjenesteeier til Altinn (meldinger, PIN-koder, abonnement eller prefilldata) eller data sendt fra Altinn til tjenesteeier.\nNavnet på operasjonen kan variere noe fra grensesnitt til grensesnitt. Operasjonen heter for eksempel GetReceiptBasicV2 på basic (SOAP 1.1) grensesnittet. En eldre versjon av operasjonen med navn GetReceipt finnes fortsatt, men kan i fremtiden bli fjernet.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     ReceiptSearch Objekt av typen ReceiptSearch som inneholder nødvendige søkeparametre for å hente ut en kvittering   Returverdi Beskrivelse   Receipt Objekt av typen Receipt som inneholder alle data for en kvittering som tilfredsstilte det gitte søkekriteriet    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse      ReceiptSearch   ReceiptId Unik identifikator en kvittering i Altinn   References Liste med referansen som skal brukes i søket. I praksis er det kun en referanse som benyttes i søket. Følgende referansetyper kan benyttes i søk: ArchiveReference, OutboundShipmentReference, BatchReference, EndUserSystemReference, ExternalShipmentReference, SendersReference    Receipt   ReceiptId Unik identifikator kvitteringen i Altinn.   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptType Angir hva kvittering gjelder. Mulige verdier: NotSet – Brukes når type er ukjent, FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE – bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd, BrokerService – Overføring av fil på en Formidlingstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering. (IKKE I BRUK)   ReceiptStatus Status for forsendelse som kvitteringen gjelder: NotSet – Status er ukjent, OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer i et hierarki vil ParentReceiptId vise til ReceiptId for hovedkvitteringen i hierarkiet   References Liste med referanser   SubReceipts Liste med tilhørende kvitteringer. Dersom denne kvitteringen er en hovedkvittering med barn. Et hierarki kan ha kun 2 nivåer. (En kvittering som selv er et barn skal ikke ha barn.)    Reference   ReferenceType Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse. EndUserSystemReference - Referanse satt av avsender for del av en forsendelse. For eksempel vedlegg. Brukes sjeldent da referanser fra sluttbruker ofte lagres som SendersReference. SendersReference - Referanse satt av avsender for del av en forsendelse. ParentReference - Referansen viser til et hovedskjema. WorkFlowReference - Arbeidsflytreferanse. BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn. OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn. ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse. OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres. PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen. ArchiveReference - Arkivreferanse.   Feilkode Beskrivelse   30008 Ingen kvittering funnet for angitt kvitterings ID eller referanse    GetReceiptListV2 Denne operasjonen kan kalles for å hente ut alle kvitteringer av en gitt kvitteringstype. I tillegg kan søket begrenses ved hjelp av en til og fra dato. Dette vil gi en liste med kvitteringer som ble sist endret i tidsrommet. Kvitteringstyper er obligatorisk, mens datoer er valgfritt.\nNavnet på operasjonen kan variere noe fra grensesnitt til grensesnitt. Operasjonen heter for eksempel GetReceiptListBasicV2 på basic (SOAP 1.1) grensesnittet. En eldre versjon av operasjonen med navn GetReceiptList finnes fortsatt, men kan i fremtiden bli fjernet.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     receiptTypeName Angir hva kvittering gjelder. Mulige verdier: FormTask –Skjemasett innsending. Correspondence – Innlesning av meldinger. PINCODE – Bestilling av PIN-koder. Subscription – Innelsning av abonnementer. Outbound – Forsendelse sendt fra Altinn. PreFill – Innlesning av prefill. RegisterDLS – DLS registerdata. RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd BrokerService – Overføring av fil på en Formidlingstjeneste   dateFrom Finner kvitteringer endret etter angitt dato   dateTo Finner kvitteringer endret før angitt dato   Returverdi Beskrivelse   ReceiptList Liste med kvitteringer av typen Receipt. (Vil være en tom liste hvis ingen kvitteringer ble funnet.)    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     Receipt    ReceiptId Unik identifikator kvitteringen i Altinn   ReceiptType Angir hva kvittering gjelder. Mulige verdier:NotSet – Brukes når type er ukjent FormTask – Skjemasett innsending Correspondence – Innlesning av meldinger PINCODE – Bestilling av PIN-koder.Subscription – Innelsning av abonnementer Outbound – Forsendelse sendt fra Altinn PreFill – Innlesning av prefill RegisterDLS – DLSregisterdata RegisterDSF – DSF registerdata RegisterER – ER registerdata RegisterDSFProperty RegisterDSFStreet RegisterDSFCountry RegisterDSFUser LookUp – Innsynstjeneste RegisterDSFStreetAdd RegisterDSFPropertyAddBrokerService – Overføring av fil på en Formidlingstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering. (IKKE I BRUK)   ReceiptStatus Status for forsendelse som kvitteringen gjelder: NotSet – Status er ukjent OK UnExpectedError ValidationFailed Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer i et hierarki vil ParentReceiptId vise til ReceiptId for hovedkvitteringen i hierarkiet   References Liste med referanser   SubReceipts Liste med tilhørende kvitteringer. Dersom denne kvitteringen er en hovedkvittering med barn. Et hierarki kan ha kun 2 nivåer. (En kvittering som selv er et barn skal ikke ha barn)   Reference    ReferenceType Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse. EndUserSystemReference - Referanse satt av avsender for del av en forsendelse. For eksempel vedlegg. Brukes sjeldent da referanser fra sluttbruker ofte lagres som SendersReference. SendersReference - Referanse satt av avsender for del av en forsendelse. ParentReference - Referansen viser til et hovedskjema. WorkFlowReference - Arbeidsflytreferanse BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres. PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen. ArchiveReference - Arkivreferanse   ReferenceValue Selve referansen (verdien). Vil variere basert på type referanse. Se over.    Tabellen under angir mulige feilkoder for operasjonen.\n   Feilkode Beskrivelse     30101 Kan ikke utføre et søk etter kvitteringer av typen NotSet. (NotSet er default verdi hvis receiptTypeName parameteret ikke oppgis)   30102 Oppgitt fra dato er høyere en oppgitt til dato    UpdateReceipt Operasjonen UpdateReceipt kan benyttes når tjenesteeier har behov for å oppdatere en kvittering i Altinn. Dette gjøres typisk når Altinn har sendt en batch forsendelse til tjenesteeier. Kvitteringen skal da oppdateres med at tjenesteeier har mottatt batch forsendelsen.\nAltinn vil endre kvitteringsteksten til å inneholde informasjon om hvem som utførte oppdateringen. For eksempel: \u0026ldquo;Receipt updated by AgencySystem: ACN\u0026rdquo;.\nNavnet på operasjonen kan variere noe fra grensesnitt til grensesnitt. Operasjonen heter for eksempel UpdateReceiptBasic på basic (SOAP 1.1) grensesnittet. En eldre versjon av operasjonen med navn SaveReceipt finnes fortsatt, men kan i fremtiden bli fjernet.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     ReceiptSave Informasjon om hvilken kvittering som skal oppdateres samt den nye informasjonen som skal legges på kvitteringen. Objektet må minimun inneholde ny statuskode og tekst. ReceiptId eller ArchiveReference brukes til å identifisere kvitteringen.   Returverdi Beskrivelse   Receipt Kvitteringen slik den frermstår etter oppdateringen    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     ReceiptSave:    ReceiptId Unik identifikator for kvittering i Altinn. Kan benyttes for å spesifisere hvilken kvittering som skal oppdateres   ArchiveReference Arkivreferanse i Altinn. Kan benyttes for å spesifisere hvilken kvittering som skal oppdateres. Hvis det finnes flere kvitteringer som har samme arkivreferanse, så vil den nyeste (den med høyest ReceiptId) bli valgt   ReceiptText Oppdateringstekst for kvittering. Obligatorisk   ReceiptStatus Status for forsendelse som kvitteringen gjelder.Obligatorisk: OK, UnExpectedError, ValidationFailed, Rejected   References Liste med referanser man eventuelt ønsker å legge til på kvitteringen. Alle referansetyper utenom NotSet og OwnerPartyReference er gyldige, men det bør begrenses til følgende (Unntak kan gjøres etter avtale med forvaltning): BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn.ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse.(Det er mulig fremtidige versjoner av UpdateReceipt vil ha strengere validering/begrensninger.)   SubReceipts Liste med barnekvitteringer som også ønskes oppdatert i tillegg til hovedkvitteringen. Barne kvitteringer MÅ identifiseres med ReceiptId. Dette kan ikke benyttes til å lage nye barnekvitteringer   SubReceipts Liste med barnekvitteringer som også ønskes oppdatert i tillegg til hovedkvitteringen. Barne kvitteringer MÅ identifiseres med ReceiptId. Dette kan ikke benyttes til å lage nye barnekvitteringer   Receipt    ReceiptId Unik identifikator kvitteringen i Altinn   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptType Angir hva kvittering gjelder. Mulige verdier: NotSet – Brukes når type er ukjent, FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE – Bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd, BrokerService – Overføring av fil på en Formidlingstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering. (IKKE I BRUK)   ReceiptStatus Status for forsendelse som kvitteringen gjelder: NotSet – Status er ukjent, OK, Status for forsendelse som kvitteringen gjelder: NotSet – Status er ukjent, OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer i et hierarki vil ParentReceiptId vise til ReceiptId for hovedkvitteringen i hierarkiet   References Liste med referanser   SubReceipts Liste med tilhørende kvitteringer. Dersom denne kvitteringen er en hovedkvittering med barn. Et hierarki kan ha kun 2 nivåer. (En kvittering som selv er et barn skal ikke ha barn)   Reference    ReferenceType Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse. EndUserSystemReference - Referanse satt av avsender for del av en forsendelse. For eksempel vedlegg. Brukes sjeldent da referanser fra sluttbruker ofte lagres som SendersReference.SendersReference - Referanse satt av avsender for del av en forsendelse. ParentReference - Referansen viser til et hovedskjema. WorkFlowReference - Arbeidsflytreferanse BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres. PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen. ArchiveReference - Arkivreferanse   ReferenceValue Selve referansen (verdien). Vil variere basert på type referanse. Se over    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     30008 Fant ikke noen kvittering som kunne oppdateres   0 Kan ikke ha både kvitterings id og arkivreferanse som input. (Feilkode blir ikke angitt grunnet en bug)   0 Kan ikke ha både kvitterings id og arkivreferanse som input. (Feilkode blir ikke angitt grunnet en bug)   0 System/bruker har ikke tilgang til kvitteringen som forsøkes oppdatert. (Feilkode blir ikke angitt grunnet en bug)    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/meldingstjeneste/",
	"title": "Meldingstjeneste",
	"tags": [],
	"description": "Opprette meldinger og hente ut status for disse",
	"content": " Correspondence Denne tjenesten inneholder operasjoner som benyttes av tjenesteeiere for å opprette meldinger til avgivere samt hente ut igjen status på disse meldingene.\nInsertCorrespondenceV2 Denne operasjonen benyttes av en tjenesteeier for å sende meldinger til avgivere i Altinn. Operasjonen er versjonert, gjeldende versjon er V2. Tabellen under beskriver datakontrakten for operasjonen:\n   Parameter Beskrivelse     SystemUserCode Kode som unikt representerer kildesystem, f.eks. \u0026ldquo;ABC-123\u0026rdquo;. Format: XXX_YYYY. De tre første bokstavene er påkrevd og representerer tjenesteeier. De etter understreken representerer avdeling/system, og er valgfritt hvis det ikke finnes flere avdelinger/systemer innenfor samme tjenesteeier   ExternalShipmentReference Referanse satt av tjenesteeier. Benyttes ved utsending av meldingsbekreftelser og kvittering. Setter feltet SendersReference på meldingen blant annet brukt til oppslag   Correspondence Objekt av typen InsertCorrespondenceBEV2 med meldinger som skal lagres       Returverdi Beskrivelse     Receipt Kvittering for forsendelsen.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     InsertCorrespondenceBEV2    ServiceCode Tjenestekode, f.eks. \u0026ldquo;PSA\u0026rdquo;   ServiceEdition Tjenesteutgavekode, f.eks. \u0026ldquo;2009\u0026rdquo;   Reportee Fødselsnummer eller organisasjonsnummer eller brukernavn på selvregistrert bruker for den meldingen gjelder   Content Objekt med meldingsdetaljer (ExternalContentBEV2)   VisibleDateTime Tidspunkt for når meldinger blir synlig i portal   AllowSystemDeleteDateTime Angir når Altinn kan slette meldingen   DueDateTime Tidspunkt for forfall svar   ArchiveReference Referanse til arkivert element. Benytt dette til å indikere at meldingen er et svar på en konkret innsending.   ReplyOptions Objekt med linker til skjema/Altinn tjeneste/arkivelement (CorrespondenceInsertLinkBE). Bruk dette til å indikere hvordan avgiver kan svare på en melding   Notifications Liste av objekt med varsler som skal sendes mottaker ifbm meldingen (NotificationBE)   AllowForwarding Angir om meldingen skal kunne videresendes av bruker i portalen   Case Id ID som identifiserer saken som meldingen skal knyttes til   MessageSender Avsender som skal vises for sluttbruker, kan være forskjellig fra etat, hvis den ikke fylles ut brukes etaten som eier tjenesten. Merk: Avsender skal alltid være en offentlig virksomhet, ikke en privatperson eller privat virksomhet.   IsReservable I sammenheng med KRR (Kontakt og reservasjons registeret) kan en sluttbruker reservere seg imot å motta meldinger. IsReservable verdien kan brukes til å indikere om det er mulig å reservere seg mot meldingen eller ikke. Det er valgfritt å angi en verdi og standard (default) verdi er False (0). Denne verdien må derfor aktivt settes til True (1) om tjeneste eier ønsker og respektere reservasjoner.   SdpOptions Inneholder informasjon om hvordan en melding skal sendes til Digital postkasse til innbygger istedenfor eller i tillegg til at det opprettes correspondence. Hvis det ikke oppgis noe informasjon (null) så vil ikke videresending aktiveres. Har også mulighet for å bestille varsel og revarsel fra postkasseleverandør. (Klasse: SdpOptions)   OnBehalfOfOrgNr Gjør det mulig å levere Correspondence på vegne av en annen organisasjon. Krever et valid Organisasjonsnummer som input.   ExternalContentBEV2    LanguageCode 1033 - English, 1044 - Bokmål, 2068 - Nynorsk   MessageTitle Tittel på melding   MessageSummary Tekst som beskriver meldingen   MessageBody Selve meldingen   Attachments Liste av vedlegg til meldingen, binære eller xml vedlegg (AttachmentBEV2)   CustomMessageData Felt for angivelse av attributter spesifikke for den gitte Altinn tjeneste. For eksempel for å angi kommunenummer på selvangivelsen. Bruk av spesifikke attributter må avtales spesielt for de(n) aktuelle Altinn-tjenestene   AttachmentBEV2    BinaryAttachments Liste med objekter av binære vedlegg (BinaryAttachmentBEV2)   XmlAttachmentList Liste med objekt med xml vedlegg (XmlAttachmentBEV2). Benyttes hvis det er definert at i TUL at melding skal vises i Infopath skjema. Infopath-skjema må være utviklet som en del av meldingstjenesten i TUL   BinaryAttachmentBEV2    FileName Filnavn for det binære vedlegget   Name Dette er navnet på vedlegget, som det vises i portalen   Encrypted Sier om vedlegget er kryptert. True/False   Data Data for det binære vedlegget, byte array   SendersReference Referanse for vedlegget, som ennå ikke er tatt i bruk. Settes av tjenesteeier. Feltet er ikke påkrevd   FunctionType Hvilken funksjonstype vedlegget utgjør: Invoice - Faktura, Unspecified - Uspesifisert   DestinationType Hvor vedlegget er tilgjengelig: Default/ShowToAll – tilgjengelig i portal og for sluttbrukersystem. PortalOnly – kun tilgjengelig fra portal. EndUserSystemOnly – kun tilgjengelig fra sluttbrukersystem   XmlAttachmentBEV2    SendersReference Referanse for vedlegget. Settes av tjenesteeier, bør være unikt   FormDataXml XML data. Må legges i en CDATA blokk   DataFormatId Identifikator for XSD fra den valgte leverandøren, definert i TUL (XSD id)   DataFormatVersion Versjonen av XSD\u0026rsquo;en som er brukt i dette InfoPath-skjemaet, definer i TUL (XSD versjon)   DataFormatVersion Versjonen av XSD\u0026rsquo;en som er brukt i dette InfoPath-skjemaet, definer i TUL (XSD versjon).   CorrespondenceInsertLinkBE    Service Objekt med info om service (InsertCorrespondenceLinkServiceCodeBE)   URL Objekt med info om url (InsertCorrespondenceLinkServiceURLBE)   ArchiveReference Objekt med info om arkivert element (InsertCorrespondenceLinkArchiveRefBE)   InsertCorrespondenceLinkServiceCodeBE    ServiceCode Angir den tjenestekoden for svarmeldingen   ServiceEdition Angir tjenesteutgavekoden for svarmeldingen   InsertCorrespondenceLinkServiceURLBE    LinkURL Angir en link til en webside for svarmelding   LinkText Beskrivelse av link   InsertCorrespondenceLinkArchiveRefBE    ArchiveRef Elementet benyttes hvis man kan svare vha. et arkivert element. Referanse til element i arkiv   NotificationBE    ShipmentDateTime Når varsel skal sendes til mottaker   LanguageCode Språk kode: 1033 English, 1044 Bokmål, 2068 Nynorsk   FromAddress Avsender adresse (e-post). Hvis ikke satt benyttes avsenderadresse satt i varselmalen   NotificationType En unik streng som definerer en referanse til predefinerte varslingstekster   ReceiverEndPoints Liste av mottaker adresser (ReceiverEndPointBE)   TextTokens Liste av tekster som skal erstatte maltekst i varselmal   ReceiverEndPoint    ReceiverAddress Mobilnummeret eller epostadressen til mottaker av varsel. Dette må passe med TransportType Email eller SMS. Feltet er valgfritt og hvis feltet er tomt vil Altinn forsøke identifisere riktige mottakere basert på avgiver og TransportType. Feltet må være tomt for TransportType Both, SMSPreferred og EmailPreferred.   TransportType Angir om varsel skal sendes som epost eller SMS. Lovlige verdier er: SMS - Altinn vil sende varsel som SMS hvis det er oppgitt et mobilnummer i ReceiverAddress eller avgiver har registrert et eller flere mobilnummer. Hvis avgiver er en organisasjon vil det sendes varsel til alle registrerte mobilnummer.Email - Fungerer på samme måte som SMS, men med epost som kanal.Both - Altinn vil sende varsel både som epost og SMS om mulig. Hvis avgiver kun har registrert en epostadresse vil det sendes varsel som epost. Tilsvarende for mobilnummer. En organisasjon vil få varsel på alle registrerte varslingsadresser.SMSPreferred - Altinn vil sende varsel som SMS hvis avgiver har registrert et mobilnummer. Hvis avgiver ikke har registrert dette vil det isteden bli sendt varsel som epost. Forutsatt at det finnes en registrert epostadresse. En organisasjon vil bli sendt varsel på alle varslingsadresser av riktig type.EmailPreferred - Fungerer på samme måte som SMSPreferred, men med epost som kanal.   TextTokenSubstitutionBE    TokenNum Ikke i bruk, kan utelates.   TokenValue Tekst som skal ersatte maltekst. Substitusajonen gjøres i samme rekkefølge som parameterene er angitt. Varselmal må bestilles og lages på forhånd   SdpOptions    SdpSetting Her styres det om Altinn skal ha en kopi eller ikke. CopyAltinn – Det opprettes en correspondence i tillegg til det digitale brevet. ForwardOnly – Det opprettes ikke noen kopi i Altinn   BackupAltinn Dette styrer hva som skal skje hvis avgiver ikke har en digital postkasse. (BackupAltinn har ingen effekt hvis avgiver har en digital postkasse.). BackupAltinn = false – Det lages aldri noen correspondence. Isteden gis det en feilmelding i kvitteringen som returneres. BackupAltinn = true – Det vil alltid lages en correspondence. Kvitteringen som returneres vil ha en underkvittering med info om at det ikke kunne sendes noe digitaltbrev da postkassen er ukjent   PrimaryDocumentFileName For SDP må det være med minst ett binært vedlegg under Attachments. Dette vedlegget må ha angitt et filnavn (FileName) og navnet må stemme perfekt med innholdet i dette feltet. Vedlegget vil da benyttes som hoveddokument i det digitale brevet   SdpNotifications Container for varsel. Kan ha 0 eller ett epostvarsel og/eller 0 eller smsvarsel. (Klasse: SdpNotifications)   SdpNotifications    EmailNotification Varseldetaljer for epostvarsel. (Klasse: SdpEmailNotification)   SmsNotification Varseldetaljer for smsvarsel. (Kallse: SmsNotification)   SdpEmailNotification    NotificationText Varselteksten som skal med i meldingen til bruker. Maks 500 tegn.   EmailAddress Epostaddressen til mottaker. Altinn vil forsøke finne brukerens adresse fra KRR hvis etat ikke har dette. Hvis hverken etat eller Altinn finner noen noen adresse vil det gi feilmelding.   Repititions Varsel repetisjoner. Flere verdier vil produsere påminnelser   SdpSmsNotification    NotificationText Varselteksten som skal med i meldingen til bruker. Maks 160 tegn   MobileNumber Mobilnummeret til mottaker. Altinn vil forsøke finne brukerens mobilnummer fra KRR hvis etat ikke har dette. Hvis hverken etat eller Altinn finner noen noe mobilnummer vil det gi feilmelding.   Repititions Varsel repetisjoner. Flere verdier vil produsere påminnelser   DaysDelayedList    DaysDelayed Et tall mellom 0 og 25 som angir antall dager relativt til dagen hvor det digitale brevet ble gjort tilgjengelig for bruker. Tallet 0 vil gi varsel samme dag   ReceiptBE    ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel ved senere oppdatering av kvittering   ReceiptText Tekst i kvitteringen   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptTypeName Angir hva kvittering gjelder. Mulige verdier: FormTask - Skjemasett, Correspondence - Melding, PINCODE - PIN-koder, Subscription - Abonnement, Outbound - Forsendelse sendt fra Altinn, PreFill - Preutfyllingsdata, Broker - Formidlingstjeneste, RegisterDLS - DLS registerdata, RegisterDSF - DSF registerdata, RegisterER - ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp - Innsynstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering   ReceiptStatusCode Status for forsendelse som kvitteringen gjelder: NotSet (standardverdi som brukes når status ikke er satt – skal ikke kunne mottas som verdi), OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering)   References Liste med ReferenceBE-objekter for kvitteringen   SubReceipts Liste med tilhørende Receipt-objekter (dersom denne kvitteringen er en hovedkvittering)   ReferenceBE    ReferenceValue Selve referansen (verdien) satt på kvitteringen. Typisk forsendelsesreferansen   ReferenceTypeName Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Benyttes ikke, SendersReference - Referanse satt av avsender for del av en forsendelse, ParentReference - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, OwnerPartyReference - Organisasjonsnummer eller personnummer til eier av kvitteringen, typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen, ArchiveReference -Arkivreferanse    CreateSimpleCorrespondenceService CreateSimpleCorrespondenceService er en operasjon som vil opprette en enkel meldingstjeneste (correspondence) basert på en mal. Malen (template) er i utgangspunktet en vanlig meldingstjeneste som er definert av ASF (Altinn sentralforvaltning). Malen blir gitt en midlertidig kode og versjonsnummer og disse verdiene kan senere benyttes av en tjenesteeier slik at de kan opprette sin egen unike tjeneste basert på malen.\nOperasjonen oppretter en fullverdig tjeneste, men siden malen skal kunne brukes som utgangspunkt for alle tjenesteeiere er den veldig enkel. Det er flere begrensninger. Tjenesten har ingen skjema, og det er ikke mulig å spesifisere at lesebekreftelser sendes på batch til tjenesteeier.\nI returen fra operasjonen kommer informasjon om den unike tjenesten for den spesifikke tjenesteeieren. Dette er ExternalServiceCode og ExternalServiceEditionCode som tjenesteeieren senere kan benytte i kall til operasjonen InsertCorrespondenceV2.\nFor flere detaljer om de ulike malene må man kontakte Altinn. De har også oversikt over eksisterende maler med koder og versjonsnummer.\n   Input Beskrivelse     templateServiceCode ServiceCode for malen man ønsker benytte   templateServiceEditionCode ServiceEditionCode for malen man ønsker benytte   Returverdi Beskrivelse   CorrespondenceServiceInfo Et dataobjekt med detaljer om tjenesten som ble laget. (se under.)    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     CorrespondenceServiceInfo    ExternalServiceCode Dette er koden for den nye unike tjenesten som operasjonen har laget for tjenesteeieren som kalte tjenesten   ExternalServiceEditionCode Dette er \u0026ldquo;editioncode\u0026rdquo; for den nye tjenesten    GetCorrespondenceStatusDetails Denne metoden bør helst ikke benyttes. Benytt isteden versjon 3.\nÅrsaken til versjonering av denne operasjonen er endring av kontrakten. Ved innføring av Kontakt og reservasjonsregisteret til difi ble det innført en ny status på Correspondence. Dette er en status som indikerer at mottaker har reservert seg mot å motta elektronisk kommunikasjon.\nGetCorrespondenceStatusDetailsV2 Denne metoden bør helst ikke benyttes. Benytt isteden versjon 3.\nÅrsaken til denne versjoneringen er ny funksjonalitet knyttet til Sikker Digital Post.\nGetCorrespondenceStatusDetailsV3 Operasjonen GetCorrespondenceStatusDetails benyttes av en tjenesteeier for å sjekke status på et sett av meldinger knyttet til en spesifisert tjeneste.\nTabellen under beskriver datakontrakten for operasjonen: Request entiteter:\n   Input Beskrivelse     CorrespondenceStatusFilter Entitet for å angi filter for søket   Returverdi Beskrivelse   CorrespondenceStatusResult Entitet med liste over meldingstjenestene som matcher søket    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     CorrespondenceStatusFilterV3    CreatedAfterDate Dato og klokkeslett som filtrere ut meldinger opprettet før angitt dato   CreatedBeforeDate Dato og klokkeslett som filtrere ut meldinger opprettet tidligere enn angitt dato   CurrentStatus Filter for å hente ut meldinger i en angitt status. Mulige verdier er: Created, Read, Confirmed   NotificationSent Filter for hvorvidt varsel er sendt for meldingene eller ei   Reportee Filter for å returnere melding for en gitt avgiver, angitt av fødselsnummer eller organisasjonsnummer   SendersReference Filter for meldinger med en gitt SendersReference fra tjenesteeier. SendersReference på meldingstjenesten settes av feltet ExternalShipmentReference ved bruk av web service InsertCorrespondenceV2 og feltet SendersReference i correspondence.2010.10.xsd for batch   ServiceCode Tjenestekode for meldingene som skal returneres – pålagt parameter   ServiceEditionCode Tjenesteutgavekode for meldingene som skal returneres – pålagt parameter   SdpSearchOptions Tilleggsinnstillinger for Digital postkasse til innbygger. Hvis det ikke oppgis noe her så vil tjenesten ikke inkludere SDP status detaljer   SdpStatusSearchOptions    IncludeCorrespondence Dette er et flag som styrer hvorvidt søkeresultatet skal inkludere correspondence status information   SdpStatusSearchOptions    IncludeCorrespondence Dette er et flag som styrer hvorvidt søkeresultatet skal inkludere correspondence status information    Respons entiteter:\n   Property Beskrivelse     CorrespondenceStatusResultV3    ServiceCode Tjenestekode for meldingene returnert   ServiceEditionCode Tjenesteutgavekode for meldingene returnert   CorrespondenceStatusInformation Status informasjon om meldinger i Altinn (CorrespondenceStatusInformation)   SdpStatusInformation Status informasjon om digitale brev som Altinn har videresendt til løsningen for «Digital postkasse til innbygger (SdpStatusInformation)   CorrespondenceStatusInformation    CorrespondenceStatusDetailsList Liste over meldinger og deres status historikk (StatusV2)   LimitReached Dette er et flag som indikerer hvorvidt listen er komplett eller ikke. Hvis dette feltet er true så betyr det at søkekriteriene bør endres slik at det er mer begrensende   StatusV2 (correspondence)    CorrespondenceID Meldingens unike id   CreatedDate Dato for når meldingen ble opprettet   Notifications Liste over varsler knyttet til meldingen angitt som en liste med Notification-entiteter (Notification)   Reportee Avgiver meldingen tilhører. Fødselsnummer eller organisasjonsnummer   SendersReference Verdien av referansen SendersReference hvis angitt av tjenesteeier   StatusChanges Liste over meldingens statusendringer som en liste av StatusChange-entiteter   Notification    Recipient Varselets mottaksadresse. E-postadresse eller telefonnummer   SentDate Dato og klokkeslett for når varselet er sendt. Om feltet er tomt (null) betyr det at varselet ikke er sendt   TransportType Angir om varsel ble sendt som SMS eller epost.   StatusChange    StatusDate Dato og klokkeslett for når statusen endret   StatusType Statusen meldingen endret til. Mulige verdier er: Created – meldingen ble opprettet av tjenesteeier, Read – meldingen ble lest av en bruker, Confirmed – meldingen ble bekreftet lest av en bruker, Reserved – mottaker har reservert seg mot elektronisk kommunikasjon. Meldingen er ikke synlig for mottaker   SdpStatusInformation    SdpStatusDetailsList Liste over digitale brev laget gjennom Altinn og deres status historikk (SdpStatusDetails)   LimitReached Dette er et flag som indikerer hvorvidt listen er komplett eller ikke. Hvis dette feltet er true så betyr det at søkekriteriene bør endres slik at det er mer begrensende   SdpStatusDetails    SdpId En unik ID for elementet definert i Altinn   CorrespondenceId Unik ID for correpondence hvis Altinn har fått kopi eller har fungert som backup   CreatedDateTime Tidspunktet for når det digitale brevet først ble registrert i Altinn   LastChangedDateTime Tidspunktet for når status på elementet ble sist oppdatert   Reportee Avgiver i form av personnummer eller organisasjonsnummer (Brevets mottaker)   Reference En referanseverdi som tjenesteeier kan gi alle digitale brev. Kan brukes hvis det lages mange brev samtidig for å identifisere alle som ble opprettet sammen   StatusHistory Brevets status historikk. Dette er en liste med de statuser brevet har hatt(SdpStatusChange)   SdpStatusChange    Status Unknown – Ukjent status, Sent_Meldingsformidler – Altinn har laget brevet og sendt det inn i SDP systemet, Delivered_EndUser – Brevet har gått gjennom systemet og blitt levert til sluttbruker, Delivery_EndUser_Failed – Brevet kunne ikke leveres, Reserved – Altinn lagde ikke noe brev fordi sluttbruker har reservert seg mot digital post, NoMailBox – Altinn lagde ikke noe brev fordi sluttbruker ikke har registrert noen postboks i kontakt og reservasjonsregisteret   StatusDateTime Tidspunktet for når statusen ble satt    GetCorrespondenceStatusHistory Operasjonen GetCorrespondenceStatusHistory benyttes av en tjenesteeier for å sjekke status på et sett av meldinger basert på SendersReference på meldingene.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     CorrespondenceStatusHistoryRequest Entitet for å angi filter for søket   Returverdi Beskrivelse   CorrespondenceStatusHistoryResult Entitet med liste over meldingstjenestene som matcher søket    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\nRequest entiteter:\n   Property Beskrivelse     CorrespondenceStatusHistoryResult    CorrespondenceStatusInformation Status informasjon om meldinger i Altinn. (CorrespondenceStatusInformation   SdpStatusInformation Status informasjon om digitale brev som Altinn har videresendt til løsningen for «Digital postkasse til innbygger (SdpStatusInformation)   CorrespondenceStatusInformation    CorrespondenceStatusDetailsList Liste over meldinger og deres status historikk (StatusV2)   LimitReached Dette er et flag som indikerer hvorvidt listen er komplett eller ikke. Hvis dette feltet er true så betyr det at søkekriteriene bør endres slik at det er mer begrensende   StatusV2 (correspondence)    CorrespondenceID Meldingens unike id   CreatedDate Dato for når meldingen ble opprettet   Notifications Liste over varsler knyttet til meldingen angitt som en liste med Notification-entiteter (Notification)   Reportee Avgiver meldingen tilhører. Fødselsnummer eller organisasjonsnummer.   SendersReference Verdien av referansen SendersReference hvis angitt av tjenesteeier   StatusChanges Liste over meldingens statusendringer som en liste av StatusChange-entiteter   Notification    Recipient Varselets mottaksadresse. E-postadresse eller telefonnummer   SentDate Dato og klokkeslett for når varselet er sendt. Om feltet er tomt (null) betyr det at varselet ikke er sendt   TransportType Angir om varsel ble sendt som SMS eller epost.   StatusChange    StatusDate Dato og klokkeslett for når statusen endret   StatusType Statusen meldingen endret til. Mulige verdier er: Created – meldingen ble opprettet av tjenesteeier, Read – meldingen ble lest av en bruker,Confirmed – meldingen ble bekreftet lest av en bruker, Reserved – mottaker har reservert seg mot elektronisk kommunikasjon. Meldingen er ikke synlig for mottaker   SdpStatusInformation    SdpStatusDetailsList Liste over digitale brev laget gjennom Altinn og deres status historikk (SdpStatusDetails)   LimitReached Dette er et flag som indikerer hvorvidt listen er komplett eller ikke. Hvis dette feltet er true så betyr det at søkekriteriene bør endres slik at det er mer begrensende   SdpStatusDetails    SdpId En unik ID for elementet definert i Altinn   CorrespondenceId Unik ID for correpondence hvis Altinn har fått kopi eller har fungert som backup   CreatedDateTime Tidspunktet for når det digitale brevet først ble registrert i Altinn   LastChangedDateTime Tidspunktet for når status på elementet ble sist oppdatert   Reportee Avgiver i form av personnummer eller organisasjonsnummer. (Brevets mottaker)   Reference En referanseverdi som tjenesteeier kan gi alle digitale brev. Kan brukes hvis det lages mange brev samtidig for å identifisere alle som ble opprettet sammen.   StatusHistory Brevets status historikk. Dette er en liste med de statuser brevet har hatt (SdpStatusChange)   SdpStatusChange    Status Unknown – Ukjent status, Sent_Meldingsformidler – Altinn har laget brevet og sendt det inn i SDP systemet, Delivered_EndUser – Brevet har gått gjennom systemet og blitt levert til sluttbruker, Delivery_EndUser_Failed – Brevet kunne ikke leveres, Reserved – Altinn lagde ikke noe brev fordi sluttbruker har reservert seg mot digital post, NoMailBox – Altinn lagde ikke noe brev fordi sluttbruker ikke har registrert noen postboks i kontakt og reservasjonsregisteret   StatusDateTime Tidspunktet for når statusen ble satt    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/prefill/",
	"title": "Preutfylling",
	"tags": [],
	"description": "Sende ut preutfylte oppgavesett til innboksen",
	"content": " Prefill tjenesten inneholder operasjoner som benyttes av tjenesteeier for å sende inn preutfylte oppgavesett for avgivere. Det finnes tre typer preutfyllingsinformasjon:\n Preutfylling av oppgavesett. Hele oppgavesettet (hoved- og underskjema) sendes inn med preutfyllingsinformasjon. Tjenesteeier kan også velge å legge til binære vedlegg for preutfylte oppgavesett. Preutfyllingsinformasjon angitt som felt/verdi. Feltet viser til en unik id som benyttes i skjemaer, og det angis verdi for feltet. Registerdata. Statisk informasjon som sendes inn fra nasjonale registre.  Prefilltjenesten har kun støtte for skjemasettbasert prefill. For preutfyllingsinformasjon angitt med felt og verdi må tjenesteeier benytte batchgrensesnitt. Batchgrensesnittet kan også benyttes dersom mengden med preutfyllingsinformasjon er for stort for et tjenestekall, eller for tjenesteeiere som ikke ønsker å benytte tjenestegrensesnittet. Registerinformasjon blir overført til Altinn fra kilde registeret ved gjevne mellomrom. Det alternative batch-grensesnittet er beskrevet i avsnittet Preutfylling.\nTjenestene for skjemasettet må være definert i tjenesteutviklingsløsningen og migrert til Altinn før en tjenesteeier kan sende inn preutfyllingsinformasjon for tjenesten. Operasjon GetAvailableServices kan kalles for å sjekke om skjemasettet eksisterer i Altinn.\nTjenesteoperasjoner Preutfyllingskomponenten har følgende eksponerte operasjoner for bruk av tjenesteeiere.\nSubmitAndInstantiatePrefilledFormTask Denne operasjonen benyttes av tjenesteeiere for å preutfylle et oppgavesett for en avgiver, og umiddelbart aktivere oppgavesettet i brukers arbeidsliste. Ett oppgavesett kan preutfylles og instansieres per kall til SubmitAndInstantiatePrefilledFormTask. Kvittering til tjenesteeier vil angi om mottak, validering, lagring til prefilldatabase (dersom dette er valgt) og instansiering av skjema i portal (dersom dette er valgt) ble gjennomført.\n   Parameter Beskrivelse     externalBatchId Unik id for forsendelse. Denne defineres og settes av tjenesteeier. Returneres i kvittering. Identifikatoren kan senere benyttes av tjenesteeier for å hente ut kvittering for den gitte forsendelsen   preFillFormTask Parameter skal inneholde prefilldata for de ulike skjema i et oppgavesett. Se PrefillFormTask   doSaveFormTask Angir om det preutfylte oppgavesettet skal lagres i databasen for senere bruk   doinstantiateFormTask Angir om det preutfylte oppgavesettet umiddelbart skal instansieres i brukers arbeidsliste   caseId Referanse til samhandlingstjeneste preutfylt skjema skal knyttes til       Retur Beskrivelse     Receipt Kvittering for forsendelsen. Se ReceiptExternal    SubmitPrefilledFormTasks SubmitPrefilledFormTasks kalles av tjenesteeier for å lagre et preutfylt oppgavesett for en avgiver i Altinn. Ett eller flere oppgavesett kan sendes inn ved et kall til tjenesten. Grensesnittet har støtte for å angi en liste med helt uavhengige preutfyllingsdetaljer. I prinsippet et online batch grensesnitt. De ulike elementene kan gjelde helt separate tjenester og avgivere.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     externalBatchId Unik id for forsendelse. Denne defineres og settes av tjenesteeier. Returneres i kvittering. Identifikatoren kan senere benyttes av tjenesteeier for å hente ut kvittering for den gitte forsendelsen.   preFillFormTasksDetails Kontainerelement med preutfyllingsdata. Se PrefillFormTaskDetails       Retur Beskrivelse     Receipt Kvittering for forsendelsen. Se ReceiptExternal    Datakontrakter Preutfyllingskomponenten sine operasjoner benytter seg av følgende datakontrakter.\nPrefillFormTaskDetails Input element til operasjonen Se SubmitPrefilledFormTasks med støtte for å angi en liste med helt uavhengige preutfyllingsdetaljer. I prinsippet et online batch grensesnitt.\n   Property Beskrivelse     PreFillFormTaskList Liste med metadata og preutfyllingsdata. Se PrefillFormTask   SystemUserCode Kode som unikt representerer kildesystem. Format: XXX_YYYY. De tre første bokstavene er påkrevd og representerer tjenesteeier. De etter understreken representerer avdeling/system, og er valgfritt hvis det ikke finnes flere avdelinger/systemer innenfor samme tjenesteeier.    PrefillFormTask Dette er hovedkontrakten hvor det kan defineres opp alle detaljer for preutfylling av et oppgavesettet.\n   Property Beskrivelse     ExternalServiceCode Angir den unike tjenestekoden dataene gjelder   ExternalServiceEditionCode Angir tjenesteutgavekode dataene gjelder   ExternalShipmentReference Unik referanse som settes av tjenesteeier for å identifisere forsendelsen   IdentityFieldHashCode Skal ikke fylles ut av tjenesteeier. Brukes internt i Altinn.   LargeInboundReference Skal ikke fylles ut av tjenesteeier. Brukes internt i Altinn.   PreFillAttachments Liste med binære vedlegg som skal legges ved ny instanse av oppgavesettet. Se PrefillFormTaskAttachment   PrefillForms Liste med de faktiske skjemadata som skal benyttes i ny instanse av oppgavesettet. Se PrefillForm   PreFillIdentityFields Liste med identifiserende felter for det preutfylte oppgavesettet. Se PreFillIdentityFieldBE   PrefillNotifications Liste med varsler som skal sendes ut ved instansiering av oppgavesettet. Se Notification   ReceiversReference Referanse som settes av Altinn. Denne returneres i kvittering til tjenesteeier   Reportee Fødselsnummer eller organisasjonsnummer organisasjonsnummer eller brukernavn på selvregistrert bruker som identifiserer hvem dataene gjelder   ServiceOwnerCode Feltnavnet er misvisende. Verdien skal ikke være ServiceOwnerCode, men en kode som unikt representerer kildesystem. Format: XXX_YYYY. De tre første bokstavene er påkrevd og representerer tjenesteeier. De etter understreken representerer avdeling/system, og er valgfritt hvis det ikke finnes flere avdelinger/systemer innenfor samme tjenesteeier. I andre grensesnitt heter dette som regel SystemUserName.   SendersReference Referanse på preutfylt skjemasett som settes av tjenesteeier.   ValidFromDate Angir fra når preutfyllingsdata er gyldig (yyyy-MM-dd)   ValidToDate Angir til når preutfyllingsdata er gyldig (yyyy-MM-dd)   IsReservable Dette feltet er knyttet til avgivere av typen person og hvorvidt Altinn skal respektere om en person er reservert mot elektronisk kommunikasjon med det offentlige. Hvis IsReservable er satt til true vil Altinn gjøre et oppslag i Kontakt- og reservasjonsregisteret, og sjekke om avgiver er reservert. Altinn vil da eventuelt gi en feilmelding om at personen er reservert i stedet for å lagre Prefillinformasjonen. IsReservable feltet er valgfritt og standard verdi er false. Dette vil si at tjenesteeier aktivt må sette feltet til true hvis de ønsker å respektere reservasjoner.   ValidateButDoNotSendNotification Flag som kan brukes av tjenesteeiere som ønsker å sikre at Altinn har kontaktinformasjon som kan brukes ved varsling uten at det sendes varsel. Mer informasjon    Verifisering av kontaktinformasjon for varsel Flagget ValidateButDoNotSendNotification kan brukes av tjenesteeiere hvis de ønsker å sjekke at Altinn har nok informasjon til å kunne sende varsel uten at det faktisk sendes varsel. Dette kan da brukes i de tilfellene hvor de også skal lage et meldingselement (correspondence) og ønsker å knytte varsel til det isteden. Skulle verifisering av kontaktinformasjon resultere i en feil så vil tjenesten returnere en feilmelding om dette. Det blir ikke laget noe skjemaelement i en slik situasjon. Tjenesteeier kan da velge å likevel opprette skjema i en forespørsel uten varselinformasjon eller velge en helt annen kommunikasjonskanal. Mekanismen er avhengig av at forespørselen inneholder informasjon om varsel utsending, men vil ikke gi noen feil om det skulle mangle.\nPrefillForm    Property Beskrivelse     DataFormatID Id til skjema.   DataFormatVersion Versjon til skjema.   FormDataXML Preutfyllingsdata for angitt skjema. Må legges i en CDATA blokk. Bruk av etatid i skjema   SendersReference Unik referanse for skjemaet satt av tjenesteeier.   SignedByDefault Feltet er med på å styre hva bruker skal signere under signeringssteget. Når dette er satt til true så vil skjema signeres hvis bruker ikke velger det bort.   SigningLocked Feltet er med på å styre hva bruker skal signere under signeringssteget. Når dette er satt til true så blir bruker ikke gitt muligheten til å velge bort skjema under signering.    Håndtering av Etatid attributt i skjemadefinasjon fra OR ved Prefill Skjema definert av oppgaveregisteret har ofte en valgfri attributt kalt etatid som er en enum med gyldige etater for skjemadefinasjon. Denne verdien er ikke lenger i bruk og kan ikke benyttes. Hvis verdi settes i XML som sendes inn fra etatssystem vil skjema ikke validere.\nPrefillFormTaskAttachment    Property Beskrivelse     AttachmentData Data for det binære vedlegget   AttachmentName Dette er navnet på vedlegget, som det vises i portalen   AttachmentType Angir MIME-typen for vedlegget: application_none - ingen MIME type angitt, application_pdf - PDF format, application_msword - Microsoft Word, application_vnd_ms_excel - Microsoft Excel, application_vns_oasis_opendocument_text - Open document type Text, application_vnd_oasis_opendocument_presentation - Open docment type Presentation, application_vnd_oasis_opendocument_spreadsheet - Open docment, type Spreadsheet, application_rtf - Rich text format type, application_vnd_ms_powerpoint - Microsoft PowerPoint, application_postscript, application_zip - Type zip, text_plain, text_html, text_xml, text_rtf - Rich text format type, text_richtext - Rich text, binary_octet_stream - Binary format, not_Applicable   FileName Navn på fil for det binære vedlegget   SendersReference Referanse for vedlegget. Settes av tjenesteeier   SignedByDefault Feltet er med på å styre hva bruker skal signere under signeringssteget. Når dette er satt til true så vil vedlegget signeres hvis bruker ikke velger det bort.   SigningLocked Feltet er med på å styre hva bruker skal signere under signeringssteget. Når dette er satt til true så blir bruker ikke gitt muligheten til å velge bort vedlegget under signering.    PreFillIdentityFieldBE    Property Beskrivelse     FieldValue Verdi for identifiserende feltet. Må settes når det skal være mer enn ett preutfylt skjemasett for samme tjeneste og avgiver. Se avsnitt Identifiserende felter for mer info.   Index Index til identifiserende feltet. Må settes når det skal være mer enn ett preutfylt skjemasett for samme tjeneste og avgiver. Se avsnitt Identifiserende felter for mer info.    Notification Dette dataelementet kan brukes til å definere hvordan en avgiver skal varsles om at det er blitt opprettet et nytt element i deres meldingsboks i Altinn. Det er viktig å merke seg at informasjonen her kun benyttes av operasjonen SubmitAndInstantiatePrefilledFormTask da dette er eneste operasjon som lager noe som er synlig for avgiver.\n   Property Beskrivelse     FromAddress Avsender adresse (e-post). Hvis ikke satt benyttes avsenderadresse satt i varselmalen   NotificationID Skal ikke fylles ut av tjenesteeier. Brukes internt i Altinn.   NotifyType Type varsel. NotificationType.PreFill.   ReporteeElementID Skal ikke fylles ut av tjenesteeier. Brukes internt i Altinn.   ReporteeId Skal ikke fylles ut av tjenesteeier. Brukes internt i Altinn.   ShipmentDateTime Når varsel skal sendes til mottaker.   LanguageCode Språk kode: 1033 - English, 1044 - Bokmål, 2068 - Nynorsk   NotificationType En unik streng som definerer en referanse til predefinerte varslingstekster.   TextTokens Liste av tekster som skal erstatte maltekst i varselmal. Se TextToken   ReceiverEndPoints Liste av mottaker addresser. Se ReceiverEndPoint    TextTokens    Property Beskrivelse     TokenNum Ikke i bruk, kan utelates   TokenValue Tekst som skal ersatte maltekst. Substitusajonen gjøres i samme rekkefølge som parameterene er angitt. Varselmal må bestilles og lages på forhånd    ReceiverEndPoint    Property Beskrivelse     ReceiverAddress Mobilnummeret eller epostadressen til mottaker av varsel. Dette må passe med TransportType Email eller SMS. Feltet er valgfritt og hvis feltet er tomt vil Altinn forsøke identifisere riktige mottakere basert på avgiver og TransportType. Feltet må være tomt for TransportType Both, SMSPreferred og EmailPreferred.   TransportType Angir om varsel skal sendes som epost eller SMS. Lovlige verdier er: SMS - Altinn vil sende varsel som SMS hvis det er oppgitt et mobilnummer i ReceiverAddress eller avgiver har registrert et eller flere mobilnummer. Hvis avgiver er en organisasjon vil det sendes varsel til alle registrerte mobilnummer.Email - Fungerer på samme måte som SMS, men med epost som kanal.Both - Altinn vil sende varsel både som epost og SMS om mulig. Hvis avgiver kun har registrert en epostadresse vil det sendes varsel som epost. Tilsvarende for mobilnummer. En organisasjon vil få varsel på alle registrerte varslingsadresser.SMSPreferred - Altinn vil sende varsel som SMS hvis avgiver har registrert et mobilnummer. Hvis avgiver ikke har registrert dette vil det isteden bli sendt varsel som epost. Forutsatt at det finnes en registrert epostadresse. En organisasjon vil bli sendt varsel på alle varslingsadresser av riktig type.EmailPreferred - Fungerer på samme måte som SMSPreferred, men med epost som kanal.    ReceiptExternal    Property Beskrivelse     ReceiptId Unik identifikator kvitteringen i Altinn. Benyttes for eksempel ved senere oppdatering av kvittering.   ReceiptText Tekst i kvitteringen.   ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken   LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss)   ReceiptTypeName Angir hva kvittering gjelder. Mulige verdier: FormTask -Skjemasett, Correspondence - Melding, PINCODE - PIN-koder, Subscription - Abonnement, Outbound - Forsendelse sendt fra Altinn, PreFill - Preutfyllingsdata, Broker - Formidlingstjeneste, RegisterDLS - DLS registerdata, RegisterDSF - DSF registerdata, RegisterER - ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp -Innsynstjeneste   ReceiptTemplate Angir malen (XML) som skal benyttes for kvittering   ReceiptStatusCode Status for forsendelse som kvitteringen gjelder: NotSet (standardverdi som brukes når status ikke er satt – skal ikke kunne mottas som verdi), OK, UnExpectedError, ValidationFailed, Rejected   ParentReceiptId Dersom denne kvitteringen er en av flere kvitteringer for en forsendelse vil ParentReceiptId vise til ReceiptId som gjelder for hele forsendelsen (hovedkvittering)   References Liste med referanser knyttet til kvitteringen. Se Reference   SubReceipts Liste med underkvitteringer. Dette benyttes gjerne for å detaljere resultatet til en del av forespørselen. For eksempel hvis forespørselen hadde en liste med preutfyllingsdata for flere mottakere.    Reference    Property Beskrivelse     ReferenceValue Selve referansen (verdien) satt på kvitteringen. Typisk forsendelsesreferansen   ReferenceTypeName Angir type referanse: ExternalShipmentReference - Referansen viser til en referanse satt av sluttbrukersystem for en forsendelse, EndUserSystemReference - Benyttes ikke, SendersReference - Referanse satt av avsender for del av en forsendelse, ParentReference - Referansen viser til et hovedskjema, WorkFlowReference - Arbeidsflytreferanse, BatchReference - Referanse til en forsendelse mottatt i eller sendt fra Altinn, OutboundShipmentReference - Referanse til en forsendelse sendt fra Altinn, ReceiversReference - Mottakers referanse hvis kvitteringen blir oppdatert av mottaker av en forsendelse, OwnerPartyReference -Organisasjonsnummer eller personnummer til eier av kvitteringen er typisk den som har sendt inn en forsendelse. Settes av Altinn og kan ikke endres, PartyReference - Organisasjonsnummer eller personnummer til en part som får rettigheter til å hente og oppdatere kvitteringen. Altinn legger automatisk til mottaker av en forsendelse som en part på kvitteringen, ArchiveReference - Arkivreferanse    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/rights/",
	"title": "Rettigheter",
	"tags": [],
	"description": "Hente ut opplysning om rettigheter",
	"content": " RegisterSRRAgencyExternal GetRights Denne operasjonen benyttes for å hente ut gjeldende rettigheter for en tjeneste fra det tjenesteeierstyrte rettighetsregisteret.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     servicecode Angir tjenestekoden man skal hente regler for. Feltet er påkrevd   serviceEditionCode Angir tjenesteutgavekoden man skal hente regler for. Feltet er påkrevd   reportee Angir hvilken avgiver regler skal hentes for. Hvis ingen verdi angis vil regler for alle avgivere returneres   Returverdi Beskrivelse   GetRightResponseList Liste av typen GetRightResponse som angir reglene som ligger i registeret basert på input parametere    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse      GetRightResponse (utvidelse av RegisterSSRRight)   ValidTo Angir dato og tid regel er gyldig til, (yyyy-MM-ddThh:mm:ss)   Reportee Angir avgiveren regelen gjelder for   Right Angir rettighet regelen gir. Mulige verdier er: None – rettighet er ikke satt, Read – rettighet les er satt, Write – rettighet skriv er satt   Condition Kan angi en spesifikk betingelse for regelen, se mer informasjon om mulige verdier under respektive tjenester som benytter registeret    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     450210 Angitt avgiver (reportee) er ikke et valid organisasjons- eller fødselsnummer    AddRights Denne operasjonen benyttes for å legge til nye regler i det tjenesteeierstyrte rettighetsregisteret.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     servicecode Angir tjenestekoden man skal legge til regler for. Feltet er påkrevd   serviceEditionCode Angir tjenesteutgavekoden man skal legge til regler for. Feltet er påkrevd   insertRightList Liste (AddRightRequestList) av objekter av typen AddRightRequest som angir reglene som skal legges til i registeret   Returverdi Beskrivelse   AddRightResponseList Liste av typen AddRightResponse som angir reglene som skulle legges til (insertRightList) i registeret med en status på hver regel    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse      AddRightRequest (utvidelse av RegisterSSRRight)   ValidTo Angir dato og tid regel er gyldig til, (yyyy-MM-ddThh:mm:ss)   Reportee Angir avgiveren regelen gjelder for   Right Angir rettighet regelen gir. Mulige verdier er: None – rettighet er ikke satt, Read – rettighet les er satt, Write – rettighet skriv er satt   Condition Kan angi en spesifikk betingelse for regelen, se mer informasjon om mulige verdier under respektive tjenester som benytter registeret    AddRightResponse (utvidelse av AddRightRequest som sendes inn)   OperationResult Angir resultatet for regelen som skulle legges til. Mulige verdier er: Ukjent – status er ukjent, OK – regel ble lagt til som forventet, RuleNotFound – regel som skulle slettes ble ikke funnet, RuleAlreadyExists – regel som skal legges til eksisterer allerede. Regel må først slettes for å kunne oppdateres, EmptyOrNotAValidSsnOrOrganisation – avgiver for regel er ikke et valid organisasjons- eller fødselsnummer, RightAlreadyExpired – regel som skal legges til er allerede gått ut på gyldighetsdato   Validto Angir dato og tid regel er gyldig til, (yyyy-MM-ddThh:mm:ss)   Reportee Angir avgiveren regelen gjelder for   Right Angir rettighet regelen gir. Mulige verdier er: None – rettighet er ikke satt, Read – rettighet les er satt, Write – rettighet skriv er satt   Condition Kan angi en spesifikk betingelse for regelen, se mer informasjon om mulige verdier under respektive tjenester som benytter registeret    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     450211 Angitt «condition» er ikke gyldig    DeleteRights Denne operasjonen benyttes for å slette eksisterende regler i det tjenesteeierstyrte rettighetsregisteret.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     servicecode Angir tjenestekoden man skal slette regler for. Feltet er påkrevd   serviceEditionCode Angir tjenesteutgavekoden man skal slette regler for. Feltet er påkrevd   deleteRightList Liste (DeleteRightRequestList) av objekter av typen DeleteRightRequest som angir reglene som skal slettes fra registeret   Returverdi Beskrivelse   DeleteRightResponseList Liste av typen DeleteRightResponse som angir reglene som skulle slettes (deleteRightList) fra registeret med en status på hver regel    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse      DeleteRightRequest (utvidelse av RegisterSSRRight)   Reportee Angir avgiveren regelen gjelder for   Right Angir rettighet regelen gir. Mulige verdier er: None – rettighet er ikke satt, Read – rettighet les er satt, Write – rettighet skriv er satt   Condition Kan angi en spesifikk betingelse for regelen, se mer informasjon om mulige verdier under respektive tjenester som benytter registeret    AddRightResponse (utvidelse av AddRightRequest som sendes inn)   OperationResult Angir resultatet for regelen som skulle slettes. Mulige verdier er: Ukjent – status er ukjent, OK – regel ble lagt til som forventet, RuleNotFound – regel som skulle slettes ble ikke funnet, RuleAlreadyExists – regel som skal legges til eksisterer allerede. Regel må først slettes for å kunne oppdateres, EmptyOrNotAValidSsnOrOrganisation – avgiver for regel er ikke et valid organisasjons- eller fødselsnummer, RightAlreadyExpired – regel som skal legges til er allerede gått ut på gyldighetsdato   Reportee Angir avgiveren regelen gjelder for   Right Angir rettighet regelen gir. Mulige verdier er: None – rettighet er ikke satt, Read – rettighet les er satt, Write – rettighet skriv er satt   Condition Kan angi en spesifikk betingelse for regelen, se mer informasjon om mulige verdier under respektive tjenester som benytter registeret    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/samhandlingstjeneste/",
	"title": "Samhandlingstjeneste",
	"tags": [],
	"description": "Administrere samhandlingstjenestene",
	"content": " CaseAgencySystem Case er tjenesten i Altinn for administrering av samhandlingstjenester for tjenesteeiere.\nInstantiateCollaborationAgencySystem Denne operasjonen brukes av tjenesteeier til å instansiere samhandlingstjenester for en gitt person eller organisasjon.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     externalServiceCode Angir tjenestekoden for samhandlingstjeneste som skal instansieres   externalServiceEditionCode Angir tjenesteutgavekoden for samhandlingstjenesten som skal instansieres   reporteeNumber Fødselsnummer eller organisasjonsnummer som saken skal opprettes for   visibleDateTime Angir når samhandlingstjenesten skal være synlig (yyyy-MM-dd / yyy-MM-ddThh:mm:ss)   dueDate Angir når samhandlingstjenesten skal være ferdig (yyyy-MM-dd / yyy-MM-ddThh:mm:ss)   Returverdi Beskrivelse   CaseId Unike identifikator for samhandlingstjenesten    Tabellen under angir mulige feilkoder for operasjonen\n   Feilkode Beskrivelse     60002 Tjenestekode og tjenesteutgavekode er ikke angitt   60012 Angitt avgiver er ikke gyldig   60024 Angitt tjenesteeier er ikke autorisert for valgt tjeneste    GetCaseListAgencySystem Denne operasjonen brukes av tjenesteeier til å hente informasjon om eksisterende samhandlingstjenester.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     caseID Enten: Unike identifikator for samhandlingstjenesten som skal hentes   externalServiceCode Eller: Tjenestekoden for samhandlingstjenesten det skal slås opp mot   externalServiceEditionCode Og: Tjenesteutgavekoden for samhandlingstjenesten det skal slås opp mot   languageID Språk id: 1033 - English, 1044 - Bokmål, 2068-Nynorsk   reporteeNumber Fødselsnummer eller organisasjonsnummer det skal hentes for   Returverdi Beskrivelse   CaseList Liste med ExternalCaseBE objekter    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse      ExternalCaseBE   CaseID Unik identifikator for samhandlingstjenesten   CaseName Samhandlingstjenestens navn definert i TUL   CurrentStateFriendlyName Visningsvennlig navn for samhandlingstjenestens tilstand basert på languageID parameter, satt i TUL   CurrentStateID Unik identifikator for samhandlingstjenestens tilstand, som satt i TUL   CurrentStateName Navn for samhandlingstjenestens tilstand, som satt i TUL   NoticeTemplateID Unik identifikator for eventuell merknad satt på samhandlingstjenesten    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     60001 Angitt CaseID er ikke gyldig   60002 Tjenestekode og tjenesteutgavekode er ikke angitt, eller er ikke en gyldig tjeneste   60012 Angitt avgiver er ikke gyldig   60014 Angitt CaseID er arkivert   60015 Angitt CaseID er slettet   60024 Angitt tjenesteeier er ikke autorisert for valgt tjeneste    NotifyEventAgencySystem Denne operasjonen benyttes for å registrere en hendelse på en eksisterende samhandlingstjeneste.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     notificationInfo Objekt av typen StateMachineEventNotificationBE som angir hendelse og hva hendelsen gjelder for   Returverdi Beskrivelse   StateMachineNotificationResultBEList Liste av typen StateMachineNotificationResultBE som angir resultat av hendelsen    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse     CaseID Enten: Unik identifikator for bestemt samhandlingstjeneste hendelsen gjelder for   ExternalServiceCode Eller: Tjenestekoden for samhandlingstjenestene hendelsen gjelder for   ExternalServiceEditionCode Og: Tjenesteutgavekoden for samhandlingstjenestene hendelsen gjelder for   Event Hendelsen som skal registreres   ReporteeElementID Eventuell id til sub-element som trigger hendelsen, benyttes kun i logg sammenheng    StateMachineNotificationResultBE   CaseID Identifikator for samhandlingstjenesten hendelsen ble registrert for   IsStateChanged Boolsk verdi som angir om en tilstandsendring skjedde   ConditionName Navn på betingelsen som er assosiert   ConditionEvaluationResult Boolsk verdi som angir resultatet for betingelsen hvis en betingelse er tilknyttet (satt til True om ingen betingelse er involvert)   CurrentStateName Samhandlingens nåværende tilstand   HasException Boolsk parameter som antyder om det oppstod en feil i tilstandsmaskinen   ExceptionDetail Inneholder feilinformasjon for en eventuell feil i tilstandsmaskinen   ErrorCode Inneholder feilkoden for en eventuell feil i tilstandsmaskinen    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     60001 Angitt CaseID er ikke gyldig   60002 Tjenestekode og tjenesteutgavekode er ikke angitt, eller er ikke en gyldig tjeneste   60014 Angitt CaseID er arkivert   60015 Angitt CaseID er slettet   60022 Hendelsesinformasjon er ikke angitt   60023 Hendelse er ikke angitt   60032 Hendelsen kunne ikke registreres for valgt tjeneste    SetNoticeAgencySystem Denne operasjonen lar tjenesteeier sette en merknad på en instans av en samhandlingstjeneste, eller en underliggende instans av meldingstjeneste, innsendingstjeneste, eller arkivert innsynstjeneste.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     reporteeElementID Identifikator for elementet merknaden skal settes på: 1. Saks identifikator – caseId. 2. Arkivert element tilknyttet samhandlingstjenesten – reporteeElementID prefikset med AR 3. Aktivt element tilknyttet samhandlingstjenesten – reporteeElementID   noticeInfo Objekt av typen NoticeBE som inneholder mal og eventuelle substitusjoner   Returverdi Beskrivelse   N/A N/A    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\n   Property Beskrivelse      NoticeBE   NoticeTemplateID Identifikator for merknadsmalen opprettet i TUL.   NoticeTokens Liste av typen NoticeTokenBE objekter som inneholder key-value par for substitusjoner    NoticeTokenBE   TokenKey Nøkkel for substitusjon   TokenValue Verdi for substitusjonen    Tabellen under angir mulige feilkoder for operasjonen:\n   Feilkode Beskrivelse     60005 Angitt element er ikke på gyldig format   60014 Angitt saks identifikator er arkivert   60015 Angitt saks identifikator er slettet   60016 Angitt element eksisterer ikke   60017 Angitt element er ikke assosiert til en samhandlingstjeneste   60018 Angitt element er slettet   60019 Angitt element er arkivert, benytt valid arkivreferanse   60024 Angitt tjenesteeier er ikke autorisert for valgt tjeneste    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/",
	"title": "Sluttbrukere",
	"tags": [],
	"description": "Dokumentasjon for hvordan sluttbrukere kan ta i bruk Altinn grensesnitt.",
	"content": "Implementasjonsguidene for integrasjon mot Altinn kan benyttes av eksterne systemer som veiledning for hvordan deres systemer kan integreres mot Altinn. Denne dokumentasjonen beskriver den overordnede arkitekturen for integrasjon mot Altinn og sikkerhetsmekanismer sombenyttes for kommunikasjon mellom Altinn og eksterne systemer\n\rREST API\r\rDokumentasjon for sluttbrukerdelen av Altinns REST-api\n\rWeb Service\r\rDokumentasjon for hvordan sluttbrukersystemer kan ta i bruk Altinn.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/tjenesteeiers-arkiv/",
	"title": "Tjenesteeiers arkiv",
	"tags": [],
	"description": "Hente ut element fra tjenesteeiers arkiv",
	"content": " ArchiveCommon Tjenesten ArchiveCommon inneholder operasjoner for uthenting av arkivdata fra tjenesteeiers arkiv.\nPåfølgende kapittel beskriver tjenesteoperasjonen for denne arkivtjenesten.\nGetServiceOwnerArchiveReporteeElementsV2 Denne operasjonen benyttes for å hente ut data for en gitt avgiver (privatperson eller foretak) fra en tjenesteeiers arkiv. Data kan være skjemasett arkivert i nåværende eller tidligere versjoner av Altinn, eller meldinger sendt fra tjenesteeier til avgiver. Merk at siden samhandlingstjenester og innsynstjenester ikke arkiveres til tjenesteeiers arkiv vil de ikke kunne hentes ut på denne måten. Kun elementer som innlogget bruker har tilgang til returneres, typisk ikke elementer for tjenester tilknyttet andre tjenesteeiere.\nDet er for eksempel nødvendig å kunne ha direkte tilgang til disse dataene i tilfeller hvor tjenesteeier ønsker å veilede en avgiver i sanntid basert på avgivers arkiverte data.\nTjenesteeier får rutinemessig tilsendt alle arkiverte elementer for alle avgivere via batch-grensesnittet Innsendingstjenester.\nOperasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     SearchServiceOwnerArchive Objektet av typen ExternalSOASearchBE, som inneholder søkeparametre for uthenting av elementer fra tjenesteeiers arkiv.   languageID Språk id: 1033 Engelsk 1044 Bokmål 2068 Nynorsk. Språk angitt på arkivert element benyttes uavhengig av hva som settes.       Returverdi Beskrivelse     ServiceOwnerArchiveReporteeElementList Liste med objektet av typen ServiceOwnerArchiveReporteeElementBEV2, som inneholder elementer fra tjenesteeiers arkiv som tilfredsstiller angitte søkeparametre.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten. ExternalSOASearchBE\n   Property Beskrivelse     SSNOrOrgNumber Fødselsnummer eller organisasjonsnummer   ReferenceId Unik referanse id   Subject Hvilket emne søket gjelder   DateFrom Fra dato i arkivet   DateTo Til dato i arkivet   CaseID Identifikator for samhandlingstjeneste elementet skal tilhøre   UserName Søk basert på brukernavn    ServiceOwnerArchiveReporteeElementBEV2\n   Property Beskrivelse     Subject Emne for elementet   IsSubjectMessageTitle Angir om tittel er satt av MessageTitle   LastChangedDate Dato for siste endring   DatReporteeId Intern id   SSNOrOrganizationNumber Fødselsnummer eller organisasjonsnummer tilknyttet arkivert element   ReporteeName Navn på avgiver som eier arkivert element   ReporteeElementId Intern id   Altinn1ArchiveUnitId Intern id fra AltinnI arkivet. Kan være tomt   Altinn1AMReference AM referansen fra AltinnI arkivet. Kan være tomt   Altinn1FormCode Skjemanummer fra AltinnI arkivet. Kan være tomt   EndUserSystemId Id for sluttbrukersystem. Kan være tomt   SendComplete Hvorvidt forsendelsen er komplett eller ikke for elementet. Kan være tomt   ElementType Element type: Archive, Active, Correspondence, ArchiveCorrespondence, LookUp, Collaboration   IsAltinn1 Flagg som indikerer om elementet eksisterer i AltinnI   IsCorrespondenceConfirmationRequired Hvorvidt meldingsbekreftelse er påkrevd eller ikke   ArchiveReference Referansen fra Altinn arkivet.   SystemTypeName Typenavn på sluttbrukersystem. Kan være tomt   ExpiryDate Angir eventuelt når elementet er planlagt slettet    ServiceOwnerArchive Tjenesten ServiceOwnerArchive inneholder operasjoner for uthenting av elementer fra tjenesteeiers arkiv (ikke tilgang til arkiverte elementer fra tidligere versjoner av Altinn).\nPåfølgende kapitler beskriver operasjonen for denne tjenesten.\nGetArchivedFormTaskV2 Denne operasjonen benyttes for å hente ut alle skjemaer og vedlegg som tilhører et gitt skjemasett. Operasjonen er versjonert, gjeldende versjon er V2.\nTabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     reporteeElementId Unik identifikator for skjemasettet som skal hentes. Identifikatoren er obligatorisk input til tjenesten   languageID Språk kode: 1033 Engelsk, 1044 Bokmål, 2068 Nynorsk       Returverdi Beskrivelse     ArchivedFormTask Objektet av typen ArchivedFormTaskBEV2 som skjemasettet som tilfredsstilte det gitte søkekriteriet.    Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten.\nArchivedFormTaskBEV2\n   Property Beskrivelse     reporteeElementId Unik identifikator for skjemasettet.   LastChanged Tidspunkt for når det sist ble gjort endringer på skjemasettet   ReporteeID Intern id.   ArchivedDateTime Tidspunkt for når skjemasettet ble arkivert   ServiceOwner Unik identifikator for tjenesteeier for skjemasettet   InvoiceInformation Eventuell betalingsinformasjon som er vedlagt skjemasettet   ArchivedFormList Liste med ArchivedFormBE-objekter (nærmere beskrevet nedenfor), som inneholder alle skjemaene i skjemasettet   ExternalServiceCode Tjenestekode   ExternalServiceEditionCode Tjenesteutgavekode   ssnOrgNumber Fødselsnummer eller organisasjonsnummer tilhørende skjemasettet   PasswordEncryptedSymmetricKey Passordkryptert symmetrisk nøkkel for å dekryptere eventuell sensitive felter   SOEncryptedSymmetricdKey Samme symmetriske nøkkel som over, men kryptert med tjenesteeiers sertifikat. Tjenesteeier kan da bruke privat nøkkel til å dekryptere denne nøkkelen   ArchiveTaskList Liste med arkiv-objekter av typen ArchiveTaskBEV2    ArchivedFormBE\n   Property Beskrivelse     FormID Intern id   FormName Navn på skjema   FormDataXML Innhold i skjema. Må legges i en CDATA blokk   ParentReference Referanse til hovedskjema. Denne referansen er kun satt dersom gjeldende skjema er et underskjema   FormPresentationFieldValue Presentasjonsfelt for skjemaet, dersom dette finnes.   PaymentInformationE2B Betalingsinformasjon på E2B-format   PaymentInformationHTML Betalingsinformasjon på XML-format   DataFormatId Id til skjema fra metadata kilde   DataFormatVersion Betalingsinformasjon vedlagt skjema   FormPaymentInfo Skjemabeskrivelse    ArchivedAttachmentBEV2\n   Property Beskrivelse     AttachmentID Intern Id   AttachmentFunctionType Angir hvilken funksjonstype vedlegget utgjør: Invoice, Unspecified   AttachmentName Navn på vedlegg   MimeTypeName Angir MIME-typen for vedlegget: application_none, application_pdf, application_msword, application_vnd_ms_excel, application_vns_oasis_opendocument_text, application_vnd_oasis_opendocument_presentation, application_vnd_oasis_opendocument_spreadsheet, application_rtf, application_vnd_ms_powerpoint, application_postscript, application_zip, text_plain, text_html, text_xml, text_rtf, text_richtext, binary_octet_stream, not_Applicable   CreatedByUserID Intern Altinn identifikator på bruker som har lagt til vedlegget   CreatedDateTime Dato for når vedlegget ble opprettet   IsAddedAfterFormFillin Angir om vedlegget ble lagt til i løpet av signeringen (etter utfylling)   IsEncrypted Angir om vedlegget er kryptert    ArchivedFormTaskSigningStepBEV2\n   Property Beskrivelse     SignatureID Intern Id   SignedByUser Intern id bruker som har signert skjemasettet   SignedByUserSSN Fødselsnummer til bruker som har signert / organisasjonsnummer til virksomhetsbruker som har signert   SignedByUserName Navn på bruker som har signert skjemasettet.   CreatedDateTime Dato og tidspunkt for når skjemasettet ble signert   Signature Signaturen, binært format   SignatureText Signeringsteksten   RequiresGroupSigning Angir om signatur gjelder for alle elementer i skjemasettet   AuthenticationLevelID Intern id for autentiseringsnivået for bruker når signering ble gjort   AuthenticationMethod Autentiseringsnivået for bruker når signering ble gjort   CertificateIssuedByName Navnet sertifikatet er utstedt til   CertificateIssuedForName Navnet signaturen er utstedt til   CertificateValidFrom Tidspunkt (dato og klokkeslett) for når sertifikatet er gyldig   CertificateValidTo Tidspunkt (dato og klokkeslett) for når sertifikatet blir ugyldig   SignedAttachmentList Liste over signerte vedlegg.   SignedFromList Liste over signerte skjemaer   IsSigningAllRequired Angir om signering er utført for alle elementer i skjemasett: YES – signering på alle skjema, NO – valgfri signering på skjema, SET_PER_FORM – valg for signering satt på skjema nivå   ProcessStepID Den unike identifikatoren for steget signaturen gjelder for    ArchiveTaskBEV2\n   Property Beskrivelse     EndUserSystemID Sluttbrukersystem identifikator   LastChanged Angir dato for sist endring   NumberOfSignaturesAdded Antall signaturer som er lagt til   ProcessStepID_FK Intern ID for prosessteg   SentComplete Angir om element ble sent som komplett fra sluttbrukersystem   TaskID Identifikator for elementet, samme som ReporteeElementID   UserDefinedNumberOfSignaturesRequired Antall signaturer krevd for et evt brukerstyrt signeringssteg   WorkflowReference Intern ID forarbeidsflyt    GetArchiveShipmentStatusV2 Denne operasjonen benyttes for å hente ut status på oversending fra Altinn til Tjenesteeier for et arkivert skjema. Man kan hente ut status ved å bruke enten ArchiveReference eller ServiceReference. Disse kan ikke brukes samtidig. Operasjonen er versjonert, gjeldende versjon er V2. Tabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     ArchiveReference (string) Tar inn en ArkivReferanse for et arkivert element. Når dette elementet er brukt skal ikke ServiceReference brukes.   ServiceReference (objekt) Inneholder en liste med ArchiveShipmentStatusExternalV2 objekter. Hvert objekt representerer et elementen som ble funnet av tjenesten, og har en egen liste over statuser registrert på elementet.    ServiceReference   ServiceCode Unik identifikator. Dette er en mandatory parameter når man bruker ServiceReference til å hente ut status data.   ServiceEditionCode Unik identifikator. Dette er en mandatory parameter når man bruker ServiceReference til å hente ut status data. Unik identifikator. Dette er en mandatory parameter når man bruker ServiceReference til å hente ut status data.   DateFrom Definerer dato og tidspunkt tjenesten skal hente ut status data fra.   DateTo Definerer dato og tidspunkt tjenesten skal hente ut status data til    ArchiveShipmentStatusExternalBEV2List   LimitReached Når dette flagget er satt ble det funnet flere arkiverte elementer enn det som det er returnert statuser for   ArchiveShipmentStatusList Liste over de returnerte arkiv elementene som en liste av ArchiveShipmentStatusExternalV2-entiteter    ArchiveShipmentStatusExternalV2   ArchiveReference Unik arkiv referanse   TimeOfArchiving Tidspunkt for arkivering   ServiceCode Tjenestekode   ServiceEditionCode Tjeneste utgave kode   ShipmentStatusLog Liste over arkiv elementets status endringer som en liste av ShipmentStatusLogEntry-entiteter.    ShipmentStatusLogEntry   ShipmentDescription En beskrivelse av Shipment relatert til statusen, som inneholder navnet på ShipmentDefinition og TransportSekvensNummeret for shipmentet til tjenesteeier. Disse blir adskilt med et pipe-tegn   ShipmentStatus En beskrivelse av Shipment relatert til statusen, som inneholder navnet på ShipmentDefinition og TransportSekvensNummeret for shipmentet til tjenesteeier. Disse blir adskilt med et pipe-tegn ShipmentStatus ShipmentStatus for arkiv elementet. Kan være: NotSet - Elementet er ikke gjort klar til oversendelse. NotSent – Elementet er ikke sendt til tjenesteeier. Sent – Element er sent til tjenesteeier. Error – Overførsel til tjenesteeier feilet. Correlated – Correspondence er opprettet som er knyttet til denne ArkivReferansen   ShipmentStatusDateTime Dato og klokkeslett for når statusen ble satt på arkiv elementet    GetAttachmentDataStreamed Denne operasjonen benyttes for å hente ut data for ett gitt vedlegg in den tilfelle vedlegg er større en 30MB. GetArchivedFormTaskV2 må kalles for å få detailene om den binær filen returnerte av denne metoden.\nTabellen under beskriver datakontrakten for operasjonen.\n   Input Beskrivelse     AttachmentID Unik identifikator for et vedlegg   Returverdi Beskrivelse   Attachment Stream som inneholder et binært vedlegg    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/varseltjeneste/",
	"title": "Varseltjeneste",
	"tags": [],
	"description": "Varseltjenesten gjør det mulig for tjenesteeiere å opprette varsel uavhengig av andre elementer i meldingsboksen til avgiver.",
	"content": " Varseltjenesten gjør det mulig for tjenesteeiere å opprette varsel uavhengig av andre elementer i meldingsboksen til avgiver.\nTjenesteoperasjoner Denne tjenesten har 3 versjoner av samme operasjon. Input og funksjonalitet for de ulike versjonene er den samme. Det som varierer er returen. Versjon 1 og 2 er betraktet som utgått, men fungerer fint for eksisterende klienter. Nye klienter bør benytte versjon 3 av operasjonen. Kun versjon 3 er dokumentert.\nSendStandaloneNotificationV3 Denne operasjonen kan benyttes til å sende frittstående varsel. Det vil si varsel som ikke nødvendigvis er tilknyttet noe element i meldingsboksen til avgiver. Operasjonen støtter en liste med varsel som også kan være helt uavhengig av hverandre. Det vil si ulike tema og avgivere.\nInputparameter Tabell med oversikt over operasjonens inputparameter.\n   Navn Beskrivelse     standaloneNotifications Liste med varseldefinisjoner. Se StandaloneNotification    Retur Beskrivelse av hva operasjonen returnerer.\n   Datakontrakt Beskrivelse     SendNotificationResultList Liste med oversikt over hvilke varsel som faktisk ble generert. Se SendNotificationResultList    Feilsituasjoner Tabell med oversikt over mulige feilkoder for operasjonen.\n   Feilkode Beskrivelse     1 Et av elementene: FromAddress, ShipmentDateTime, eller NotificationType mangler data. Teksten i meldingen angir hvilke felt som har mangler.   30009 Gis hvis man har oppgitt en adresse i ReceiverAddress når TransportType er Both, SMSPreferred eller EmailPreferred.   30010 Ugyldig epostadresse angitt på et ReceiverEndPoint.   30301 Altinn har ikke klart å finne noe mobiltelefonnummer å sende varsel til. Brukes når transporttypen bør medføre varsel på SMS.   30302 Ugyldig/ukjent landkode i et mobiltelefonnummer.   30303 Ugyldig norsk mobiltelefonnummer.   30304 Avgiver av typen organisasjon har ikke registrert noen varslingsadresse som kan benyttes i varsel på angitt kanal.   30306 Avgiver har ingen varslingsadresse som kan benyttes til å sende varsel på angitt kanal.   30309 Avgiver har ikke varslingsadresse for både epost og SMS. Denne feilen kan oppstå for transporttype Both.   40001 Ugyldig angitt språkkode.   40014 Angitt antall varsler overstiger konfigurert grense.   40015 TransportType må være enten SMS eller Email.   40016 Angitt fødselsnummer er ikke gyldig.   40020 Parameter FromAddress må være en gyldig e-post adresse.   60012 Ugyldig avgiver. Altinn klarer ikke identifisere noen avgiver basert på angitt ReporteeNumber.    Datakontrakter StandaloneNotification    Property Beskrivelse     FromAddress Kan brukes til å angi hva som skal være avsender når varsel sendes på epost. Dette må derfor være en gyldig epostadresse. Feltet er valgfritt, men hvis det er blankt gis det feilmelding.   IsReservable I sammenheng med KRR (Kontakt og reservasjons registeret) kan en sluttbruker reservere seg mot å motta digital kommunikasjon fra norske myndigheter. IsReservable verdien kan brukes til å indikere om det er mulig å reservere seg mot meldingen eller ikke. Det er valgfritt å angi en verdi og standard (default) verdi er False. Denne verdien må derfor aktivt settes til True om tjenesteeier ønsker å respektere slike reservasjoner.   LanguageID Språket varselet skal være på. Her brukes det språkkoder: 1033 - English1044 - Bokmål2068 - Nynorsk   NotificationType Et unikt navn som refererer til predefinerte varslingstekster.   ReceiverEndPoints Liste med varsel mottakere. Se ReceiverEndPoint   ReporteeNumber Fødselsnummer, organisasjonsnummer eller brukernavnet til de det skal sendes varsel til. Hvis input er et brukernavn antas det at varselet sendes til en egenregistrert bruker. Altså en Altinnbruker med ukjent identitet.   Roles Dette feltet er ikke knyttet til noe logikk i tjenesten. Input blir altså ikke benyttet og er derfor unødvendig.   Service Tjenestekoder kan benyttes til å begrense hvem som får varsel når avgiver er en organisasjon. Mer informasjon   ShipmentDateTime Dato for når varselet ønskes sent (yyyy-MM-dd / yyy-MM-ddThh:mm:ss).   TextTokens Liste med TextTokens objekter som angir substitusjoner i varslingsteksten. Se TextTokens   UseServiceOwnerShortNameAsSenderOfSms I sammenheng med sending av SMS varsel, kan tjenesteeier velge om tjenesteeier selv skal stå som avsender i stedet for Altinn. Det er valgfritt å angi en verdi og standard (default) verdi er False.    Filtrering av varselmottakere Når det sendes varsel til organisasjoner så har Altinn to kilder til kontaktinformasjon. Den første og viktigste er offisielle varslingsadresser fra Kontakt- og fullmaktsregisteret for virksomheter (KoFuVi). Her har Altinn ingen filtrering på hvilke adresser som får varsel. Den andre kilden er det som kalles Din kontaktinformasjon for virksomheten. Dette er en Altinn funksjon som gir brukere i Altinn mulighet til å registrere sin personlige kontaktinformasjon mot en virksomhet. I denne sammenheng er det store forkjeller på hva slags tilganger de ulike personene har. Det kan være daglig leder, en regnskapsfører eller mer eller mindre tilfeldige personer som har tilgang til et eller annet på vegne av organisasjonen.\nVed å angi tjenestekoder vil Altinn sikre at personene med registrert kontaktinformasjon faktisk har nok tilganger til å kunne representere organisasjonen i kontekst av tjenesten. Det kjøres i praksis en autorisasjon hvor det sjekkes at personen har leserettigheter på tjenesten som er angitt. Hvis det ikke er angitt noe tjenestekoder vil Altinn ikke sende varsel til denne typen kontaktinformasjon overhodet.\nReceiverEndPoint    Property Beskrivelse     TransportType Angir om varsel skal sendes som epost eller SMS. Lovlige verdier er: SMS - Altinn vil sende varsel som SMS hvis det er oppgitt et mobilnummer i ReceiverAddress eller avgiver har registrert et eller flere mobilnummer. Hvis avgiver er en organisasjon vil det sendes varsel til alle registrerte mobilnummer.Email - Fungerer på samme måte som SMS, men med epost som kanal.Both - Altinn vil sende varsel både som epost og SMS. Denne transport typen krever at avgiver har registrert minst en epostadresse og et telefonnummer. Hvis en av disse mangler vil tjenesten returnere en feilmelding. En organisasjon vil få varsel på alle registrerte varslingsadresser.SMSPreferred - Altinn vil sende varsel som SMS hvis avgiver har registrert et mobilnummer. Hvis avgiver ikke har registrert dette vil det isteden bli sendt varsel som epost, forutsatt at det finnes en registrert epostadresse. En organisasjon vil bli sendt varsel på alle varslingsadresser av riktig type.EmailPreferred - Fungerer på samme måte som SMSPreferred, men med epost som hovedkanal.   ReceiverAddress Mobilnummeret eller epostadressen til mottaker av varsel. Dette må passe med TransportType Email eller SMS. Feltet er valgfritt og hvis feltet er tomt vil Altinn forsøke identifisere riktige mottakere basert på avgiver og TransportType. Feltet må være tomt for TransportType Both, SMSPreferred og EmailPreferred. En annen ting det er viktig å merke seg er at Altinn ikke vil søke opp andre mulige varslingsadresser fra for eksempel KoFuVi. Det antas altså at tjenesteeieren har angitt den best egnede mottakeren av varsel.    TextTokens    Property Beskrivelse     TokenNum Ikke i bruk, kan utelates.   TokenValue Tekst som skal ersatte maltekst. Substitusajonen gjøres i samme rekkefølge som parameterene er angitt. Varselmal må bestilles og lages på forhånd.    SendNotificationResultList Dette er en liste med informasjon om hvilke varsel som ble laget. Se NotificationResult.\n   Property Beskrivelse     Message Dette feltet blir ikke benyttet.    NotificationResult    Property Beskrivelse     EndPoints Liste med EndPoint resultater for Notification. Se EndPointResult   NotificationType NotificationType for notification. Brukes for å kunne se hvilken Notification resultatet gjelder   ReporteeNumber Avgiver som ble brukt til å generere mottakere. Brukes for å kunne se hvilken avgiver varsel resultatet gjelder.    EndPointResult    Property Beskrivelse     Name Navn på person som har mottatt melding. Dette blir hentet enten fra Organisasjonens mottaker-liste, eller fra brukerens innslag i Register databasen   ReceiverAddress Hvilken addresse meldingen er sendt til.   RetrieveFromProfile Satt til true dersom informasjonen er hentet fra en Organisasjons eller brukers profil   TransportType Type endepunkt varsel er sendt til.    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/",
	"title": "Web Service",
	"tags": [],
	"description": "Dokumentasjon for hvordan sluttbrukersystemer kan ta i bruk Altinn.",
	"content": "Implementasjonsguidene for integrasjon mot Altinn kan benyttes av eksterne systemer som veiledning for hvordan deres systemer kan integreres mot Altinn. Denne dokumentasjonen beskriver den overordnede arkitekturen for integrasjon mot Altinn og sikkerhetsmekanismer sombenyttes for kommunikasjon mellom Altinn og eksterne systemer\n\rGrensesnitt\r\rWebservice operasjoner med beskrivelse\n\rEndepunkter\r\rBeskrivelse av hvilken funksjonalitet som finnes med referanser til hvilke web services som benyttes\n\rFunksjonelle scenario\r\rBeskrivelse av hvilken funksjonalitet som finnes med referanser til hvilke web services som benyttes\n\rHvordan komme i gang\r\rHvordan registrere sluttbrukersystem / SFTP-bruker og etablere system id\n\rRoller og rettigheter\r\rBeskrivelse av hvilken funksjonalitet som finnes med referanser til hvilke web services som benyttes\n\rSkjemasett sammenligning\r\rAltinns behandling av skjemasett som mottas\n\rTeknisk implementasjon\r\rSikkerhet og feilkoder med eksempler\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/webservice-mottak/",
	"title": "Webservice mottak",
	"tags": [],
	"description": "Sette opp mottak over webservice",
	"content": " Online overføring til Tjenesteeier over webservice Det er mulig for tjenesteeiere å motta online forsendelser av innsendingstjenester med vedlegg over web service. Mottaket skal ha en metode som heter ReceiveOnlineBatchExternalAttachment. Denne kalles som en \u0026ldquo;SOAP Document\u0026rdquo; metode, og kan benyttes til å motta innsendingstjenester hvor vedleggene er pakket i en ekstern ZIP fil, ergo navnet. Denne tjenesten kan settes opp for MTOM for å støtte mer effektiv overføring av store binære vedlegg. Ved bruk av MTOM som dataoverføringsmetode kan det oppnås opptil 20-30% besparelse av båndbredde sammenliknet med vanlig dataoverføring mot web tjenesten.\nMerk: Det er fullt mulig å sende uten vedlegg eksternt i ZIP fil over dette grensesnittet. Vedlegg vil da komme base64encoded i XML i batch parameteren, og det er ikke lenger mulig å sette opp tjenesten for bruk av MTOM.\nReceiveOnlineBatchExternalAttachment Tabellen under beskriver datakontrakten for operasjonen:\n   Input Beskrivelse     Username Brukernavnet som Altinn skal oppgi   passwd Passordet som Altinn skal oppgi   receiversReference    sequenceNumber Sekvensnummer på forsendelsen   batch Selve forsendelsen, iht. nyeste versjon av XSD for genericbatch   attachments ZIP-fil med evt. binære vedleggsfiler   Returverdi Beskrivelse   [returverdi] Status tilbake til Altinn for mottak av forsendelse iht. OnlineBatchReceipt.xsd    Dersom det ikke finnes vedlegg til batchen vil parameteren “attachments\u0026rdquo; bli satt til en byte array med lengde 0.\nTabellen under beskriver elementer og attributter relevante for kvittering som skal returneres av tjenesteeier:\n   Element Beskrivelse     OnlineBatchReceipt Rotnode. Denne XSDen beskriver kvitteringen som skal returneres fra et mottakssystem etter å ha mottatt en online forsendelse fra Altinn. Kvitteringen begrenser seg til å kun beskrive selve mottaket av batchen, og det er ikke lagt opp til at kvitteringen skal inneholde informasjon vedrørende prosessering av selve batchen   OnlineBatchReceipt.Result Dette elementet har ett attributt resultCode som beskriver status på mottatt batch. Innholdet i Result-elementet er en valgfri streng. Denne blir ikke brukt programmatisk, men vil bli lest av driftspersonell i tilfelle feil   resultCode De forskjellige resultatkodene som kan returneres fra mottaket: OK - Batch er mottatt OK, FAILED - Batch er ikke mottatt, eller det oppstod en feil i mottaket. Altinn kan forsøke forsendelse på ny, FAILED_DO_NOT_RETRY - Samme som FAILED, men Altinn skal ikke forsøke å sende batch på ny. Hvis web servicen returnerer vanlige errors vil ikke Altinn håndtere de riktig og oversendelsen vil feile. Alle feilmeldinger må derfor bygges inn under de to FAILED og FAILED_DO_NOT_RETRY.    Navnerom For at Altinn sin webserviceklient skal kunne kommunisere med mottaket, er det viktig at følgende er satt korrekt (definisjonene vil finnes igjen i WSDL-filen). Denne informasjonen skal ligge i WSDL-filen man blir presentert for når man åpner definisjonen for mottakets web service.\n   Definisjon Verdi Beskrivelse     /wsdl:definitions/@xmlns:tns http://AltInn.no/webservices/ Navneromsdefinisjon   /wsdl:definitions/@targetNamespace http://AltInn.no/webservices/ Navneromsdefinisjon   /wsdl:definitions/wsdl:types/s:schema/@targetNamespace http://AltInn.no/webservices/ Navneromsdefinisjon   /wsdl:definitions/wsdl:binding/wsdl:operation/soap:operation/@soapAction http://AltInn.no/webservices/ReceiveOnlineBatchExternalAttachment Identifikator for SOAP-metode   /wsdl:definitions/wsdl:service/wsdl:port/soap:address/@location Mottaksavhengig Dette er URLen til mottaket som Altinn skal benytte seg av    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/feilhandtering/",
	"title": "Feilhåndtering",
	"tags": [],
	"description": "Webservice operasjoner med beskrivelse",
	"content": " SOAP Fault Altinn benytter en SOAP fault til å returnere feilmeldinger for en web service. Denne fault meldingen er i henholdt til AltinnFault kontrakten definert i WSDL for alle tjenestene. Kontrakten vil angi en feilkode og en feilmelding, henholdsvis ErrorID og AltinnErrorMessage, for å definere feilsituasjoner.\nEksempel på en feilmelding fra Altinn:\n\u0026lt;s:Envelope xmlns:s=\u0026quot;http://schemas.xmlsoap.org/soap/envelope/\u0026quot;\u0026gt; \u0026lt;s:Body\u0026gt; \u0026lt;s:Fault\u0026gt; \u0026lt;detail\u0026gt; \u0026lt;AltinnFault\u0026gt; \u0026lt;AltinnExtendedErrorMessage\u0026gt;No information available\u0026lt;/AltinnExtendedErrorMessage\u0026gt; \u0026lt;AltinnLocalizedErrorMessage\u0026gt;Incorrect username/password/pin given for user\u0026lt;/AltinnLocalizedErrorMessage\u0026gt; \u0026lt;ErrorGuid\u0026gt;ed4c23c0-7de6-4343-a442-89bd3a6f38d8\u0026lt;/ErrorGuid\u0026gt; \u0026lt;ErrorID\u0026gt;989\u0026lt;/ErrorID\u0026gt; \u0026lt;UserGuid\u0026gt;-no value-\u0026lt;/UserGuid\u0026gt; \u0026lt;UserId/\u0026gt; \u0026lt;/AltinnFault\u0026gt; \u0026lt;/detail\u0026gt; \u0026lt;/s:Fault\u0026gt; \u0026lt;/s:Body\u0026gt; \u0026lt;/s:Envelope\u0026gt;  Feilkoder Listen under angir de generelle feilkodene som benyttes. Disse er først og fremst benyttet i sammenheng med autentisering og autorisering og benyttes derfor av flere av tjenestene i Altinn. Feilkoder mer spesifikke for operasjonene er listet opp under de respektive operasjonene i kapittel 9 Grensesnitt – web services.\n   Feilkode Beskrivelse     0 Denne feilen oppstår i følgende tilfeller, se tekst i AltinnErrorMessage for mer informasjon: En nødvendig parameter for autentisering/autorisering mangler i forespørsel, Systemet er ikke autorisert for denne operasjonen på vegne av angitt avgiver, Operasjonen krever høyere autentiseringsnivå enn mulig og må derfor utføres i portalen   5 Denne feilen oppstår i følgende tilfeller, se tekst i AltinnErrorMessage for mer informasjon: Ikke mulig å autorisere forespørsel basert på sendte parametere – verifiser gyldigheten/format, Autentisering av systemet vha sertifikat feilet pga feil brukernavn/passord, Systemet autentisert ved sertifikat er midlertidig låst ute, Systemet er ikke autorisert til å kalle tjenesten fra innkommende IP adresse, Systemet er ikke autorisert til å kalle forespurt ressurs (feil tjenesteeier), Angitt system ID er ikke gyldig – skal være et nummer   989 Denne feilen oppstår i følgende tilfeller, se tekst i AltinnErrorMessage for mer informasjon: Forespørsel mangler system ID eller system passord, Autentisering av systemet (uten sertifikat) feilet pga feil brukernavn/passord, Systemet (ikke sertifikat) er midlertidig låst ute    Hvis det ikke kommer en forståelig feilmelding, send en henvendelse til support@altinn.no. Legg med tidspunkt for innsending og systemUserName, den unike koden (ErrorGuid) samt beskrivelse av hva som har skjedd.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/feilkoder/",
	"title": "Feilkoder",
	"tags": [],
	"description": "Feilkoder i Altinn",
	"content": "   Feilkode  Beskrivelse (eng)     Common Error Codes 1 – 1000     GeneralError 0 Denotes a general error   NullObjectReference 1 Denotes an error caused by a null reference   MissingRight 14 Authorization error - Subject does not have required right   HookActivationFailed 90 Error given when hook activation fails   IncorrectLevel 17 User is not authenticated on the correct level   RequiresLevel1 18 Requires level 1   RequiresLevel2 19 Requires level 2   RequiresLevel3 20 Requires level 3   RequiresLevel4 21 Requires level 4   ExternalSystemAuthentication 989 External system authentication failed   Common Error Codes 10000 - 20000     AccessDenied 10000 Database error - Access denied   Hook Error Codes 20001 - 21000     ServiceCannotBeStarted 20001 Hook error - Service cannot be started   ServiceCannotBeStartedForCurrentReporte 20002 Hook error - Service cannot be started for the current reportee   NoValidSubscriptionData 20003    NoValidReporteeAgeAndStatus 20004    TUL Error Codes 21001 - 23000     ServiceEditionCodeAlreadyExists 21001 TUL Error - Service edition code exists already   FileNotFound 21002 TUL Error - File not found   DataAreaTypeNotFound 21003 TUL Error - Data area type not found   RootNodeNotFound 21004 TUL Error - Root node not found   DoesNotExists 21005 TUL Error - (something) does not exist   NotImpersonatedOrAuthorised 21006 TUL Error - User is not impersonated or authorized   EntrySiteDoesNotExists 21007 TUL Error - Entry site does not exist   IDZeroORNegative 21008 TUL Error - ID is zero or negative   ServiceEditionInProduction 21009 TUL Error - Service edition is already in production   RequiredFieldNotSupplied 21010 TUL Error - Required field is not supplied   CannotBeNull 21011 TUL Error - (something) cannot be null   UserNotAuthorized 21012 TUL Error - User is not authorized   IncorrectClientConfiguration 21013 TUL Error - Incorrect client configuration   IncorrecctArguement 21014 TUL Error - Incorrect argument   GetDeploymentPackagesFailed 21015 TUL Error - GetDeploymentPackages failed   GetDeploymentPackageFailed 21016 TUL Error - GetDeploymentPackage failed   ServiceEditionValidationFailed 21017 TUL Error - Service edition validation failed   DeploymentPackageCreationFailed 21018 TUL Error - Deployment package creation failed   ServiceEditionMigrationFailed 21019 TUL Error - Service edition migration failed   UnableToReachSBLService 21020 TUL Error - Unable to reach SBL service   CallToSBLWCFOperationFailed 21021 TUL Error - Call to SBL WCF operation failed   UnexpectedErrorDuringMigration 21022 TUL Error - Unexpected error during migration   ValueNotDefinedInEnum 21023 TUL Error - Value is not defined in enum   BEObjectCannotBeNull 21024 TUL Error - Business Entity object cannot be null   XsdNotFoundOrXsnNotUploaded 22985 TUL Error - XSD not found or XSN not uploaded   ServiceDoesNotExist 22986 TUL Error - Service does not exist   ServiceHasAlreadyBeenDeleted 22987 TUL Error - Service has already been deleted   ServiceEditionHasAlreadyBeenDeleted 22988 TUL Error - Service edition has already been deleted   ServiceEditionHasBeenDeleted 22989 TUL Error - Service edition has been deleted   ServiceHasBeenDeleted 22990 TUL Error - Service has been deleted   ServiceOwnerUrlAlreadyExists 22991 TUL Error - Service owner URL already exists   UserDoesNotHaveRightsToCreateSites 22992 TUL Error - User does not have rights to create sites   UnexpectedErrorInRetrievingGuid 22993 TUL Error - Unexpected error in retrieving GUID   DataRetrievalFailed 22994 TUL Error - Data retrieval failed   UnexpectedErrorInSettingStatus 22995 TUL Error - Unexpected error in setting status   SiteCreationFailed 22996 TUL Error - Site creation failed   SuppliedGuidIsNullOrEmpty 22997 TUL Error - Supplied GUID is null or empty   DuplicateXsdInFormSet 22998 TUL Error - Duplicate XSD in formset   ServiceShortNameExists 22999 TUL Error - Service short name already exists   ServiceEditionShortNameAlreadyExists 21025 TUL Error - Service edition short name already exists   ServiceCodeAlreadyExists 21026 TUL Error - Service code already exists   SpecificationDataMissing 21027 TUL Error - Specification data missing   NoAuthorizationRulesDefined 21028 TUL Error - No authorization rules have been defined for this service edition.   RoleNameAreadyExists 21029 TUL Error - No authorization rules have been defined for this service edition.   SBLOperationTimedOut 21030 TUL Error - Migration timed out   Integration Error Codes 30001 - 31000     NotAuthorizedForReportee 30001 Integration error - Not authorized for reportee   NotAuthorizedForSignature 30002 Integration error - Not authorized for signature   NotAValidService 30003 Integration error - Not a valid service   ArgumentNullException 30004 Integration error - Argument is null   NotAValidServiceOwnerCode 30005 Integration error - Not a valid service owner code   InValidServiceEditionVersion 30006 Integration error - Invalid service edition version   FileNotExist 30007 Integration error - File does not exist   SBL External Error Codes 40001 - 41000     LanguageCodeCannotBeNull 40001 SBL External error - Language code cannot be null   MessageBodyCannotBeNull 40002 SBL External error - Message body cannot be null   MessageTitleCannotBeNull 40003 SBL External error - Message title cannot be null   MessageSummaryCannotBeNull 40004 SBL External error - Message summary cannot be null   ExternalReferenceCannotBeNull 40005 SBL External error - External reference cannot be null   ExternalServiceCodeCannotBeNull 40006 SBL External error - External service code cannot be null   ReporteeCannotBeNull 40007 SBL External error - Reportee cannot be null   SystemUserCodeCannotBeNull 40008 SBL External error - System user code cannot be null   CorrespondenceCanNotBeDeleted 40009 SBL External error - Correspondence cannot be deleted   ElementCanNotBeDeleted 40010 SBL External error - Element cannot be deleted   PersonHasStrictlyConfidentialAddress 40011 SBL External error - Person has strictly confidential address   FormDataIsNotValid 40012 SBL External error - Form data is not valid   ServiceIsNotValid 40013 SBL External error - Service is not valid   InValidNumberOfReceipents 40014 SBL External error - Invalid number of receipients   InvalidFormatSmsAndEmail 40015 SBL External error - Invalid SMS   InvalidSSN 40016 SBL External error - Invalid SSN   ReceiverAddressNull 40017 No receiver address   ControlWorkflowSentComplete 40018 Control Workflow Sent Complete   InvalidServiceType 40019 Invalid Service Type   InvalidEmailAddressForFromAddress 40020 The From Address must be skipped or contain a valid email address.   Authorization Error Codes 50001 - 51000     DelegateRolesBEInputInvalid 50001 This error code is used when the party a user wants to delegate a role or right to, does not exist.   GeoLocationIsMandatory 50002 This is used when geo location has not been supplied   InvalidGeoLocation 50003 This is used when geo location format is not correct   CoveredByUserIDRequired 50004 This is used when delegation type is SSN,UserName and CoveredByUserID has not been supplied   CoveredByPartyIDRequired 50005 This is used when delegation type is Organization and CoveredByPartyID has not been supplied   CannotDelegateToEnterpriseCertifiedUser 50006 This is used when roles or rights of an enterprise/user not represented by an enterprise certified user is being delegated to an enterprise certified user.   CannotDelegateANonDelegatableRole 50007 This is used when someone is trying to delegate a non-delegatable role   InvalidOrgNumber 50008 When the OrgNo is not proper or does not exist   InvalidUserDetails 50009 When the SSN or Last Name or UserName are not valid or a user with the combination does not exist   UserDoesNotHaveProfessionalConsent 50010 When user does not have professional consent   InvalidGeoLocationFormat 50011 Geo location is in incorrect format   CannotDelegateDenyOnOtherResources 50012 Cannot delegate Deny type right on resources other than reporteeElement.   RoleTypeNameNotUnique 50013 RoleTypeName is not unique   RoleTypeBeenDelegated 50014 RoleType has been Delegated   RoleTypeLanguagesNotValid 50015 RoleTypeLanguagesNotValid   DeleteRolesAndRightsFailure 50016 DeleteRolesAndRightsFailure   SelfDelegationIsNotAllowed 50017 Delegation to self is not allowed   RoleTypeCodeNotMigrated 50018 RoleTypeCodeNotMigrated   ResourceHasNoRule 50019 RuleHasNoRight   Collaboration Service Error Codes 60001 - 70001     InvalidCaseID 60001 Invalid Case ID   InvalidCaseIdentifier 60002 Invalid Service Code and Service Edition Code Combination and Invalid CaseID   InvalidLanguage 60003 Invalid Language ID   ExceededCharacterLimit 60004 Character Limit Exceeded.   InvalidReporteeElement 60005 Invalid Reportee Element   UnarchivedCorrespondenceException 60006 For correspondences services which have not been archived   UnarchivedReportingServicesException 60007 For Form Task services which have not been archived   ReporteeElementInAnotherCase 60008 For Reportee element is already associated to another case   InvalidServiceInCollaborationServiceSet 60009 For A Service, not available in Collaboration Service Set   InvalidReporteeID 60010 Invalid Reportee ID   InvalidNoticeTemplateID 60011 Invalid NoticeTemplateID   InvalidReporteeNumber 60012 Mandatory ReporteeNumber   ArchivedOrDeletedCaseID 60013 Case is already archived or deleted   ArchivedCaseID 60014 Case is archived.So no processing allowed.   DeletedCaseID 60015 Case is Deleted. So no processing allowed.   InvalidElement 60016 The element is unavailable.   UnassociatedElement 60017 The element is not associated with any Case.   DeletedElement 60018 The element is deleted.   ArchivedElement 60019 The element is archived.   InvalidNoticeTokenID 60020 Invalid notice Token   InvalidNoticeTokenValue 60021 Invalid notice Token Value   InvalidEventIdentifier 60022 Invalid Event Identifiers   InvalidEventName 60023 Invalid Event Name   UnauthorizedServiceOwner 60024 Service Owner is unauthorized   MissingNoticeTokens 60025 Missing Notice Tokens   WorkFlowValidationException 60026 Received WorkFlow Exception   WorkFlowInitiationException 60027 Workflow Initiation Exception   MissingWorkflowInstance 60028 Missing Workflow Instance   WorkFlowGenericException 60029 WorkFlow Generic Exception   EventDeliveryFailed 60030 Event Delivery Failed   MissingEventName 60031 Missing Event Name   UnavailableStateMachineEvents 60032 Unavailable State Machine Events   SMDI Error Codes - 70001 - 80001     IncorrectService 70001 Incorrect service details   IncorrectWorkFlow 70002 Incorrect process work flow details   IncorrectServiceEditionVersion 70003 Incorrect Service Edition Version details   IncorrectEventHook 70004 Incorrect Event Hook details   IncorrectReportingService 70005 Incorrect Reporting Service details   IncorrectCorrespondenceService 70006 Incorrect Correspondence Service details   IncorrectLookupService 70007 Incorrect Lookup Service details   IncorrectCollaborationReUse 70008 Incorrect Collaboration Service - ReUseData details   IncorrectFormset 70009 Incorrect Form Set details   IncorrectLogicalForm 70010 Incorrect Form Set details   IncorrectSplitData 70011 Incorrect Split of data details   IncorrectTranslation 70012 Incorrect Translation details   IncorrectDeployForm 70013 Incorrect FormTemplate uploaded   IncorrectSecurity 70014 Incorrect Roles \u0026amp; Rights details   IncorrectCollaborationServices 70015 Incorrect Collaboration Service - ServicesInCollaboration details   IncorrectCollaborationStateMachine 70016 Incorrect Collaboration Service - StateMachine details   IncorrectStyleSheet 70017 Incorrect StyleSheet details   IncorrectPIImages 70018 Incorrect StyleSheet - Images details   IncorrectPI 70019 Incorrect PI details    "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/tjenesteeiere/webservice/endepunkt-liste/",
	"title": "Endepunkter",
	"tags": [],
	"description": "Liste over alle webservice endepunkt",
	"content": " URI til alle Altinn tjenester / aliasoversikt for endepunkter Web servicene beskrevet i dokumentet er angitt uten informasjon om endepunkt. En web service operasjon kan kalles med forskjellige endepunkter ut fra hvilken autentiseringsmetode tjenesteeier ønsker å benytte.\nDet tilbys opp til tre forskjellige endepunkter for hver web service operasjon:\n Basic Http (SOAP 1.1). Tradisjonell interoperabel web service hvor autentiseringsinformasjonen (brukernavn/passord) ligger i meldingen. WS Http (SOAP 1.2 med WS-Security username token). Støtte for nye web standarder WS*, dvs. bl.a. at autentiseringsinformasjonen (brukernavn/passord) ligger i SOAP headeren. WS Http (SOAP 1.2 med WS-Security X.509 token) (markert som EC). Støtte for ny web standarder WS*, dvs. bl.a. at sertifikat ligger i SOAP headeren mensbrukernavn og passord ligger i meldingen. WS Http (SOAP 1.2 med WS-Security X.509 token) (markert som AEC). Støtte for ny web standarder WS*, dvs. bl.a. at sertifikat ligger i SOAP headeren. Sertifikatet må være utstedt til en organisasjon som er registrert som tjenesteeier i Altinn.  Eksempel: Web service operasjonen \u0026ldquo;GetReceiptV2\u0026rdquo; kan aksesseres ved å kalle endepunktet \u0026ldquo;ReceiptAgencyExternal\u0026rdquo; hvis man ønsker å bruke/autentisere vha. WS* standarden. Samme operasjon finnes med navn \u0026ldquo;GetReceiptBasicV2\u0026rdquo; på endepunktet \u0026ldquo;ReceiptExternalBasic\u0026rdquo; hvis man ønsker tradisjonell web service aksessering. Tilslutt finnes det en tredje versjon av operasjonen med navn GetReceiptExternalECV2 på endepunktet \u0026ldquo;ReceiptExternalEC\u0026rdquo; hvis man ønsker å benytte virksomhetssertifikat i autentiseringen.\nHer følger en aliasoversikt som viser kobling mellom operasjon og endepunkt(er) (Se også Tjenestekatalogen (Service Inventory) for informasjon om tjenesten og endepunkt):\nArchiveCommon    Basis Operasjon URI/Endepunkt Endepunkt operasjon     ** ArchiveCommon**     GetServiceOwnerArchiveReporteeElementsV2 WS Http https://www.altinn.no/ArchiveExternal/ArchiveCommonAgencyExternal.svc GetServiceOwnerArchiveReporteeElementsV2   GetServiceOwnerArchiveReporteeElementsV2 Basic Http https://www.altinn.no/ArchiveExternal/ArchiveCommonAgencyExternalBasic.svc GetServiceOwnerArchiveReporteeElementsBasicV2   GetServiceOwnerArchiveReporteeElementsV2 EC https://www.altinn.no/ArchiveExternal/ArchiveCommonAgencyExternalEC.svc GetServiceOwnerArchiveReporteeElementsEC   ** ServiceOwnerArchive**     GetArchivedFormTaskV2 WS Http https://www.altinn.no/ArchiveExternal/ServiceOwnerArchiveExternal.svc GetArchivedFormTaskV2   GetArchivedFormTaskV2 Basic Http https://www.altinn.no/ArchiveExternal/ServiceOwnerArchiveExternalBasic.svc GetArchivedFormTaskBasicV2   GetArchivedFormTaskV2 EC https://www.altinn.no/ArchiveExternal/ServiceOwnerArchiveExternalEC.svc GetArchivedFormTaskEC   GetArchivedFormTaskV2 EC https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemEC.svc GetCaseListAgencySystemEC   GetAttachmentDataStreamed WS Http https://www.altinn.no/ArchiveExternal/ServiceOwnerArchiveExternalStreamed.svc GetAttachmentDataExternalStreamed   GetAttachmentDataStreamed Basic Http https://www.altinn.no/ArchiveExternal/ServiceOwnerArchiveExternalStreamedBasic.svc GetAttachmentDataStreamedBasic   GetAttachmentDataStreamed EC https://www.altinn.no/ArchiveExternal/ServiceOwnerArchiveStreamedEC.svc    GetAttachmentDataStreamedEC     Receipt     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetReceiptV2 WS Http https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternal.svc GetReceiptV2   GetReceiptV2 Basic Http https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternalBasic.svc GetReceiptBasicV2   GetReceiptV2 EC https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternalEC.svc GetReceiptECV2   GetReceiptListV2 WS Http https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternal.svc GetReceiptListV2   GetReceiptListV2 Basic Http https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternalBasic.svc GetReceiptListBasicV2   GetReceiptListV2 EC https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternalEC.svc GetReceiptListECV2   UpdateReceipt WS Http https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternal.svc UpdateReceipt   UpdateReceipt Basic Http https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternalBasic.svc UpdateReceiptBasic   UpdateReceipt EC https://www.altinn.no/IntermediaryExternal/ReceiptAgencyExternalEC.svc UpdateReceiptEC   CaseAgencySystem     Basis operasjon URI/Endepunkt Endepunkt operasjon   InstantiateCollaborationAgencySystem WS Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternal.svc InstantiateCollaborationAgencySystemExternal   InstantiateCollaborationAgencySystem Basic Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternalBasic.svc InstantiateCollaborationAgencySystemExternalBasic   InstantiateCollaborationAgencySystem EC https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemEC.svc InstantiateCollaborationAgencySystemEC   GetCaseListAgencySystem WS Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternal.svc GetCaseListAgencySystemExternal   GetCaseListAgencySystem Basic Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternalBasic.svc GetCaseListAgencySystemExternalBasic   GetCaseListAgencySystem EC https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemEC.svc GetCaseListAgencySystemEC   NotifyEventAgencySystem WS Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternal.svc NotifyEventAgencySystemExternal   NotifyEventAgencySystem Basic Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternalBasic.svc NotifyEventAgencySystemExternalBasic   NotifyEventAgencySystem EC https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemEC.svc NotifyEventAgencySystemEC   SetNoticeAgencySystem WS Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternal.svc SetNoticeAgencySystemExternal   SetNoticeAgencySystem Basic Http https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemExternalBasic.svc SetNoticeAgencySystemExternalBasic   SetNoticeAgencySystem EC https://www.altinn.no/ServiceEngineExternal/CaseAgencySystemEC.svc SetNoticeAgencySystemEC   Correspondence     Basis operasjon URI/Endepunkt Endepunkt operasjon   InsertCorrespondenceV2 WS Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternal.svc InsertCorrespondenceV2   InsertCorrespondenceV2 Basic Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalBasic.svc InsertCorrespondenceBasicV2   InsertCorrespondenceV2 EC https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalEC.svc InsertCorrespondenceEC   InsertCorrespondenceV2 AEC https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalAEC.svc InsertCorrespondenceAEC   CreateSimpleCorrespondenceService WS Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternal.svc CreateSimpleCorrespondenceService   CreateSimpleCorrespondenceService Basic Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalBasic.svc CreateSimpleCorrespondenceServiceBasic   CreateSimpleCorrespondenceService EC Ikke tilgjengelig på dette grensesnittet    CreateSimpleCorrespondenceService AEC Ikke tilgjengelig på dette grensesnittet    GetCorrespondenceStatusDetailsV3 WS Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternal.svc GetCorrespondenceStatusDetailsV3   GetCorrespondenceStatusDetailsV3 Basic Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalBasic.svc GetCorrespondenceStatusDetailsBasicV3   GetCorrespondenceStatusDetailsV3 EC https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalEC.svc GetCorrespondenceStatusDetailsECV3   GetCorrespondenceStatusDetailsV3 AEC https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalAEC.svc GetCorrespondenceStatusDetailsAECV3   GetCorrespondenceStatusHistory WS Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternal.svc GetCorrespondenceStatusHistory   GetCorrespondenceStatusHistory Basic Http https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalBasic.svc GetCorrespondenceStatusHistoryBasic   GetCorrespondenceStatusHistory EC https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalEC.svc GetCorrespondenceStatusHistoryEC   GetCorrespondenceStatusHistory AEC https://www.altinn.no/ServiceEngineExternal/CorrespondenceAgencyExternalAEC.svc GetCorrespondenceStatusHistoryAEC   AltUt     Basis operasjon URI/Endepunkt Endepunkt operasjon   SubmitAltutMessagePw Basic Http https://www.altinn.no/webservicesAgency/AgencydataExchange.asmx?op=SubmitAltutMessagePw SubmitAltutMessagePw   Prefill     Basis operasjon URI/Endepunkt Endepunkt operasjon   SubmitAndInstantiatePrefilledFormTask WS Http https://www.altinn.no/ServiceEngineExternal/Prefill.svc SubmitAndInstantiatePrefilledFormTask   SubmitAndInstantiatePrefilledFormTask Basic Http https://www.altinn.no/ServiceEngineExternal/PrefillBasic.svc SubmitAndInstantiatePrefilledFormTaskBasic   SubmitAndInstantiatePrefilledFormTask EC https://www.altinn.no/ServiceEngineExternal/PreFillAgencyExternalEC.svc SubmitAndInstantiatePrefilledFormTaskEC   SubmitPrefilledFormTasks WS Http https://www.altinn.no/ServiceEngineExternal/Prefill.svc SubmitPrefilledFormTasks   SubmitPrefilledFormTasks Basic Http https://www.altinn.no/ServiceEngineExternal/PrefillBasic.svc SubmitPrefilledFormTasksBasic   SubmitPrefilledFormTasks EC https://www.altinn.no/ServiceEngineExternal/PreFillAgencyExternalEC.svc SubmitPrefilledFormTasksEC   Subscription     Basis operasjon URI/Endepunkt Endepunkt operasjon   SubmitSubscription WS Http https://www.altinn.no/ServiceEngineExternal/Subscription.svc SubmitSubscription   SubmitSubscription Basic Http https://www.altinn.no/ServiceEngineExternal/SubscriptionBasic.svc SubmitSubscriptionBasic   SubmitSubscription EC https://www.altinn.no/ServiceEngineExternal/SubscriptionAgencyExternalEC.svc SubmitSubscriptionEC   NotificationAgencyExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   SendStandaloneNotification WS Http https://www.altinn.no/ServiceEngineExternal/NotificationAgencyExternal.svc SendStandaloneNotification   SendStandaloneNotification Basic Http https://www.altinn.no/ServiceEngineExternal/NotificationAgencyExternalBasic.svc SendStandaloneNotificationBasic   SendStandaloneNotification EC https://www.altinn.no/ServiceEngineExternal/NotificationAgencyExternalEC.svc SendStandaloneNotificationEC   AuthorizationAdministration     Basis operasjon URI/Endepunkt Endepunkt operasjon   ImportAuthorizationPolicy WS Http https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc ImportAuthorizationPolicy   GetReporteeByTempKey WS Http https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc GetReporteeByTempKey   GetReportees WS Http https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc GetReportees   GetRoles WS Http https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc GetRoles   AuthorizationDecisionPointExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   AuthorizeAccessExternal WS Http https://www.altinn.no/AuthorizationExternal/AuthorizationDecisionPointExternal.svc AuthorizeAccessExternal   DownloadQueueExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetDownloadQueueItems WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternal.svc GetDownloadQueueItems   GetDownloadQueueItems WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternalBasic.svc GetDownloadQueueItems   GetDownloadQueueItems WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternalEC.svc GetDownloadQueueItems   PurgeItem WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternal.svc PurgeItem   PurgeItem WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternalBasic.svc PurgeItem   PurgeItem WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternalEC.svc PurgeItem   GetArchivedFormTask WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternal.svc GetArchivedFormTaskExternalDQ   GetArchivedFormTask WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternalBasic.svc GetArchivedFormTaskBasicDQ   GetArchivedFormTask WS Http https://www.altinn.no/ArchiveExternal/DownloadQueueExternalEC.svc GetArchivedFormTaskECDQ   ContextHandlerExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetReporteeElementContextExternal WS Http https://www.altinn.no/ServiceEngineExternal/ContextHandlerExternal.svc GetReporteeElementContextExternal   GetReporteeElementContextExternal Basic Http https://www.altinn.no/ServiceEngineExternal/ContextHandlerExternalBasic.svc GetReporteeElementContextExternalBasic   GetReporteeElementContextExternal EC https://www.altinn.no/ServiceEngineExternal/ContextHandlerEC.svc GetReporteeElementContextExternalEC   RegisterSSRAgencyExternal     Basis operasjon URI/Endepunkt Endepunkt operasjon   GetRights WS Http https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternal.svc GetRights   GetRights Basic Http https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternalBasic.svc GetRightsBasic   GetRights EC https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternalEC.svc GetRightsEC   AddRights WS Http https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternal.svc AddRights   AddRights Basic Http https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternalBasic.svc AddRightsBasic   AddRights EC https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternalEC.svc AddRightsEC   DeleteRights WS Http https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternal.svc DeleteRights   DeleteRights Basic Http https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternalBasic.svc DeleteRightsBasic   DeleteRights EC https://www.altinn.no/RegisterExternal/RegisterSRRAgencyExternalEC.svc DeleteRightsEC    Alle URI er angitt med produksjonsadresse. Frem til produksjonssetting må https://www.altinn.no erstattes med peker til testmiljø.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/hvordan-komme-i-gang/",
	"title": "Hvordan komme i gang",
	"tags": [],
	"description": "Hvordan registrere sluttbrukersystem / SFTP-bruker og etablere system id",
	"content": " Registrere sluttbrukersystem / etablere system id Eieren av et sluttbrukersystem må registrere dette i Altinn slik at Altinn har mulighet til å autentisere og autorisere systemet på vegne av en avgiver. Ved registrering i portalen opprettes en unik sluttbrukersystemidentifikator, og denne identifikatoren sendes med i alle web service kall som gjøres mot Altinn. Sluttbrukersystemet har da rett til å levere data for alle avgivere eieren av sluttbrukersystemet har rett til å levere for. Eierens rettigheter hentes i utgangspunktet fra enhetsregisteret, men det er også mulig for en avgiver å legge på disse rettighetene eksplisitt i portalen. For å unngå ekstra administrasjon er det derfor meget viktig at avgivere sørger for at enhetsregisteret til enhver tid er oppdatert med korrekte opplysninger.\nFor at et sluttbrukersystem skal kunne gi data til skjema i Altinn, må den ansvarlige for selskapet, for eksempel daglig leder eller styreformann registrere systemet i Altinn portal. Dette gjøres fra siden Brukeradministrasjon på følgende måte:\nAlternativt kan en bruker også benytte sitt registrerte brukernavn til å bruke tjenestene beskrevet.\nDet er da brukerens profil-brukernavn og passord som benyttes i stedet for sluttbrukersystem. Dette gjøres ved å gå inn på «Min Profil» og huke av under «Tillat innsending fra applikasjon eller system med dette brukernavn og passord» i Innloggingsinformasjon. Denne brukeren har kun rettighet til å levere data på vegne av seg selv.\nFor videre informasjon om registrering og rettighetsadministrasjon, benytt hjelpesystemet til Altinn på http://www.Altinn.no.\nRegistrere SFTP-bruker For å kunne benytte seg av formidlingstjenester over SFTP-kanalen må det opprettes en virksomhetsbruker med et eget sertifikat. En slik bruker benytter seg av, i tillegg til brukernavn og passord, et sertifikat for å autentisere seg mot Altinns SFTP-server. Når bruker opprettes i Altinns profilsider lastes offentlig nøkkel opp og knyttes til virksomhetsbrukeren, og når denne brukeren så skal autentisere seg mot SFTP-serveren oppgis den private nøkkelen. Sertifikatet, eller nøkkelparet, kan genereres av bruker selv, for eksempel ved bruk av tilgjengelig verktøy slik som PuttyGen[^2]. Formatet som skal benytteser enten OpenSSH eller SSH2.\nMerk at virksomhetsbrukere også kan ha et signert sertifikat, for eksempel BuyPass eller Commfides, knyttet til seg. Disse typene sertifikater gir brukeren tilgang til web service og portal, men ikke SFTP.\nFor at en SFTP-bruker skal kunne benytte en formidlingstjeneste må nødvendige rettigheter være delegert til virksomhetsbrukeren. Dette gjøres på normal måte.\nKovertering fra x.509 sertifikater til SSH2 For å konvertere et x.509 sertifikat til SSH2 format, som er mulig å bruke for formidlingstjenestens SFTP må man generere en public key i SSH2 format. Dette kan gjøres i verktøyet PuttyGen ved å følge punktene under.\n Eksporter private key fra x.509 sertifikatet. Pass på at PuttyGen her satt i SSH2 format, og ikke SSH1 Importer private key inn i puttygen, dette genererer automatisk en public key basert på private key. Lagre public key fra PuttyGen, denne er nå i SSH2 format, og kan brukes i Altinn. Hvis ønskelig kan private key nå også lagres fra PuttyGen, og denne vil da også være i SSH2 format.  Etter at man har generert opp nøkkel i SSH2 format, og koblet denne på en bruker i Altinn, så kan man enten bruke det originale x.509 sertifikatet for oppkobling fra SFTP klient, eller benytte seg av eventuelt ny lagret private key i SSH2 format\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/roller-og-rettigheter/",
	"title": "Roller og rettigheter",
	"tags": [],
	"description": "Beskrivelse av hvilken funksjonalitet som finnes med referanser til hvilke web services som benyttes",
	"content": " Hvem kan sluttbrukersystemet rapportere for Sluttbrukersystemet baserer seg på en ”reportee” og en systemUser. Sluttbrukersystemet kan rapportere for en participant A (bruker eller organisasjon) eller en participant B, som participant A har rettighet til å rapportere for.\nNår en sluttbrukersystemtype er lagt inn i Altinn, står innrapportører fritt til å disponere sitt eget oppsett av systemer som skal rapportere inn til Altinn. En sluttbrukersystembruker bestemmer selv om han ønsker å opprette kun ett system (enterprisesystemid) som skal rapportere for flere avgivere, eller om han ønsker å opprette flere systemer som skal rapportere for hver enkelt avgiver. Poenget er at systemet må ha rettighet til å rapportere for avgiveren. Det er en forskjell hvordan rettighetene blir håndtert på ny og gammel plattform. På gammel plattform (tjenester som slutter på .asmx) baserer autorisasjonssjekk seg på en enkeltrolle som heter ”systeminnsendingsrettighet gamle tjenester”. Når en avgiver gir denne rollen til eier av systemet vil systemet kunne rapportere for denne avgiveren.\nEksempel 1: System med enterprisesystemid=1 er registrert på regnskapsbyrå A. Klient B delegerer systeminnsendingsrettighet til regnskapsbyrå A. Klient C delegerer også systeminnsendingsrettighet til regnskapsbyrå A. System med enterprisesystem=1 kan rapportere for både B og C.\nEksempel 2: Klient B oppretter et eget system med enterprisesystemid=2 i stedet for å delegere systeminnsendingsrettighet til regnskapsbyrå A. Klient C delegerer systeminnsendingsrettighet til regnskapsbyrå A. I dette tilfellet vil enterprisesystem=2 kunne rapportere for B, mens centerprisesystem=1 vil kunne rapportere for C.\nEksempel 3: Klient B oppretter et eget system med enterprisesystemid=2, og klient C oppretter et eget system med enterprisesystemid=3. I dette tilfellet kan enterprisesystemid=2 rapportere for B, mens enterprisesystemid=3 kan rapportere for C. Enteprisesystemid=1 kan ikke rapportere for verken B eller C.\nFor tjenester på ny plattform settes det strengere krav til hvilken rettighet systemet har. Her må det delegeres den rollen/rettigheten for den aktuelle tjenesten hvor det skal utføres innsending/uthenting eller modifisering av data.\nEksempel 4 Klient B ønsker at regnskapsbyrå A skal fylle ut RF-1070 som er en tjeneste på ny plattform. Tjenesten krever rollen utfyller/innsender. Klient B må da delegere rollen utfyller/innsender til regnskapsbyrå A for at enterprisesystemID=1 skal kunne rapportere for Klient B på denne tjenesten.\nHvordan delegere systeminnsendingsrett Det er mulig å delegere sluttbrukersysteminnsendingsrett til en revisororganisasjon. Et sluttbrukersystem som er registrert på denne organisasjonen vil dermed kunne sende inn for avgiveren som delegerte rettigheten.\nDu kan kun delegere de rettighetene du har selv. For å kunne delegere må du ha en\nadministrasjonsrettighet i Altinn. Velg Deleger roller enkeltvis i Administrasjonsmenyen, og registrer fødselsnummer og navn til den personen du vil at skal utføre rapportering på vegne av deg. Deretter krysser du av de rettighetene denne personen skal få\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/skjemasett-sammenlikning/",
	"title": "Skjemasett sammenligning",
	"tags": [],
	"description": "Altinns behandling av skjemasett som mottas",
	"content": " Prinsipper Ved innsending fra sluttbrukersystem skal i utgangspunktet følgende tre prinsipper gjelde etter innføring av 18550:\n Altinn skal ikke endre på skjemasettet som blir sendt inn av SBS. Altinn kan imidlertid tilføye kalkulerte felter som SBS unnlater å sende inn (eller sender inn uten verdi, se punkt XML og syntaks-konvensjoner. Skjemasett med feil skal i utgangspunktet stoppes av Altinn og innsending skal feile.  Det andre prinsippet åpner for at SBS kan benytte seg av kalkyler og registerprefill som er bygget inn i skjemasettet ved å unnlate å sende inn de aktuelle feltene. Altinn vil da tilføye feltene med beregnet eller forhåndsutfylt verdi. Kvitteringen til SBS vil indikere alle felter som ikke ble sendt inn fra SBS, men ble tilføyd av Altinn og sendt videre til tjenesteeier. Feltverdien (fra kalkyle eller prefill) er også angitt i kvitteringen.\nMerk imidlertid at SBS kan hente prefilldata selv dersom disse skal benyttes. Denne metoden er mer robust ettersom den ikke krever kunnskap om hvilke felter som har prefilldata. Man vil da verken få advarsel eller feil på registerprefill-felter.\nTjenesteeier har mulighet til å fravike det tredje prinsippet ved å definere overstyrbare felter. Overstyrbare felt vil kun gi advarsel ved ulik verdi (ikke feilmelding). Tjenesteeier kan også fravike fra det tredje prinsippet ved å bruke opsjonen \u0026ldquo;Kun XSD-validering\u0026rdquo;. Dersom et skjema har kun XSD-validering vil verken sammenlikningsreglene beskrevet i dette vedlegget eller eventuelle valideringer og kalkyler i skjemaet kjøres for skjemaet ved innsending fra SBS.\nSammenlikning av skjemasett Når SBS sender inn et skjemasett tar Altinn en kopi av innsendingen. Kopien gjennomgår så samme behandling som innsendinger i SBL, hvilket medfører at denne kopien modifiseres; felter kan bli lagt til eller skrevet over. Det kan også resultere i advarsler eller feil fra skjemamotoren (valideringsfeil i skjemaet, for eksempel at et påkrevd felt mangler eller at organisasjonsnummer ikke er oppgitt på et gyldig format).\nAltinn sammenlikner deretter den modifiserte kopien av skjemasettet med den innsendte originalen. I hovedsak består dette i å sammenlikne felt for felt de to versjonene. Når feltverdier er ulike fører det til en feil (slik at innsending feiler) eller advarsel (når feltet er flagget som overstyrbart). Hva dette betyr er mer presist definert i det påfølgende.\nFunksjonaliteten Endringen har blitt implementert som en modul som kjøres under komplett innsending fra SBS. Denne vil kjøre i tillegg til de vanlige modulene (XSD-validering, instansiering av skjema med kjøring av valideringer, kalkuleringer og dynamikk, prefill-validering). Tidspunktet 18550-modulen kjøres er etter instansiering av skjema.\n Opprinnelig XML for skjema sendes inn fra sluttbrukersystem (SBS). XSD validering av opprinnelig XML utføres. Dersom XSD validering feiler så gis det en god, tydelig og informativ valideringsfeil til SBS og innsending feiler. XSD-valideringen er nå en fullstendig XSD-validering i motsetning til tidligere hvor tomme element alltid ble godtatt uansett type (Integer, decimal, string, osv). b. Dersom XSD validering er ok så fortsetter prosessen til neste validering steg. Altinn kjører nå kalkyler basert på innsendte data fra SBS. Deretter sammenlignes verdiene fra SBS med de kalkulerte verdiene (registerprefill, verdioverføringer, kalkyler) fra Altinn. Resultatet av sammenligningen resulterer i en liste med feil og advarsler som vises i kvitteringen. Merk at advarsler ikke resulterer i at innsending stoppes, men er kun ment som informasjon at noe er ulikt det som forventes. Sluttbrukersystem trenger ikke å agere på dette ved mindre de oppdager at innsendte data faktisk er feil. Det er opp til tjenesteeier å bestemme hvilke felter som skal gi advarsel eller feilmelding ved ulik verdi. Overstyrbare felter vil resultere i advarsel.  XML og syntaks-konvensjoner Reglene er formulert med begrepene felt og feltverdi. Det er derfor nyttig å først relatere disse begrepene til XML-representasjonen. Noen ganger finnes det mer enn én måte å representere det samme på.\nTabellen under oppsummerer syntaks-konvensjonene.\nLike og ulike feltverdier Nedenstående tabell oppsummerer hvordan Altinn bedømmer feltverdier som like eller ulike.\nDette er for det meste som man ville forvente, men med et par unntak det er verdt å merke seg:\n Dersom SBS sender inn tom streng men \u0026ldquo;InfoPath-verdi\u0026rdquo; er nil betraktes dette som likt - men det omvendte er ikke tilfellet. (Årsaken til dette er at InfoPath endrer alle felter med tom streng til NIL.) Preutfylte felter sammenliknes alltid som strenger (case insensitivt). Andre felter sammenliknes med en betinget tallsammenlikning når det er mulig (oppsummert i tabell under). Betinget tallsammenlikning betyr at \u0026ldquo;4.0\u0026rdquo;, \u0026ldquo;4\u0026rdquo; og \u0026ldquo;0004.00\u0026rdquo; alle betraktes som like. Merk imidlertid at XSD som regel begrenser hva slags tallrepresentasjoner som er tillatte!  Betinget tallsammenlikning kan oppsummeres som følger:\nTabellen nedenfor oppsummerer når det gis feil eller advarsel, samt hva som sendes til tjenesteeier.\n   XML er i henhold til XSD Kun XSD-validering Ulik feltverdi Overstyrbart felt Resultat Hva sendes til tjenesteeier     Nei N/A N/A N/A Feil ingenting (innsending feiler)   Ja Ja N/A N/A OK Innsendt verdi fra SBS.   Ja Nei Nei N/A OK Innsendt verdi fra SBS.   Ja Nei Ja Ja Advarsel Innsendt verdi fra SBS hvis denne eksisterer (feltverdi \u0026lt;\u0026gt; nil), ellers Altinn-beregnet verdi.*)   Ja Nei Ja Nei Feil/Advarsel*) ingenting (innsending feiler) Altinn-beregnet Verdi hvis SBS ikke angir påstand ved å utelate XML-element/nil *)    N/A = har ingen betydning.\n Merk at Altinn kan legge til data i kalkyler og preutfylte felt utover det SBS har sendt inn hvis følgende scenario er tilstedet:\\ SBS har ikke sendt inn en påstand (XML element ikke tilstedet/NIL uavhengig om feltet er satt til overstyrbart eller ikke av Tjenesteeier. Det vil da bli gitt en Advarsel til SBS i kvittering. Merk at dette er i tillegg til feil og advarsler som kommer fra valideringsregler i skjemasettet (myke valideringer gir advarsel, harde valideringer gir feil).  I praksis I praksis vil 18550-endringen by på mindre til ingen endringer for sluttbrukersystemene. Det sluttbrukersystemleverandørene må ta høyde for nå er at det kan komme advarsler i kvitteringer på innsendinger som har blitt instansiert korrekt. Advarslene vil komme på samme måte som myke skjemavalideringer og må eventuelt presenteres for brukeren av systemet. Feilmeldinger som blir produsert av denne 18550-endringen vil komme på samme måte som vanlige skjemavalideringsfeil og innsendingen vil stoppes.\nSluttbrukersystem brukerne vil nok ikke merke store forskjellen fra tidligere. De vil oppleve å få tilbake mer informasjon i kvitteringen enn tidligere.\nKjente feil/mangler for SBS  Det blir gitt en advarsel hvis grupper i XML er utelatt. Ikke språkstøtte på advarsel og feilmelding i kvittering  "
},
{
	"uri": "https://altinn.github.io/docs/guides/integrasjon/sluttbrukere/webservice/teknisk-implementasjon/",
	"title": "Teknisk implementasjon",
	"tags": [],
	"description": "Sikkerhet og feilkoder med eksempler",
	"content": " Sikkerhet på web services For å tilby funksjonalitet for sikkerhet gjennom autentisering og autorisasjon benyttes 2 varianter tjenesteparametere for sluttbrukersystemer. En tredje variant for støtte av sertifikat for autentisering er også lagt til:\n Basic operasjoner med autentiseringsinformasjon (brukernavn/passord) i meldingen. I en web service operasjon vil dette typisk bety at de første elementene i en melding er forbeholdt autentiseringsinformasjon.  Eksempel på en SOAP melding med basic:\n WS som benytter WS-Security hvor autentiseringsinformasjon (brukernavn/passord) følger SOAP meldingen på en standardisert måte gjennom definerte SOAP header elementer.\n I en web service operasjon vil dette bety at autentiseringsinformasjonen ligger i SOAP header basert på innhold definert i WS-Security standarder.\n  Eksempel på en SOAP melding med bruk av WS-Security:\n EC operasjoner hvor autentiseringsinformasjon i form av sertifikat blir formidlet via SOAP header, mens tilhørende brukernavn og passord blir sent som del av meldingen.  Eksempel på en SOAP melding med bruk av EC:\nFeilhåndtering Altinn returnerer feilkoder hvis noe går galt. For å formidle feilsituasjonen benyttes en SOAP Fault med en egen kontrakt som inneholder felter som identifiserer feilen og gir en tekstlig feilmelding.\nSOAP Fault Altinn benytter en SOAP fault til å returnere feilmeldinger for en web service. Denne fault meldingen er i henholdt til AltinnFault kontrakten definert i WSDL for alle tjenestene. Kontrakten vil angi en feilkode og en feilmelding, henholdsvis ErrorID og AltinnErrorMessage, for å definere feilsituasjoner.\nEksempel på en feilmelding fra Altinn:\nFeilkoder Listen under angir de generelle feilkodene som benyttes. Disse er først og fremst benyttet i sammenheng med autentisering og autorisering og benyttes derfor av flere av tjenestene i Altinn. Feilkoder mer spesifikke for operasjonene er listet opp under de respektive operasjonene i kapittel 6 Grensesnitt.\n   Feilkode Beskrivelse     0 Denne feilen oppstår i følgende tilfeller (se tekst i AltinnErrorMessage for mer informasjon): Autentisering av sluttbruker feilet pga feil brukernavn/passord/pin. Maks bruk av pinkode oppnådd, benytt ny pinkode. Sesjon for pinkode har gått ut, benytt ny pinkode. Bruker er midlertidig låst   5 Denne feilen oppstår i følgende tilfeller (se tekst i AltinnErrorMessage for mer informasjon):Ikke mulig å autorisere forespørsel basert på sendte parametere – verifiser gyldigheten/format. Autentisering av systemet feilet pga feil brukernavn/passord. Systemet eller virksomhetsbrukeren er midlertidig låst ute. Systemet er ikke autorisert for denne operasjonen på vegne av angitt avgiver. Angitt system ID er ikke gyldig – skal være et nummer   989 Denne feilen oppstår i følgende tilfeller (se tekst i AltinnErrorMessage for mer informasjon): Autentisering av sluttbruker feilet pga feil brukernavn/passord/pin. Maks bruk av pinkode oppnådd, benytt ny pinkode. Sesjon for pinkode har gått ut, benytt ny pinkode. Bruker er midlertidig låst    Hvis det ikke kommer en forståelig feilmelding, send en henvendelse til support@altinn.no. Legg med tidspunkt for innsending, avgiver (reportee) og sluttbrukersystem id, den unike koden (ErrorGuid) samt beskrivelse av hva som har skjedd.\nBenytt XMLDSig - digital signatur Noen tjenesteeiere krever XMLDSig-signering i tillegg til Altinns vanlige sikkerhetsfunksjoner. Altinn støtter skjema signert med enveloped»-metoden. Følgende XML viser hvordan signaturen skal dannes for å bli betraktet som gyldig av Altinn. Kanonisering (prosessen hvorved XML-dokumentet representeres på kanonisk form), signering og transformasjon må være samme som nedenfor; i tillegg må sertifikatet brukt for å signere dokumentet være inkludert i signaturen.\nNøyaktig ett «Signature»-element er tillatt i «XMLDSig»-elementet. Signaturen må være definert ifølge XMLDSig-navneromspesifikasjonen. Sertifikatet brukt for å signere dokumentet må være gyldig på det tidspunkt skjema leveres til Altinn. Skjemaene signerte med XMLDSig må sendes inn “komplett” og signaturen valideres av Altinn før skjemasendes videre til tjenesteeier. Tjenesteeier kan validere signaturen etter mottak fra Altinn. Merk at innhold i «XMLDSig»-elementet er definert i tjeneste-XSD-en som et «any»-element med processContents=lax og namespace lik XMLDSig-navnerommet. Lax prosessering betyr i praksis at ingen valideringsfeil resulterer hvis validatoren ikke er gitt et XSD-skjema som inkluderer XMLDSig-navnerommet, i.e. XMLDSig-XSD\n"
},
{
	"uri": "https://altinn.github.io/docs/_header/",
	"title": "",
	"tags": [],
	"description": "",
	"content": "docs\n"
},
{
	"uri": "https://altinn.github.io/docs/releases/2016/16-1/",
	"title": "16.1",
	"tags": [],
	"description": "Samtykkebasert datadeling, betalingsløsning, nytt design for roller og rettigheter, videresending av post til innbygger, +++",
	"content": " Denne versjonen inneholder flere store endringer, blant annet nytt design for roller og rettigheter, innføring av samtykkebasert datadeling og betalingsløsning.\nSom vanlig inneholder februar-versjonene av Altinn endringer for selvangivelsen. I år er det i tillegg en rekke endringer på andre områder.\nTilgangsstyring Nye sider for roller og rettigheter (17593) Vi gjør store endringer i design og oppbygging av hvordan brukerne delegerer tilganger i Altinn. Styring av roller og rettigheter vil bli en utvidelse av dagens profil-side, og ha samme design som denne. Det nye designet er laget for å gjøre det mer intuitivt hvordan man gir andre tilgang til en tjeneste, og å gjøre det tydeligere hvem som har tilgang til hvilke tjenester på vegne av en person eller virksomhet. Det gjøres ingen endringer i hvilke Altinn-roller som fins eller knytningen mot tjenester.\nhttps://altinn.no/no/Portalhjelp/Administrere-rettigheter-og-prosessteg/\nSamtykkebasert deling av data (18736) Altinn har utviklet en løsning som gjør det mulig at sluttbruker skal kunne samtykke i at data om dem kan deles mellom en datakilde (tjenesteeier) og en datakonsument (den som trenger data). Bruker vil kunne gi samtykke til at andre (for eksempel en bank) kan se data om seg i en tidsbegrenset periode. Bruker vil kunne se hva de samtykker til å dele, hvem de deler data med, hvor lenge, og innenfor hvilken kontekst dataene skal brukes.\nI praksis innføres det mulighet for tidsbegrensning på rettigheter, en samtykke-side for å gi samtykke, en oversikt over aktive samtykker, en aktivitetslogg og ny funksjonalitet for kontrollert overføring av opplysninger.\n  Ytelsesforbedring klientroller enkeltvis (19309) Tilgangsstyringsmetoden \u0026ldquo;Klientroller enkeltvis\u0026rdquo; har blitt optimalisert ytelsesmessig. Denne har ved en del anledninger hatt dårlig ytelse.\nTjenester/meldingsboks Betalingsløsning i Altinn (16940) Betalingsløsning er innført som kan brukes som del av prosessflyt i Altinn. Flere prosessflyt-maler er utarbeidt. Eksempelvis fyll ut skjema, gjør betaling og send inn basert på data i skjema. Betalingsleverandører er mulig: Nets, Payex og DIBS. Funksjonalitet støttes også via Rest-API\nRevisorsignatur (18634) Signering forenkles ved at brukergrensesnittet er tilpasset for mer effektiv og enklere signering av flere skjemaer.\nIntegrasjon av ELSA i selvangivelsen for næringsdrivende (18827) Tilpassinger av Altinn for å støtte at SKDs ELSA-løsning skal kunne integreres i selvangivelsen for næringsdrivende.\nFeilretting: Visning av \u0026amp; for innsendingstjeneste (19309) Tegnet \u0026amp; har blitt byttet ut med \u0026amp;amp i tittel i meldingsboksen på innsendingstjeneste i en del tilfeller. Dette er nå rettet.\nFeilretting: Ikke mulig å fullstendig slette en Correspondence melding - fortsatt tilgjengelig i full URL (18829) Vi gjør en feilretting i Altinn Meldingsboks slik at meldinger som er slettet ikke lengre kan nås med direktelenken til den aktuelle meldingen, når meldingen er slettet. Dette vil ikke merkes av sluttbrukere eller tjenesteeiere. Grunnen til at endringen utføres er at dette er en funksjonell feil.\nPlassering av skattyters navn i vedleggsskjemaer for PSA/PSAN (18970) Visuell forbedring av hvor skattyters navn plasseres i vedleggsskjemaer.\nFeilretting: Skjema hvor det er både infopath- og regelmotor-kalkuleringer (18969) Det gjøres en merge av de kalkulerte verdiene fra infopath, og de som ble kalkulert av regelmotor. Når dette skjer blir verdiene som ble kalkulert av regelmotor overskrevet av verdiene i skjema som kommer fra infopath. Dette rettes.\nEksterne grensesnitt Videresending av Post til Innbyggers valgte postkasse via Altinn (18395) Altinn vil kunne videresende Post som skal til innbyggers valgte postkasse. Altinns tjenesteeier kan da sende både virksomhetspost og innbyggerpost via Altinn, så sørger Altinn for videre forsendelse der dette er relevant. Det gjøres noen mindre endringer i integrasjonsgrensesnittet mellom tjenesteeier og Altinn, slik at tjenesteeier kan angi om post skal videresendes eller ikke. Altinn har innebygget støtte for å kontrollere mot Kontakt- og reservasjonsregisteret, slik at innbyggere som har valgt postkasse og som ikke har reservert seg mot offentlig post vil få denne i Digipost eller e-Boks. Altinn vil også i denne løsningen legge til rette for at innbyggere som ennå ikke har valgt postkasse skal kunne motta denne i Altinns meldingsboks, i henhold til Digitaliseringsrundskrivet som beskriver dette.\nTjenesteeier kan angi i sin forsendelse av innbyggerpost til Altinn om:\n post kun skal videresendes til Digital postkasse til innbygger post skal videresendes til Digital postkasse til innbygger, men hvis innbygger ikke har valgt postkasse så legges den i Altinn post skal videresendes til Digital postkasse til innbygger, og det skal legges en kopi i Altinn  Altinn gir tilbakemelding og status for alle forsendelser. Hvis innbygger ikke har valgt postkasse eller har reservert seg, vil dette gis som respons på postforsendelsene. For tjenesteeierne vil da Altinn sørge for håndtere logikk for både virksomhetspost og innbyggerpost, og Tjenesteeiere slipper å utvikle egen integrasjon mot Kontakt-og reservasjonsregisteret og mot innbyggerpostløsningen.\nOppslagstjeneste til Kontaktinformasjon for næringslivet (17415) Det innføres en ny oppslagstjeneste for «Kontaktinformasjon for virksomheter» i Altinn. Tjenesten vil bli tilgjengelig gjort i et nytt REST API for tjenesteeiere. Oppslagstjenesten vil gi tilgang til registrert kontaktinformasjon for alle aktive virksomheter i Altinn. Både offisiell felles kontaktinformasjon for virksomheten og kontakt informasjon registrert på personer med roller og rettigheter for virksomhetene vil være tilgjengelig, og det vil være mulig å søke på spesifikke telefonnummer og epostadresser, for å se hvor disse er registrert. Informasjon om når kontaktinformasjonen sist er oppdatert og bekreftet vil også være tilgjengelig. Årsaken til at denne tjenesten innføres er tjenesteeieres behov for å varsle virksomheter, og få informasjon om og hvilke adresser virksomheten har registert.\nFor å ta i bruk tjenesten må tjenesteeieren bestille API-nøkkel. Autentisering gjøres med bruk av virksomhetssertifikatet til tjenesteeieren og krever ingen bestilling mot ASF, annet enn at tjenesteeieren er registrert i Altinn. Tekniske detaljer for bruk av den nye tjenesten vil bli tilgjengelig her: https://tt02.altinn.no/api/serviceowner/help\nREST-støtte for innsending og signering på tjenester med flere signeringssteg (18149) Tjenesteeiere kan nå tilby også tjenester som har flere signeringssteg via app/eksterne portalløsninger. Endringen utføres blant annet for å legge til rette for ELSA.\nIntegrasjonsplattform og grensesnitt Splitt av dataoverføringer til tjenesteeiere med mulighet for krypterte vedlegg (18260) En innlevering i portal eller fra sluttbrukersystem vil normalt sett rutes av Altinn til eieren av tjenesten sitt mottakssystem. Ved at tjenesteier setter opp tjenesten med splitt av data vil man samtidig kunne sende disse dataene til en annen interessent/tjenesteier, noe som er med å understøtte at data kun trenger å rapporteres en gang.\nTidligere har vi manglet muligheten for at denne splitten kunne inneholde krypterte vedlegg. Dette er nå kommet på plass. Endringen er hovedsakelig tiltenkt å gi forskjellige tjenesteiere mulighet til å foreta datauthenting fra allerede etablerte Altinn tjenester. For sluttbrukere vil bruk av splitt av data føre til at de får enklere/færre innrapporteringer å forholde seg til.\nAutomatisk rapportering på avvik ved batchinnlesing og instansiering (18487) I 15.2 og 15.3 (endring 17621) innførte vi mulighet for automatisk å sile ut elementer med feil som kom med batch-filer fra tjenesteeiere på en langt bedre/enklere måte enn tidligere. Dette har betydelig forbedret driftbarheten, med tanke på feilhåndtering, av innkommende batcher for vår driftsleverandør. Denne endringen tar dette et steg videre.\nTidligere har uthenting av elementer som har feilet krevd betydelig involvering av driftsleverandør og manuell overføring/tilbakeføring til tjenesteeiere. Nå skal tjenesteiere selv/alene kunne anvende et sett med web service-operasjoner for å hente ut status om inngående batch-forsendelser/elementer til Altinn som feilet under oppsatt kjøring.\nFeilretting: Krav om refusjon (18914) Feilretting som kun påvirker overføring av SPKs skjema \u0026ldquo;Krav om refusjon\u0026rdquo;.\nDriftsrutiner og registerintegrasjon Standardisert prosedyre for deaktivering og sanering av grensesnitt (17690) Det blir mulig for driftsleverandør på bestilling fra tjenesteeier på en forutsigbar og effektiv måte å kunne deaktivere et grensesnitt midlertidig eller sanere det permanent.\nFeilretting – Enhetsregisterinnlesing for enheter med lange navn I enkelte tilfeller blir mellomrom fjernet i enhetsnavn som er lengre enn 35 tegn – rettes slik at de leses inn korrekt.\nAutentisering/signering Standardisering av egenregistrerte brukere (16121) Endringen går ut på å rute egenregistrerte brukere til den delen av løsningen som de andre brukerne benytter. Dette medfører ingen funksjonelle endringer. Endringen utføres for å konsolidere løsningen og det forventes forenklet vedlikehold og driftbarhet forbundet til disse brukerne\nSignering nivå 4 med BankID uten java (18633) Dagens signering krever java for å signere på nivå 4 med BankID. For å unngå at sluttbrukere fortsatt skal ha utfordringer med bruk av java, så vil vi støtte javafri signering på nivå 4 med BankID. Signering med Buypass vil videreføres uten endring (det vil si at signering med og uten java for Buypass støttes).\nAnnet Støtte for æ/ø/å i e-postadresser (17297) Vi endrer i Altinn slik at æ, ø og å er gyldige tegn sluttbrukere kan registrere i sine e-postadresser.\nStøtte for ikke-numeriske tegn i dataFormatId (18985)** Det blir mulig å benytte ikke-numeriske tegn i dataFormatId-attributt i meldingsformat (XSD) ifbm. tjenesteutvikling.\nEntLib-forbedringer (18370) Fjerning av biblioteker som ikke lengre benyttes. Dette er en teknisk endring uten funksjonell påvirkning som gjensto fra forrige release.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/diverse/administrators-oppgaver/",
	"title": "Administrators oppgaver",
	"tags": [],
	"description": "Oppgaver for administrator fra den enkelte tjenesteeier.",
	"content": " I TUL er langt fra alle administratorer, og det anbefales kun at en eller to personer fra hver tjenesteeier har administratorrettigheter. Disse er kalt tjenesteeieradministrator. I tillegg vil det være en eller to såkalte ASF-administrator. Disse er da administratorer for hele TUL, og ikke bare den enkelte tjenesteeier. Felles for disse to administratorgruppene er at de skal og kan utføre oppgaver som ikke er tiltenkt vanlige tjenesteutviklere. Dette være seg å legge inn nye prosessflytmaler, legge til betingelser, opprette brukere eller angi rettigheter i TUL. Denne beskrivelsen vil ta for seg noen av scenarioene, men ikke hvor standardproduktene dekker hele funksjonaliteten som ikke er spesifikk for TUL.\nProsessflytmaler Som nevnt ifbm. prosessflyt i innsendingstjenesten, finnes to typer prosessflytmaler i TUL, en felles og en spesifikk for tjenesteeieren. ASF-administrator legger til nye felles maler, mens de enkelte tjenesteeier-administratorene legger til for den enkelte tjenesteier. Begge typer maler er bygget på samme måte, men tjenesteeierspesifikk mal har utfylte verdier.\nMalene behøver kun å lastes opp i riktig dokumentbibliotek for å fungere. For felles maler legges de i dokumentbiblioteket Tomme prosessflytmaler på startsiden. Dette biblioteket er ikke synlig direkte, men aksesseres via Områdehandlinger. For tjensteeierspesifikke maler lastes de opp i dokumentbiblioteket Pre-definerte prosessflytmaler på den enkelte tjenesteeierarbeidsflaten. Ei heller dette biblioteket er synlig for alle, men må aksesseres via Områdehandlinger. Ved opplasting i bibliotekene er det viktig at dokumenttype settes til prosessflytmal og at prosessflytmal-id er unikt innad i dokumentbiblioteket.\nMalene er XML-filer som har en proprietær struktur som prosessflytsiden i TUL kan tolke.\nKapitlene nedenfor forklarer de ulike seksjonene i XML filen.\nXML seksjon – Malinformasjon Denne seksjonene inneholder generell informasjon om prosessflytmalen og vises i brukergrensesnittet på prosessflytsiden.\n\u0026lt;WorkflowId\u0026gt;12\u0026lt;/WorkflowId\u0026gt; \u0026lt;Name\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Navn …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Namn …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Name of process flow\u0026lt;/Text\u0026gt; \u0026lt;/Name\u0026gt; \u0026lt;Description\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Beskrivelse …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Beskrivnong …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Description of workflow\u0026lt;/Text\u0026gt; \u0026lt;/Description\u0026gt;  \u0026lt;WorkflowId\u0026gt; identifiserer hvilken arbeidsflyt som skal benyttes I SBL. P.t. skal den alltid være 1. ID’en er ikke vist i brukergrensesnittet.\n\u0026lt;Name\u0026gt; er navnet på malen og skal finnes på minimum språkene bokmål (1044) og engelsk (1033). Attributtet lcid angir dette. Teksten i noden vises i brukergrensesnittet i nedtrekkslisten over tilgjengelige maler.\n\u0026lt;Description\u0026gt; inneholder malens beskrivelse på flere språk. Denne teksten vises under nedtrekkslisten etter at bruker har byttet mal i nedtrekkslisten.\nAll informasjonen i denne seksjonen i XML-filen er statisk i brukergrensesnittet, og må endres direkte i XML-filen.\nXML seksjon – Steg Denne seksjonen inneholder informasjon om stegene, og det kan være mange steg-noder i denne seksjonen. Steg-noden beskriver steget mtp. oppførsel i SBL. Det vil også være et navn og en beskrivelse for hvert steg som vist i XML nedenfor:\n\u0026lt;Step activityId=\u0026quot;1\u0026quot; activityType=\u0026quot;Signing\u0026quot;\u0026gt; \u0026lt;Name\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Navn …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Namn …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Name of process flow\u0026lt;/Text\u0026gt; \u0026lt;/Name\u0026gt; \u0026lt;Description\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Beskrivelse …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Beskrivnong …\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Description of workflow\u0026lt;/Text\u0026gt; \u0026lt;/Description\u0026gt; \u0026lt;/Step\u0026gt;  I hovedsak er det to attributter:\n ActivityId: Identifiserer ID’en til steget. Steg-ID’en skal være i sync mellom SBL og TUL, og to steg kan ikke ha same ID, og det må angis i stigende rekkefølge. ActivityType: Beskriver type steg. Skal enten være Formfilling, Signing eller SendIn.  Hvert steg må også ha noder som omhandler sikkerhetsnivå og rettigheter. Disse deklarer at sikkerhetsnivå og rettighetsvelgeren skal vises for steget, og det er viktig at actionType i AuthorizationRequirements er det samme activityType som i stegbeskrivelsen, som vist under:\n\u0026lt;AuthenticationLevel propertyType=\u0026quot;AuthenticationLevel\u0026quot;/\u0026gt; \u0026lt;AuthorizationRequirements propertyType=\u0026quot;AuthorizationRule\u0026quot; actionType=\u0026quot;Signing\u0026quot; /\u0026gt;  XML seksjon – Egenskaper Denne seksjonen i XML-filen kan forekomme ingen eller flere ganger pr steg, og gir muligheten for å definere ekstra parameter utover sikkerhetsparametere. Et typisk slikt parameter vil være signeringstekst. En egenskapseksjon består av flere deler, hvorav tre er påkrevd:\nTabell 2 – XML egenskaper\n   Del Påkrevd Beskrivelse     Value Yes Kan brukes til å definere egenskapen defaultverdi, men er tom for felles maler   Label Yes Vil være ledeteksten som vist for egenskapen I TUL. Språkstøttet.   Description Yes Beskrivelsen som vist under ledeteksten for egenskapen. Språkstøttet.   Validation No Valideringsregel for egenskapen. Vises hvis validering feiler. Språkstøttet. Benytter regulæruttrykk.    Eksempel på XML’en er vist under:\n\u0026lt;Property name=\u0026quot;SomeIntegerProperty\u0026quot; propertyType=\u0026quot;xs:int\u0026quot;\u0026gt; \u0026lt;Value\u0026gt;\u0026lt;/Value\u0026gt; \u0026lt;Label\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Antall\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Count\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Antal\u0026lt;/Text\u0026gt; \u0026lt;/Label\u0026gt; \u0026lt;Description\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Viser antall\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Shows the count\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Visar antal\u0026lt;/Text\u0026gt; \u0026lt;/Description\u0026gt; \u0026lt;Validation regExp=\u0026quot;\\d\\d\\d\\d\u0026quot;\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Må være fire tall\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Must be four digits\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Må vere fire tal\u0026lt;/Text\u0026gt; \u0026lt;/Validation\u0026gt; \u0026lt;/Property\u0026gt;  \u0026lt;Property\u0026gt;-noden er rotnode for parameteret og inneholder et navn som må være unik innad i malen og samsvare med SBL, og viktigst propertyType-attributten. Mulige verdier i PropertyType følger i de neste delkapitlene. Undernodene til rotnoden er angitt i tabellen over.\nXML propertyType Tabellen under viser hvilke typer som kan benyttes.\nTabell 3 – XML PropertyType\n   Type UI-element Beskrivelse     xs:choice RadioButton\nNedtrekksliste Beskrives under denne tabellen   xs:string TekstBox Fritekst iht evt validering   xs:date Datovelger Dato   xs:integer TekstBox Kun numeriske verdier iht evt validering   xs:boolean Sjekkboks Checked, Unchecked, True, False, 1, 0    xs:choice benyttes for ferdigdefinerte valg i prosessmalen, og krever derfor litt mer informasjon enn de andre typene. Da verdiene er språkstøttet, må det være en tekst for hvert språk. Hvis antall valg overskrider tre, vil det bli presentert en nedtrekksliste istedenfor radioknapper. Et eksempel er gjengitt under:\n\u0026lt;Property name=\u0026quot;ChooseFruit\u0026quot; propertyType=\u0026quot;xs:choice\u0026quot;\u0026gt; \u0026lt;Choice value=\u0026quot;Apple\u0026quot;\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Eple\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Apple\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Eple\u0026lt;/Text\u0026gt; \u0026lt;/Choice\u0026gt; \u0026lt;Choice value=\u0026quot;Orange\u0026quot;\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Appelsin\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Orange\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Appelsin\u0026lt;/Text\u0026gt; \u0026lt;/Choice\u0026gt; \u0026lt;Choice value =\u0026quot;Banana\u0026quot;\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Banan\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Banana\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Banan\u0026lt;/Text\u0026gt; \u0026lt;/Choice\u0026gt; \u0026lt;Value\u0026gt;\u0026lt;/Value\u0026gt; \u0026lt;Label\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Velg frukt\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Choose fruit\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Velg frukt\u0026lt;/Text\u0026gt; \u0026lt;/Label\u0026gt; \u0026lt;Description\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Du kan velge en av fruktene\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;You can choose only one fruit\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Vel berre ein frukt\u0026lt;/Text\u0026gt; \u0026lt;/Description\u0026gt; \u0026lt;/Property\u0026gt;  Tjenesteeiers maler Tjenesteeiers maler har mulighet til å være helt eller delvis preutfylte. Dvs. at et sett med rettigheter autoimatisk kan settes pr. steg. Det vil også si at sikkerhetsnivå og andre egenskaper kan preutfylles.\nSikkerhetsnivå og rettigheter angis ved å legge de i XML-nodene i malen:\n\u0026lt;AuthenticationLevel propertyType=\u0026quot;AuthenticationLevel\u0026quot;\u0026gt;1\u0026lt;AuthenticationLevel/\u0026gt; \u0026lt;AuthorizationRequirements propertyType=\u0026quot;AuthorizationRule\u0026quot; actionType=\u0026quot;Signing\u0026quot;\u0026gt;ALLEA-SIGNE\u0026lt;AuthorizationRequirements/\u0026gt;  Signeringstekst og andre egenskaper.\n\u0026lt;Property name=\u0026quot;SigningText1\u0026quot; propertyType=\u0026quot;xs:string\u0026quot;\u0026gt; \u0026lt;Value\u0026gt;Dette er min signeringstekst\u0026lt;/Value\u0026gt; \u0026lt;/Property\u0026gt; \u0026lt;Property name=\u0026quot;ChooseFruit\u0026quot; propertyType=\u0026quot;xs:choice\u0026quot;\u0026gt; \u0026lt;Choice value=\u0026quot;Apple\u0026quot;\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Eple\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Apple\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Eple\u0026lt;/Text\u0026gt; \u0026lt;/Choice\u0026gt; \u0026lt;Choice value=\u0026quot;Orange\u0026quot;\u0026gt; \u0026lt;Text lcid=\u0026quot;1044\u0026quot;\u0026gt;Appelsin\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;1033\u0026quot;\u0026gt;Orange\u0026lt;/Text\u0026gt; \u0026lt;Text lcid=\u0026quot;2068\u0026quot;\u0026gt;Appelsin\u0026lt;/Text\u0026gt; \u0026lt;/Choice\u0026gt; \u0026lt;Value\u0026gt;Orange\u0026lt;/Value\u0026gt; \u0026lt;/Property\u0026gt;  Administrasjon av brukere, grupper og rettigheter Beskrivelse av hvordan man administrerer brukere, grupper og rettigheter finnes i dokumentet Veiledning for brukeradministrasjon i TUL.pdf.\nLage ny tjenesteeier En etat i TUL kalles også en tjenesteeier, og fungerer som en samling for alle etatens tjenester og utgaver.\nForberedelser For å opprette en ny tjenesteeier i TUL må først noen praktiske ting være ordnet av driftsleverandør:\n Åpning av brannmur for å slippe inn nye tjenesteutviklere Tilgang til Citrix for the den nye etatens brukere Tjenesteeieren må være opprettet i Sluttbrukerløsningene som er knyttet til TUL. Tjenesteeierkodene må stemme overens.  Det normale vil være å gi etaten en tre/fire bokstavers forkortelse som identifikator. F.eks. vil Skatteetaten være SKD, Statistisk Sentralbyrå være SSB etc. Denne identifikatoren benyttes i adressen (URL) til tjenesteeiers arbeidsflate.\nActive directory Det første som må gjøres er å opprette kataloger (Organization unit) og grupper i Active Directory. Disse vil være tjenesteeierspesifikke og skal følge samme hierarki som for BRG:\nTabell 4 – Active directory\n   Navn Medlem av gruppe Medlemmer Plassering     Service Owner XXX Files and folders   Altinn/Service Owner XXX   Service Owner XXX SharePoint Administrators All Service Owner Administrators Brukere som skal være tj.eier administrator Altinn/Service Owner XXX   Service Owner XXX Users All Service Owner Users Alle etatens tjenesteutviklere Altinn/Service Owner XXX   Service Owner XXX Code List editors Service Owner Code List editors Alle som skal ha tilgang til å vedlikeholde kodelister Operations/Administrative Users and global groups   Service Owner XXX Group administrators AD Snap-In Access Alle som skal vedlikeholde brukere for etaten Operations/Administrative Users and global groups   Service Owner XXX Password administrators AD Snap-In Access Alle som skal vedlikeholde brukere for etaten Operations/Administrative Users and global groups   Service Owner XXX User administrators AD Snap-In Access Alle som skal vedlikeholde brukere for etaten Operations/Administrative Users and global groups    (XXX er den nye etatens kode)\nTjenesteeierverktøy Det er kun administratorer av TUL sin startside som kan opprette tjenesteeiere. For å opprette dette, må vedkommende navigere til følgende plassering:\nhttp://\u0026lt;miljø\u0026gt;/_layouts/altinn/ServiceOwner.aspx  Der må administrator fylle ut i følgende skjermbilde:\n Figur 135 – Tjenesteierverktøy   Legg inn relevant data og klikk på *Create/Opprett.*Tjenesteeieren opprettes og status vises:\n Figur 136 – Tjenesteeier opprettet   Som markert i rødt over, vil også en lenke til den nye arbeidsflaten vises. Klikker man på den, taes man til den nye tjenesteeieren.\nHvis opprettelse feiler, vil dette vises på samme sted.\nHvis arbeidsflaten ikke inneholder veiledningskomponent og tjenesteliste, må disse aktiveres.\nDette gjøres ved å klikke på Områdehandlinger.\n Figur 137 – Områdehandlinger   På siden som kommer opp velger man Funksjoner for områdesamling, som vist under:\n Figur 138 – Funksjoner i områdesamling   Man får nå en liste hvor alle Altinnspesifikke elementer skal aktiveres.\n Figur 139 – Områdefunksjoner   Når disse er aktivert vil alle elementer på arbeidsflaten være tilgjengelig. Nå gjenstår det å gi de riktige grupper og brukere tilgang til den nye arbeidsflaten. Alle nye tjenester og utgaver vil arve disse tilgangene.\nGå til den nylig opprette tjenesteierarbeidsflaten og velg Områdehandlinger.\nVelg så Administrator for områdesamling. Legg til brukeren(e) hos etaten som er tjenesteieradministrator.\nGå så til Personer og grupper. Her må du opprette tre grupper:\nTabell 5 – Personer og grupper\n   Gruppenavn Rettighet     XXX site members Bidra   XXX site owners Full kontroll   XXX site visitors Lese    Det er ikke påkrevd at gruppene skal ha navnene angitt i tabellen over, men det er å anbefale. Dette er SharePointgrupper som man knytter til Active Directory gruppene som følger:\nTabell 6 – Personer og grupper\n   Gruppenavn AD gruppe     XXX site members Altinntul\\Service owner XXX users   XXX site owners Altinntul\\ASF SharePoint Administrators   XXX site visitors Altinntul\\All service owner users    (XXX er tjenesteeierkode)\nNå er tjenesteeieren/etaten klar til bruk.\nBetingelser (conditions) Betingelser er SBL-kode som utvikles og sjekkes in i TFS av en utvikler. Disse betingelsene kan kjøres når en hendelse inntreffer som kan føre til endring av tilstand for en samhandlingstjeneste.\nNår koden er sjekket inn og migrert til tilhørende SBL-miljø, så må AFS-admin gå inn på følgende URL for å legge til den nye betingelsen for at den skal kunne benyttes av en samhandlingstjeneste:\n Figur 140 - Liste med betingelser   Merk: Navn på betingelse (tittel) er case-sensitiv og må samsvare med metodenavn som utvikler har kodet.\n Figur 141 - Legge til ny betingelse   Gjenbrukbar logikk Gjenbrukbar logikk (“hooks”) er kode som kjøres i SBL ved gitte hendelser i en tjenesteutgaves livsløp. Hvilken logikk som kjøres for en gitt utgave defineres av tjenesteutvikler i TUL.\nNår en ny gjenbrukbar logikk er kodet og migrert i tilhørende SBL-miljø, så må administrator legge inn en rad i listen.\nDet er typisk Driftsleverandør som oppdaterer dette, men ASF-admin kan også gjøre det hvis nødvendig informasjon om hva som skal legges inn er gitt.\nFølgende typer logikk kan defineres:\n Instantiation: Logikk kjøres når en utgave opprettes i SBL, og hvilken logikk som skal kjølres defineres på utgaveparametersiden. Payment: Kjøres ved arkivering i SBL og velges på parametersiden for SKD betalingsinformasjon.   Figur 142 - Gjenbrukbar logikk   Betalingsadministrasjon Adgang til betalingsleverandøravtalesiden For å få adgang til betalingsleverandøravtalesiden hos en tjenesteeier må brukeren være medlem av betalingsadministratorgruppen for tjenesteeieren. Hva som er gruppe for betalingsadministrator blir avgjort av konfigverdien «PaymentAdminGroupName» i Altinn.TUL.config. Gruppen må inneholde navnet som er definert der. I utgangspunktet er denne verdien «Payment Admin Group». Anbefalt struktur er å styre tilgang gjennom grupper i AD som er medlem i disse SharePoint-gruppene. For eksempel en AD-gruppe «SKD betalingsadministratorer» som er medlem av SharePoint-gruppe «SKD Payment Admin Group». Adgang blir deretter styrt ved å legge til eller fjerne brukere i AD-gruppen.\nDersom konfigverdien blir endret vil den nye verdien brukes for å bestemme adgang til siden. Lenken til siden fra tjenesteeierarbeidsflaten blir derimot låst til en bestemt SharePoint-gruppe ved aktivering av tjenesteeier-featuren i SharePoint. Skal lenken oppdateres til å godta en ny verdi i konfig, må denne featuren aktiveres på nytt etter at konfig er endret.\nAdgang til siden bør begrenses til de personene som har ansvar for å opprette og vedlikeholde betalingsavtaler.\nBetalingsmetoder Betalingsmetodene som vil være mulig å velge i TUL blir styrt av en SharePoint-liste i Startside site collection. Denne listen vil du finne under «Områdeinnhold» med navn «Tilgjengelige betalingsmetoder».\n Tilgjengelige betalingsmetoder   Listen skal inneholde alle de betalingsmetoder som det er ønskelig å kunne velge gjennom TUL. Hver enkelt betalingsmetode må legges inn med et visningsnavn som er navnet som vil bli vist i TUL. I tillegg må det legges inn en kode for betalingsmetoden for hver enkelt betalingsleverandør. Disse kodene må stemme overens med den koden som betalings­leverandøren bruker for denne metoden. Dersom koden er feil vil ikke betalingsmetoden fungere for den leverandøren den er feil for. Beskrivelse er valgfritt, og vil ikke bli vist andre steder enn i denne listen.\n Betalingsmetoder   Metodene som blir lagt inn i listen er felles for alle tjenesteeiere og skal være alle betalingsmetoder som det skal være lov å velge mellom dersom du velger å tillate begrensing av betalingsmetoder på betalingsleverandøravtalesiden.\nProsessflytmal For at betaling skal fungere må det brukes en prosessflyt som inneholder et betalingssteg. Administrator må derfor gjøre tilgjengelig (se 23.1 Prosessflytmaler) minst en prosessflytmal med betalingssteg. Ved innføring av betalingsfunksjonaliteten ble det opprettet fire prosessflytmaler for betaling. Disse er «Betaling», «Utfylling og betaling», «Utfylling, signering og betaling» og «Utfylling, betaling og signering».\n"
},
{
	"uri": "https://altinn.github.io/docs/",
	"title": "Altinn docs",
	"tags": [],
	"description": "Åpen dokumentasjon for Altinn.",
	"content": " \u0026nbsp;docs\r Altinn dokumentasjon Vi i Altinn er godt i gang med å forbedre dokumentasjonen og gjøre den enkel å vedlikeholde. Dokumentasjonen består av markdown på GitHub, som så blir til denne løsningen.\nØnsker du å bidra? Hver side inneholder en \u0026ldquo;\rEndre\u0026rdquo;-lenke til den tilsvarende markdown-filen i GitHub. Alle kan med andre ord gjøre endringer og forbedringer på egen hånd.\nDu kan også foreslå forbedringer, stille spørsmål eller påpeke feil ved å opprette issues, som vi så vil forsøke å svare ut så raskt som mulig.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/diverse/begrepsliste/",
	"title": "Begrepsliste",
	"tags": [],
	"description": "Liste over mye brukte begreper i tjenesteutviklingsløsningen.",
	"content": "Under følger en liste over mye brukte begreper i tjenesteutviklingsløsningen.\n Datakilde\nEn samling felt og grupper som definerer og lagrer dataene for et InfoPath-skjema. Kontroller i skjemaet er bundet til feltene og gruppene i datakilden.\n ELMER\nELMER er vedtatt som retningslinjer for brukergrensesnitt i offentlige skjemaer på Internett\n Hovedskjema\nEn innsendingstjeneste vil Alltid ha ett skjema som er hovedskjema. Det kan knyttes null, ett eller flere underskjemaer til et hovedskjema.\n Hovedspråk\nEn tjeneste vil alltid ha ett språk som hovedspråk. Dette angis når tjenesten opprettes og kan ikke endres i etterkant. Tjenesten kan oversettes til ett eller flere andre språk i tillegg til hovedspråket. En tjeneste kan ikke bli migrert til noe miljø uten at hovedspråket er komplett.\n InfoPath\nInfoPath er et verktøy fra Microsoft som benyttes til å utvikle skjemaer. I TUL må tjenesteutviklere utvikle skjemaer i InfoPath og koble disse – gjennom å laste opp InfoPath-dokumentet – til TUL for å kunne spesifisere innholdet i skjemaet og bruken av det ytterligere.\n Kodeliste\nEn kodeliste er en liste med faste verdier som for eksempel postnummer og poststed. Kodelisten brukes typisk i nedtrekkslister i skjema i sluttbruker­løsningen. En kodeliste kan brukes på tvers av tjenesteeiere og tjenester, eller den kan spesiallages for enkelte tjenesteeiere eller tjenester. Kodelister vil vedlikeholdes utenfor den enkelte tjeneste og må migreres over til sluttbrukerløsningen på linje med tjenestene.\n Kortnavn\nBåde tjenester og utgaver har kortnavn. Kortnavnene både for tjeneste og for utgave benyttes kun i TUL for å angi navn på henholdsvis tjenestens og utgavens arbeidsflate i TUL.\n Migrere\nPakke sammen alle data i en tjenesteutgave, versjonere, og legge det over til et sluttbrukermiljø.\n Innholdsreferanser\nFelter som beskriver utfylt instans av en utgave\n Preutfylling\nFelter fylles ut av SBL ved åpning av utgave\n Prosessflyt\nAutomatisert navigasjon gjennom en spesifikk rekkefølge av handlinger eller oppgaver relatert til en forretningsprosess.\n Sideegenskaper\nEgenskaper for en visning (side) fra InfoPath-skjema.\n Skjemasett\nSamling av skjemaer og vedlegg som signeres og sendes inn i én prosess. Der innsendingsrutinen forutsetter at ett bestemt skjema alltid er med i sendingen, er dette et hovedskjema og resten er underskjema.\n Sporvalg\nDefinerer en samling av sider som bare presenteres for en bestemt avgivergruppe eller avgivere i en bestemt situasjon. Grunnlaget for sporvalg kan være basert på tidligere svar i samme skjema eller på allerede kjente opplysninger hos oppgaveinnhenteren. Sporene kan delvis, men ikke utelukkende, være satt sammen av identiske sider.\n Tjeneste\nEn tjeneste kan ha en eller flere tjenesteutgaver, for eksempel en utgave per år. Det er tjenesteutgaven som migreres over til sluttbrukerløsningen. Det finnes ulike tjenestetyper, for eksempel innsendingstjeneste og meldingstjeneste. Eksempel på tjeneste: Selvangivelse for næringsdrivende mv (RF-1030).\n Tjenesteeier\nEn tjenesteeier er en etat som utvikler og eier tjenester som tilgjengeliggjøres gjennom Altinn. Eksempel på tjenesteeiere: Skattedirektoratet, NAV, Mattilsynet, Husbanken.\n Tjenestekatalog\nListe over av alle tjenester i Altinn. Kan være nyttig i forbindelse med utvikling av mappere og betingelser (conditions). Ligger hos BRG på følgende adresse: https://altinn.brreg.no/sites/program/altinn%20II/Lists/Tjenestekatalog\n Tjenesteparametre\nTjenesteparametre er egenskaper ved tjenesten som settes på tjenestenivå.\n Underskjema\nEt underskjema er et skjema som benyttes som tillegg til et hovedskjema for en tjeneste. Et skjema kan eksistere kun som underskjema, eller det kan eksistere som hovedskjema for én tjeneste men benyttes som underskjema for én eller flere andre tjenester (da må det i så fall være forskjellige utgaver eller forskjellige tjenester som bruker samme xsn-fil). Et underskjema kan knyttes til ett eller flere hovedskjema.\n Utgave\nOgså kalt tjenesteutgave. En tjeneste kan ha en eller flere utgaver, for eksempel en utgave per år. Det er tjenesteutgaven som migreres over til sluttbrukerløsningen.\n Utgaveparametre\nUtgaveparametre er egenskaper ved utgaven som settes på utgavenivå.\n Versjon\nHver gang en tjenesteutgave blir migrert til et miljø blir det opprettet en ny versjon av tjenesteutgaven.\n WCAG\nWCAG er en forkortelse for Web Content Accessibility Guidelines. Dette er retningslinjer for å gjøre webinnhold tilgjengelig for mennesker med funksjonshemninger. Webinnhold generelt refererer til informasjon på en webside eller web-applikasjon, inkludert tekst, bilder, lyd og video.\n XSD\nXSD er en forkortelse for XML Schema Definition. XSD er en filtype som brukes til å implementere et InfoPath-skjema. Også kalt datakilde. Denne filen styrer strukturen til XML som lagres i Altinn, og sluttbrukersystemene benytter XSD’en for å vite hvordan skjemadata som sendes inn skal være formatert.\n XSN\nXSN er filtypen til InfoPath-skjema\n TFS\nTeam Foundation Server er ALM og kildekodesystemet som benyttes i Altinn. Bruk av TFS er integrert i Visual Studio.\n  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/innsending/betaling/",
	"title": "Betaling",
	"tags": [],
	"description": "Altinn kan tilby tjenesteeiere å gjennomføre betaling på innsendingstjenester.",
	"content": " Altinn kan tilby tjenesteeiere å gjennomføre betaling på innsendingstjenester. For å kunne ta i bruk dette må tjenesteeieren inngå en avtale med en eller flere av de betalingsleverandørene som Altinn har støtte for. Altinn har nå støtte for Dibs, Nets og Payex. Når en avtale er på plass må tjenesteeier legge inn nødvendig informasjon om avtalen i TUL. Det er nødvendig å ha spesielle rettigheter som betalingsadministrator for å kunne legge inn dette.\nLegge inn ny betalingsleverandøravtale Dersom du har de nødvendige rettigheter vil du få opp en lenke til betalings­leverandør­avtale­siden på tjenesteeierarbeidsflaten under «Felles ressurser for tjenesteeier». Lenken vil ikke være synlig for brukere uten adgang.\n Lenke til betalingsleverandøravtaler   Betalingsleverandøravtalesiden blir brukt til å administrere betaling for tjenesteeieren. Her skal administratorene av betaling hos tjenesteeier legge inn de avtalene som de vil gjøre tilgjengelig for bruk av utgavene. Det er først etter at minst en avtale har blitt lagt inn her at betalingsfunksjonaliteten vil bli tilgjengelig for utgavene hos tjenesteeieren.\n Betalingsleverandøravtaler   Siden er delt inn i to seksjoner. Den øverste seksjonen blir brukt til å legge inn eller vise detaljer om en bestemt avtale. Den nederste seksjonen gir en oversikt over alle avtalene som har blitt lagt inn hos tjenesteeieren.\nFor hver enkelt avtale må betalingsadministrator legge inn de opplysningene som er nødvendig for at Altinn skal kunne bruke avtalen. Du må først velge hvilken betalings­leverandør avtalen gjelder. Valgene du får her er de leverandørene som Altinn kan bruke.\nMerchant id er en unik id som du får hos betalingsleverandør når du inngår avtale. Denne brukes til å identifisere deg (den spesifikke avtalen) overfør betalingsleverandør. En tjenesteeier kan potensielt ha flere avtaler med den samme leverandøren, og merchant id vil da også identifisere hvilken avtale som brukes. Hos Nets og Payex vil du få to ulike merchant id-er. En er for bruk i produksjon, den andre er for testing. Du må fylle ut begge, og Altinn vil bruke id-en for test i testmiljøer og id-en for produksjon i produksjonsmiljøer. Dibs har ikke testmiljø, og har derfor bare en merchant id.\nDu kan bare legge inn en enkelt avtale en gang. Identifikasjonen av en avtale i TUL er kombinasjonen av betalingsleverandør og merchant id for produksjonsmiljø. Denne kombinasjonen må være unik for hver enkelt avtale.\nSecret key er en hemmelig nøkkel som brukes til å verifisere at betalingsanmodningen faktisk kommer fra rett avsender. Denne er knyttet til merchant id, og du får denne hos betalings­leverandør. De ulike leverandørene har ulikt navn for dette. Den kan være kalt ting som «MAC», «secret key» og «token». Til liks med merchant id må du legge inn for både produksjon og test. Dibs har ikke test og produksjonsnøkler, men har i stedet to ulike nøkler som begge må legges inn. Verdien du legger inn her er sensitiv informasjon, og vil derfor bli kryptert når du legger til avtalen. Det betyr at selve verdien ikke vil bli vist når du ser på avtalen senere. Du vil bare se noen tegn som viser at det finst en verdi, men ikke hva verdien er.\nMerchant id og secret key kan du ikke endre på etter at utgaver har tatt i bruk avtalen. Pass derfor på at de er korrekte, ellers vil ikke betaling fungere med avtalen. Både produksjons- og test-variantene bør legges inn med en gang. Det vil være komplisert å legge inn pro­duk­sjons­detaljer i etterkant på en avtale som har blitt tatt i bruk i testmiljøer. I et slikt tilfelle må du først fjerne betalingsleverandøravtalen fra alle utgaver som bruker den. Deretter gjøre endringene. Legge inn avtalen på nytt på alle utgavene og til slutt migrere alle utgavene på nytt.\nBetalingsmetoder (som Visa, MasterCard osv.) er noe som kan administreres på avtalen hos betalingsleverandøren. Dersom du ønsker at ulike utgaver skal kunne tilby ulike betalings­metoder på samme avtale, må du krysse av for «vil du begrense hvilke betalingsmetoder som skal være lov å bruke». Det samme må du gjøre dersom du bare vil tillate et utvalg av metodene som er tilgjengelig på avtalen.\nNår det er valgt å begrense metoder så vil du få opp en av­kryssings­boks for alle de betalingsmetodene som har blitt lagt inn som tilgjengelige i TUL (se 23.6.2 Betalingsmetoder). Du må velge minst en av disse for at avtalen skal være gyldig. Listen kan inneholde metoder som den avtalen du legger inn ikke har tilgjengelig. Du må derfor passe på at du bare velger betalingsmetoder som avtalen faktisk kan tilby. Bare de betalings­metodene du velger her vil kunne bli brukt som betaling på denne avtalen via Altinn.\nLar du være å krysse av her vil alle betalingsmetoder som avtalen godtar kunne brukes. Altinn vil ikke sette noen begrensing på metoder. Dette betyr at betalingsmetoder helt og holdent blir styrt i adminkonsollet hos betalingsleverandøren. Da vil alle metoder som til enhver tid er aktive der kunne brukes, også nye som skulle bli lagt til etter at avtalen er lagt inn i TUL og utgaver migrert.\nNår du har fylt inn alle opplysningene klikker du «Legg til avtale» for å legge den inn i listen over avtaler. Endringen vil ikke bli lagret før du sjekker inn siden. Det betyr at du kan legge til flere avtaler eller endre på flere avtaler før du lagrer.\nAdministrering av avtaler Etter at en avtale er tatt i bruk av en eller flere utgaver får du ikke lov å gjøre endringer på annet enn betalingsmetoder. Du kan heller ikke slette en avtale som er i bruk. Du vil i oversikts­listen se hvor mange utgaver som bruker avtalen. Ved å klikke på den infor­ma­sjonen vil du få opp en liste over disse utgavene.\nDersom du har behov for å endre på en avtale som er i bruk, så må du først fjerne avtalen fra alle utgavene. Merchant id og secret key er informasjon som er kritisk for at betalings­løsningen skal fungere. Dersom dette skulle være feil er det derfor viktig at alle utgavene som har tatt avtalen i bruk blir gjennomgått.\nAvtaler kan bare slettes dersom de ikke er i bruk av utgaver. Ønsker du å slette en utgave som er i bruk, må du først sjekke om utgavene trenger avtalen. Dersom avtalen ikke er nødvendig for alle utgavene, så kan du fjerne den fra utgavene og deretter slette avtalen.\n"
},
{
	"uri": "https://altinn.github.io/docs/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://altinn.github.io/docs/guides/definisjoner/",
	"title": "Definisjoner",
	"tags": [],
	"description": "Beskrivelse av ulike begreper som benyttes i Altinn.",
	"content": "Beskrivelse av ulike begreper som benyttes i Altinn.\n   Betegnelse Beskrivelse     Abonnement Regelmessig aktivisering av innsendingstjeneste i avgivers arbeidsliste. Et abonnement kan forekomme 1 til X ganger.   Autentisering En betegnelse på det å verifisere en bruker eller et systems identitet. Dette vil typisk skje ved en sjekk av brukernavn og passord og/eller pin kode stemmer overens med registrert informasjon.   Autorisasjon En betegnelse på å verifisere at en gitt identifisert bruker eller system identitet har rettigheter til å utføre en handling eller har rettigheter til spesifikke data.   Base64 Standard for å representere binære data som tekst, slik at binære data kan være en del av f.eks. en XML struktur.   Batch En større mengde data av samme type gruppert sammen. Overføres i samme forsendelse, ofte rutinemessig.   E-dialog En tjenesteeierdefinert samhandlingstjeneste.   EnterpriseCertificate (EC) Sertifikat for en virksomhet, virksomhetssertifikat, som kan benyttes til autentisering og autorisering ifm implementasjon mot Altinn.   Formidlingstjeneste Formidling av data mellom eksterne aktører som er tilknyttet Altinn. Altinn forholder seg ikke til innhold, kun deler av formatet hvor metadata for tjenesten angis.   Innsendingstjeneste En innsendingstjeneste er en eller flere skjema definert av en tjenesteeier som fylles ut i portal eller sluttbrukersystem, evt. signeres, og sendes inn. Påbegynte og innsendte innsendingstjenester kan oppbevares i sluttbrukers meldingsboks i Altinn. Svardata sendes tjenesteeier   Innsynstjenester Tjenesteeiere kan gjøre informasjon i egne registre (for eksempel saksbehandlingsløsninger eller elektroniske saksarkiv/saksmapper) tilgjengelig for den enkelte brukeren eller dennes representant.   Lenketjeneste Formålet med en lenketjeneste er å overføre en bruker i Altinn til en annen nettside. En lenketjeneste er alltid assosiert med en URL.   Kvittering Ved innsending av data til Altinn, eller mottak av data fra Altinn opprettes kvitteringer som partene senere kan benytte for å få oversikt over datautveksling med Altinn.   Meldingsboks Samlingen av en sluttbrukers instansierte tjenester i Altinn (tjenestemotor og arkiv).   Meldingstjeneste Offentlige virksomheter sender informasjon/melding til sluttbrukers meldingsboks i Altinn. Meldingene støtter HTML og vedlegg. Brukeren kan varsles med e-post eller SMS om at informasjon er gjort tilgjengelig for innsyn eller behandling. Tjenesteeieren får informasjon om hvilke utsendte meldinger som er åpnet og kan eventuelt kreve at brukeren bekrefter mottaket innen en fastsatt frist. Meldingene kan oppbevares i sluttbrukerens meldingsboks i Altinn i en fastsatt periode, eventuelt slettes av brukeren.   MTOM Message Transmission Optimization Mechanism – Metodikk for effektiv forsendelse av binære vedlegg til og fra en web service.   Preutfylling Forhåndsutfylling av skjema/skjemasett i Altinn for bruker/organisasjon vha. data mottatt fra tjenesteeiere eller nasjonale registre (f.eks. Folkeregisteret, Enhetsregisteret)   Sak En instansiert samhandlingstjeneste, enten en samleside eller en e-dialog.   SBL Sluttbrukerløsningen. Applikasjon som privatpersoner eller næringslivet benytter for å kommunisere med tjenesteeiere.   Samhandlingstjeneste En tjeneste som knytter sammen andre tjenester som for sluttbruker og/eller tjenesteeier hører naturlig sammen.   Samleside En brukerdefinert samhandlingstjeneste.   Signering Tjenesteeier kan definere at spesifikke innsendingstjenester må signeres en eller flere ganger av bruker(e) før den aktuelle innsendingstjenesten kan ferdigstiller og sendes inn til Altinn.   Skjema Formular/dokument definert av en tjenesteeier som inneholder rubrikker som skal besvares av den som bruker formularet. Kan være trykket på papir eller elektronisk – sluttbrukerløsningen benytter elektroniske skjema.   Skjemasett En samling skjema som hører sammen. Gyldige kombinasjoner defineres av tjenesteeiere i TUL.   SOAP Uavhengig protokoll spesifikasjon for utveksling av strukturert informasjon gjennom web services.   TUL Tjenesteutviklingsløsningen. Applikasjon hvor tjenesteeiere bl.a. kan opprette tjenester for bruk i Altinn, for eksempel innsendingstjenester.   Web service Tjeneste på Internet aksessert vha. HTTP/HTTPS som utfører en bestemt oppgave, eller en bestemt type oppgaver.   WSDL Språk (xml) som beskriver en web service, dvs. informasjon om tjenester, protokoller og formater. Hensikten er å ha en velkjent måte for å etablere dialog mellom brukere og tilbydere av elektroniske tjenester.   XACML EXtended Markup Language - XML er en språkdefinisjon for strukturering og beskrivelse av data.   Web service Tjeneste på Internet aksessert vha. HTTP/HTTPS som utfører en bestemt oppgave, eller en bestemt type oppgaver.   WSDL Språk (xml) som beskriver en web service, dvs. informasjon om tjenester, protokoller og formater. Hensikten er å ha en velkjent måte for å etablere dialog mellom brukere og tilbydere av elektroniske tjenester.   XML EXtended Markup Language - XML er en språkdefinisjon for strukturering og beskrivelse av data.   XSD XML Schema Definition. Metabeskrivelse for XML data. Beskrivelse av hvordan XML dataene skal være strukturert og beskrivelse av alle dataelementene. Blir også brukt til å validere XML data.    "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/diverse/ekstern-stil/",
	"title": "Ekstern stil",
	"tags": [],
	"description": "Funksjonalitet som gjør det mulig å presentere Altinn-tjenester uten at Altinns visuelle profil er synlig.",
	"content": " Portaluavhengighet I Altinn-sammenheng er begrepet portaluavhengighet brukt for funksjonalitet som gjør det mulig å presentere Altinn-tjenester for en sluttbruker uten at Altinns visuelle profil er synlig.\nI TUL omfatter dette funksjonalitet for å laste opp en eller flere stiler for hver tjenesteeier. En stil består av stilark (CSS) og tilhørende grafikkfiler. Den må migreres til SBL for å kunne påvirke ”look \u0026amp; feel” til tjenesteeiers tjenester.\nDet defineres ingen fast kobling mellom stil og tjeneste. Om stilen skal benyttes, styres ved oppstart av hver enkelt tjeneste. Generelt startes en Altinn-tjeneste fra en ekstern portal, for eksempel tjenesteeiers sider, ved hjelp av en såkalt dyplenke. Ved å legge på ekstra parametre for hhv. stil og returside vil lenken kunne ta sluttbruker til en Altinn-tjeneste med tjenesteeiers visuelle stil, og returnere til tjenesteeiers portal etterpå.\nAdministrere stilark og grafikk Stilarkene vil legges til i et SharePoint-dokumentbibliotek som er tilgjengelig fra arbeidsflaten for tjenesteeier. Dokumentbiblioteket har versjonering, slik at det vil være mulig å rulle tilbake til tidligere versjoner av stilarkene.\nFiler for grafikk håndteres tilsvarende i et SharePoint-dokumentbibliotek for bilder som også er tilgjengelig fra arbeidsflaten for tjenesteeier. Flere stilark kan gjenbruke de samme grafikkfilene.\nDefinere stilark Stilark og grafikkfiler må defineres utenfor TUL i de verktøy tjenesteeier selv disponerer.\nEn stil vil ikke kunne endre funksjonalitet eller innhold; for eksempel vil det ikke være mulig å legge til en helt annen toppmeny ved hjelp av et stilark.\nStilarket kan inneholde få stildefinisjoner og for eksempel bare endre toppbanner og footer, eller det kan endre større deler av løsningens ”look \u0026amp; feel”. Endring av stil i InfoPath-skjema støttes ikke, men alle andre deler av sidene en tjeneste presenteres på kan endres; for eksempel navigasjonsområdet, knapperaden og informasjonsområdet i en innsendings­tjeneste.\nDet gis her ingen innføring i hvordan stilarket bør bygges opp generelt, men en beskrivelse av hvordan særskilte elementer som er spesielle for løsningen bør defineres for at det skal kunne påvirke SBL.\nLogo Bilder kan benyttes i stilark som bakgrunnsbilde. URL\u0026rsquo;en for bakgrunnsbilde må ha følgende format:\n/Pages/Images/\u0026lt;tjenesteeier-kode\u0026gt;/Content/\u0026lt;filnavn\u0026gt;  For eksempel: /Pages/Images/NAV/Content/navlogo.png.\nVed å bruke følgende stil-mal vil du kunne skjule altinn-logoen og vise logo knyttet til alternativ stil:\ndiv.logo a img { display: none !important; } div.logo { background: url(\u0026quot;/Pages/Images/\u0026lt;tjenesteeier-kode\u0026gt;/Content/\u0026lt;filnavn\u0026gt;\u0026quot;) no-repeat 5% 50% !important; height: 60px !important; }  Laste opp stilark Du laster opp et nytt stilark ved å klikke på *Last opp-*lenken i dokumentbibliotekets header og laster opp et stilark på vanlig måte. Navnet på stilarket vil benyttes til å identifisere selve stilen; en stil-identifikator som består av stilarkets navn, tjenesteeierkode og et løpenummer genereres automatisk ved opplasting. Denne stil-identifikatoren vil benyttes som parameter i dyplenken for å indikere hvilken stil som skal benyttes i sluttbrukerløsningen.\nFor å lage en ny utgave av et eksisterende stilark, kan det samme stilarket lastes opp på nytt med et annet navn.\nLaste opp grafikk Grafikk kan lastes opp direkte i grafikkbiblioteket, eller det kan lages mapper og laste opp grafikken i mappene. OBS: Kun ett nivå av mapper støttes.\nDet vil ikke være noen tekniske begrensninger på hvilke typer grafikkfiler som kan lastes opp, men det anbefales sterkt at PNG benyttes istedenfor GIF. Særlig GIF med gjennomsiktighet bør ikke benyttes da det kan skape problemer i generering av PDF. Grafikkfilformater som ikke støttes av alle nettlesere som er relevante for sluttbrukerløsningen bør naturligvis ikke benyttes.\nMigrere stilark En stil må migreres til SBL før den kan påvirke visningen til tjenester. For å migrere en stil må du klikke på lenken Migrer til høyre i hver rad i stilarkbiblioteket. Dette tar deg til siden Stilarkmigrering. Her kan du velge miljø du vil migrere til. I tillegg kan du velge å migrere bilder som ligger i bildebiblioteket. For å starte migrering trykker du på OK-knappen.\nDu kommer nå til siden Stilarkmigreringsstatus. Denne siden viser status for migreringen og en liste over tidligere migreringer. Fra stilarksmigreringsstatus-siden kan du også teste stilarket. Dette gjør du ved å velge en tjenesteutgave fra nedtrekkslisten knyttet til stilarket du vil teste, klikk så på lenken Dyplenke. Et nytt nettleservindu vil åpnes med en dyplenke til en ny instans av tjenesteutgaven du valgte å teste stilarket med.\nDyplenke fra ekstern portal For å bruke stilen som er definert i stilarkene må det benyttes en dyplenke som er bygd opp med en stil-identifikator (StyleIdentificator) som knytter stilarket til tjenensteutgaven. For å starte en ny tjeneste, identifiseres tjenesteutgaven av ekstern tjenestekode og ekstern tjeneste­utgave­kode.\nDyplenken kan gå fra for eksempel en etats egen webside (for eksempel https://www.nav.no) eller fra en epost. Når sluttbruker klikker på lenken vil Altinn-portalen åpnes, men med den angitte stilen, slik at sluttbruker ikke nødvendigvis oppfatter at han/hun navigerer til et annet nettsted. Stilark kan kun knyttes til tjenester i TUL, og altså ikke andre sider som for eksempel Min meldingsboks eller Min profil. Alle tjenestetyper vises i SBL med liten toppbanner, og sluttbruker kan ikke navigere seg ut fra tjenesten annet enn ved en tilbake-lenke (Tilbake til Min meldingsboks).\nVanligvis vil sluttbruker komme tilbake til Min meldingsboks når han/hun trykker på tilbake-lenken, men om det er ønskelig at sluttbruker returnerer et annet sted kan dyplenken inneholde en returparameter (ReturnPage).\nEksempel på dyplenke med stil-identifikator:\nhttps://www.altinn.no/Pages/ServiceEngine/Start/StartService.aspx?ServiceEditionCode=983142\u0026amp;ServiceCode=2069\u0026amp;style=nav_12_helfo.css  Eksempel på dyplenke med stil-identifikator og returparameter:\nhttps://www.altinn.no/Pages/ServiceEngine/Start/StartService.aspx?ServiceEditionCode=983142\u0026amp;ServiceCode=2069\u0026amp;style=nav_12_helfo.css\u0026amp;returnPage=http://www.helfo.no  Hvis du i stedet for å starte en ny tjeneste skal dyplenke til et eksisterende tjenesteelement, vil selve lenken bygges opp annerledes, mens prinsippet for ekstern stil er det samme. Dette er bare aktuelt hvis datainnholdet du skal lenke til er kjent, for eksempel hentet fra Altinn via webservice.\nEksempel på dyplenke til arkivert element:\nhttps://www.altinn.no/Pages/ServiceEngine/Dispatcher/Dispatcher.aspx?RAReporteeElementID=\u0026lt;RAReporteeElementID\u0026gt;  Eksempel på dyplenke til aktivt element:\nhttps://www.altinn.no/Pages/ServiceEngine/Dispatcher/Dispatcher.aspx?ReporteeElementID=\u0026lt;ReporteeElementID\u0026gt;  "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/diverse/enhetstest/",
	"title": "Enhetstest",
	"tags": [],
	"description": "Det å verifisere enkeltdeler av en tjenesteutgave hver for seg.",
	"content": "Med enhetstest menes å verifisere enkeltdeler av en tjenesteutgave hver for seg.\nLayout og andre egenskaper som legges inn via InfoPath, kan enhetstestes I InfoPath. Regler definert i InfoPath kan testes direkte I InfoPath ved å bruke forhåndsvisning (preview).\nLayout for dialogsider kan bare i begrenset grad enhetstestes i TUL, siden utseende og innhold i dialogkomponentene vises fullstendig bare i portalmiljø. Det du kan teste i TUL, er overordnet sideinndeling, at de aktuelle komponentene er tilstede og riktig plassert i forhold til hverandre, og at de har forståelige overskrifter.\nFor tjenestespesifikasjon, utgavespesifikasjon og andre parametre knyttet til en utgave, må en eventuell enhetstest skje ved å gå gjennom definerte sjekklister for disse. Utfylte sjekklister kan eventuelt lagres under Designdokumenter i tjenestens arbeidsflate.\nEn videre test av tjenesteutgaven må foretas i portalmiljø.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/felles-funksjonalitet/",
	"title": "Felles",
	"tags": [],
	"description": "Funksjonalitet som er felles for alle eller flere av tjenestetypene.",
	"content": " Her beskrives funksjonalitet som er felles for alle eller flere av tjenestetypene, innenfor hhv. tjenestespesifikasjon, utgavespesifikasjon og tjenesteinnhold.\nTjenestedefinering utføres fra tjenestens arbeidsflate, mens definering av utgave gjøres fra utgavens arbeidsflate.\nÅ definere tjenesten består i å utarbeide tjenestespesifikasjonen, som omfatter kun tjenesteparametere. Å definere utgaven består i å utarbeide utgavespesifikasjonen, som består av alle parametre som ikke er knyttet til eventuelt tjenesteinnhold. Eksempel på tjenesteinnhold er skjema som utvikles i InfoPath.\nTjenestespesifikasjonen vil være den samme for alle utgaver i gitt tjeneste, mens hver enkelt utgave kan ha forskjellige spesifikasjoner.\nTjenestespesifikasjon Tjenestespesifikasjonen initieres allerede idet du velger å opprette en ny tjeneste, ved at siden Tjenesteparametre åpnes.\nTjenesteparametre Når tjenesteparametrene er fylt ut, er tjenesten ferdig definert. Du kan senere komme til denne siden ved å klikke på Tjenesteparametere på arbeidsflaten for tjenesten. Et utsnitt fra skjermbildet av siden vises under.\n Figur 24 – Tjenesteparametere   Det som er verdt å merke seg, er at ekstern tjenestekode og tjenestetype ikke kan endres etter at det er valgt og lagret.\nFølgende parametre kan defineres på tjenesteparametersiden:\n   Parameter Beskrivelse Obligatorisk Type Språk­støtte     Tjenestenavn Dette er tjenestens fulle navn og brukes i SBL for avansert søk og i rettighetsvisninger i SBL. Ja Tekst Ja   Kortnavn Tjenestens kortnavn er navnet på tjenestens arbeidsflate i TUL, og brukes i URL. Denne støtter ikke spesialtegn. Ja Tekst    Ekstern tjenestekode Ekstern tjenestekode brukes til å identifisere en tjeneste i Altinn, for eksempel ved dyplenking. Denne genereres automatisk. Ja Tekst    Tjenestetype Tjenestetype brukes til å definere type tjeneste. Tjenestetype må settes før man kan opprette en utgave av tjenesten. Nei Liste    Referanse Referanse kan for eksempel brukes som referanse til papirutgaven av tjenesten eller skjemanavn. Maksimalt 10 tegn (bokstaver, siffer eller spesialtegn). Nei Tekst     Utgavespesifikasjon Fra tjenestens arbeidsflate kan du opprette en utgave under tjenesten. Du kan senere komme til denne siden ved å klikke på Utgaveparametere på arbeidsflaten for tjenesteutgaven. Hvilke parametre som må angis for en tjenesteutgave, kommer an på hva slags tjenestetype som ble valgt for tjenesten. Oversikt over alle parametere gis i neste avsnitt.\nI tillegg til utgaveparametrene kan du fra utgavearbeidsflaten navigere deg inn på andre parametersider for å definere utgaven. For alle tjenestetyper kan du i tillegg til utgaveparametrene velge å overstyre rettighetene til tjenesteutgaven. For å definere dette må du velge Overstyr rettigheter under området for Utgavespesifikasjon.\nDe andre parametrene som definerer utgaven, vil avhenge av type tjeneste.\nUtgaveparametere og overstyr rettigheter er beskrevet i dette kapitlet, mens de parametersidene som er spesifikke for en gitt utgavetype, er beskrevet i kapitlet som omhandler den aktuelle typen.\nUtgaveparametere Utgaveparametrene brukes for å identifisere og konfigurere egenskaper ved utgaven. Parametrene er tilpasset den aktuelle tjenestetypen. Selve parametrene er listet midt på siden. Parametrene er gruppert etter type parameter og til venstre på siden fins en forklaring til parametrene.\nFigur 25 – Utgaveparametere, innsendingstjeneste\nFølgende parametre kan definers på utgaveparametersiden:\n   Parameter Beskrivelse Tjeneste­type Obl. Type Språk­støtte     Utgavenavn Utgavens navn vises på utgavens arbeidsflate i TUL. Alle Ja Tekst Ja   Kortnavn Utgavens kortnavn er navnet på utgavens arbeidsflate i TUL. Kan maksimalt inneholde 30 bokstaver eller siffer. Kan ikke inneholde spesialtegn, dog ‘–‘ og ‘_’.  Ja Tekst    Tjenesteutgave­­­kode Tjenesteutgavekode brukes sammen med ekstern tjenestekode til å identifisere en utgave i Altinn, for eksempel ved dyplenking. Tjenesteutgavekoden må være unik innenfor en tjeneste. Maksimalt 6 siffer. Dette feltet kan ikke endres i etterkant og vil være “read only” etter at utgaven er lagret første gang. Alle Ja Tekst    Hovedspråk Angir utgavens hovedspråk. Brukes som oversett-fra-språk ved oversetting. Alle Ja Liste    Gyldig fra Angir når utgaven er tilgjengelig i SBL. Gjelder i utg.punkt produksjonsmiljø, men også testmiljø hvis ”Gyldig fra-dato” overstyres ved migrering. Alle  Dato + Tid    Gyldig til Angir når utgaven ikke lengre er tilgjengelig i SBL. Gjelder i utg.punkt produksjonsmiljø, men også testmiljø hvis ”Gyldig til-dato” overstyres ved migrering. Alle  Dato + Tid    Kun underskjema Angir at denne utgaven kun blir brukt som et underskjema. Prosessflyt og skjemasett, samt migrering blir utilgjengelig. Innsending  Sjekk­boks    Mastertjeneste­utgave Denne brukes for å markere at utgaven skal være tilgjengelig for gjenbruk av andre tjenesteeiere Innsending  Sjekk­boks    Meldingstype Angir hva slags meldingstype denne utgaven er. Vanligvis velges Binær/HTML. Øvrige valg er Skatteoppgjør og Foreløpig skatteoppgjør; disse brukes bare for meldinger som skal håndteres spesielt i SBL ifm. Selvangivelse­løsningen Melding Ja Liste     Overfør ved bruk av spesifisert metode | Hent ved bruk av webservice (DownloadQueue)  Angir hvordan innsendte tjenesteutgaver skal overføres fra Altinn til tjenesteeiers mottakersystem. Innsendte tjenesteutgaver kan enten sendes til mottakersystem eller hentes av mottakersystem. Ved sending må det spesifiseres metode. Innsending Ja Radio    Metode for oversending av tjenesteutgaves data Angir hvordan en tjenesteutgaves data skal sendes fra Altinn til tjenesteeiers mottakssystem. Her kan det velges mellom de ulike grensesnittene som er gyldig for den gitte tjenesteeier. For innsynstjenester er det kun en kvittering på benyttet innsyn som sendes. Innsending, innsyn, melding  Liste    Inkluder PDF-skjema i oversendingen Angir om en PDF/A-1b-versjon av utgavens skjema(sett) skal oversendes sammen med tjenesteutgaves data til tjenesteeier. Denne vil være lik den som bruker selv kan åpne fra portalen, og inneholde alle hoved- og underskjema samlet. Benyttes funksjonaliteten sammen med sensitive opplysninger vil eventuelle krypterte felter vises med #-tegn tilsvarende bruker generert PDF.\nHvis innsendingstjenesten også er satt opp med split av data vil kun eieren av tjenesten motta PDF.\nPDF vil ikke kunne sendes ved bruk av flatfil for oversendelse, kun ved bruk av Altinn XML format.\nParameteren bør ikke brukes ved store volumer av tjenesten, og ytelse bør diskuteres med ASF.\n Innsending  Sjekk-boks    Utskriftsvisning Forteller hvilken visningsmetode som skal brukes når utskriftsvisning genereres i SBL. Eneste valg nå er pdf. Innsending  Liste    Kjør ved Angir når kontroll skal kjøres. Her kan man velge mellom før eller under instansiering avhengig av tjenestetype.       Kontroll Angi hvilken kontroll som skal kjøres ved instansiering av tjenesten. Innsending, lenke  Liste    Angi hvilken URL lenketjenesten skal åpne Angir hvilken URL lenketjenesten skal åpne Lenke  Tekst    Vis ELMER Angir om skjema skal presenteres i sluttbrukerløsningen i henhold til ELMER-retningslinjene. Vis ELMER er satt som default valg i TUL. Dette vil gi et navigasjonsområde til venstre og et område for selvvalgt tilleggs­informasjon til høyre. I tillegg vil det være en knapperad med navigasjonsknapper under skjemaet.\nSe Vedlegg C: Utforming av brukervennlige tjenester for mer informasjon.\n Innsending  Sjekk­boks    Fri navigasjon | Styrt navigasjon Angir om navigasjonen skal være fri eller styrt. Bruk av ELMER med fri navigasjon er satt som default valg i TUL, og anbefales. Kun i spesielle tilfeller kan det være hensiktsmessig å velge styrt navigasjon, som for eksempel hvis det er nødvendig å lede sluttbrukeren gjennom et bestemt resonnement.\nSe Vedlegg C: Utforming av brukervennlige tjenester for mer informasjon.\n Innsending  Radio    Lagre i arkiv Angir om tjenesteutgaven skal lagres under Sendt og arkivert i Min meldingsboks i SBL. Satt som default valg i TUL. Innsending  Sjekk­boks    Tillat instansiering fra arkiv Angir om om sluttbruker kan lage en ny kopi av arkivert tjeneste i SBL. Satt som default valg i TUL. Deaktiveres hvis Lagre i arkiv ikke er valgt. Innsending  Sjekk­boks    Tillat delvis kopiering Utgavens navn vises på utgavens arbeidsflate i TUL. Innsending Nei Sjekk-boks    Send status om meldingen er lest Angir om det skal sendes melding om sluttbruker har lest meldingen Melding  Sjekk­boks    Send status etter antall dager Angir antall dager det skal gå før det sjekkes og sendes melding om sluttbruker har lest meldingen. Deaktivert om Send status om meldingen er lest ikke er valgt. Melding  Tall    Logge informasjon om leseaktivitet i tjenesteeiers arkiv Angir om leseaktivitet i tjenesteeiers arkiv skal logges eller ikke. Innsending, melding  Sjekk-boks    Lagring av sporings- og logginforma­sjon i loggarkiv (TTP-data) Angir i antall år hvor lenge sporings- og logginformasjonen skal lagres i loggarkivet (TTP). Default og minimum er 10 år. Alle Ja Tall    Lagringstid i tjenesteeieres arkiv Angir hvor lenge melding skal lagres om tjenesteeier sender melding til sluttbruker. Hvis ingen lagring, angis 0 år og 0 måneder. Innsending, melding Ja Tall    Tillat innsending fra SBS Angir om tjenesten kan sendes inn fra et eksternt sluttbrukersystem. Satt som default valg i TUL. Innsending  Sjekk­boks    Tillat instansiering for sluttbrukere uten brukerprofil Angir om tjenesten skal kunne instansieres fra etat for en bruker som ikke har samtykket til bruk av Altinn. Innsending  Sjekk­boks    Kvitteringstekst\nInformasjons­tekst\n Etter å ha fylt ut et skjema i SBL vil sluttbruker bli sendt til en egen kvitteringsside med kvitteringsteksten. Se Vedlegg C: Veiledning i utforming av brukervennlige tjenester for mer informasjon. Innsending  Tekst Ja   Kvitteringstekst i portal Etter å ha fylt ut et skjema i SBL vil sluttbruker bli sendt til en egen kvitteringsside med kvitteringsteksten. Se Vedlegg C: Veiledning i utforming av brukervennlige tjenester for mer informasjon. Innsending  Tekst Ja   Kvitteringstekst i e-post Etter å ha fylt ut et skjema i SBL vil sluttbruker bli sendt til en egen kvitteringsside med kvitteringsteksten. Se Vedlegg C: Veiledning i utforming av brukervennlige tjenester for mer informasjon. Innsending  Tekst Ja   Krav til avgivertype Angir hvilke type brukere som kan stå som avsender av en innsendingstjeneste. Kan være «privatperson», «juridisk enhet (foretak)», «bedrift», «bedrift eller en juridisk enhet (foretak)», «konkursbo», «person eller juridisk enhet», «bedrift, juridisk enhet eller konkursbo» eller «privatperson, juridisk enhet (foretak) eller konkursbo». Bedrift er enheter med type BEDR eller ADOS (Administrativ enhet – offentlig sektor). Konkursbo er enheter av type KBO. Juridisk enhet er de typene som ikke er BEDR, ADOS eller KBO. Hva som skal velges vil ofte være angitt i skjemadesignet. Innsending, samhandling  Liste    Sikkerhetsnivå Angir krav til hvilken innloggingsmetode som minimum kreves for tjenesten. Kan angis som Nivå 0-4. Se tabell under for informasjon om de ulike nivåene. Alle  Liste    Avsender Angir hvem som står som avsender av meldingen i SBL. Melding  Tekst    Bekreftelse for mottatt: Sluttbruker må bekrefte Angir hvorvidt meldingen må bekreftes lest av sluttbruker. Satt som default valg i TUL. Melding  Radio    Bekreftelse for mottatt: Sluttbruker trenger ikke bekrefte Angir hvorvidt meldingen må bekreftes lest av sluttbruker. Melding  Radio    Betrodd partner kan opprette ny forekomst Angir om betrodd partner (”Trusted Partner”, sluttbrukersystem med utvidede rettigheter) kan instansiere tjenesten. Innsending  Sjekk­boks    Krypterte data kan låses opp for visning Angir om midlertidig dekryptering skal tillates hos sluttbruker hvis utgaven inneholder sensitive opplysninger som blir kryptert og uleselig etter at sluttbruker har lagt dem inn. Innsending  Sjekk­boks    I SBL kan brukere logge inn som en virksomhet, uten å bli autentisert som en bestemt person. En virksomhets­bruker kan være en av flere ulike personer. Angir om en virksomhets­identifisert bruker ikke kan benytte seg av tjenesten. Alle  Sjekk­boks    Send status for melding og når Angir hvorvidt status for melding skal sendes til tjenesteeier (ikke åpnet, åpnet, bekreftet; standard verdi er ikke åpnet) og hvor lenge innen informasjonen skal sendes (dager). Sjekkboksen angir om informasjonen skal sendes eller ikke, i tekstboksen angis antall dager innen informasjonen sendes (standard verdi er 7 dager). Tekstboksen aktiveres hvis sjekkboksen er sjekket. Melding  Sjekk­boks og tekst    Send bekreftelse: Ja / Nei Angir om det skal sendes bekreftelse på at utgaven av innsynstjenesten er benyttet. Innsyn  Radio    Tillat sluttbruker å lagre Altinn-signert kopi Angir om sluttbruker kan be om Altinn-signert kopi av innsynstjenesten som lagres i sluttbrukers meldingsboks. Innsyn  Sjekk­boks    Tillat videresending på e-post Angir om sluttbruker kan videresende Altinn-signert innsynstjeneste på e-post. Innsyn  Sjekk­boks    Informasjon til sluttbruker Angir informasjon som vises til sluttbruker i høyre del av skjermbildet (samtidig med innsynstjenesten). Innsyn  Tekst    Mappernavn Navn på mapper-endepunkt Innsyn  Tekst    Requestskjema Skjema for innkommende forespørsler som beskriver data som skal sendes inn. Innsyn  Tekst    Responsskjema Skjema for utgående forespørsler som beskriver data som blir sendt ut Innsyn  Tekst    Kan inngå i samhandlings­tjeneste Angir om utgaven vises i listen over tjenesteutgaver som kan inngå i en samhandlingstjeneste. Innsending, melding, innsyn  Sjekk­boks    Erstatt standard instansiering I SBL med tilpasset programlogikk (URL) Angir en URL for programlogikken som skal aktiveres når instansiering normalt utføres. Benyttes hvis tjenesteutgaven har spesielle krav til instansiering. Innsending  Tekst    Erstatt standard skjemautfylling i SBL med tilpasset presentasjon (URL) Angir en URL for den tilpassede presentasjonen som skal åpnes når skjemautfylling normalt utføres. Benyttes hvis utgaven har spesielle krav til skjemautfylling. Innsending  Tekst    Erstatt standard signering/innsending i SBL med tilpasset programlogikk (URL) Angir en URL for programlogikken som skal aktiveres når signering/innsending normalt utføres. Benyttes hvis utgaven har spesielle krav til signering/innsending. Innsending  Tekst    Erstatt standard utskriftsvisning i SBL med tilpasset presentasjon (URL) Angir en URL for programlogikken som skal aktiveres når utskriftsversjonen av skjemasettet normalt åpnes. Benyttes hvis utgaven har spesielle krav til utskrift. Innsending  Tekst    Erstatt standard systemhjelp med tilpasset innhold og presentasjon (URL) Angir en URL for den tilpassede hjelpen som skal åpnes fra signerings-/innsendingssiden. Benyttes hvis utgaven benytter tilpasset logikk for skjemautfylling og det er ønskelig å tilpasse systemhjelpen tilsvarende. Innsending  Tekst    Bruk forenklet presentasjon i innsendingsprosessen Angir om SBL skal benytte forenklede sider for signering/innsending og kvittering. Innsending  Sjekkboks    Slett filene etter at alle mottakere har lastet de ned Angir om filene som blir overført skal slettes med en gang alle mottakere har lastet de ned. Formidling  Sjekkboks    Antall dager filene skal være tilgjengelige Angir antall dager filene skal være tilgjengelige for mottakerene før de ikke lenger kan lastes ned. Formidling Ja Tekst    Bruk tjeneste­eier­styrt rettighets­register Angir om utgaven kun skal være tilgjengelig for brukere som er registrert i tjenesteeierstyrt rettighetsregister. For lenke- og innsynstjenester gjelder dette for om samtykke skal være tilgjengelig bare for de som står i registeret. Formidling, Lenke, Innsyn  Sjekkboks    Tillat samtykke­basert deling av data Avgjør om utgaven kan brukes til å dele data basert på samtykke fra sluttbruker. Lenke, Innsyn  Sjekkboks    Samtykketekst som forklarer hva brukeren samtykker til Tekst som skal opplyse sluttbruker om hva det er han gir tillatelse til dersom han velger å gi samtykke. Denne er obligatorisk dersom samtykke er valgt. Lenke, Innsyn Der­som sam­tykke er valgt. Tekst     Rettighetskrav settes på Rolleadministrasjon-siden som lenkes fra startsiden og Overstyr rettigheter-siden som lenkes fra tjenesteutgavens arbeidsflate.\nFor hver utgave må man også angi hvilket sikkerhetsnivå som kreves for å åpne tjenesteutgaven i SBL. Sikkerhetsnivåene er fra 0 til 4 og hvert nivå kan ha en eller flere innloggingsmetoder. Disse vises i tabellen under:\n   Sikkerhetsnivå Innloggingsmetode     0 Kun passord, uten fødselsnummer   1 Kun passord, med fødselsnummer   2 PIN-kode fra Altinn   2 PIN-kode fra selvangivelsen   2 PIN-kode fra SMS   3 PIN-kode fra MinID   4 Buypass smartkort    Overstyr rettigheter I TUL kan systemeier definere roller med tilhørende rettigheter, mens alle har tilgang til informasjon om hva som er definert. En rettighet gir sluttbruker tilgang til å utføre en bestemt operasjon på en bestemt ressurs for en bestemt avgiver – for eksempel å lese momsoppgavene i arkivet til virksomheten brukeren er ansatt i. Se Rolleadministrasjon for nærmere beskrivelse.\nI definisjon av roller i TUL settes rettigheter på tjenestenivå. En utgave vil arve disse rettighets­kravene automatisk når den migreres til SBL. Dette betyr at når du lager en helt ny tjeneste, må du vurdere hvilke rolledefinisjoner som skal oppdateres for å gi tilgang til tjenesten. Tilsvarende, når du lager en ny utgave, må du vurdere om rolledefinisjonene på tjenestenivå er tilstrekkelige, eller om de bør justeres eller overstyres for akkurat denne utgaven. Du kan hente fram en oversikt over alle rettigheter til tjenesten fra tjeste­arbeidsflaten, se rettigheter fra tjenestearbeidsflaten\nRoller som gir rettigheter til tjenesteeiers arkiv kan ikke overstyres. Dette er roller med rollekategori = tjenesteeier.\nEndring av roller på tjenestenivå må man be systemeier utføre, mens overstyring for den enkelte utgave kan gjøres av tjenesteutvikler fra utgavens arbeidsflate. Det er ønskelig i størst mulig grad å legge rettighetskravene på tjenestenivå, fordi det forenkler arbeidet med administrasjon av rettigheter.\nFor samhandlingstjenester har du også muligheten til å gi roller tilgang til spesifikke rollestyrte dialogsider gjennom å benytte Overstyr rettigheter. Ved å gi en rolle tilgang til en spesifikk dialogside vil man kunne skape ulike arbeidsflater for ulike roller for samhandlingstjenesten.\nI følgende tilfeller er det aktuelt å gå inn på siden Overstyr rettigheter:\n Rettigheter på tjenestenivå skal normalt gjelde, men det er spesielle behov knyttet til akkurat denne utgaven. Utgaven skal følge en prosessflyt med mer enn ett signeringstrinn. Samhandlingstjenesteutgaven har dialogsider som skal vises for bestemte roller.  Du kan overstyre rettigheter på utgave-, side- eller feltnivå; side- og feltnivå gjelder bare innsendingstjenester. For samhandlingstjenester kan du i tillegg overstyre på dialogsidenvå. Du velger først ressursnivå og deretter hvilke operasjoner som skal overstyres per rolle. Du kan definere flere overstyringer for hver utgave.\n Figur 26 – Overstyr rettigheter side, innsendingstjeneste    Figur 27 – Overstyr rettigheter side, samhandlingstjeneste   For å overstyre rettigheter som gjelder utgaven som helhet, velger du radioknappen Utgave/prosessflyt for innsendingstjeneste, Utgave for andre tjenestetyper, og trykker på knappen Legg til overstyring. Du vil da få opp en pop-up med en rettighetsmatrise. Her listes de roller som har rettigheter for valgt ressurs vertikalt. Horisontalt listes tilgjengelige operasjoner. Operasjonene som listes, vil avhenge av hvilken ressurs som er valgt. Hvis det for eksempel er en innsendingstjeneste med to signeringssteg, vil det være en kolonne for hvert signeringssteg.\n Figur 28 – Overstyr rettigheter   Du har også muligheten til å liste alle roller, noe som er nødvendig for å tildele rettigheter til roller som ikke allerede har det på tjenestenivå. Nederst til venstre i pop-up-vinduet er det en sjekkboks, og ved å ta bort haken i denne vil listen utvides til å vise alle roller.\nDu overstyrer rettighetene ved å legge til eller fjerne markeringer for hvilke operasjoner hver enkelt rolle skal kunne utføre. Deretter trykker du på OK­-knappen for å lagre og lukke pop-up-vinduet. Du vi se at det nederst på siden kommer et nytt innslag i listen over alle ressurser med overstyrte rettigheter.\nFor innsendingstjenester kan du i tillegg overstyre rettigheter for en enkelt side eller et enkelt felt. Du må da velge radioknappen Side/felt og deretter hvilken side og eventuelt hvilket felt det gjelder, før du klikker på knappen Legg til overstyring. Da kommer du til rettighets­matrisen og fortsetter som for overstyring på utgavenivå.\nFor samhandlingstjenester som har rollestyrte dialogsider, kan du gi tilgang til disse ved å velge radioknappen Dialogside og deretter velge aktuell dialogside. Bare dialogsider som er lagt til som ”rollekontrollert” på siden Tilstander, er tilgjengelig for slik overstyring. Marker valget i kolonnen Dialogside-tilgang for de rollene som skal få tilgang til siden. Også her har du mulighet til å liste alle roller, men det er uansett bare roller som har rettighet til selve tjenesteutgaven som vil kunne se tjenesten i sin meldingsboks. Merk at for en ny utgave opprettet ved å kopiere en eksisterende vil eventuelle overstyringer også bli kopiert.\n Figur 29 – Overstyr rettigheter – dialogside   Du kan senere endre eller slette overstyringene ved å trykke på Endre- eller Slett-lenkene som er knyttet til hvert enkelt innslag i listen med overstyringer.\nFor å overstyre rettigheter på felter som blir hentet fra sekundær datakilde vil dette kun fungere sammen med følgende URL:\nhttp://mapperservices.altinn.no:87/ServiceEngine/FormsEngineFieldLevelDataSource.svc?wsdl\nFor mer informasjon om sekundær datakilde / kodelister.\nSkriv inn URL som er oppgitt over for å angi web service lokasjon:\n Figur 30 – legg til sekundær datakilde   Trykk Neste.\n Figur 31 – legg til sekundær datakilde   Velg GetFieldAuthorization method og Neste\n Figur 32 – legg til sekundær datakilde   Du kan nå velge sample values. Velg \u0026ldquo;-1\u0026rdquo; i alle felter.\n Figur 33 – legg til sekundær datakilde   Velg bort Hent data automatisk når skjemaet åpnes check box. Klikk Finish.\n Figur 34 – sekundær datakilde i InfoPath   Den sekundære datakilden kan ses i InfoPath skjema under Datakilder (Sekundær).\nLegg merke til at navn med prefix \u0026ldquo;ns6\u0026rdquo; vil kunne variere fra skjema til skjema.\nDen sekundære datakilden må nå legges inn i InfoPaths kodefil (FormCode.cs). Trykk Utvikler Innlastingshendelse i InfoPath.\n Figur 35 – legg til Loading Event kode   Følgende kode må være lagt inn i FormEvents_Loading-metoden:\nstring FormID = (FormState[\u0026quot;FormID\u0026quot;] != null) ? FormState[\u0026quot;FormID\u0026quot;].ToString() : string.Empty; string UserID = (FormState[\u0026quot;UserID\u0026quot;] != null) ? FormState[\u0026quot;UserID\u0026quot;].ToString() : string.Empty; string ReporteeID = (FormState[\u0026quot;ReporteeID\u0026quot;] != null) ? FormState[\u0026quot;ReporteeID\u0026quot;].ToString() : string.Empty; NamespaceManager.AddNamespace(\u0026quot;namespaceprefix\u0026quot;, \u0026quot;http://www.altinn.no/services/ServiceEngine/FormsEngine/2009/10\u0026quot;); // refer the figure below!! NamespaceManager.AddNamespace(\u0026quot;dfs\u0026quot;, \u0026quot;http://schemas.microsoft.com/office/infopath/2003/dataFormSolution\u0026quot;); XPathNavigator xnav = this.DataSources[\u0026quot;GetFieldAuthorization\u0026quot;].CreateNavigator(); XPathNavigator formid = xnav.SelectSingleNode(\u0026quot;copy \u0026amp; paste the XPath of the formID from the GetFieldAuthorization secondary data source\u0026quot;, NamespaceManager); XPathNavigator userid = xnav.SelectSingleNode(\u0026quot;copy \u0026amp; paste the XPath of the userID from the GetFieldAuthorization secondary data source\u0026quot;, NamespaceManager); XPathNavigator reporteeid= xnav.SelectSingleNode(\u0026quot;copy \u0026amp; paste the XPath of the reporteeID from the GetFieldAuthorization secondary data source\u0026quot;, NamespaceManager); formid.SetValue(FormID); userid.SetValue(UserID); reporteeid.SetValue(ReporteeID); this.DataSources[\u0026quot;GetFieldAuthorization\u0026quot;].QueryConnection.Execute();   Figur 36 – Datakilde namespace   Legg merke til at XPath brukt i XPathNavigator fra koden over må hentes fra feltene i den sekundære datakilden som ble lagt inn i skjemaet.\nHøyreklikk på de aktuelle feltene i InfoPath og velg kopier XPath for å finne korrekt XPath. Hvis den korrekte XPath ikke blir benyttet i koden vil det resultere i en \u0026ldquo;null reference\u0026rdquo; og en skjema exception vil bli kastet i SBL. Hvis koden over allerede finnes i skjemakoden bør denne koden sammenslåes med den eksisterende koden.\nFølgende elementer i InfoPath støttes av overstyring av rettigheter i Altinn:\n Text Box Rich Text Box Combo Box List Box Check Box  Repeterende tabeller og seksjoner støttes ikke.\nTjenesteutgavens innhold Tjenesteinnholdet består av den informasjonen som formidles mellom tjenesteeier og bruker. For de fleste tjenestetypene kan slikt innhold presenteres og eventuelt registreres gjennom et skjema som utvikles i InfoPath, som er et standard Microsoft Office-produkt. Et InfoPath-skjema representerer dermed tjenesteinnholdet og interaksjonen med sluttbruker i SBL. Det definerer utgavens ”brukergrensesnitt” og grafiske layout.\nFor innsendingstjenster og innsynstjenester er InfoPath-skjema en sentral og nødvendig del. For de andre tjenestetypene er andre innholdstyper sentrale, og disse beskrives under den enkelte tjenestetypen.\nInfoPath-skjema i Altinn Nedenfor følger en beskrivelse av prinsippene for håndtering av skjemaer i TUL. Mer informasjon som er rettet direkte mot hver enkelt tjenestetype, finnes i tjenestetype-kapitlene i underkapitler under ”Iinnhold”. Der refereres det også til vedlegg med detaljinformasjon rettet mot den enkelte tjenestetypen.\nEn generell brukerveiledning i InfoPath gis ikke i denne brukerveiledningen, og det henvises til Microsoft sin generelle brukerdokumentasjon på dette standardproduktet.\nSkjemabibliotek, skjema og visning Under området for Innholdsspesifikasjon på utgavens arbeidsflate kan du legge til et InfoPath-skjema og åpne og redigere skjemaet i Microsoft Office InfoPath.\nSkjemaet lastes opp og vedlikeholdes i skjemabiblioteket på arbeidsflaten, som vist i Figur 1. Dette er et standard SharePoint dokumentbibliotek, men godtar kun InfoPath-filer(.xsn). Sjekk ut/sjekk inn, versjonerings- og dokumentbibliotekfunksjonalitet er tilgjengelig. Se detaljer om hvordan sjekke ut og inn.\n Figur 37 – Skjemabibliotek   Et skjema kan om ønskelig bestå av mange visninger som man kan navigere mellom under utfylling i SBL, eller benyttes for utskrift eller kvittering. En visning er synonymt med side. Det er verdt å merke seg at navnene og rekkefølgen som er på visningene inne i InfoPath, er irrelevant. Hvordan de ulike sidene skal benyttes, angis på utgavens arbeidsflate under Sideegenskaper.\nNår man utvikler skjema for en utgave, gjør man det for utgavens hovedspråk. Som nevnt tidligere angis hovedspråket blant utgaveparametrene. For at man skal kunne ha skjema på flere språk, er det flere ting som er viktig. Alle språkavhengige elementer i skjemaet (ledetekster, overskrifter og lignende) må defineres som uttrykksfelter (expression boxes) i InfoPath, slik at de skal kunne oversettes i oversettermodulen i TUL. Hvordan du setter opp uttrykksfelter er beskrevet i Vedlegg A: Skjemautvikling i InfoPath. Tekster som «flyter fritt» utenfor uttrykksbokser vil ikke la seg oversette. Det er da også viktig å merke seg at tekster knyttet til radioknapper og sjekkbokser, samt tabelloverskrifter etc. må ligge i uttrykksbokser.\nSkjemaet selv, og de ulike komponentene skjemaet består av, bør navngis i henhold til gjeldende navnestandard, se Vedlegg E: InfoPath navnestandard.\nNår skjemaet er ferdig og lagret, laster du det opp på utgavens arbeidsflate. Klikk på Last opp nytt dokument under området for Innholdsspesifikasjon, og velg den filen du ønsker å benytte.\nDersom det oppstår en feil i forbindelse med opplasting, så vil utgaven bli merket med at den har en skjemafeil. Da vil du se en advarsel i rød tekst på utgavearbeidsflaten. En utgave med en slik feil vil kunne få problem med funksjonalitet som baserer seg på skjema. Dersom dette har skjedd må du slette skjemaet og laste opp på nytt. Meldingen vil forsvinne når du sletter skjemaet. Dukker meldingen opp på nytt etter ny opplasting, bør du ta kontakt med Altinn support.\n Figur 38 Feilmelding etter skjemaopplasting   Sjekke ut, editere og sjekke inn InfoPath-skjema For å kunne editere InfoPath-skjemaet, er det viktig at du sjekker ut først. Hvis ikke vil du få en melding om at skjemaet er i bruk. Når du har sjekket ut, trenger du bare å klikke på skjemaets navn for å editere. Det som skjer nå er at skjemaet åpnes i design-modus, men du kan bli bedt om å taste inn brukernavn og passord. Dette er helt normalt og skyldes at InfoPath ikke deler sikkerhetsinformasjon med TUL SharePoint.\nNår skjemaet så åpnes, er det i read-only modus. Derfor må du lagre til TULShare før du begynner å editere. Grunnen til at du bør gjøre dette er at da har du en sikkerhetskopi på lokal disk. Velg derfor å lagre.\nNår alle endringer er gjort, så kan du lagre tilbake til TUL SharePoint. Velg Publiser fra Fil-meny. Så velger du Nettverksplassering, som vist i figuren under.\n Figur 39 - Nettverksplassering   Trykk Neste. Så skal du angi hvor du vil publisere skjemaet. Det vil være tilbake til TUL og skjemabiblioteket i Innholdsspesifikasjonen.\n Figur 40 - Publiseringsveiviser   Det som typisk vil stå i øverste feltet er:\nhttp://tul.altinn.basefarm.net/sites/\u0026lt;tjenesteeier\u0026gt;/\u0026lt;tj.kortnavn\\\u0026gt;/\u0026lt;tj.utg.kortnavn\u0026gt;/FormLibrary/Forms/\u0026lt;skjemanavn\u0026gt;.xsn  F.eks.\nhttp://tul.altinn.basefarm.net/sites/skd/RF1113/RF11132009/FormLibrary/Forms/RF1113.xsn\nEn måtene å finner fram til denne adressen på, er å velge Vis egenskaper og så høyreklikke på skjemanavnet velge Kopier snarvei. Dette limer du så inn igjen i InfoPath. Merk at dette er noe du kun trenger å gjøre en gang for hvert skjema/utgave. Klikk Neste og verifiser at samme bane og filnavn som i forrige skjermbilde står også her. Klikk Neste, og så Publisér. Nå lagres skjema tilbake i TUL og du kan klikke Lukk når dette er fullført.\nDet er viktig å påpeke at valget Rediger i Microsoft InfoPath, som finnes i kontekstmenyen til skjemaet, ikke skal benyttes. Dette valget støtter ikke åpning i designmodus eller SharePoint sin utsjekk/innsjekk-funksjonalitet.\nXSD-egenskaper Informasjon om dataformat (tidligere meldingsformat eller “spesifikasjon”) angis per InfoPath-skjema etter at det lastes opp. Du kan senere endre informasjonen ved å velge XSD-egenskaper fra kontekstmenyen til hvert enkelt skjema.\nDette er informasjon som benyttes for skjemahåndtering i SBL for å identifisere dataformatet entydig på tvers av utgaver og versjoner. Informasjonen brukes også til å identifisere felles datakilde i skjemasett.\nI tidligere versjoner av Altinn benyttet man alltid dataformat fra Oppgaveregisteret. Nå er løsningen gjort mer fleksibel, slik at dataformater fra flere leverandører kan benyttes. Derfor har feltene fått mer generelle navn enn tidligere.\nXSD-egenskapene består av XSD-leverandør, XSD-id og XSD-versjon. Til sammen identifiserer disse tre parametrene unikt XSD’en som er benyttet som hoveddatakilde i InfoPath, mao. dataformatet som skjemadata lagres på. Alle parametrene er obligatorisk for migrering av skjema. Hvis XSD-leverandør er Oppgaveregisteret eller SERES, vil disse parametrene populeres automatisk når skjema lastes opp.\nTilleggsegenskaper for skjema Når et skjema er ferdigutviklet i InfoPath, kan det defineres tilleggsegenskaper i TUL for å gi tjenesten ønskede egenskaper. Tilleggsegenskapene som kan legges inn, er avhengig av tjenestetypen. Sideegenskaper og innholdsreferanser er relevant for flere tjenestetyper og beskrives i dette kapitlet. Øvrige egenskaper beskrives under den enkelte tjenestetypen.\nSideegenskaper Under Sideegenskaper kan du tildele egenskaper til skjemaets visninger fra InfoPath. Egenskapene bestemmer hvordan en visning fra InfoPath skal benyttes i sluttbrukerløsningen. Dette er relevant for innsendings- og innsynstjenester.\nDe neste seksjonene angir hva som må angis for hver visning. For at en migrering av utgaven til SBL skal være vellykket, må sideegenskaper være komplett utfylt.\nSidenavn i ELMER-skjema Sidenavn gjelder innsendingstjenester der man som utgaveparameter har valgt visning i henhold til ELMER-retningslinjene. Navnet du angir skal være gjeldene for utgavens hovedspråk. Navnet kan inneholde norske bokstaver, og vil kunne oversettes i språkverktøyet. Navnet på siden vises i venstre kant av skjermbildet under utfylling i SBL, også kalt navigasjonsmenyen i SBL. Navnet vil deles ved mellomrom hvis det er langt, men det er verdt å tenke på at navnene ikke bør inneholde lange ord uten mellomrom. Hvor mange bokstaver et ord kan ha, vil avhenge av oppløsningen sluttbruker har på sin skjerm under utfylling. Det bør dog tae hensyn til at denne kan være så liten som 1024x768.\nSiderekkefølge i ELMER-skjema Rekkefølge gjelder innsendingstjenester der man som utgaveparameter har valgt visning i henhold til ELMER-retningslinjene. I InfoPath er det ikke mulig å definere rekkefølge/sekvens på sidene, men dette er nødvendig for å styre sluttbrukers utfylling. Det er derfor i sideegenskaper mulig å angi et unikt nummer for en visning, hvor prinsippet med stigende rekkefølge vil være gjeldene. Det vil ikke være mulig å velge samme nummer på to sider da det nummeret man velger vil byttes med den siden som allerede har gjeldene nummer. Ved åpning av sideegenskaper vil visningene være listet i rekkefølgene de befinner seg i skjemaet. Dette medfører at en visning tiltenkt utskrift eller kvittering kan ligge i listen før andre visninger tiltenkt utfylling. Det er da viktig at sekvens/rekkefølge tar hensyn til dette.\nDet er derimot viktig at siden som er satt til å være først i TUL, i InfoPath har egenskapen ”Angi som standardvisning” avkrysset. Dette gjøres på egenskaper for gitt view i InfoPath.\nVisningstype InfoPath har mulighet for å angi utskriftversjon for et skjema, men denne funksjonaliteten skal ikke benyttes, da det setter begrensninger for PDF-generering av visninger.\nDu kan velge mellom følgende visningstyper:\n Web: Dette vil være typen de fleste visninger har. Skjemaside skal vises til brukeren i SBL, for utfylling av en innsendingstjeneste, og for navigasjon og presentasjon av data i en innsynstjeneste. Denne typen blir også automatisk gjeldende for skjemaet i en meldingstjeneste.\n Utskrift: Angir at denne visningen skal benyttes ved generering av utskriftsformat i sluttbrukerløsningen. Dersom man ønsker utskrift basert på webvisning av skjema, skal man opprette så mange visninger som det er sider i skjema og kopiere og lime inn innholdet fra hver side til tilhørende visning for utskrift. Utskrift-visningene kan settes til å være read-only ved å klikke på Fil, så Sideegenskaper og krysse av for Read-only. Der kan man også sette formatet på side som skal skrives ut, samt at man kan se forhåndsvisning for utskriftsversjon.\n Kvitteringssammendrag (gjelder innsendingstjeneste): Vises til sluttbruker etter innsending. Kvitteringssammendrag opprettes ved at man lager ekstra visning og kaller den f.eks for Kvittering, definerer layout og legger deretter på de feltene som man ønsker å ha på kvitteringssammendraget. Man kan definere hjelpefelter og legge dem på utskriftsvisninger og på kvitteringen.\n Signering: Angir at denne visningen skal brukes som signeringsversjon. Hvis signeringsversjon er definert ,er det denne sluttbruker signerer for en innsendingstjeneste, og det er denne Altinn signerer ved arkivering av en innsynstjeneste. Denne visningstypen er tenkt brukt hvis tjenesteeier vil ekskludere informasjon ved signering.\n Sensitive opplysninger/SPO (gjelder innsendingstjeneste): Du velger denne visningstypen for en skjemaside som inneholder SPO. Alle feltene på denne siden vil krypteres ende-til-ende. Sluttbruker vil få informasjon om dette og mulighet for å låse opp med passord, hvis dette er satt som utgaveparameter. Merk at skjemasiden da bare må inneholde tekstbokser, ikke for eksempel nedtrekkslister og sjekkbokser.\n Signeringssammendrag (gjelder innsendingstjeneste): Vises til sluttbruker under signering. Signeringssammendrag opprettes ved at man lager ekstra visning og kaller den f.eks for Sammendrag, definerer layout og legger deretter på de feltene som man ønsker å ha på signeringssammendraget.\n Betalingssammendrag (gjelder innsendingstjeneste): Vises til sluttbruker i betalingssteget før bruker blir sendt videre til betalingsleverandøren. Dette kan brukes til å gi detaljerte opplysninger om hva betaling gjelder og/eller hvordan beløpet er regnet ut. Denne visningstypen vil bare bli vist på betalingssteget. Vil du at disse opplysningen skal vises på kvitteringen etter innsending, så må du legge det inn på kvitteringssammendrag. Vil du vise det begge steder må du ha både betalingssammendrag og kvitteringssammendrag. Betalings­sammendrag opprettes ved at man lager ekstra visning og kaller den for eksempel for Betalingssammendrag, definerer layout og deretter legger på de feltene som man ønsker å ha med.\n  For å gjøre det enklere å opprettholde riktig rekkefølge og sidetype i TUL så bør sidene i InfoPath gis navn som klart indikerer hva de skal brukes til: Web 1, Web 2 osv, Utskrift 1, Utskrift 2 osv og Kvittering.\nFiguren nedenfor viser skjermbilde av siden for sideegenskaper. For innsynstjeneste vil bare Visningstype være tilgjengelig.\n Figur 41 – Sideegenskaper   Innholdsreferanser Innholdsreferanser er en side i TUL der du kan definere referanser til utvalgte felter i InfoPath-skjema, for at det skal knyttes spesiell funksjonalitet til disse i SBL. Presentasjonsfelt brukes for innsendings- og innsynstjeneste, mens geografisk tilhørighet brukes bare for innsendingstjenester. Siden het tidligere Presentasjonsfelt.\nPresentasjonsfelt Presentasjonsfelt brukes i SBL for å skille flere innsendinger av samme utgave fra hverandre i meldingsboksen og i arkivet. Måten dette gjøres på er å vise det utfyller har skrevet i gitt(e) felt sammen med navnet på utgaven. Presentasjonsfeltene listes etter utgavenavnet og henter verdier som brukeren har oppgitt under utfylling av skjemaet. Naturlige presentasjonsfelt kan være f.eks. organisasjonsnummer, navn eller termin.\nI TUL velges presentasjonsfelt ved først å velge side. Rekkefølgen på de presenterende feltene kan endres. Det er mulig å oppgi maksimalt seks innholdsreferanser. Rekkefølgen vil være gjeldende i SBL hvor innholdsreferansen med ID 1 vil komme først etter utgavenavn, så ID 2 osv.\nDefinerte innholdsreferanser fjernes ved å klikke på Fjern.\nEksempel:\nTjenesten RR-0002 Årsregnskap for små, store og øvrige selskap kan benytte feltet Organisasjonsnavn som innholdsreferanser. I sluttbrukerløsningen vil ulike innsendinger av denne tjenesten bli listet med tjenestenavnet først og verdien i feltet Organisasjonsnavn bak, eksempelvis:\nRR-0002 Årsregnskap for små, store og øvrige selskap, Nordmanns advokatselskap\nRR-0002 Årsregnskap for små, store og øvrige selskap, Hansens Bygg og Håndverksselskap\n Figur 42 – Innholdsreferanser   Geografisk tilhørighet Det er mulig å definere roller i Altinn som gir tilgang til skjema som «tilhører» et bestemt geografisk område. Dette gjelder for tjenesteeiers arkiv. Tilhørighet bestemmes ved innholdet i utvalgte felt i skjema.\nDu kan spesifisere hvilke felt i skjema som inneholder geografisk informasjon ved å velge visning og felt for hhv. fylke, kommune og bydel. Det er mulig å angi kun fylke, fylke og kommune, eller alle tre. Det kommer an på hvor nyanserte roller det er behov for. I de fleste tilfeller vil du ikke definere geografiske referanser i det hele tatt.\nFor at geografiske referanser skal fungere i SBL, må innholdet i feltene være format på det standardiserte formatet \u0026ldquo;NO-KKKK nnnn\u0026rdquo;:\n Fylke: KK Kommune: KK Bydel: nnnn  Dette formatet bygges på eksisterende standard for fylke, kommunenummer og bydel. Bruk av NO-KK for fylke er en ISO-standard (3166), mens kommunenummer består av 2 ekstra siffer.\nFelter som overstyres av sluttbrukersystem ved komplett innsending Ved komplett innsending fra sluttbrukersystem skal følgende tre prinsipper gjelde:\n Altinn skal ikke endre på felter i skjemasettet som blir sendt inn av SBS. Altinn kan tilføye kalkulerte felter for felter som er unnlatt å sende inn. Skjemasett med feil skal stoppes av Altinn og innsending skal feile.  Tjenesteeier har mulighet til å fravike det tredje prinsippet ved å definere overstyrbare felter i TUL. For felter som spesifiseres her, vil verdi fra sluttbrukersystem aksepteres også ved avvik fra validering/kalkulering i Infopath. Avvik som normalt gir valideringsfeil, gir i stedet kun advarsal tilbake til sluttbrukersystem.\nHvis \u0026ldquo;kun XSD validering\u0026rdquo; er angitt under XSD-egenskaper, er det ikke nødvendig å spesifisere felter her. Overstyrte felter påvirker ikke utfylling i SBL, uavhengig om det er definert her eller under «XSD-egenskaper».\nHvis skjema har et attributt med navn SentFromEUS i namespacet my (@my:SentFromEUS), så vil det bli lagt inn verdien true i dette feltet hvis skjema er sendt fra sluttbrukersystem. Denne attributten kan benyttes til å ha ulik validering/kalkulering for innsending fra SBS og fra portal selv om det kanskje ikke er ønskelig vedlikeholdsmessig.\nTrekk ut data fra innsendelse Tjenesteeier har mulighet til å definere metadatafelter som kan brukes til å styre videre behandling av skjema etter de er mottatt fra Altinn. Metadatafeltene legges i en liste utenfor skjema-XMLen og kan så brukes direkte uten at man trenger å pakke ut og tolke hele skjema-XML-en for å finne den samme informasjonen. Metadatafeltene returneres som ShipmentMetadata av webservicemetoden GetDownloadQueueItems, og utnyttelse av definerte metadatafelt forutsetter derfor at tjenesteeier har valgt \u0026ldquo;Hente ved bruk av webservice (DownloadQueue)\u0026rdquo; under seksjonsoverskriften \u0026ldquo;Oversending\u0026rdquo;.\nTjenesteeier kan spesifisere hvilke data i skjema som skal trekkes ut ved å velge visning, felt og skrive inn et nøkkelnavn (metadatafeltnavn) som kan brukes til uthentelse senere. Når tjenesteeier har skrevet inn et nøkkelnavn og klikker seg ut fra feltet vil en ny rad dukke opp hvis skjemaside og felt er valgt. Hvor mange rader som er maksimalt mulig å oppgi, er spesifisert i beskrivelsen av feltet rett under seksjonsoverskriften \u0026ldquo;Trekk ut data fra innsendelse\u0026rdquo;\nDefinerte metadatafelter fjernes ved å klikke på Fjern.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/formidling/",
	"title": "Formidling",
	"tags": [],
	"description": "Formidlingstjenesten bruker Altinn til å overføre (store) filer fra en avsender til en eller flere mottakere.",
	"content": " En formidlingstjeneste er en tjeneste som bruker Altinn til å overføre (store) filer fra en avsender til en eller flere mottakere. Tjenesten kan brukes både med SFTP og web servicer. Altinn vil ikke lagre filene lenger enn det som er nødvendig for å overføre filene, basert på innstillinger du gjør. Overføringen er passiv, og det blir ikke gjort noe validering eller prosessering av filene som overføres.\nSpesifikasjon – formidlingstjeneste For en formidlingstjeneste må det som for øvrige tjenestetyper registreres utgaveparametre, og det er mulig å overstyre rettigheter.\nUtgaveparametre Enhver utgave må ha utgaveparametre. Unikt for en formidlingstjeneste er innstillinger for hvor lenge filene skal lagres og hvordan tilgang til utgaven kan gis.\nDet er to ulike parametre som vil avgjøre når filene skal kunne fjernes av slettejobber og dermed ikke lenger være tilgjengelige. Et valg forteller om filene skal slettes med en gang alle mottakerne har lastet ned filene. Det andre valget forteller hvor mange dager filene skal være tilgjengelige for nedlasting. Når denne fristen er passert vil filene slettes selv om ikke alle mottakerne har lastet de ned.\nTjenesteeierstyrt register er et sted der tjenesteeier kan styre hvilke brukere som skal ha adgang til tjenesteutgaven. Tjenesteutvikleren kan bestemme om dette registeret skal brukes eller ikke. Dersom registeret blir brukt vil det sammen med vanlige roller og rettigheter avgjøre hvem som har tilgang.\nFor sikkerhetsnivå er det bare mulig å velge nivå 1-3 for formidlingstjenester. Tjenesten vil bare være tilgjengelig via web service eller SFTP, og vil ikke kunne brukes gjennom portalen.\nOverstyr rettigheter Rettigheter trenger du bare å overstyre hvis den utgaven du utvikler har andre rettighetskrav enn de som allerede er satt på tjenestenivå. Hver utgave vil arve disse rettighetene når den migreres til SBL, og få med seg overstyringene i tillegg.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/innsending/",
	"title": "Innsending",
	"tags": [],
	"description": "Innendingstjenester brukes til å sende data fra Sluttbrukerløsningen eller fra sluttbrukersystemer til en etat/tjenesteeier.",
	"content": " Innendingstjenester er tjenester som brukes til å sende data fra Sluttbrukerløsningen eller fra sluttbrukersystemer til en etat/tjenesteeier. Innsendingstjenester kan instansieres i SBL av sluttbruker, dvs initialiseres som et element tilhørende en gitt avgiver, eller den kan sendes til sluttbrukers meldingsboks fra en etat.\n Figur 43 – Arbeidsflaten til en nyopprettet utgave av en innsendingstjeneste   Spesifikasjon - innsendingstjeneste For en innsendingstjeneste må det som for øvrige tjenestetyper registreres utgaveparametre, og det er mulig å overstyre rettigheter. I tillegg må du definere en prosessflyt, og du kan definere et skjemasett eller splitting av data som oversendes tjenesteeiere.\nUtgaveparametre Enhver utgave må ha utgaveparametre. Hvordan du registrerer disse, er beskrevet her.\nDownloadQueue Et av valgene man gjør for en innsendingstjeneste er valget av oversendingsmetode. Her kan tjenesteeier gjøre et valg mellom:\n La Altinn overføre innsendte tjenesteutgaver til tjenesteeiers mottakersystem ved bruk av angitt metode. Dette gir flere muligheter for overføringen men krever bestilling av grensesnitt hos drifsleverandør. Mottakersystem kan hente utgavene selv ved bruk av DownloadQueue web servicen.  Dersom en metode for overføring av innsendte tjenesteutgaver skal velges må en tjenesteeier først bestille et grensesnitt (oppsett av sendingsparametre, shipment definition) hos driftsleverandør. Dette gir stor fleksibilitet, og tjenesteeier kan da selv velge mellom tilgjengelige overførings protokoller og hyppighet for overføring (umiddelbart eller satsvis). Dette spesifiseres i bestillingsskjema. Det er for eksempel også mulig å benytte webservice til umiddelbar overføring av innsendte tjenesteutgaver, hvor tjenesteier er server og Altinn er klient. Et slikt system må kunne ta imot innkommende nettverksforbindelser, og dette medfører visse krav til sikkerhet og tilgjengelighet som er med på å heve terskelen for å ta i mot innsendte tjeneste utgaver.\nVed bruk av DownloadQueue vil klient- og tjener-rollene byttes om, slik at tjenesteeier opptrer som klient og selv tar initiativet til å hente innsendte tjenesteutgavedata fra Altinn. En slik løsning stiller mindre krav til tjenesteeierens system. Det er ikke mulig å bruke begge løsningene samtidig for en utgave, og det er heller ikke mulig å motta PDF kopi av innsendt tjenesteutgave ved bruk av DownloadQueue. DownloadQueue anbefales kun for mindre tjenesteordninger uten stort trykk ved innsendingsfrister. Dersom det er ønskelig å bruke DownloadQueue på større tjenesteordninger, må ASF kontaktes først.\nDelvis kopi Valget «Tillat delvis kopiering» endrer start-tjeneste prosessen til å inkludere et steg der sluttbruker kan velge å basere skjemaet på en tidligere kopi. Dersom sluttbruker velger et tidligere skjema, vil det oppføre seg som en «kopi fra arkiv»-instansiering (dvs. at alle kopierbare felter hentes fra det gamle skjema over i det nye). Dersom skjemautvikler har definert feltet PartialCopy i my namespacet (my:PartialCopy), vil dette være satt til true.\nSkjemautvikler kan legge på logikk via regler eller kode for å gjøre spesiell håndtering dersom «delvis kopi» er valgt, f.eks blanke ut enkelte felt eller oppdatere/beregne nye verdier basert på (det man må anta kommer fra) en tidligere kopi. Funksjonen i seg selv gjør ingen validering eller gir en garanti for at alle felt har verdi. Skjemautvikler må derfor ta høyde for de mulighetene sluttbrukeren har for å levere tall/tekst/blankt osv. når logikken utformes, også for utgaver som ligger tilbake i tid (som det kan kopieres fra).\nSe vedleggene for nærmere informasjon om hvordan man setter opp regler og kode i InfoPath.\nDet er ingen restriksjoner på hva og hvordan skjemautvikler benytter denne funksjonen.\nNB: Skjemalogikken må selv sette flagget til «false», slik at ikke logikken kjøres igjen neste gang skjema åpnes!\nDet mest hensiktsmessige er å benytte regelen «Form Load» eller metoden «FormEvents_Loading». Hvis man skal blanke verdier i en repeterende tabell og ikke ønsker at det skal ligge igjen tomme rader må dette gjøres i VSTA kode (se koden under), siden en regel-basert tilnærming ikke klarer å slette tomme rader.\n Figur 44 – Eksempel på valgmulighet i Sluttbrukerløsningen    Figur 44b – Eksempel på regelbasert håndtering av delvis kopi   Eksempel på kodebasert (VSTA) håndtering av \u0026ldquo;delvis kopi\u0026rdquo;:\nprivate void nullUt(string xmlRef) { XPathNavigator main = MainDataSource.CreateNavigator(); XPathNodeIterator nodesToDelete = main.Select(xmlRef, NamespaceManager); while (nodesToDelete.MoveNext()) { //nodesToDelete.Current.SetValue(string.Empty); // Denne er ikke god nok - valgfrie felt blir tilsynelatende obligatoriske etter utnulling //Hentet fra SettVerdi if (nodesToDelete.Current != null) { if (nodesToDelete.Current.MoveToAttribute(\u0026quot;nil\u0026quot;, \u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot;)) { nodesToDelete.Current.DeleteSelf(); } nodesToDelete.Current.SetValue(\u0026quot;\u0026quot;); //hvis verdien er blank må kanskje attributt xsi:nil=\u0026quot;true\u0026quot; legges til igjen. Avhengig av datatype if (string.IsNullOrEmpty(\u0026quot;\u0026quot;)) { // Feltet skal tømmes // Får man exception så skal ikke attributen legges til (feltet er obligatorisk) try { //node.CreateAttribute(\u0026quot;xsi\u0026quot;, \u0026quot;nil\u0026quot;, \u0026quot;http://www.w3.org/2001/XMLSchema-instance\u0026quot;, \u0026quot;true\u0026quot;); //Denne funker bare i Infopath Preview nodesToDelete.Current.ReplaceSelf(nodesToDelete.Current.OuterXml.Replace(\u0026quot;\u0026gt;\u0026lt;/\u0026quot;, \u0026quot; xsi:nil=\\\u0026quot;true\\\u0026quot;\u0026gt;\u0026lt;/\u0026quot;)); // Denne funker både i Infopath Preview og i SBL } catch (InvalidOperationException e) //gives warning \u0026quot;The variable 'e' is declared but never used\u0026quot; -\u0026gt; ignore { //do nothing } } } } }  Kvitteringstekst Utgaveparametrene er forhåndsutfylt med standard kvitteringstekster for informasjonstekst, kvitteringstekst i portal og kvitteringstekst i e-post. Informasjonstekst er teksten som blir vist på toppen etter signering/arkivering (øverste røde ramme på bildet under) i Sluttbrukerløsningen og kvitteringstekst i portal er teksten i høyre marg på samme side (ramme til høyre på bildet). Kvitteringstekst i e-post er teksten som vil stå i e-post som blir sendt som kvittering. Dersom standardtekstene ikke passer for ditt tilfelle kan du endre teksten for utgaven til en tekst du mener passer bedre.\n Figur 45 – Kvitteringstekstenes plassering i Sluttbrukerløsningen.   Betaling Innsendingsutgaver kan ta i bruk betalingsløsningen i Altinn dersom tjenesteeier har gjort denne tilgjengelig. Dersom betaling er tilgjengelig vil du se en egen seksjon på utgaveparametersiden der du kan sette opp betaling. Seksjonen vil ikke dukke opp dersom tjenesteeier ikke har betaling tilgjengelig.\n Betaling   For å bruke betaling på utgaven må «Bruk betaling» være valgt. Når dette er valgt vil feltene i betalingsseksjonen bli obligatoriske og må fylles ut. Dersom betaling ikke er valgt, kan ikke disse feltene fylles ut. Eventuelle verdier som måtte stå i feltene vil da bli fjernet ved innsjekking.\nOrdrenummer kan enten bli laget av skjemaet (InfoPath) eller av Altinn. Du velger denne dersom du har et skjema som genererer et ordrenummer. Har du valgt denne er det altså skjemaet sitt ansvar å legge inn ordrenummeret i et felt i skjemaet. Du står fritt til bruke hvilken metode du vil for å komme fram til ordrenummeret, så lenge det blir gjort tilgjengelig i et felt. Ordrenummeret må kun inneholde bokstaver eller tall, ingen spesialtegn.\nBetalingsleverandøravtale forteller hvilken avtale som skal brukes. Alternativene du har her blir bestemt av tjenesteeier, og er basert på de avtalene tjenesteeier har med ulike betalingsleverandører. Avtalene blir identifisert med formelen {Betalingsleverandørnavn} – {merchant id}.\nBetalingsmetoder er de ulike metodene brukeren kan bruke for å betale via betalings­leverandøren. Dette er for eksempel «Visa» eller «MasterCard». Valg av betalingsmetoder er avhengig av hva som er definert på den betalings­leverandør­avtalen du velger. Den delen vil derfor kunne endre seg når du velger en avtale i nedtrekkslista.\nDersom avtalen ikke tillater begrensing av betalingsmetoder vil du ikke få opp dette valget. Alle betalingsmetoder som avtalen tillater vil i så fall automatisk bli tillatt.\nFor avtaler som tillater begrensing vil du få opp en avkryssingsboks for hver av de betalingsmetodene som avtalen tillater. Du må da sette kryss for alle de betalings­metodene du vil godta for utgaven. Dersom du har fått dette valget på en avtale, må du velge minst en betalingsmetode.\nDe fire XPath-parameterene brukes til å gi detaljer om det skjemaet som skal brukes på utgaven. Meningen med disse er å fortelle hvilke felter i skjemaet som skal inneholde informasjon om betaling. Du skal fylle inn en XPath som vil gi en unik sti til feltet.\nSum-feltet i skjemaet skal inneholde den summen som skal betales. Skjemaet har ansvar for å fylle ut rett sum i dette feltet, slik at betalingsløsningen i Altinn kan finne korrekt beløp som sluttbrukeren må betale. Dette feltet kan brukes til å ha en betinget betaling på utgaven. For å få til dette må du ha en logikk som setter sum-feltet til «0» dersom betaling ikke skal utføres. Motsatt må sum-feltet få et beløp større enn 0 for å sørge for at Altinn vil kreve betaling på utgaven.\nFeltet for beskrivelse skal inneholde den teksten som skal vises til sluttbrukeren som forklaring for betalingen inne i løsningen til betalingsleverandøren.\nOrdrenummer-feltet er det feltet som skal ha ordrenummeret for betalingen. Avhengig av valget gjort i «Ordrenummer generes av skjema» skal dette feltet enten fylles ut av skjema, eller så skal Altinn legge inn ordrenummer i dette feltet. Dersom du velger at skjema genererer ordrenummer, så må du sørge for at skjema legger dette inn i feltet.\nTransaksjons-id er en id som blir generert av betalingsleverandør ved betaling. Dette er et felt som skjemaet må ha for å kunne ta imot denne id-en. Feltet skal ikke fylles ut av skjema.\nFor at betaling skal fungere må du også velge en prosessflyt som inneholder et betalingssteg.\nOverstyr rettigheter Rettigheter trenger du bare å overstyre hvis den utgaven du utvikler har flere signeringssteg, eller hvis den har andre rettighetskrav enn de som allerede er satt på tjenestenivå. Hver utgave vil arve disse rettighetene når den migreres til SBL, og få med seg overstyringene i tillegg.\nProsessflyt Prossessflyt kan defineres for en innsendningstjeneste og angir hvilken flyt tjenesten skal følge i SBL. Med dette menes at man velger hvilke steg tjenesteeier vil at utgaven skal igjennom hos utfyller. F.eks. vil en prosessflyt med signeringssteg tvinge utfyller til å måtte signere skjemaet før den kan sendes inn og arkiveres.\nVelge mal På parametersiden Prosessflyt kan du definere en prosessflyt basert på en prosessflytmal.\nDet finnes to typer prosessflytmaler du kan velge mellom:\n Felles maler tilgjengeliggjør generelle maler som alle tjenesteeiere kan benytte i nedtrekkslisten. Disse er tomme. Tjenesteeiers maler - tilgjengeliggjør maler som allerede er tilpasset tjenesteeier i nedtrekkslisten. Disse kan være delvis eller ferdig utfylt.  Dette velges ved hjelp av radioknappene på toppen. Valget vil påvirke hvilke maler som er tilgjengelig i nedtrekkslisten. For å benytte en gitt mal trykker man på knappen Bruk Mal.\n Figur 46 – Prosessflyt; valg av mal   Stegene en prosessflyt kan bestå av, er utfyllingssteg, signeringssteg, betalingssteg og innsendingssteg. Det finnes flere typer signeringssteg: Enkelt, enkelt/betinget og brukerstyrt. Et betinget signeringssteg vil bare gjennomføres hvis en bestemt betingelse er oppfylt. I et brukerstyrt signeringssteg definerer du hvor mange signaturer som skal innhentes, og så vil brukeren bli bedt om å identifisere de aktuelle brukerne som skal signere.\nDu velger hvilke steg tjenesten skal inneholde ved å velge en mal som inneholder de rette stegene. Klikk på Bruk mal for å velge ønsket mal.\nP.t. finnes det ni felles prosessflytmaler tilgjengelig i TUL:\n Utfylling og innsending Utfylling og signering Utfylling og betinget signering Utfylling og dobbel signering Utfylling og betinget dobbel signering Betaling Utfylling og betaling Utfylling, betaling og signering Utfylling, signering og betaling  Nye prosessflytmaler settes opp i XML, noe som kan gjøres av tjenesteeiere. Dette er nødvendig for å ta i bruk ny versjon 2-funksjonalitet knyttet til signering. Se prosessflytmaler for informasjon om hvordan nye maler lages og tilgjengeliggjøres i TUL.\nBruke mal For hvert steg i prosessflyten kan du sette parametre som bestemmer hvordan hvert enkelt steg i flyten skal gjennomføres i sluttbrukerløsningen. Hvilke parametre som fremkommer, avhenger av stegtypen. Noen eksempler fra signeringssteg:\n Sikkerhetsnivå: Kan settes per steg i prosessflyten og overstyrer sikkerhetsnivået for utgaven for det enkelte steget. Signeringstekst: Det er mulig å angi en signeringstekst som vises for sluttbruker på signeringssiden. Gjelder per signeringssteg. Obligatorisk signering: Definerer om sluttbruker a) må signere på hovedskjema og alle skjemavedlegg, b) fritt kan velge å signere på enkeltskjema, eller c) kan velge innenfor de skjema som ikke er markert med obligatorisk signering på skjemasett-siden. Har ikke signert tidligere: Settes til ”ja” hvis signaturen som innhentes i steget må komme fra bruker som ikke har signert tidligere i arbeidsflyten. Antall signaturer: Gjelder brukerstyrt signering. Angir minimum antall signaturer som skal innhentes i steget; sluttbruker kan velge et større tall. Unike signaturer: Gjelder brukerstyrt signering. Settes til ”ja” hvis innhentede signaturer i steget må komme fra forskjellige brukere.   Figur 47 – Prosessflyt; eksempel på parametre.   Hvis utvikler setter sikkerhetsnivå til 2 på en utgave av en innsendingstjeneste og setter sikkerhetsnivå til 3 på signeringssteg så vil det i praksis bety at sluttbruker får kjørt gjennom tjenesten på nivå 2, men i det øyeblikket sluttbruker trykker på signeringsknappen så blir han/hun tvunget til å logge inn på ny med en innloggingsmetode med sikkerhetsnivå 3.\nBetinget signering betyr at man kan avgjøre under utfylling om bruker må signere på skjema eller ikke, ved å sjekke inntastet verdi i et felt mot en gitt grenseverdi.\nFor prosessflytene som inneholder betinget signering, vil det på signeringssteget være noen ekstra parametere:\n Betinget felt: Her angis xPath til feltet som det skal sjekkes mot. Operator: Angir hvordan man skal sjekke grenseverdi mot felt. Grenseverdi: Angir hvilken verdi det betingete feltet skal matche iht operatoren.  F.eks. hvis man i et skjema vil at utfyller skal slippe å signere hvis han eller hun sender inn skjema for en bedrift som har under 500.000 kr i omsetning, kan verdiene være som følger:\n   Betinget felt Operator Grenseverdi     /skjema/grp_omsetning/AarligOmsetning \u0026gt; 500000    Skjemasett Et skjemasett er en hierarkisk samling av skjemaer som inngår i en innsendingstjeneste. Her bestemmer du hvilke underskjemaer som inngår i utgaven, hvor utgaven inneholder hovedskjemaet. Et skjemasett kan bygges basert på de skjemaene som tilhører gitt tjenesteeier. Det kan ikke velges underskjema fra samme tjeneste som utgaven du definerer tilhører.\nPå parametersiden Skjemasett er alle tjenesteeiers skjema listet med tjenestens kortnavn, utgavens kortnavn, informasjon om hvorvidt skjemaet er definert som hovedskjema eller ikke, versjonsstatus og produksjonsstatus sammen med en lenke (Legg til) for å legge til skjemaet i skjemasettet. Det er viktig å merke seg at man kun velger å benytte skjemaet og skjemaets parametre, være seg preutfylling, sideegenskaper etc fra utgaven man velger i listen. Disse dataene vil inngå i hovedskjemaets utgave ved en migrering. I forhold til i SUM (forgjengeren til TUL) er det derfor ikke nødvendig å migrere underskjema før hovedskjema. Underskjema vedlikeholdes derfor i sin egen utgave.\nNår et skjema blir valgt, legges det til en liste der tjenesteutvikler kan konfigurere egenskaper for valgte underskjema ved å sette følgende parametre:\n Parameteren Sluttbruker kan legge til manuelt vil gjøre det mulig for sluttbruker selv å legge dette skjema inn som underskjema. Satt som default valg i TUL. Parameteren Maks ett vil gjøre det umulig å legge til mer enn én forekomst av dette skjema for sluttbruker i SBL. Satt som default valg i TUL. Parameteren Inkluder i felles datakilde fører til at felter i underskjema blir tilgjengelig for hovedskjema. Satt som default valg i TUL. NB! Ved bruk av regelmotor er ikke dette nødvendig Parameteren Bruk felles datakilde betyr at underskjema vil få tilgang til felter fra andre utvalgte skjema i skjemasettet. NB! Ved bruk av regelmotor er ikke dette nødvendig Parameteren Obligatorisk signering vil gjøre det obligatorisk for sluttbruker å signere dette skjema, dersom signeringssteget i arbeidsflyten angir at signeringkrav settes på skjemanivå (dvs. avhengig av denne parameteren).  På skjemasett-siden ligger det også en parameter som styrer obligatorisk signering for hovedskjema, ref. ovenfor.\nEt skjema kan slettes fra skjemasettet i etterkant ved å trykke på lenken Fjern i listen over skjemaer som lagt til.\n Figur 48 – Skjemasett   Ved åpning av skjemasettsiden vil viste utgaver være sortert alfabetisk på utgave-kortnavn.\nFelles datakilde\nFelles datakilde er en funksjon som tilgjengeliggjør ekstra datakilder i InfoPath-skjemaet. Man kan dermed benytte strukturen fra andre skjema og få eksempelvis verdioverføringer innad i et skjemasett.\nDet vil ikke være mulig å enhetsteste verdioverføringer. Dvs, man kan ikke teste en verdioverføring fra et underskjema til hovedskjema i InfoPath preview-modus.\nFelles datakilde genereres ved hjelp av Generér felles datakilde-knappen. Det er verdt å merke seg at siden et underskjema kan være del av flere skjemasett, vil det kunne forekomme flere datakilder i skjemaet enn det som er nødvendig. Disse kan, hvis ønskelig, slettes ved å navigere til Datakilde i hjelpefanen i InfoPa th, deretter velge Behandle datatilkoblinger og deretter markere den man vi slette og velge Fjern.\nEn god regel vil være å fjerne datakoblinger fra en felles datakilde, før en ny opprettes. Dette er fordi at i enkelte tilfeller vil man kunne få en ”sirkulær” datakilde, hvor felter kan referere til seg selv.\nFelles datakilde vil finnes i skjemaet som en sekundær datakilde. Dermed kan man velge å benytte felter fra underskjemaet i kalkyler, valideringer o.l. i hovedskjemaet. Disse feltene hentes fra InfoPath sin datakilde-meny på samme måte som for hovedkilden.\nDet er også mulig å benytte egendefinerte felter og altinn-namespace felter i felles datakilde.\nSplitt av data Ved innsending av et skjemasett sendes data registrert av sluttbruker i SBL til tjenesteeier. Splitt av data tilbyr en mer fleksibel håndtering av disse dataene ved å angi at alle eller deler av dataene skal distribueres til en eller flere andre tjenesteeiere.\nDet må defineres en splitt for hver tjenesteeier som skal motta data, og for hvert skjema i skjemasettet som skal avgi data til denne tjenesteeieren. Du kan enten velge å sende hele skjemaet, eller bare deler av det. Velger du «Send hele skjemaet», så vil alle feltene i skjemaet bli sendt over i denne splitten. Dersom du bare vil sende deler av skjemaet må du lage en XSLT-fil som mapper felter fra skjemaets XSD. Denne filen må du lage, for eksempel ved bruk av Visual Studio, før splitten kan registreres i TUL. Splitten registreres i TUL ved å laste opp XSLT-filen. Merk at dersom du har valgt å sende hele skjemaet, så vil opplastingskontrollen være deaktivert. Du må altså velge mellom å sende hele skjema, eller å bare sende deler ved hjelp av XSLT-fil.\nI tillegg må du fortelle hvilken tjenesteeier som skal motta dataene, hvilken oversendelsesmetode som skal brukes og hvilket skjema splitten skal hente data fra. Hvis en tjenesteeier skal motta flere splitter fra samme skjemasett, må oversendelsesmetoden være den samme. Du må da definere en ny splitt for hvert skjema som skal sendes.\n Figur 49 - Definisjon av datasplitt   Ved å trykke på knappen Legg til vil splittdefinisjonen legges til i en liste lengre ned på siden. Splitten kan slettes fra listen ved å klikke på lenken Slett.\nMetadatafiler En innsendingstjeneste kan benytte egne metadatafiler for å skreddersy tjenesten i SBL. På metadatasiden kan man laste opp metadatafiler som inneholder informasjon om hvordan skjemaene skal valideres og hvordan verdier kalkuleres og overføres mellom skjemaer. Man kan for eksempel velge om validering og kalkulering skal gjøres gjennom Infopath eller Altinns egen regelmotor ARE.\nARE regelfiler kan inneholde både valideringer og kalkuleringer. SBL har standardfunksjonalitet for å utnytte disse, såfremt filen overholder definerte formatkrav. Ved bruk av ARE må også filen inneholde definisjonen på alle reglene som skal brukes. For hjelp til å lage ARE-regelfiler se vedlegg om regelmotor.\nKun ARE er definert som standard metadatafiltype, men man kan også bruke andre metadatatyper om utgaven benytter tilpasset visning/programlogikk i SBL som utnytter disse filene.\nDet kan bare lastes opp én fil av hver metadatatype. Ved opplasting av ny fil av samme type, overskrives den eksisterende.\n Figur 50 - Metadatafiler   Filvedlegg  Figur 51 - Filvedlegg-siden   På filvedleggsiden avgjør du om det skal være tillatt å laste opp filvedlegg i tjenesteutgaven eller ikke. De andre valgene på denne siden vil ikke være tilgjengelige før du har valgt å tillate filvedlegg.\nFilvedlegginnstillinger Innstillinger for de binære filvedleggene. Disse tre valgene lå tidligere på utgaveparametersiden.\n Tillat vedlegg - Angir om sluttbruker kan laste opp egne filer som vedlegg til innsendingstjenesten. Satt som default valg i TUL. Kryptér binære filer - Angir om binære filvedlegg skal krypteres. Deaktiveres hvis «Tillat vedlegg» ikke er valgt. Kryptering kan ikke benyttes samtidig med vedleggstyper. Nye filvedlegg kan lastes opp under signering - Angir om bruker i SBL kan laste opp binære vedlegg etter utfylling, under signering. Alle filvedlegg har en begrensning på 10 MB.  Vedleggstyper For å bruke en eller flere vedleggstyper må tjenesteutvikleren gå inn på «Filvedlegg» fra tjenesteutgavearbeidsflaten. På denne siden kan du bestemme om filvedlegg skal være tillatt eller ikke. Dersom du tillater filvedlegg, men ikke velger noen vedleggstype, vil det være de globale innstillingene for filvedlegg som vil gjelde. Velger du derimot en eller flere vedleggstyper, vil det være innstillingene i de vedleggstypene du har valgt som vil gjelde. Om tjenesteutgaven har vedleggstyper vil sluttbruker måtte velge en av de for hver fil han vil laste opp.\nFor å legge en vedleggstype til en tjenesteutgave velger du rett vedleggstype fra nedtrekksmenyen «Vedleggstyper». Når du velger en vedleggstype vil du få opp regler som er definert for denne. For å ta den i bruk trykk på «Legg til»-knappen. De vedleggstypene du har valgt vil dukke opp i listen nederst på siden.\nFor å fjerne en vedleggstype fra tjenesteutgaven trykk på «Slett» bak den vedleggstypen du vil fjerne. Dette vil fjerne vedleggstypen fra denne tjenesteutgaven.\nFor å lagre endringer du har gjort må du sjekke inn siden.\nSe mer informasjon om vedleggstyper.\nInnhold – innsendingstjeneste Innholdet i en innsendingstjeneste er informasjonen som ligger i InfoPath-skjema. For at innholdet skal vises og behandles riktig i Altinn, er det nødvendig å registrere en del tilleggsinformasjon om hvordan det skal oppføre seg. Du må definere sideegenskaper, og du kan registrere innholdsreferanser. Andre eksempler er preutfylling, SKD betalingsinformasjon og hjelpetekster. For at skjema og tilleggsinformasjonen skal spille sammen, må skjema utvikles etter bestemte retningslinjer. Dette kapitlet gir en oversikt over hvordan du gjør dette, og refererer til vedlegg for detaljert informasjon og eksempler.\nSkjema Se InfoPath-skjema i Altinn for beskrivelse av prinsipper rundt skjemabibliotek, skjema og visning, samt inn-/utsjekking og publisering av skjema.\nEn tjenesteutgave av en innsendingstjeneste må ha ett, og bare ett, hovedskjema. Dersom tjenesten skal ha underskjemaer må underskjemaene defineres som egne tjenester og utgaver, og deretter knyttes opp mot tjenesten gjennom et skjemasett.\nI skjemaet bestemmes skjemaets layout, overskrifter/ledetekster, datafelt, kalkyler, valideringsregler og tilhørende feilmeldinger. Du kan også legge inn Hjelp-knapper som gir tilgang til hjelpeinformasjon under utfyllingen i SBL.\nFølgende vedlegg er relevante:\n Vedlegg A: Skjemautvikling i InfoPath inneholder en innføring i skjemautvikling i InfoPath for bruk rettet mot TUL. Vedlegg B: Utforming av brukergrensesnitt for skjema beskriver utvikling av brukergrensesnitt i InfoPath i forhold til presentasjon i SBL. Vedlegg C: Utforming av brukervennlige tjenester gir veiledning i utforming av brukervennlige og tilgjengelige tjenester.  Sideegenskaper Du må definere sideegenskaper for at det skal være mulig i SBL å vite for eksempel hvilke InfoPath-visninger som skal vises for utfylling, og hvilke som skal brukes for utskrift. Dette er beskrevet under fellesfunksjonaliteten sideegenskaper.\nInformasjonen som angis under Sideegenskaper er avgjørende for at skjema skal kunne presenteres og fylles ut i SBL iht. ELMER-retningslinjene.\nSporvalg Sporvalg er en funksjonalitet bestemmer hvilke sider som presenteres for sluttbrukeren avhengig av hva bruker fyller ut i skjema. Dette muliggjør å tilpasse skjemaet til flere formål.\nEt sporvalg består av flere spor. En utgave kan ha flere sporvalg, på ulike sider, det skal dog ikke være mer enn ett sporvalg pr side. Skal man ha flere sporvalg på samme side, må verdier mellomlagres i uttrykksbokser.\nEksempel:\nDersom spørsmålet «Er du gift?» ligger på side 1 i et skjema kan svaret medføre to ulike spor avhengig av om sluttbrukeren svarer «Ja» eller «Nei».\n Dersom sluttbruker svarer «Ja» skal skjemaside 2 «Informasjon om ektefelle» fylles ut før skjemaside 3 og 4. Dersom sluttbruker svarer «Nei» skal ikke skjemaside 2 «Informasjon om ektefelle» bli vist i det hele tatt, men sluttbruker skal tas direkte til skjemaside 3 og 4.  For å definere sporvalget videre i TUL, velg Sporvalg under område Innholdsspesifikasjon på utgavens arbeidsflate. Definer et spor ved å velge side og felt, og skriv inn verdi. Velg deretter hvilke sider som skal vises for denne verdien. Alle spor med felles side og felt vil danne et sporvalg. Figuren under viser to spor i samme sporvalget.\n Figur 52 – Sporvalg   Hvis du endrer siderekkefølge under Sideegenskaper, vil dette kunne påvirke tidligere definerte sporvalg. Et sporvalg som er blitt ugyldig på grunn av endret siderekkefølge, vises innrammet i rødt, og en tooltip forklarer hva som har skjedd. Du kan da slette sporvalget og definere det på nytt med den nye siderekkefølgen, alternativt gå til Sideegenskaper og endre til opprinnelig siderekkefølge.\nInnholdsreferanser Presentasjonsfelt hjelper sluttbruker å finne skjemaet i SBL, referanser til geografisk informasjon i skjema gjør det mulig å styre tilgang til skjema i tjenesteeiers arkiv basert på avgivers tilhørighet, og metadatafelter brukes til å definere felter som kan trekkes ut etter skjema er sendt fra Altinn.\nPreutfylling Med preutfylling menes at felter i et skjema kan være forhåndsutfylt når skjemaet åpnes i sluttbrukerløsningen. Det er tre ulike måter å preutfylle på:\n Skjemaet leveres ferdig preutfylt fra tjenesteeier til Altinn. Sluttbruker vil se et utfylt skjema i sluttbrukerløsningen med data som tjenesteeier/etat har bestemt. Tjenesteeier sender prefilldata som nøkkel/verdi-par, i kombinasjon med avgiver-ID. Nøkkelen identifiserer skjema og felt (xPath) der verdien skal fylles inn. Her vil felt bli preutfylt hvis de matcher xPath som tjenesteeier/etat har angitt. Dette vil tilsvare preutfyllingen av spesifikke orid’er i Altinn 1. Preutfyllingsdata hentes fra sentrale registre og fylles ut i gitte felter. Tjenesteutvikler bestemmer hva som skal preutfylles i de enkelte feltene. Data til disse feltene hentes fra registeret i sluttbrukerløsningen ved instansiering av skjema.  I TUL må preutfyllingssiden fylles ut dersom dersom tjenesten skal benytte preutfyllingsmåte 2 eller 3.\nNøkkel/verdi-preutfylling Huk av for Tillat nøkkel/verdi preutfylling dersom tjenesteeier skal kunne sende inn prefilldata som nøkkel/verdi-par for denne tjenesten. Det er viktig at Xpath som ligger lagret i SBL må matche skjemaets felter sin xPath for at de skal forhåndsutfylles ved nøkkel/verdi preutfylling.\nRegisterpreutfylling Registerpreutfylling går ut på at man velger hvilke felt som skal inneholde data fra hvilke registerfelt. Dataene som vises er da basert på hvilken avgiver som utfyller sender inn for.\nVelg register, skjemaside, skjemafelt, kontekst og registerfelt for de feltene som skal hentes fra sentrale registre. Det legges til en ny blank linje i preutfyllingsbildet for hver linje som registreres, slik at man kan registrere så mange felt man vil.\nDet finnes tre registre, og hver av registrene har egne kontekster. Kontekster er på bakgrunn av hva man skal hente ut data\n   Registerforkortelse Registernavn Kontekst     DSF Det sentrale folkeregister Privatperson   ER Enhetsregisteret Enhet, juridisk enhet og valgt org.nummer   DLS Deltakerlignende selskap Ingen    Merk: DLS har p.t. ingen prefillfelter tilgjengelig.\nForskjell på kontekster i enhetsregisteret\n   Bedrift A: Om valgt organisasjonsnummer er en bedrift vil feltet bli fylt med data for bedriften.\nB: Om valgt organisasjonsnummer er en juridisk enhet vil ikke feltet bli fylt ut.\n     Juridisk enhet A: Om valgt organisasjonsnummer er en juridisk enhet blir feltet fylt med data for den juridiske enheten\nB: Om valgt organisasjonsnummer er en bedrift blir feltet fylt med data for bedriftens juridiske enhet\n   Valgt org.nummer Blir fyllt med data for valgt organisasjonsnummer, uavhengig om organisasjonsnummer representerer juridisk enhet eller bedrift.     Mulige preutfyllingsvalg:\n   Enhetsregisteret   TUL SBL     Kontekst Norsk visningsnavn Engelsk visningsnavn Tabell Kolonne   Juridisk enhet Organisasjons­nummer Organisation number REG_Unit OrgNumber_AK   Juridisk enhet Navn Name REG_Unit UnitName   Juridisk enhet Adresse Address REG_Unit AdressPostAddress   Juridisk enhet Postnummer Postal code REG_Unit PostalCodeMail_FK   Juridisk enhet Poststed Postal district REG_Postal­Code City   Juridisk enhet Forretnings­adresse Business address REG_Unit BusinessAddress   Juridisk enhet Forretnings­postnummer Postal code (business address) REG_Unit PostalCodeBusiness_FK   Juridisk enhet Forretnings­poststed Postal district (business address) REG_Postal­Code City   Juridisk enhet Telefon­nummer Phone number REG_Unit TelephoneNumber   Juridisk enhet Mobiltelefon­nummer Mobile phone number REG_Unit MobilePhone   Juridisk enhet Faxnummer Fax number REG_Unit Fax   Juridisk enhet Epost Email address REG_Unit EMailAddress   Juridisk enhet Internett adresse Web address REG_Unit InternetAddress   Bedrift (Unit) Organisasjonsnummer Organisation number REG_Unit OrgNumber_AK   Bedrift (Unit) Navn Name REG_Unit UnitName   Bedrift (Unit) Adresse Address REG_Unit AdressPostAddress   Bedrift (Unit) Poststed Postal district REG_Postal­Code City   Bedrift (Unit) Postnummer Postal code REG_Unit PostalCodeMail_FK   Bedrift (Unit) Telefonnummer Phone number REG_Unit TelephoneNumber   Bedrift (Unit) Mobiltelefonnummer Mobile phone number REG_Unit MobilePhone   Bedrift (Unit) Faxnummer Fax number REG_Unit Fax   Bedrift (Unit) Epost Email address REG_Unit EMailAddress   Bedrift (Unit) Internett adresse Web address REG_Unit InternetAddress   Valgt org. nr. Organisasjons­nummer Organisation number REG_Unit OrgNumber_AK   Valgt org. nr. Organisasjonsform Entity type REG_Unit UnitType   Valgt org. nr. Navn Name REG_Unit UnitName   Valgt org. nr. Adresse Address REG_Unit AdressPostAddress   Valgt org. nr. Postnummer Postal code REG_Unit PostalCodeMail_FK   Valgt org. nr. Poststed Postal district REG_Postal­Code City   Valgt org. nr. Forretningsadresse Business address REG_Unit BusinessAddress   Valgt org. nr. Forretningspostnummer Postal code (business address) REG_Unit PostalCodeBusiness_FK   Valgt org. nr. Forretningspoststed Postal district (business address) REG_Postal­Code City    Folkeregisteret\n   Norsk visningsnavn TUL) Engelsk visningsnavn (TUL) Tabell (SBL) Kolonne (SBL)     Fødselsnummer Personal ID number REG_USER FNumber_AK   Navn Name REG_USER Name   Fornavn First name REG_USER FirstName   Etternavn Surname REG_USER LastName   Adresse Address REG_Alternative­Address­Line AddressLine1 + AddressLine2   Postnummer Postal code REG_Alternative­Address­Line PostalCode_FK   Poststed Postal district REG_PostalCode City   Kommune­nummer Municipal Number REG_Municipal MunicipalNumber_AK   Kommunenavn Municipal Name REG_Municipal MunicipalName   Mellomnavn Middle Name REG_USER MiddleName   Gatenavn (bosted) Street Name REG_Street StreetName   Stedsnavn (bosted) Place Name REG_Property AddressName   Husnummer (bosted) House Number REG_AddressLine HouseNumber   Husbokstav (bosted) House Letter REG_AddressLine HouseLetter     Figur 53 - Preutfylling   Mottaksdefinisjon Under mottaksdefinisjon kan man angi hvilket felt i skjemaet som skal styre hvor skjemaet havner etter at det er arkivert i Altinn.\nSKD betalingsinformasjon Betalingsinformasjonen er spesialtilpasset skjemaordningene MVA og Terminoppgaven (FLT) til Skatteetaten (SKD). Det er altså ingen generell løsning som kan brukes av alle.\nDen må ikke bli forvekslet med den generelle betalingsløsningen.\nDersom en innsendningstjeneste skal kunne generere betalingsinformasjon i sluttbrukerløsningen angir du her hvilke felter i innsendingen som skal benyttes for de ulike betalingsdetaljene.\nDu kan velge gjenbrukbar logikk for generering av betalingsinformasjon i et nedtrekksliste for Betalingslogikk øverst på siden. Hvilke felter som er påkrevd, avhenger av hvilken betalingslogikk som er valgt. Det vil derfor ikke i TUL valideres og må kjennes av den enkelte skjemautvikler basert på logikken som velges.\n Figur 54 – SKD betalingsinformasjon   Hjelpetekster Til hvert felt i et skjema laget i InfoPath kan det knyttes en hjelpetekst. Hjelpteksten vises iht. ELMER-retningslinjene i høyre side i SBL. En hjelpetekst i TUL knyttes ikke direkte til et felt, men til en bildeknapp (PictureButton) som må plasseres i nærhet av feltet den skal tilhøre. Denne bildeknappen må ha et navn som begynner på HelpText_ for å kunne gjenkjennes i TUL. For hver bildeknapp i skjemaet som har et navn som begynner på HelpText_ vil det være mulig å definere én tekst.\nFørst oppretter du hjelpeknapper i InfoPath for enkeltfelter og overskrifter som skal ha hjelpetekster. Se Vedlegg A: Veiledning i skjemautvikling i InfoPath for en beskrivelse av hvordan dette gjøres.\nI TUL kan du velge å se alle hjelpeknappene i skjemaet eller velge side i nedtrekkslisten for å begrense innholdet i listen. En hjelpetekst bør inneholde en begrenset mengde tekst for ikke å ”flyte ut” i SBL. Begrensningen er dog ca. 5000 tegn, inklusive mellomrom og spesialtegn. Det er verdt å merke seg at dette er inkludert HTML-formatering.\n Figur 55 - Hjelpetekster   Hjelpetekst nivå 1 og nivå 2\nDet er hensiktsmessig å begrense innholdet i hjelpeteksten som vises i sluttbrukerløsningen til så kort og konsist som mulig, men der hvor det ikke er hensiktsmessig eller mulig bør man tilstrebe å vises informasjon fra eksterne kilder i et eget vindu. Hjelpetekst som vises i sluttbrukerløsningen kalles Nivå 1, mens ekstern hjelpetekst kalles Nivå 2.\nFor å gjøre dette må man legge inn en lenke i hjelpeteksten i TUL. Dette gjøres i to steg via teksteditoren:\n(tekst innenfor $ vil variere)\n Plassér markøren i hjelpeteksten der du vil at lenken skal vises. Klikk på lenke-ikonet og tast inn url’en til den eksterne hjelpeteksten. Bytt til kildevisning av teksten ved å klikke på kilde-ikonet  Finn HTML-koden til lenken, angitt som \u0026lt;a href=\u0026quot;http://$adresse$\u0026quot;\u0026gt;$Lenke$\u0026lt;/a\u0026gt; Legg til target=\u0026rdquo;_blank\u0026rdquo; slik at HTML-koden blir \u0026lt;a href=\u0026quot;http://$adresse$\u0026quot; target=\u0026quot;_blank\u0026quot;\u0026gt;$Lenke$\u0026lt;/a\u0026gt;  Dette vil gjøre at lenken åpnes i nytt vindu.\nInnsendingstjeneste fra SBS Prinsipper Ved innsending fra sluttbrukersystem gjelder i utgangspunktet tre prinsipper:\n Altinn skal ikke endre på skjemasettet som ble sendt inn av SBS. Altinn kan imidlertid tilføye kalkulerte felter som SBS unnlater å sende inn. Skjemasett med feil skal i utgangspunktet stoppes av Altinn og innsending skal feile.  Det andre prinsippet åpner for at SBS kan benytte seg av kalkyler og prefill som er bygget inn i skjemasettet (ved å unnlate å sende inn de aktuelle feltene). Altinn vil da tilføye feltene med beregnet verdi. SBS får en kvittering som indikerer alle felter som ikke ble sendt inn fra SBS, men ble tilføyd av Altinn og sendt videre til tjenesteeier. Feltverdien (fra kalkyle eller prefill) er også angitt i kvitteringen.\nTjenesteeier har mulighet til å fravike det tredje prinsippet ved å definere overstyrbare felter.\nOverstyrbare felter Dersom det skal tillates at SBS sender inn en verdi som fraviker fra prefill eller kalkyle-verdi må feltet defineres som overstyrbart i TUL.\nNår SBS sender inn en verdi som fraviker fra en slik \u0026ldquo;forventet\u0026rdquo; verdi og feltet er overstyrbart vil innsendingen gå gjennom. Tjenesteeier mottar skjemasettet med den verdi som ble sendt inn fra SBS, men får ingen indikasjon på at feltverdien avviker fra \u0026ldquo;forventet\u0026rdquo; verdi. SBS får på sin side en kvittering som indikerer hvert felt hvor Altinn \u0026ldquo;forventet\u0026rdquo; en annen verdi, samt hvilken verdi Altinn \u0026ldquo;forventet\u0026rdquo;.\nEn teknisk beskrivelse av hvordan skjemasett sammenliknes, hva som menes med \u0026ldquo;ulik verdi\u0026rdquo;, og kriterier for feil (stoppe innsending) og advarsler finnes i \u0026ldquo;Implementasjonsguide for sluttbrukersystemer\u0026rdquo;.\n Overstyrbare felter   Overstyrbare felter defineres på siden innholdsreferanser i arbeidsflaten for tjenesteutgave. Velg skjemaside først, deretter felt.\nKun XSD-validering Kalkyler, prefill og valideringer i et skjema kan \u0026ldquo;skrus av\u0026rdquo; for innsendinger fra SBS. Dette tillater en markant ytelsesforbedring, men medfører at alle innsendinger tillates så lenge selve meldingsformatet for oppgavesettet er fulgt.\nMerk at innsendt XML alltid valideres mot XSD, uavhengig av om denne opsjonen er valgt eller ikke. Når opsjonen er valgt gjøres kun XSD-validering ved innsendinger fra SBS. Opsjonen har ingen effekt for SBL-brukere.\n XSD validering   Kun XSD-validering settes på siden XSD-egenskaper i arbeidsflaten for tjenesteutgave. Opsjonen er normalt ikke valgt, som betyr at all funksjonalitet definert i skjemasettet er \u0026ldquo;på\u0026rdquo; - kalkyler, valideringer og prefill kjører også ved innsending fra SBS.\nIntegritetssjekk fra sluttbrukersystem Altinn støtter utvikling av skjemaer som kan signeres med XMLDsig standard. Foreløpig er dette begrenset til skjemaer som er signert av sluttbruker system og sendt komplett via webservice. Funksjonen kan ikke brukes i tjenesteutgaver som bruker skjemasett med felles datakilde.\nFor å nyttegjøre seg av XMLDsig må XSD oppdateres manuelt (inntil videre) med XMLDSIG deklarasjoner. Dette må gjøres i forkant av import til Infopath. Følgende deklarasjoner må gjøres:\n XMLDSig namespace må være definert i header xmlns:dsig=\u0026quot;http://www.w3.org/2000/09/xmldsig# XMLDSIG placeholder må angis direkte i sekvens etter siste element innenfor et rotelement i XSD for en innsendingstjeneste:\n\u0026lt;xs:any namespace=\u0026quot;http://www.w3.org/2000/09/xmldsig#\u0026quot; processContents=\u0026quot;lax\u0026quot; minOccurs=\u0026quot;0\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;/\u0026gt;  Eksempel:\n\u0026lt;xs:schema xmlns:brreg=\u0026quot;http://www.brreg.no/or\u0026quot; xmlns:xs=\u0026quot;http://www.w3.org/2001/XMLSchema\u0026quot; xmlns:dsig=\u0026quot;http://www.w3.org/2000/09/xmldsig#\u0026quot; elementFormDefault=\u0026quot;qualified\u0026quot; attributeFormDefault=\u0026quot;unqualified\u0026quot;\u0026gt; \u0026lt;xs:element name=\u0026quot;Skjema\u0026quot;\u0026gt; \u0026lt;xs:complexType\u0026gt; \u0026lt;xs:sequence\u0026gt; \u0026lt;xs:element ref=\u0026quot;soknad-grp-5627\u0026quot; minOccurs=\u0026quot;0\u0026quot;/\u0026gt; \u0026lt;xs:any namespace=\u0026quot;http://www.w3.org/2000/09/xmldsig#\u0026quot; processContents=\u0026quot;lax\u0026quot; minOccurs=\u0026quot;0\u0026quot; maxOccurs=\u0026quot;unbounded\u0026quot;/\u0026gt; \u0026lt;/xs:sequence\u0026gt; … \u0026lt;/xs:complexType\u0026gt; \u0026lt;/xs:element\u0026gt; \u0026lt;/xs:schema\u0026gt;  Merk at bruk av any element med lax direktiv er obligatorisk for at skjema skal kunne brukes av InfoPath, men inneholde vil bli validert av Altinns XSD validering.\nNår XSD er oppdatert kan den importeres til InfoPath. Pass på at «Ikke tillat signering av skjema» er valgt i InfoPath, vi bruker Altinn til å signere.\n Form Options   Når man har laget et skjema som inneholder et XMLDSig element og lastet det opp i TUL, vil et nytt valg være tilgjengelig på siden \u0026ldquo;XSD-egenskaper\u0026rdquo;.\n Integritetssjekk   Her finnes nå en nedtrekksliste som foreløpig har to valg:\n Integritetssjekk fra sluttbrukersystem Av/Ingen  Ved valget «Av/Ingen» gjøres ingen integritetssjekk, mens det ved valget «Integritetssjekk fra sluttbrukersystem» vil være mulig å legge ved en XMLDSig signatur i XML som sendes inn. XMLDSig signaturen vil bli validert før oversendelse til tjenesteeier og tjenesteeier har så mulighet til å validere signaturen i sine internesystemer.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/innsyn/",
	"title": "Innsyn",
	"tags": [],
	"description": "Innsynstjenester brukes til å hente data ved å kalle en eller flere web services.",
	"content": " Innsynstjenester er tjenester som brukes til å hente data fra en tjenesteeier til Altinn ved å kalle en eller flere web services. Forretningslogikk og data ligger hos tjenesteeier, mens presentasjonen av dataene ligger i Altinn. Dataene kan også gjøres tilgjengelig for sluttbrukersystem.\n Figur 57 – Arbeidsflaten til en nyopprettet utgave av en innsynstjeneste   Spesifikasjon - innsynstjeneste For en innsynstjeneste må det som for øvrige tjenestetyper registreres utgaveparametre, og det er mulig å overstyre rettigheter.\nUtgaveparametre Enhver utgave må ha utgaveparametre. Hvordan du registrerer disse, er beskrevet her.\nOverstyr rettigheter Rettigheter trenger du bare å overstyre hvis den utgaven du utvikler har andre rettighetskrav enn de som allerede er satt på tjenestenivå. Hver utgave vil arve disse rettighetene når den migreres til SBL, og få med seg overstyringene i tillegg.\nInnhold - innsynstjeneste Innholdet i en innsynstjeneste vil på samme måte som for innsendingstjenester være alt som har med skjema, datainnholdet og selve interaksjonen med sluttbruker i SBL å gjøre. Uthenting av data fra tjenesteeiers systemer håndteres gjennom en såkalt mapper, som er en komponent for fleksibel integrasjon mellom Altinn og andre systemer.\nNår et skjema er ferdigutviklet i InfoPath, defineres tilleggsegenskaper i TUL for å gi tjenesten ønskede egenskaper. Du må definere sideegenskaper, og du kan registrere innholdsreferanser.\nSkjema Tjenesteinnholdet defineres gjennom utvikling av skjema i InfoPath. Under området for Innholdsspesifikasjon på utgavens arbeidsflate kan du legge til et InfoPath-skjema og åpne og redigere skjemaet i Microsoft Office InfoPath. Se InfoPath-skjema i Altinn for beskrivelse av prinsipper rundt skjemabibliotek, skjema og visning, samt inn-/utsjekking og publisering av skjema.\nInfoPath-skjema må lages slik at det er basert på en XSD som hoveddatakilde, og alle data som skal arkiveres og være del av “datamodellen” til en innsynstjeneste må kopieres over i hoveddatakilden. Data fra sekundære datakilder bør mao som hovedregel kopieres over i hoveddatakilden. Dette er helt analogt med innsendingstjenester, der for eksempel data fra oppslag mot registre ikke lagres i skjema hvis dataene ikke bindes opp mot hoveddatakilden.\nDet er skjemaet som definerer utgavens ”brukergrensesnitt” og grafiske layout. Hvordan InfoPath-skjemaet ser ut og hvilken funksjonalitet det har, bestemmes av tjenesteeier. Det er laget tre eksempelskjema som er tenkt benyttet som utgangspunkt for utforming av brukergrensesnitt­et, basert på tre ulike interaksjonsmønstre.\nFølgende vedlegg er relevante:\n Vedlegg A: Skjemautvikling i InfoPath inneholder en innføring i skjemautvikling i InfoPath for bruk rettet mot TUL. Vedlegg B: Utforming av brukergrensesnitt for skjema beskriver utvikling av brukergrensesnitt i InfoPath i forhold til presentasjon i SBL. Vedlegg C: Utforming av brukervennlige tjenester gir veiledning i utforming av brukervennlige og tilgjengelige tjenester. Her forklares også de tre eksempelskjemaene som kan benyttes som utgangspunkt. Vedlegg G: Web Service-oppslag fra InfoPath beskriver hvordan data kan hentes til InfoPath ved bruk av sekundære datakilder.  Når du skal utvikle denne typen tjenester, anbefales det at du benytter følgende fremgangsmåte:\n Vurder innhold og eventuell funksjonalitet i innsynstjenesten du skal lage, og finn ut hvilket eksempel som best dekker behovene. Ta en kopi av eksempeldokumentet og last opp i skjemabiblioteket på utgavearbeidsflaten. Legg inn datakilde og kall av webservices (se Vedlegg G). Ferdigstill layout og eventuell funksjonalitet for navigasjon og datapresentasjon.  Altinn webservice-mapper InfoPath-skjemaet må designes slik at det kan hente data fra en Web Service hos en etat og presentere dette i Altinn. Kall til alle eksterne web services fra InfoPath i Altinn skal gå gjennom en proxy, eller såkalt mapper. Dette er en intern web service som kaller en ekstern web service, og som returnerer resultatet fra denne. Hovedgrunnen til at en slik proxy må benyttes er at adressen som legges inn i InfoPath skal være lik, uavhengig av hvor selve web servicen som returnerer data befinner seg. En mapper kan inneholde en eller flere operasjoner.\nDenne proxy-tjenesten vil være ansvarlig for:\n Kalle etatens web service(s) og returnere feltene på ønsket format for bruk i InfoPath og fasade. Hvis ønsket: Hente ut nødvendig ekstra informasjon fra Altinn (eksempelvis ER-roller for en reportee) Hvis ønsket: Sende bekreftelse til tjenesteeier for benyttet tjeneste hvis etatens web service returnerer uten feil Sørge for at eventuelle feilsituasjoner logges og håndteres forsvarlig.  For utarbeidelse av Web Service mappere av innsynstjenester så er dette kode som tjenesteeier utvikler i Visual Studio, og som deretter kvalitetsikres av både applikasjonsleverandør og driftsleverandør før driftsleverandør produksjonssetter dette.\nHver tjenesteeier vil ha sitt eget mapper-prosjekt.\nFiguren under viser i orange (med tall) de områdene som tjenesteeier kan utvikle selv, og hvordan de henger sammen.\n Mapper-arkitektur    Innsynstjenestens InfoPath-skjema i TUL inneholder, i tillegg til den XSD-baserte hoveddatakilden, en sekundær datakilde (web service oppslag) som peker på mapperen som kjører i SBL. Dette betyr skjema kan enhetstestes mot mapperen før det migreres over i SBL. Et skjema kan gjøre oppslag mot flere mapper-operasjoner (inneholde flere sekundære datakilder), og rent teknisk gjøre oppslag mot flere mappere. Se Vedlegg G: Web Service-oppslag fra InfoPath-skjema for hvordan mapper (sekundær datakilde) legges inn med riktig adresse i InfoPath-skjema. De data som skal kunne arkiveres må kopieres over i hoveddatakilden.\n Mapperen kan benyttes både fra InfoPath i TUL, form server i SBL og fra eksterne mapper fasader som kan tilgjengeliggjøre én eller flere operasjoner i en mapper eksternt mot sluttbrukersystemer. I tillegg så kan også en mapper benyttes av en betingelse (condition). En mapper skal kodes i C# i Visual Studio, og kan benytte interne tjenester i Altinn. Det er mao ikke en absolutt nødvendighet at mappere gjør eksterne kall videre. Interne tjenester er definert i tjenestekatalogen.\n Web services som kjøres hos tjenesteeier er 100% tjenesteeiers ansvar. Før en slik tas i bruk fra Altinn bør krav til SLA, estimert belastning, svartid, etc nøye vurderes. Det må også bestilles brannmuråpning av Driftsleverandør.\n Fasade. Hvis ønskelig så kan tjenesteeier eksponere operasjoner i mapper ekstern mot sluttbrukersystemer. Da må et ekstra fasadelag utvikles i Visual Studio som igjen benytter mapperen for å hente data og interne tjenester for for eksempel arkivering og signering. Fasade behøves ikke å utvikles hvis ekstern tilgang ikke skal tilbys. Siden ekstern tjenestekode og utgavekode vil være naturlige inn-parametre i en fasadeoperasjon så er det fornuftig å også inkludere disse som inn-parametre for mapperen. Hvis\n  For detaljer og retningslinjer rundt design og utvikling av Altinn mappere, se:\n Guide for mapperutvikling Vedlegg F: Bruk av Visual Studio Vedlegg G: Web Service-oppslag fra InfoPath\n  Komplekst datainnhold Det er viktig å forstå at innsynstjenesten i Altinn, og mapperen som den benytter, er to forskjellige ting. Det er innsynstjenesten som “eier” dataformatet (xsd) og som har ekstern tjenestekode og utgavekode. En innsynstjeneste kan benytte én eller flere mapper-operasjoner og også flere mappere. En mapper kan benyttes som datakilde av flere innsynstjenester.\nDette blir spesielt viktig å ha i minne hvis det er ønskelig å eksponere en innsynstjeneste eksternt mot sluttbrukersystem (SBS). Som du ser på figuren i forrige kapittel så er det teknisk sett mapperen som eksponeres via fasade, og ikke innsynstjenesten.\nDet innebærer at eksternt eksponerte mapper-operasjoner må returnere “komplette” data som oppfyller kravene som XSD-formatet til innsynstjenesten stiller, slik at InfoPath (innsynstjenesten) kan vise dataene etter at de er arkivert.\nDet vil si at Innsynstjenester som eksempelvis benytter flere mapper-operasjoner, eller en webservice sin output som input til en annen web service (to-stegs drilldown) ikke kan benyttes for sluttbrukersystemer uten at det tilgjengeliggjøres for eksempel en ”stor” mapper-operasjon som kan tilgjengeliggjøre et “komplett” datasett.\nHvis innsynstjenesten omfatter mer data enn det som kan hentes og/eller presenteres i én porsjon, må du legge omtanke i hvordan dataene struktureres, både mht. hvordan webservices kalles, og hvordan dataene lagres i skjema. Dette har betydning for funksjonalitet for utskrift og arkivering, og for bruken fra sluttbrukersystem.\nHvis arkivering og signering skal eksponeres eksternt, så må dette kodes inn i fasaden med bruk av operasjonen SignAndArchiveLookupService i den interne tjenesten Lookup.\nUtviklingstiden, og kompleksitet både i mapper og InfoPath vil derfor kunne reduseres kraftig hvis etatens web service returnerer data på XSD-formatet som benyttes i innsynstjenesten. Da vil data for alle felter kunne kopieres inn med noen få kodelinjer i InfoPath, og ekstern fasade vil kunne returnere data uforandret.\nInnsynstjenester med støtte for direkte kall Du kan lage en mapper som kan fungere uten hjelp av InfoPath. Dette er funksjonalitet du normalt kan se bort fra. For å lage en slik mapper må du implementere et spesielt grensesnitt kalt ILookUpMapper fra Altinn.SBL.ServiceEngine.LookUpMapper.PnC.dll biblioteket. I praksis betyr det at mapper­applikasjonen har en operasjon med navn «ExecuteLookUp». I SBL er det implementert en generisk klient som kan benyttes i direkte kall som da går utenom InfoPath. En mapper kan implementere dette alene eller i tillegg til andre operasjoner som brukes fra et InfoPath-skjema.\nSpesielle felter for mapper med direkte kall Disse feltene skal bare fylles ut dersom du bruker en mapper som har støtte for direkte kall.\nMappernavn Dette feltet skal inneholde en del av URI-en for mapperens endepunkt. Alle mappere har nesten nøyaktig samme URL for endepunktsadresse: http://mapperservices.altinn.no:87/ServiceEngine/Mappers/{0}/Mapper.svc\nMappernavn skal fylles ut med den delen som her er representert med \u0026ldquo;{0}\u0026rdquo;. Hvis URL-en for eksempel er http://mapperservices.altinn.no:87/ServiceEngine/Mappers/BRG/OA/Mapper.svc så skal mappernavn inneholde \u0026ldquo;BRG/OA\u0026rdquo;.\nDet er viktig å merke seg at dette feltet bare skal fylles ut om mapperen har implementert ILookUpMapper. Hvis feltet er fylt ut vil SBL tro at mapperen støtter direkte kall, og dermed fremstille tjenesten slik i ServiceMetaData-informasjon.\nResponsskjema Dette feltet skal inneholde en teknisk beskrivelse av innsynstjenestens svar. Det kan for eksempel være en XSD- eller et JSON-skjema som beskriver datatypen som blir returnert av innsynstjenesten (mapperen). Innholdet i feltet vil ikke bli brukt av Altinn (SBL), men kan gi verdifull informasjon til de som implementerer et sluttbrukersystem. Feltet er valgfritt selv for tjenester med støtte for direkte kall fra SBL.\nRequestskjema Dette har samme funksjon som responsskjema-feltet, men beskriver isteden datatypen til forespørselen. Dette feltet er mindre aktuelt siden det i dagens løsning ikke er laget støtte for å ha komplekse typer som input til en innsynstjeneste. Det er isteden laget støtte for noe som er blitt kalt QueryData. Her anbefales det at mapper implementeres til å kunne tolke OData (http://msdn.microsoft.com/en-us/library/hh169248(v=nav.70).aspx). OData-parameter vil sendes inn til mapper gjennom queryData-parameteren til ExecuteLookUp. OData vil normalt sett være knyttet til tjenestens svar (responsskjema), men i dette feltet kan man altså definere en annen type om ønskelig. Feltet er valgfritt selv for tjenester med støtte for direkte kall fra SBL.\nSideegenskaper Du må definere sideegenskaper for at det skal være mulig i SBL å vite for eksempel hvilke InfoPath-visninger som skal vises for presentasjon og navigasjon, og hvilke som skal brukes for utskrift og eventuelt for signering.\nDet er ikke nødvendig å lage egen visning for signering, hvis den kan inneholde det samme som utskriften. Når brukeren velger å arkivere i SBL, benyttes signeringsvisning hvis den finnes, hvis ikke brukes utskriftsvisning, hvis ikke brukes webvisningen direkte.\nInnholdsreferanser Presentasjonsfelt hjelper sluttbruker å finne skjemaet i SBL.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/funksjonalitet/kodelister/",
	"title": "Kodelister",
	"tags": [],
	"description": "En kodeliste er en liste med faste verdier som for eksempel postnummer og poststed eller kommuner og landkoder.",
	"content": " En kodeliste er en liste med faste verdier som for eksempel postnummer og poststed eller kommuner og landkoder. Kodelisten brukes typisk i nedtrekkslister i skjema i sluttbrukerløsningen. En kodeliste kan brukes på tvers av tjenesteeiere og tjenester, eller den kan spesiallages for enkelte tjenesteeiere eller tjenester. Kodelister vil vedlikeholdes utenfor den enkelte tjeneste og må migreres over til sluttbrukerløsningen på linje med tjenestene.\nKodelistene nåes ved å klikke på kodeliste-lenken til høyre på startsiden. Du kommer da til kodelistebiblioteket.\nAdministrere kodelister Dette er en oversikt over alle kodelistene som finnes i TUL. Alle kodelister som er tilgjengelig vises med navn, hvilken person som har opprettet kodelisten (eier), samt informasjon om status og endringstidspunkt. Listen kan sorteres og filtreres ved å trykke på kolonneoverskriftene. Du henter fram en enkelt kodeliste ved å trykke på kodelistenavnet i listen. Klikk på Ny for å legge til en ny kodeliste.\nNy kodeliste En kodeliste opprettes ved å klikke på Ny i toppen av kodelistebiblioteket. Det er viktig at navnet på kodelisten ikke inneholder spesialtegn, samt norske bokstaver (æ,ø,å). Dvs, tegn som ikke kan brukes er typisk ”!” ,”}” ,” (” ,”\u0026amp;” ,”%” ,”$” ,” ’ ” ,”*” ,”é” ,”è” ,”á” ,”ä” ,”æ” ,”ø” ,”å” etc. Kodelistenavnet brukes kun for identifikasjon, og vil ikke vises noe sted for sluttbruker. Det er også mulig å legge til en beskrivelse. Denne heller brukes ikke annet i TUL SharePoint. For å endre beskrivelse i ettertid, må man navigere til kodelisten og navigere til innstillinger. Der kan beskrivelsen endres. Du kan migrere kodelisten ved å velge Migrer i Handlinger-menyen. For å se hvilke versjoner av kodelisten som finnes i hvilke miljøer, velg Migreringsstatus i samme meny.\nVedlikeholde kodelister Ved å klikke på ønsket kodeliste i listen kan du lese og endre kodelisten. Sorter listen ved å trykke på kolonneoverskriften du ønsker å sortere på, for eksempel Språk. Endre et enkelt element i listen ved å trykke på navnet til det elementet du ønsker å endre. Du kan også vedlikeholde kodelisten i Excel-visning ved å velge Rediger i dataark Handlinger.\nHver rad i listen inneholder følgende kolonner som kan editeres:\n Tittel: Denne verdien brukes kun i TUL i kodelistvisning, og er ikke brukt i skjema Kode: Denne verdien må være unik og angir koden/nøkkelen til verdiene for den gitte raden. Merk at koden må være den samme for alle språkene av den samme raden. Språk: Angir språket raden er på Verdi 1-3: Angir verdier som kan kobles mot gitt kode  I en kodeliste må det finnes like mange rader for alle språk det finnes rader på. F.eks., hvis man har tre rader på engelsk, og kodelisten skal defineres for bokmål også, så må det være tre rader med de samme kodene her også. Det må også være et likt antall verdier for alle rader. Grunnen til at det er tre verdier som kan defineres, er for at man skal kunne lagre mer informasjon om en kode. F.eks. kan en rad i kodelisten se slik ut:\n   Kode Verdi 1 Verdi 2 Verdi 3 Språk     NO Norge Oslo NOK 1044 (bokmål)   NO Noreg Oslo NOK 2068 (nynorsk)   NO Norway Oslo NOK 1033 (english)    Eller slik:\n   Kode Verdi 1 Verdi 2 Verdi 3 Språk     NOK Norge 100  1044 (bokmål)   SEK Sverige 100  1044 (bokmål)   USD USA 1  1044 (bokmål)    Kodelisten må deretter migreres etter den er ferdig definert. Statusen til kodelisten vil da endres fra Endret til Migrert.\nRediger i dataark  Figur 117 - Rediger-valg i kodeliste   Når du er inne på kodelisten du ønsker å redigere, så kan du velge \u0026ldquo;rediger denne listen\u0026rdquo;.\n Figur 118 - Hurtigredigering av kodeliste   Alternativt kan du velge \u0026ldquo;Hurtigredigering\u0026rdquo; fra ribbon.\nDa vil du åpne en dataarkredigering på en lignende måte som Excel. Man kan fritt kopiere innhold mellom visningen i dataark og Excel, så lenge man tar hensyn til noen felter. I kodelistene er det noen felter hvor innholdet fylles inn automatisk, eller er styrt av forhåndsbestemte verdier. Disse verdiene er: ID, Språk, Endret av og Endret, disse vil det derfor ikke være mulig å kopiere fra Excel og lime inn i kodelisten under dataarkvisningen. For å komme tilbake til vanlig visning kan du klikke på «Stopp redigering av denne listen» eller «Vis» i ribbon.\nMigrere kodeliste Før kodelisten kan tas i bruk i et skjema, må den migreres til SBL i samme miljø som utgave som benytter kodelisten migreres til. Kodelisten kan migreres til både testmiljøer og til produksjonsmiljø. Dersom du velger å migrere til produksjonsmiljø, sendes det en bestilling om produksjonssetting.\nDu kan migrere en kodeliste til flere miljøer samtidig ved å huke av sjekkboksen foran miljøene du ønsker. Deretter velge versjon; tidligere migrerte versjoner eller den nyeste. Den nyeste vil være den som er gjeldene i kodelistebiblioteket p.t. Ved å klikke OK startes migreringen og migreringsstatussiden med migreringsoversikt vises.\nMigreringsoversikten for kodelister inneholder en komplett oversikt over alle migreringer som er gjort av denne kodelisten. Du vil også få beskjed om migreringen var vellykket eller ikke. Denne meldingen vil ikke vises hvis du navigerer direkte til migeringsstatussiden fra kodelistebiblioteket.\nI migreringsloggen vil du også kunne se XML-kildekoden for den enkelte migrerte kodeliste ved å klikke på ”Vis XML” til høyre for hvert element i listen over migrerte versjoner av en kodeliste.\nEksportere kodeliste En kodeliste kan eksporteres fra TUL, både før og etter at denne er migrert. Du går da inn på kodelisten og velger “Handlinger” fra nedtrekksmenyen. I denne menyen velger du deretter “Eksporter til regneark”. Det er viktig og merke seg at når du skal eksportere en kodeliste, må du ha et program som er kompatibelt med SharePoint. Dette kan da være Microsoft Excel.\nSlette kodeliste En kodeliste kan enkelt slettes ved å velge slett fra kodelistens kontekstmeny, uavhengig av om den er migrert eller ikke.\nSortering av kodeliste Fast for alle kodelister er at de sorteres alfabetisk på kolonnen ”Verdi1”. Det betyr at når kodelisten migreres til SBL og hentes ut igjen og inn i skjema, presenteres verdiene sortert på kolonnen innefor hvert språk. Merk at dette er en tekstsortering, slik at man behøver ledende 0’ere for tall.\nDenne funksjonaliteten kan utnyttes på to måter:\n Benytte \u0026ldquo;Verdi1\u0026rdquo; som sortert visningsnavn.\nAlt som blir vist i nedtrekkslisten er da sortert alfabetisk. Benytte \u0026ldquo;Verdi2\u0026rdquo; eller \u0026ldquo;Verdi3\u0026rdquo; som visningsnavn og \u0026ldquo;Verdi1\u0026rdquo; for å angi sorteringsrekkefølge. Det vil si at man kan tvinge frem en annen sorteringsrekkefølge en rekkefølgen som er angitt i kodelisten i TUL.  Kodeliste inn i InfoPath For å benytte en kodeliste i et skjema, må som nevnt kodelisten først være migrert til det eller de miljøene man skal migrere utgaven med skjemaet til.\nEn kodeliste vil for et skjema opptre som en ekstra datakilde, som kan kobles til en nedtrekksliste etc. i skjema, på omtrent samme måte som felles datakilde for skjemasett.\nHvis kodelisten ikke er benyttet for valgt utgave før, starter man med å høyreklikke på feltet man vil kodelisten skal vises i. Dette må være et flervalgsfelt, typisk en nedtrekksliste.\nMan velger egenskaper for feltet, f.eks. Egenskaper for Rullegardinliste og angir at man vil Slå opp verdier fra en ekstern datakilde. Se figuren nedenfor.\n Figur 119 – Kodeliste i InfoPath   Trykk Legg til\u0026hellip; for å opprette en ny tilkobling og velg Motta data. Man må benytte en webservice som datakilde. Adressen til webservicen vil være gitt av sluttbrukerløsningen, og finnes på lenken under kodeliste-lenken på startsiden; Kodeliste-WS. Kodeliste-webservicen trenger åtte parametere som inndata, som vist i figuren under.\n Figur 120 – Inndata for kodeliste i InfoPath   Parameterene er som følger:\n tns:CodeListName: Dette er navnet på kodelisten som den heter i kodelistebiblioteket. tns:CodeListVersion: Dette er versjonen av kodelisten du vil knytte mot skjemaet. Angis 0 vil siste versjon benyttes. For å benytte seg av en annen versjon må man åpne xml fila det er lenket til ved siden av hver versjon under migreringsloggen for en kodeliste, Man må altså bruke tallet som står etter «version» i XML. Det versjonsnummeret som vises i migreringsloggen er bare en teller som viser antall ganger du har migrert til et gitt miljø. tns:LanguageID: Dette er identifikatoren til språket. Dette må være det samme som hovedspråket til utgaven. Bokmål=1044, Nynorsk=2068, Samisk=1083 og Engelsk=1033. tns:code: Hvis angitt, så skal kun denne koden med verdier returneres tns:value1Filter: Hvis angitt så skal kun de koder der value 1 matcher returneres tns:value2Filter: Hvis angitt så skal kun de koder der value 2 matcher returneres tns:value3Filter: Hvis angitt så skal kun de koder der value 3 matcher returneres tns:filterMatchType: Kan ha følgende verdier:  1 (Exact) 2 (StartsWith) 3 (EndsWith) 4 (Contains)\nAlle sammenlikninger skal være case-insensitive   Det man nå må gjøre er å velge hva som skal vises, og hva som skal lagres fra kodelisten i skjemaet. Klikk på ikonet til høyre for feltet Oppføringer. Da åpnes et vindu som vist under. Velg CodeListRow (dette er den repeterende raden som datakilden/webservicen returnerer).\n Figur 121 – Kodeliste i InfoPath   Deretter velges verdi og visningsnavn ved å klikke på de samme ikonene til høyre for de gitte tekstboksene. Visningsnavn er det som vises i nedtrekkslisten, verdi er det som lagres.\n Figur 122   Nå er kodelisten koblet til skjemaet og kan testes i forhåndsvisning. Hvis man ved forhåndsvisning for en advarsel om at man kobler til ekstern server, velger man ok, ja eller tilsvarende. Det er verdt å merke seg at hvis man ønsker å benytte samme kodeliste for et annet felt, behøver man ikke opprette en ny kobling, men bare benytte eksisterende ekstern datakilde.\n"
},
{
	"uri": "https://altinn.github.io/docs/credits/",
	"title": "Kred",
	"tags": [],
	"description": "Hyllest",
	"content": "Vi i Altinn benytter Hugo for å generere opp hele dokumentasjonen med søk som en statisk web site.\nDet hele tar typisk noen sekunder. Hugo er åpen kildekode i tillegg til å være lynrask. Anbefales.\nFor søk benyttes lunr.js.\nSom tema benytter vi docDock. Stor takk til Valere JEANTET.\nReveal.js er et fantastisk rammeverk for presentasjoner på web. Takk til Hakim El Hattab.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/lenke/",
	"title": "Lenke",
	"tags": [],
	"description": "En lenketjeneste er en lenke fra Altinn til en tjeneste som ligger hos tjenesteeieren.",
	"content": " En lenketjeneste er en lenke fra Altinn til en tjeneste som ligger hos tjenesteeieren. Bakgrunn for lenketjenesten er at tjenesteeiere ønsker å tilgjengeliggjøre sine tjenester i Altinn samtidig som de ønsker å beholde sin egen tjenestemotor.Tjenesteeier må har satt opp føderering mot IDPorten og lenken (tjenesten hos tjenesteeier) må være en beskyttet ressurs. For å få tilgang til tjenesten må dermed sluttbruker være logget inn hos ID-Porten gjennom Altinn. Sluttbruker foretar valg av avgiver i Altinn, og Altinn utfører autorisasjonskontroll og tjenestekontroller. Kun sikkerhetnivåer som er tilgjengelig i IDPorten kan brukes på tjenesten. Altinn har lenken til tjenesteeierens tjeneste i sin tjenestekatalog.\nEn lenketjeneste er alltid assosiert med en URL, og denne URL-en kan være enten intern eller ekstern. Lenketjenester opprettes i TUL på lik linje med andre tjenestetyper og skal også kunne inngå i samhandlingstjenester.\nSer også egen implementasjonsguide for lenketjenester.\nSpesifikasjon – lenketjeneste For en lenke må det som for øvrige tjenestetyper registreres utgaveparametre, og det er mulig å overstyre rettigheter.\nUtgaveparametre Enhver utgave må ha utgaveparametre. Unikt for en lenketjeneste er definisjonen av hvilken URL den er knyttet til, og oppsett av preinstansieringskontrollere.\nPreinstansieringskontrollere er funksjonalitet for å angi at forhåndsdefinerte kontrollprosesser skal kjøres før sluttbruker får tilgang til lenketjenesten. Tjenesteutvikler kan velge fra en liste av flere forhåndsdefinert preinstansieringskontroller. Man kan for eksempel verifisere om brukeren har registrert gyldig e-postadresse i Altinn, eller validere at brukeren er over 18 år.\nOverstyr rettigheter Rettigheter trenger du bare å overstyre hvis den utgaven du utvikler har andre rettighetskrav enn de som allerede er satt på tjenestenivå. Hver utgave vil arve disse rettighetene når den migreres til SBL, og få med seg overstyringene i tillegg.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/innsending/master/",
	"title": "Master",
	"tags": [],
	"description": "Mastertjenester er innsendingstjenester som utvikles med tanke på å at de skal bli delt av flere tjenesteeiere.",
	"content": " Mastertjenester er tjenester som skal utvikles med tanke på å at de skal bli delt av flere tjenesteeiere. Selve tjenesten skal da utvikles av en tjenesteeier, mens en eller flere andre tjenesteeiere tar den i bruk. Dette vil da egne seg best for tjenester der flere tjenesteeiere skal utføre det samme. Alle som tar i bruk en slik mastertjeneste vil få sin egen eksterne tjenestekode og utgavekode, men nesten alle innstillinger vil være identiske med det som er definert i mastertjenesteutgaven. Bare oversendingsmetode og gyldighetsperiode vil være mulig å endre på.\nBare innsendingstjenester kan bli brukt som mastertjenester.\nNår du utvikler en utgave som skal bli master, må du gjøre den helt ferdig før du merker den som master. Valget vil av den grunn være deaktivert når du oppretter ny utgave. Med en gang du gjør den om til master vil den bli tilgjengelig for gjenbruk. De som skal ta i bruk en mastertjeneste vil forvente at den da fungerer helt fra starten av.\nNavnet du gir mastertjenesten og utgaven vil også være det navnet som alle utgaver basert på denne vil få. Derfor bør du tenke på at dette navnet skal brukes av flere tjenesteeiere før du bestemmer navn på tjeneste og utgave.\nEn utgave basert på master har i utgangspunktet bare sin egen tjenestekode, utgavekode, oversendingsmetode og gyldighetsperiode. Alle andre innstillinger henter den ved migrering fra mastertjenesten. Dette betyr at det er først ved migrering at en slik utgave blir «definert». Som en følge av dette er det også på migreringstidspunktet at utgaven vil synkronisere seg med masterutgaven. Det vil med andre ord være innstillingene i masterutgaven på migreringstidspunktet som vil avgjøre hvordan hver enkelt utgave blir i SBL. Dersom det blir gjort oppdateringer på masterutgaven etter at en utgave som bruker den er migrert, så vil ikke disse endringene bli brukt av utgaven før den eventuelt har blitt migrert på nytt. For å få en oppdatering inn i alle utgaver, må altså alle tjenesteeierne som bruker mastertjenesten migrere på nytt.\nSkjemasett kan bare bli brukt i mastertjenester dersom alle underskjemautgavene også er mastertjenester. En utgave merket som «kun underskjema» vil ikke kunne bli brukt som mastertjeneste direkte, og vil derfor ikke dukke opp i oversikten over mastertjenester. Den kan likevel bli brukt ved at den er del av skjemasettet til en hovedutgave som er master. Dersom du lager en utgave basert på en master med skjemasett, vil også underskjemautgavene bli opprettet i din tjenesteeier.\nFor å fjerne markeringen av en utgave som master, eller for å slette en masterutgave, så må først alle utgaver basert på denne slettes permanent. Dette er fordi alle disse utgavene er avhengige av at mastertjenesteutgaven eksisterer som mastertjeneste.\n Figur 97 - Sette utgave som mastertjeneste   Vedleggstyper kan brukes i mastertjenester, men du bør da bruke vedleggstyper med navn som ikke risikerer navnekonflikt. Det kan bli problem om mastertjenesten bruker en vedleggstype som har samme navn som en vedleggstype i en annen tjenesteeier som bruker den. Skulle det skje så risikerer du at det ikke er vedleggstypen hos mastertjenestens tjenesteeierens som blir brukt. Ved bruk via sluttbrukersystem vil det da være vedleggstypen med samme navn hos den tjenesteeier mastertjenesten er i bruk som kommer til å brukes.\nFor å hindre et slikt problem bør du lage/bruke vedleggstyper med navn som er såpass spesifikke at en slik navnekonflikt er usannsynlig.\nOpprette tjeneste basert på en mastertjeneste For å ta i bruk en mastertjeneste som en annen tjenesteeier har laget starter du ved å klikke på lenken «Ny basert på mastertjeneste» på tjenesteeierarbeidsflaten.\n Figur 98 - Ny basert på mastertjeneste   Dette vil ta deg til en ny side som gir deg en oversikt over de mastertjenestene som er tilgjengelige. Du velger så den mastertjenesten du skal bruke og klikker på «Opprett tjeneste basert på master» bak denne.\n Figur 99 - Oversikt mastertjenester   Dette vil opprette både en ny tjeneste og en ny utgave i din tjenesteeier. Dersom din tjenesteeier allerede har en annen utgave fra samme mastertjeneste vil den nye utgaven bli lagt inn i samme tjeneste som denne. Når utgaven har blitt opprettet vil du havne på arbeidsflaten for den nye utgaven.\n Figur 100 - Arbeidsflate for utgave basert på mastertjeneste   En utgave som er basert på mastertjeneste vil ha en veldig enkel utgavearbeidsflate. For å kunne se hva som er definert for utgaven, må du se på selve mastertjenesteutgaven. Du vil finne lenke til den på utgavearbeidsflaten.\nNår du tar i bruk en utgave basert på mastertjeneste, så vil din utgave være nesten identisk med mastertjenesteutgaven. Forskjellene vil være i hvilken tjenesteeier den tilhører og eksterne koder for tjeneste og utgave. Når utgaven er opprettet skal den være ferdig utviklet, og kan migreres med en gang.\n Figur 101 - Utgaveparameterside for utgaver basert på mastertjenester   Gyldighetsperiode og overføringsmetode kan du endre, men det er ikke nødvendig å gjøre det. Overføringsmetode er som standard satt til metoden «Hent ved hjelp av webservice» («Download queue») for alle tjenesteutgaver som er basert på mastertjeneste. Dersom du ønsker en annen overføringsmetode må du endre dette på utgaveparametersiden.\nEn slik utgave vil få samme tjenestenavn og utgavenavn som mastertjenesten. Disse navnene kan ikke endres. Det er bare lov å ha en utgave per mastertjeneste i en tjenesteeier. Du kan heller ikke ha en utgave basert på en mastertjeneste i samme tjenesteeier som mastertjenesten befinner seg.\nEn utgave basert på master har i utgangspunktet bare sin egen tjenestekode, utgavekode, oversendingsmetode og gyldighetsperiode. Alle andre innstillinger henter den ved migrering fra mastertjenesten. Dette betyr at det er først ved migrering at en slik utgave blir «definert». Som en følge av dette er det også på migreringstidspunktet at utgaven vil synkronisere seg med masterutgaven. Det vil med andre ord være innstillingene i masterutgaven på migreringstidspunktet for hver enkelt utgave som vil avgjøre hvordan utgaven blir i SBL. Dersom det blir gjort oppdateringer på masterutgaven etter at en utgave som bruker den er migrert, så vil ikke disse endringene bli brukt av utgaven som bruker den før den eventuelt har blitt migrert på nytt.\nIkonet foran lenken til mastertjenesten vil fortelle deg om mastertjenesteutgaven har blitt endret etter sist gang utgaven ble migrert.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/melding/",
	"title": "Melding",
	"tags": [],
	"description": "Meldingstjenester definerer meldinger som kan sendes fra tjenesteeier til bruker.",
	"content": " En meldingstjeneste fungerer forskjellig fra en innsendingstjeneste. Mens en innsendingstjeneste instansieres i SBL, dvs initialiseres som et element tilhørende en gitt avgiver, er en meldingstjeneste en definisjon på en melding, men ikke selve meldingen. Det er ikke mulig å åpne en melding uten av en tjenesteeier har sendt deg en. Ergo, meldings­tjenester kan bare instansieres av etat enten via webservice eller batchgrensesnitt.\n Figur 56 – Arbeidsflaten til en nyopprettet utgave av en meldingstjeneste   Spesifikasjon - meldingstjeneste En meldingstjeneste kan ha utgaver akkurat som en innsendingstjeneste, og har også utgaveparametere. Generelt er utgavespesifikasjonen enklere for en meldingstjeneste, siden meldingsinnholdet i all hovedsak kommer fra tjenesteeier.\nUtgaveparametre Enhver utgave må ha utgaveparametre.\nOverstyr rettigheter Rettigheter trenger du bare å overstyre hvis den utgaven du utvikler har andre rettighetskrav enn de som allerede er satt på tjenestenivå. Hver utgave vil arve disse rettighetene når den migreres til SBL, og få med seg overstyringene i tillegg.\nInnhold - meldingstjeneste Innholdet i en melding kommer som sagt i all hovedsak fra tjenesteeier direkte til SBL.\nInnhold som sendes fra tjenesteeier Følgende overordnet informasjon er påkrevet i data sendt fra tjenesteeier:\n Mottaker. Avsender (Avsender i TUL vil overskrive denne). Meldingsinnhold. Varsling. Referanse til metadata (dvs. utgaven definert i TUL).  Når det gjelder meldingsinnhold, så kan dette i hovedsak bestå av to typer:\n Binært vedlegg: Meldingsinnhold er en PDF-fil som er generert av etat. Dette er det mest benyttede i Altinn I. HTML: Innholdet blir i sin helhet vist fram i meldingssiden i SBL. Dette er også benyttet i Altinn I.  Det mulig å sende med innhold som består av flere skjema/vedlegg.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/funksjonalitet/migrering/",
	"title": "Migrering",
	"tags": [],
	"description": "En utgave av en tjeneste kan migreres til sluttbrukermiljø når tjenesten er tilstrekkelig definert og utviklet.",
	"content": " En utgave av en tjeneste kan migreres til sluttbrukermiljø når tjenesten er tilstrekkelig definert og utviklet.\nI TUL finnes fire ulike statusikoner som skal illustrere statusen for hver enkelt parameter­seksjon.\nNår en utgave av en tjeneste skal migreres til et sluttbrukermiljø, skal alle statusikoner vise ikonet for status komplett, eventuelt migrert.\n   Ikon Status      Ny, uendret    Endret, ikke komplett    Komplett    Migrert, uendret etter migrering    Ett unntak er språk, hvor sekundærspråk ikke behøver å være komplette.\nStart migrering Migrering skjer fra en egen side i TUL. Hit kommer man via lenken Migrer utgave under området for Migrering og status på utgavens arbeidsflate.\nFra migreringssiden kan tjenesteutvikler velge sluttbrukermiljø, versjon, språk som skal migreres og sette gyldighetsdato for test.\nSluttbrukermiljø kan være miljø for systemtest, akseptansetest og opplæring. Sluttbruker-miljøene vil kunne variere fra et tjenesteutviklingsmiljø til et annet. Tjenesteutvikler kan ikke migrere tjenester til produksjonsmiljø, da all migrering til produksjon skal kvalitetssikres av applikasjonsforvalter i forkant av migreringen. Tjenesteutvikler kan imidlertid velge å sende en bestilling av produksjonssetting fra migreringssiden. Sluttbrukermiljø velges fra en nedtrekksliste der alle miljø det er mulig å migrere til står listet, i tillegg til et valg om å bestille produksjonssetting.\nVersjon velges fra en nedtrekksliste med defaultvalg Nyeste. Det vil si at en lager en ny versjon bestående av de siste endringene som er gjort på tjenesteutgaven.\nSpråk velges fra en liste med sjekkbokser. Her listes hovedspråk samt eventuelle oversettelser (sekundærspråk).\nAlle tjenester har en gyldighetsperiode som er satt i utgaveparametrene. Utgavens ”Gyldig fra”-dato må overstyres for at man skal kunne teste tjenesten før den skal være tilgjengelig for sluttbruker.\nNår migrering igangsettes, starters en eksportjobb som pakker sammen tjeneste­komponentene til en pakke, versjonerer den og overfører den til valgt sluttbrukermiljø. Eksport­jobben kjøres automatisk, og status for migreringen gjøres tilgjengelig for tjenesteutvikler på en egen side for migreringsstatus. Velger man å migrere en tidligere versjon, hentes pakken fra denne versjonen fram igjen og migreres.\nDet er mulig å starte en ny migrering mens en annen migrering pågår, men du kan ikke migrere til et miljø der migrering av samme utgave allerede pågår. Hvis du prøver å starte ny migrering til samme miljø før foregående migrering er avsluttet, vil OK-knappen være grået ut.\nOm utgaven du skal migrere er en innsendingstjeneste med skjemasett kan du velge mellom å utføre komplett migrering eller å kun migrere enkeltskjema i skjemasettet. Migrering av enkeltskjema kan brukes for å spare tid om du har gjort endringer i enkelte skjema og ikke behøver å migrere hele tjenesten. Når du krysser av for «Oppdater kun enkeltskjema i SBL» vil det dukke opp en nedtrekksmeny hvor du kan velge hvilket enkeltskjema som skal migreres. Her kan du velge mellom alle skjema i skjemasettet, inkludert hovedskjema. Ved migrering av enkeltskjema vil eksisterende «Gyldig fra»-dato fortsatt benyttes.\nMigreringsstatus Hvis du nettopp har startet en migrering, vil du først komme til en visning som informerer om at tjenesten blir verifisert, pakket, versjonert og oversendt til sluttbrukermiljø. Når pakken er sendt til sluttbrukermiljøet blir du tatt til en egen side for løpende status og oversikt over alle gjennomførte migreringer. Øverst på siden vises resultatet av den pågående/gjennomførte migreringen. Først vises eventuelle advarsler/feil etter innledende validering, deretter vises løpende status og eventuelle advarsler/feil under behandling av skjema. Hvis migrering er vellykket, kommer melding om dette; i motsatt fall at migreringen feilet.\nI en tabell nederst på siden listes alle migreringsjobber som er utført. Listen inneholder et innslag per miljø som den enkelte versjonen er migrert til. Listen inneholder også migreringsdato, navn på den som har kjørt migreringen og lenke til en migreringsrapport. Rapporten er i excel-format og inneholder detaljer om hva som er inkludert i hver enkelt migrering. Denne informasjonen kan være nyttig hvis det blir nødvendig å rulle tilbake.\nListen med migreringsjobber inneholder også lenker til språkversjoner av hovedskjema, som du kan åpne i InfoPath. Klikk eventuelt på lenken Vis underskjema for å hente fram tilsvarende lenker til språkversjoner for resten av skjemasettet.\nFor å komme videre med testing kan du gå direkte til et portalmiljø fra listen over migreringer. Når du klikker på navnet til det aktuell miljøet, tas du til utgaven i SBL via en direktelenke. Direktelenken er beskrevet nedenfor. Alternativt kan du klikke på OK-knappen for å gå tilbake til utgavens arbeidsflate.\nDet er mulig å gå ut av siden med OK-knappen selv om det pågår en migreringsprosess. Migreringen vil fortsette, og løpende migreringsstatus vil vises på utgavens arbeidsflate. Det vil imidlertid ikke være mulig å returnere til denne siden som viser detaljer om advarsler og status. Hvis du går inn på nytt fra utgavearbeidsflaten, vil siden kun inneholde oversikten over alle migreringsjobber som er utført. Hvis du går inn på migreringsstatus-siden mens det pågår en migrering, må du oppdatere siden (refresh) for å få med den siste migreringsjobben i listen når prosessen er ferdig.\nEn innsendingstjenestes utgave kan inngå som underskjema i et skjemasett for en annen innsendingstjeneste. Om utgaven er migrert som underskjema i et skjemasett vil det dukke opp et område på arbeidsflaten for utgaven som lenker til en migreringsstatusside for skjemaet som underskjema. På denne siden vil du finne referanser til alle skjemasett utgaven har blitt migrert som del av, hvor det har blitt migrert, tidspunkt for migreringer, hvem som har migrert, og lenker til de aktuelle utgavene.\nDirektelenke Direktelenken er konstruert på bakgrunn av utgavens eksterne tjenestekode og eksterne utgavekode:\nhttps://\u0026lt;A\u0026gt;/Pages/ServiceEngine/Start/StartService.aspx?ServiceEditionCode=\u0026lt;B\u0026gt;\u0026amp;ServiceCode=\u0026lt;C\u0026gt;   \u0026lt;A\u0026gt; er adressen til miljøet \u0026lt;B\u0026gt; er den eksterne tjenesteutgavekoden \u0026lt;C\u0026gt; er den eksterne tjenestekoden  F.eks.\nhttps://tt02.altinn.no/Pages/ServiceEngine/Start/StartService.aspx?ServiceEditionCode=635821\u0026amp;ServiceCode=854214\nMigreringsstatus på utgaven arbeidsflate På utgavens arbeidsflate er det et område for Migrering og status. Her vises en oversikt over versjonens status. Herfra kan du også gå direkte til siden med migreringsoversikt via en lenken Migreringsstatus.\nMulige statuser for utgave:\n   Tilstand Siste versjon Siste migrering I produksjon     Tjenesteutgaven er opprettet, men ikke migrert noe sted. Under utvikling Ikke migrert Nei   Tjenesteutgaven er migrert til et testmiljø Migrert Dato for migrering Nei   Tjenesteutgaven er migrert til et testmiljø, men forandret etterpå. Under utvikling Dato for migrering Nei   Tjenesteutgaven er migrert til produksjonsmiljø. Migrert Migrert til produksjon Produksjons­setting bestilt   Tjenesteutgaven er aktivert i produksjon (ved at aktiverings­linken i TUL er klikket på) Migrert Migrert til produksjon Ja   Tjenesteutgaven er endret etter produksjons­setting er bestilt Under utvikling Migrert til produksjon Produksjons­setting bestilt   Tjenesteutgaven er endret etter at den er aktivert i produksjon Under utvikling Migrert til produksjon Ja    Migrerings­status\n Blank (hvis ingen migrering pågår) Løpende status (hvis migrering pågår)  Statusverdiene oppdateres når siden lastes. For å sjekke utviklingen mens en migrering pågår, må du oppdatere siden (Refresh). Hvis flere migreringer pågår i parallell, vil siden vise alle statusendringene fortløpende på tvers av migreringsprosesser. For å se status og eventuelle advarsler og feilmeldinger per migrering, må du imidlertid bli stående på siden Migreringsstatus til migrering er gjennomført.\nEn innsendingstjenestes utgave kan inngå som underskjema i et skjemasett for en annen innsendingstjeneste. Om utgaven er migrert som underskjema i et skjemasett vil det dukke opp et nytt område på arbeidsflaten med status over siste migrering som underskjema. I motsetning til migreringsstatusen for utgaven som hovedskjema vil ikke denne statusen oppdateres i sanntid\nKjente feilmeldinger Ved migrering til Sluttbrukerløsningen gjennomføres et sett med kontroller som kan resultere i advarsler eller feilmeldinger til tjenesteutvikler. Til tross for mange eksplisitte kontroller av metadata og skjema kan det oppstå plutselige og uhåndterte feil som følge av kommunikasjons­problemer, problemer med skjema o.l. Det er vanskelig for løsningen å ”oversette” alle feil i og med at de stammer fra et standardprodukt. Her vil vi derfor forsøke å beskrive noen av de vanligere feilmeldingene som kan oppstå ved uhåndterte feil.\n\u0026ldquo;An unexpected error occured that prevented the migration of the service edition. Migration failed\u0026rdquo;\n Denne tyder i de fleste tilfeller på at noe er feil med skjemaet, som gjør at TUL ikke klarer å migrere skjemaet på hovedspråket. Åpne skjemaet i InfoPath og påse at Design checker ikke melder noen feil. Rett evt. feil og sjekk inn skjema på nytt.\n \u0026ldquo;A communication error occured that prevented communicating with SBL. Unable to migrate\u0026rdquo;\n Denne antyder i 9 av 10 tilfeller at TUL ikke får kontakt med importeringstjenesten i SBL. Det kan også bety at skjemaserverene i SBL ikke klarer å laste opp skjema og kaster et unntak. Vent noen minutter og prøv igjen, hvis du har mistanke om at det er skjema, kjør design checker.\n \u0026ldquo;The request channel timeout while waiting for a reply\u0026hellip;Timeout\u0026rdquo;\n Dette indikerer at SBL bruker for lang tid på å svare. Dette kan enten skyldes en feil i SBL, eller at trykket på løsningen er veldig stort. Vent noen minutter og forsøk igjen.\n \u0026ldquo;SBL was unable to import the service editon package sent. All the changes have been rolled back. Migration failed. SBL returned the message: An error occurred: The XSN cannot be used on the server\u0026rdquo;\n Dette indikerer at det er noe feil med skjemaet som forsøkes lastet opp. Påse at skjemaet er ”Browser enabled”, og at design checker ikke rapporterer noen feil.\nDenne vil også vises hvis et eller flere felter er ubundet, ved f.eks. at det er fjernet en datakilde e.l. Typisk hvis en felles datakilde er fjernet.\n \u0026ldquo;An error occured\u0026rdquo;\n Dette er en standard SharePoint feilmelding som i de fleste tilfeller skyldes en feil med løsningen eller serverproblemer, og ikke utgaven som er forsøkt migrert.\n \u0026ldquo;SBL was unable to import the service edition package sent. All the changes have been rolled back. Migration failed. SBL returned the message: An error occurred: Object reference not set to an instance of an object\u0026rdquo;\n Dette indikerer at det er noe feil med skjemaet som forsøkes lastet opp. Påse at design checker ikke rapporterer noen feil. Forsøk å rull tilbake skjema til en tidligere versjon og forsøk igjen. I de fleste tilfeller kommer denne feilen hvis det finnes felter i skjemaet som ikke er bundet mot datakilden, eller at en datakilde som hadde felter bundet mot seg, er fjernet.\n Rulle tilbake For å rulle tilbake til en tidligere migrert versjon av utgaven i portalmiljø må du på migreringssiden velge den versjonen du ønsker å rulle tilbake til, i nedtrekkslisten der du kan velge miljø (2 Velg miljø). Denne lister alle versjoner av utgaven.\nVil du rulle tilbake arbeidsflaten i TUL, må dette gjøres manuelt ved hjelpe av migreringsrapporten for gitt versjon. Du benytter da migreringsrapporten for versjonen du vil gjenskape, og går inn i hver enkel metadataseksjon og oppdaterer slik at det blir likt migreringsrapportens verdier.\nMerk at det kan være lurt å rulle tilbake InfoPath-skjemaet først. Dette gjøres ved å velge versjonslogg for gitt skjema. Du blir da presentert med liste over alle versjoner:\n Figur 102 – Rulle tilbake skjema   Ved å klikke på pilen til høyre for versjonen du vil hente fram igjen, får du frem en kontekstmeny med valget ”Gjenopprett”. Ved å velge dette blir gjeldende versjon av skjema på arbeidsflaten erstattet med det du valgte å gjenopprette.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/funksjonalitet/oversetting/",
	"title": "Oversetting",
	"tags": [],
	"description": "Hvis det er behov for å tilby en tjeneste på flere språk så kan oversettermodulen benyttes.",
	"content": " En tjenesteutgave utvikles alltid i et hovedspråk. Hovedspråket velges som utgaveparameter når utgaven opprettes, og kan ikke endres senere. Man kan velge mellom følgende språk: bokmål, nynorsk, samisk og engelsk. Alle deler av tjenesten utvikles først i hovedspråket, både InfoPath-skjema og tekster som legges inn i TUL (for eksempel tjeneste- og utgavenavn, sidenavn, signeringstekst, hjelpetekster).\nHvis det er behov for å tilby tjenesten på flere språk må TUL oversettermodul benyttes. Denne startes fra tjenesteutgavens arbeidsflate. Det lønner seg å vente med oversettelsen til utgaven er komplett på hovedspråket, for å slippe ekstra vedlikehold.\nFor å starte oversettelse til et nytt språk, velg Ny i språkseksjonen i arbeidsflaten. Du får opp en side der du kan velge hvilket språk du vil oversette til:\n Figur 103 – Velg språk du ønsker å oversette til.   Alternativene er de samme som for hovedspråk, se over, med unntak av det språket som er valgt som hovedspråk,\nNår språk er valgt presenteres oversettelsessiden:\n Figur 104 - Oversettelsessiden i TUL   Her han du velge hva du vil oversette (parametre, hjelpetekster, skjemaelementer, valideringstekster eller alt sammen) og hvilket språk du vil oversette fra.\nFor den første oversettelsen er det bare ett alternativ å oversette fra (hovedspråket), hvor det kun er mulig å endre tjenestenavnet, men for senere oversettelser kan du fritt velge blant de eksisterende språkversjonene, uavhengig om de er komplette eller ikke.\nPå oversettelsessiden presenteres en liste over de tekstelementene som utgaven inneholder innenfor den kategorien du har valgt, med plass til å skrive inn din oversettelse av hvert tekstelement. For noen av valgene må du gjøre et undervalg i tillegg; for eksempel hvis du velger Dialogsider, vises en ny nedtrekksliste der du kan velge blant de definerte dialogsidene.\n Figur 105 - Oversetting i TUL   Skriv inn dine oversettelser. Klikk på Sjekk inn når du er ferdig med oversettelsen, eller ønsker at andre skal ta over arbeidet.\nMerk at valideringstekster for skjermtips ikke kan være lengre enn 125 tegn. Det er lagt inn begrensning på dette i TUL.\nVær oppmerksom på at det må tas spesielle hensyn i InfoPath når skjemaet utvikles for at skjemaet skal kunne oversettes i TUL. Alle språkavhengige elementer i skjemaet (ledetekster, hinttekster, gruppeoverskrifter osv.) må defineres som uttrykksfelter (”expression box”), ellers vil de ikke bli oversatt. Uttrykksbokser beskrives i Vedlegg A. For å teste en språkversjon av et skjema, kan du gå tilbake til utgave-arbeidsflaten og velge Vis InfoPath form fra nedtrekksmenyen som er knyttet til språknavnet:\n Figur 106 - Test språkversjonen ved å trykke Vis InfoPath fra nedtrekksmenyen som er knyttet til språknavnet   Skjemaet vil da bli vist i InfoPath med språkavhengige elementer erstattet med de oversettelsene som er lagt inn i TUL. I de fleste tilfeller vil man måtte lagre skjemafilen lokalt og velge design for å få se at skjemaet er på riktig språk.\nFor å teste oversettelse av øvrige tekster må tjenesteutgaven migreres til et test-sluttbrukermiljø. Dersom du migrerer en språkversjon til testmiljøene uten at alle tekster er oversatt, vil manglende oversettelser bli erstattet av samme tekst på hovedspråket.\nDersom det ikke lenger er behov for en oversettelse kan den slettes fra utgaven ved å velge Slett fra nedtrekksmenyen som er knyttet til språknavnet. Du får da opp et pop-up vindu der du må bekrefte at oversettelsen til dette språket skal slettes.\nEksportere oversettelse Dersom du vil gjøre oversettelsen utenfor TUL kan du eksportere en xml-fil som kan redigeres i for eksempel Excel.\n Figur 107 - Eksport og import av oversettelse.   For å eksportere tekster som kan oversettes klikker du på «Last ned eksisterende oversettelse». Det vil da bli generert en xml-fil som du må lagre et sted du finner den igjen. Filen kan redigeres med hvilket som helst program som kan lese xml-filer, men det er først og fremst lagt opp til at den blir redigert i Excel.\nDersom du bruker Excel må du velge å åpne filen som xml-tabell. Du vil da få en visning som ser slik ut:\n Figur 108 - Redigering i Excel uten oversatt tekst.   De tre kolonnene til venstre (A, B og C) skal du ikke røre fordi de blir brukt til identifikasjon under importen. Vi bruker disse til å fortelle hva det er som skal oversettes. A og B er id-felter som blir brukt til å finne feltene. C er originaltekster som kommer fra InfoPath-skjema. Gjør du endringer i disse kolonnene kan importen enten feile eller den oversatte teksten kan havne i feil felt.\nOversettelsene fyller du inn i kolonnene til de språkene som ikke er hovedspråk. I dette eksempelet er bokmål hovedspråk, og det er kolonnene «English» og «NorwegianNN» som kan brukes til å legge inn oversettelse. Du bruker da kolonnen «NorwegianNO» som utgangspunkt for det som skal oversettes. Her har vi bare fylt ut engelsk oversettelse, men du kan også fylle ut oversettelse for flere språk samtidig.\n Figur 109 - Redigering i Excel med oversatt engelsk tekst.   Etter at du har fylt ut den teksten du vil endre, skal du lagre filen som xml. Excel kan komme til å forsøke å få deg til å lagre den som Excel-fil, men du må lagre den som xml.\nImportere oversettelse Filen du laget i Eksportere oversettelse skal så lastes opp i tjenesteutgaven ved hjelp av «Last opp ny oversettelse» (se Figur 107).\nNår filen er lastet opp vil du få valg om å godta endringene eller avbryte.\n Figur 110 - Opplasting av oversettelsesfil.   Du må da trykke «Ok» for å få inn oversettelsen. Dersom du har fylt inn oversettelse for et språk som ikke allerede eksisterer på utgaven, så vil dette språket bli opprettet for deg med de oversettelsene du har fylt inn. En bekreftelsestekst i grønt vil fortelle deg at opplastingen var vellykket.\n Figur 111 - Bekreftelse på opplastet fil.   Felter som du lar stå blanke i xml-fila vil bli ignorert under import. Det betyr at dersom du bare skal endre enkelte felt, så kan du la resten stå blanke. Dermed vil bare de feltene du har lagt inn tekst i bli endret.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/referanser/",
	"title": "Referanser",
	"tags": [],
	"description": "Diverse referanser og lenker.",
	"content": "Referanser til diverse filer og dokumenter:\n   Dokument Beskrivelse     Funksjonell spesifikasjon - Sluttbrukerløsningen Funksjonell beskrivelse av Sluttbrukerløsningen hvor bl.a. abonnement, preutfylling og meldinger blir beskrevet.   Implementasjonsguide for integrasjon mot Altinn.doc Dette dokumentet beskriver den overordnede arkitekturen for integrasjon mot Altinn, samt sikkerhetsmekanismer som benyttes for kommunikasjon mellom Altinn og eksterne systemer.   serviceinitiation.2010.10.xsd Meldingsbeskrivelse benyttet for innsending av preutfyllingsdata og abonnementsdata fra tjenesteeier på batchgrensesnitt.   correspondence.2010.10.xsd Meldingsbeskrivelse benyttet for innsending av meldinger fra tjenesteeier på batchgrensesnitt.   correspondence.confirmations.2010.10.xsd Meldingsbeskrivelse benyttet for innsending av meldinger fra tjenesteeier på batchgrensesnitt.   AltUt.xsd Meldingsbeskrivelse benyttet for innsending av meldinger fra tjenesteeier på gammelt format, for både batch– og tjenestegrensesnitt.   AltUtConfirmationBatch.xsd Meldingsbekreftelse benyttet for meldingsbekreftelser på gammelt format fra Altinn til tjenesteeier, batchgrensesnitt.   GovOrganReceipt.xsd Meldingsbekreftelse benyttet for meldingsbekreftelser på gammelt format fra Altinn til tjenesteeier, batchgrensesnitt.   genericbatch.2010.10.xsd Meldingsbeskrivelse benyttet for overføring av arkiverte innsendingstjenester fra Altinn til tjenesteeier   genericbatch.2013.06.xsd Oppdatert meldingsbeskrivelse benyttet for overføring av arkiverte innsendingstjenester fra Altinn til tjenesteeier. Med støtte for vedleggstypenavn (AttachmentTypeName) og sjekksum av vedlegget (Checksum)   OnlineBatchReceipt.xsd Kvittering ved online overføring av data fra Altinn til Tjenesteeier   Videreformidling av identitet_SAML 2 0.doc Beskriver hvordan tjenesteleverandører kan sette opp og konfigurere et grensesnitt mot Altinn sin løsning for videreformidling av elektronisk identitet basert på SAML 2.0 protokollen.    Lenker til diverse ressurser:\n   Beskrivelse Link     Bestillingsskjemaer https://altinn.brreg.no/sites/dokument2/Bestillingsskjema   Tjenestekatalogen https://altinn.brreg.no/sites/program/altinn%20II/Lists/Tjenestekatalog   Referanseklienter for Java og .NET https://altinn.brreg.no/sites/fagsystemer/Kokebker/Forms/AllItems.aspx?RootFolder=/sites/fagsystemer/Kokebker/Referanseklienter    "
},
{
	"uri": "https://altinn.github.io/docs/roadmap/",
	"title": "Altinn roadmap",
	"tags": [],
	"description": "Overordnet roadmap for videreutvikling av Altinn.",
	"content": "Overordnet roadmap for videreutvikling av Altinn.\n\rAltinn roadmap 2019\r\rOverordnet roadmap for videreutvikling av Altinn i 2019.\n\rAltinn roadmap 2018\r\rOverordnet roadmap for videreutvikling av Altinn i 2018.\n\r"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/funksjonalitet/rolleadministrasjon/",
	"title": "Rolleadministrasjon",
	"tags": [],
	"description": "Oversikt over rolleadministrasjon i TUL, med hovedvekt på definisjon av roller med tilhørende rettigheter.",
	"content": " Her gis en oversikt over rolleadministrasjon i TUL, med hovedvekt på definisjon av roller med tilhørende rettigheter. Dette utføres av brukere med spesielle rettigheter i TUL.\nSikkerhetspolicy – tjeneste- og utgavenivå Sikkerhetsmodulen i TUL tillater Tjenesteeier/Systemeier/Tjenesteutvikler å definere en rettighetspolicy for å begrense tilgang for sluttbruker i sluttbrukerløsningen. Dette gjøres i hovedsak i en egen modul – Rolleadministrasjon – der det defineres roller med tilhørende rettigheter til systemressurser og til tjenesteressurser. Eksterne roller er gitt fra Enhetsregisteret, mens Altinn-roller defineres i TUL. Alle roller migreres til SBL der roller kan delegeres, og rettighetskrav håndheves.\nI Rolle­administrasjon defineres rettigheter på tjenestenivå. En utgave vil arve disse rettighets­kravene automatisk når den migreres til SBL. For tjenesteressurser kan rettighetskrav i tillegg overstyres for enkeltutgaver av tjenesten. Dette gjelder imidlertid ikke roller til tjenesteeiers arkiv; disse rollene har rollekategori = tjenesteeier.\nEn ressurs er generelt noe en sluttbruker kan få tilgang til. En systemressurs kan være funksjonalitet for å delegere roller og rettigheter, mens en tjenesteressurs vil være en bestemt tjeneste. En rettighet gir sluttbruker tilgang til å utføre en bestemt operasjon på en bestemt ressurs for en bestemt avgiver – for eksempel å lese momsoppgavene i arkivet til virksomheten brukeren er ansatt i.\nFølgende rettigheter kan settes på en ressurs:\n   Ressurs Read Write Sign Archive Read Archive Write Service Owner Archive Read Delegatable     Service Owner X X X X X X    Service X X X X X X    Service Edition X X X X X X    Form X X        Page X X        Field X X         Arbeidsflate for rolleadministrasjon Rolleadministrasjon nås fra startsiden og fra tjenesteeiers arbeidsflate. Systemeier og tjenesteeier/-utvikler vil ha ulike tilgangsnivåer. Systemeier har mulighet å importere eksterne roller fra registerdatabasen, opprette nye Altinn-roller og endre eksisterende roller og, når rollene er definert med rettigheter, migrere til SBL. Alle tekster knyttet til rollene kan oversettes, slik som for tjenesteutgaver. Hvis oversettelse ikke er komplett, brukes hovedspråk for det som mangler.\nTjensteeier/-utvikler har lese-rettigheter på Rolleadministrasjon-siden. Hvis tjenesteutvikler trenger en rolle eller rettighet for å utføre oppgaver knyttet til Rolleadministrasjon-siden, må systemeier/ASF kontaktes på tjenesteeier@altinn.no.\n Figur 123 – Arbeidsflate for rolleadministrasjon   Fra arbeidsflaten for rolleadministrasjon kan du åpne én bestemt rolle for å se på/endre denne rollens rettigheter for alle ressurser, eller du kan åpne én tjeneste og se på/endre rettigheter til denne for alle roller.\nDefinisjon av roller Systemeier kan definere hvilke rettigheter eksterne roller og Altinn-roller skal ha til systemressurser og tjenesteressurser. Øvrige brukergrupper kan lese tilsvarende informasjon.\nNår en rolle åpnes fra arbeidsflaten, kommer du til en side med rollens navn. Denne siden viser selve rolledefinisjonen inkludert hvilke rettigheter rollen omfatter. Rettighetene listes i to matriser, en for systemressurser og en for tjenesteressurser. Ressurser listes vertikalt, operasjoner listes horisontalt. Hvilke operasjoner som er relevante, avhenger av tjenestetype og rollekategori. Merk at matrisen med tjenesteressurser er utvidbar; klikk på en tjenesteeier for å se alle underliggende tjenester. En hake i ruten for ressurs/operasjon betyr at innehaver av denne rollen har tilgang til å utføre denne operasjonen på ressursen – for den avgiver rollen gjelder for.\n Figur 124 – Eksempel på rolledefinisjon   Når du oppretter en ny rolle, kommer du først til en side der du angir nøkkelinformasjon om rollen, før du kan gå videre. Bruk Rollekategori = Tjenesteeier hvis rollen gjelder tilgang til tjenesteeiers arkiv.\nDet er viktig å angi en god beskrivelse for rollen, for denne vil vises i SBL. Dette gjelder spesielt i perioden fram til alle tjenester ligger på Altinn II-plattform, fordi tjenestene i Altinn I vil ikke bli listet i rettighetsmatrisen som viser detaljer om rollen. Det betyr at beskrivelsen er sluttbrukers eneste mulighet til å forstå hva rollen omfatter. - Rettigheter til Altinn I-tjenester vil likevel håndteres automatisk gjennom en mapping mellom nye og gamle roller.\nEksterne roller tildeles automatisk til sluttbrukere basert på informasjon i Folkeregisteret og Enhetsregisteret. Altinn-roller kobles til eksterne roller, slik at innehaver av en bestemt ekstern rolle også får de(n) Altinn-rolle\u0026reg; som er koblet mot denne. I TUL kobles en Altinn-rolle til eksterne roller ved å velge en eller flere eksterne roller i en nedtrekksliste og klikke på Legg til-knappen.\nFor tjenesteeier-roller finnes ingen slik automatikk. En tjenesteeier-rolle defineres i TUL, migreres til SBL og tildeles manuelt til utvalgt(e) bruker(e) hos tjenesteeier. Rollen bør bare omfatte rettigheter til tjenesteeiers tjenester, siden SBL uansett gir tilgang til kun én tjenesteeier om gangen; det er ikke mulig å hente tjenesteelementer fra flere tjenesteeiere til samme liste.\nAltinn-rollene kan som regel delegeres videre; dette kan settes som en parameter ved opprettelse av rollen. Altinn-roller er ment som en enkel mekanisme for å delegere flere rettigheter samlet, gruppert i henhold til arbeidsdelingen i representative virksomheter.\nRollens rettigheter til tjenester Rettigheter for tjenester kan defineres på overordnet nivå for alle tjenestene som tilhører en tjenesteeier eller for en enkelt tjeneste. Ved å huke av en operasjon på tjenesteeiernivået vil alle undernivåer automatisk arve rettigheten; tjenestene tilhørende den aktuelle tjenesteeier og nye tjenester som opprettes vil automatisk arve denne rettigheten.\n Figur 125 – Rettighet definert på tjenesteeiernivå   Den grønne rammen rundt sjekkboksen indikerer at du har gjort en endring. Når du sjekker inn rollen vil rammen fortsatt være der, men bli grå. Slik vil du neste gang du editerer rettighetene til en rolle få en oversikt over hva du har endret denne gangen fordi de nye endringene markeres med grønne rammer. Det er kun rettigheten som er markert med grønn/grå ramme som lagres i databasen.\nHvis du har gitt en rettighet på tjenesteeiernivå, men tar bort rettigheten for en eller flere tjenester tilhørende den aktuelle tjenesteeier, vil dette markeres med en grønn sjekkboks på tjenesteeiernivået. En grønnfarget sjekkboks indikerer at rettigheten har blitt overstyrt på et lavere nivå med en deny-regel (nektelse).\n Figur 126 – Grønn sjekkboks indikerer deny-regel på underordnet nivå   Hvis du gir rettigheter på tjenestenivå og tjenesteeier ikke tidligere har rettigheter satt for den aktuelle operasjonen, vil dette markeres med en oransje sjekkboks på tjenesteeiernivået. En oransjefarget sjekkboks indikerer at rettigheten har blitt overstyrt på et lavere nivå med en permit-regel (tillatelse).\n Figur 127 – Oransje sjekkboks indikerer permit-regel på underordnet nivå   Hvis du gir rettigheter enkeltvis til alle tjenestene tilknyttet en tjenesteeier vil dette markeres med en vanlig hake på tjenesteeiernivået. Legg merke til at det kun er sjekkboksene på tjenestenivå som markeres med grønn ramme, dette indikerer at det kun er tjenesterettighetene som lagres i databasen. Nye tjenester som opprettes vil ikke få denne rettigheten selv om alle tjenestene knyttet til tjenesteeieren har rettigheten.\n Figur 128 – Rettigheter definert på tjenestenivå   Rolleadministrasjon er ganske komplisert da rettigheter kan settes i flere ulike nivåer, fra et enkelt felt til tjenesteeier. Det lønner seg å sjekke inn og deretter dobbeltsjekke at de endringene du har utført har blitt slik du ønsket for alle nivåer.\nSlette Altinn-rolle En Altinn-rolle kan slettes dersom den ikke er koblet mot andre roller. Dersom rollen har koblinger må disse slettes før rollen kan slettes.\nTjenesterettigheter Det er også mulig å hente fram alle roller samtidig, for å se på eller endre rettigheter til én bestemt tjeneste. Dette kan være hensiktsmessig når man skal sette opp rettigheter til en tjeneste for første gang.\nFor å gå inn på Tjenesterettigheter-siden fra Rolleadministrasjon-siden klikker du på Tjenesterettigheter i menylinjen i listen over roller.\nVelg tjenesteeier og tjeneste i nedtrekkslistene og trykk på Hent-kanppen:\n Figur 129 – Hent tjeneste   Du kan nå se en liste over alle roller som har rettigheter til denne tjenesten. For å editere rettighetene til en tjeneste må du ha tilgang til å administrere rettigheter og sjekke ut siden.\n Figur 130 – Liste over alle roller som har rettigheter for valgt tjeneste   Du endrer rettighetene til valgte tjeneste ved å legge til eller fjerne markeringer for hvilke operasjoner hver enkelt rolle skal kunne utføre.\n Figur 131 – Definere rettigheter for tjenesten   Når du har sjekket ut siden, vises et valg for å liste alle roller. Dette er nødvendig for å tildele rettigheter til roller som ikke allerede har det på tjenestenivå. Nederst til venstre under listen er det en sjekkboks, og ved å ta bort haken vil listen utvides til å vise alle roller.\n Figur 132 – Alle roller   Du har også mulighet til å se eller endre rettigheter på tjenesteeiernivå. Dette gjør du ved å velge tjenesteeier og ”Alle”. Da viser siden de rollene som har rettigheter satt direkte på tjenesteeiernivå. For øvrig er funksjonaliteten tilsvarende som for tjenestenivå.\nDu må sjekke inn for å lagre rettighetene på én tjeneste(eier), før du eventuelt henter fram roller for en annen.\nRettigheter fra tjenestearbeidsflaten Tjenesterettigheter-siden kan også nås fra arbeidsflaten for en tjeneste. Når siden åpnes, vil den liste rettigheter knyttet til den aktuelle tjenesten.\n Figur 133 – Se rettigheter fra tjenestearbeidsflaten   "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/samhandling/",
	"title": "Samhandling",
	"tags": [],
	"description": "En samhandlingstjeneste grupperer enkelttjenester og presentere dem for sluttbruker i en prosess.",
	"content": " I Altinn II versjon 2 innførtes samhandlingstjeneste som ny tjenestetype i Altinn. En samhandlingstjeneste grupperer enkelttjenester og presentere dem for sluttbruker på en arbeidsflate. Arbeidsflaten kan samtidig gi veiledning og støtte i prosess og regelverk. Enkelttjenestene i en samhandlingstjeneste utføres på samme måte som om de var enkeltstående.\nI sin enkleste form kan en samhandlingstjeneste samle tjenester som inngår i en enkel, sekvensiell prosess mellom én avgiver og én tjenesteeier, for eksempel send søknad – motta svar – send klage – motta svar. I mer komplekse tilfeller kan samhandlingstjenesten involvere flere tjenesteeiere og/eller tillate svært mange alternative løp, avhengig av sluttbrukers handlinger kombinert med utfallet av enkelttjenestene som inngår.\n Figur 58 – Arbeidsflaten til en nyopprettet utgave av en samhandlingstjeneste   Spesifikasjon - samhandlingsstjeneste For en samhandlingstjeneste må det som for øvrige tjenestetyper registreres utgave­parametre, og det er mulig å overstyre rettigheter. I tillegg må du definere et tjenesteutvalg, dvs. hvilke enkelttjenester som skal brukes. Du må også laste opp en tilstandsmodell og sette parametre for tilstandene tjenesten skal gjennomløpe. Videre kan du definere gjenbruk av data mellom tjenester, og du kan registrere en liste med merknader som benyttes i kommunikasjon fra tjenesteeiers system til Altinn.\nUtgaveparametre Enhver utgave må ha utgaveparametre.\nOverstyr rettigheter Rettigheter kan du overstyre hvis den utgaven du utvikler har andre rettighetskrav enn de som allerede er satt på tjenestenivå. Hver utgave vil arve disse rettighetene fra tjenesten når den migreres til SBL, og få med seg overstyringene i tillegg. Du kan også overstyre de dialogsidene som er angitt som rollestyrte dialogsider på \u0026ldquo;Tilstander siden\u0026rdquo; for slik å gi spesifikke roller tilgang til spesifikke dialogsider.\nTjenestevalg Her velger du hvilke tjenesteutgaver som skal være tilgjengelig i samhandlingstjenesten. En samhandlingstjeneste kan omfatte utgaver fra flere tjenesteeiere.\nBare de tjenesteutgavene du velger, vil være tilgjengelig når du konfigurerer dialogsider. Tilsvarende gjelder mulighet for gjenbruk av data. I SBL vil brukeren selv kunne koble inn benyttede tjenester, men bare innenfor tjenestevalget du gjør her.\nØverst på siden er det radioknapper og nedtrekkslister som brukes for å hente fram aktuelle tjenester. Du velger en tjeneste ved å klikke på «Legg til»-lenken til høyre på raden. Når du er ferdig med å velge tjenester, kan det være hensiktsmessig å trekke sammen utgavelisten du valgte fra, for at samhandlingstjenestens utgaver skal være synlig. Valglisten kan utvides og trekkes sammen ved å klikke på overskriftslinjen.\n Figur 59 – Tjenesteutvalg   Listen nederst på siden viser utgavene som inngår i samhandlingstjenesten. Du kan slette en utgave ved å klikke på Slett -lenken. Hvis du vil slette en utgave som er benyttet i en dialogside eller i gjenbruk av data, vil den slettes derfra også, dersom disse sidene er sjekket inn. I motsatt fall vil du få en feilmelding.\nTilstander  Figur 60 – Eksempel på arbeidsprosess for samhandlingstjeneste   Samhandlingstjenesten kan gjennomløpe en eller flere tilstander. Definerte tilstands­overganger tillater at tjenesten går fra en tilstand til en annen. I eksempelet i Figur 60 er det flere tilstander som tilstandsmaskinen beveger seg gjennom. Hver tilstandsovergang vil skje når en hendelse inntreffer. Det er de underliggende tjenester knyttet til hver tilstand som kan forårsake en tilstandsovergang når deres interne status endres.\n Tilstandsovergang   Hendelser som registreres automatisk i SBL er knyttet til sluttbrukers elementer i meldingsboksen, for eksempel om en tjenesteutgave er instansiert eller arkivert. I tillegg er det mulig å sende eksterne hendelser fra tjenesteeiers systemer, for å trigge tilstandsovergang basert på hendelser utenfor Altinn.\nFor hver tilstand kan et ulikt sett av informasjon og undertjenester kommuniseres til sluttbrukeren i SBL. Det gjøres ved å koble hver tilstand til en eller flere dialogsider. Dialogsider beskrives senere, sammen med andre innholdselementer for samhandlingstjeneste.\nFør du går i gang med å sette opp tilstander i TUL, kan det være en fordel å ha laget seg en oversikt over flyten i tjenesten. Du bør vite hvilke tilstander som du skal ha i tjenesten, hvilke dialogsider som skal vises i hver tilstand og hvordan du går fra en tilstand til en annen.\nDu må først opprette en starttilstand for tjenesten din. Dette er tilstanden som tjenesten vil være i fra starten av.\n Figur 61 - Lag starttilstand   Etter at du har laget starttilstanden må du gi den et navn og en beskrivelse. Du må velge hvilken dialogside som skal vises i SBL når samhandlingstjenesten er i denne tilstanden. Nedtrekkslisten viser de dialogsidene som ligger i biblioteket på utgavearbeidsflaten. Valgene «Arkiver» og «Slett» avgjør om bruker skal kunne arkivere eller slette samhandlingstjenesten når den er i denne tilstanden. Disse valgene kan være ulik fra tilstand til tilstand, slik at du for eksempel kan si at det ikke er lov å arkivere i tilstand 1, men at det er lov i tilstand 2.\n Figur 62 - Starttilstand   For å kunne komme videre fra starttilstanden må du definere en overgang. Her forteller du hva som skal til for at tjenesten skal skifte tilstand, og til hvilken tilstand den skal gå. Du kan lage flere overganger i en tilstand. Det betyr at du kan velge at tjenesten går til ulike tilstander basert på hva som skjer. For eksempel kan en starttilstand «søknad» gå til «behandling» dersom søknaden blir sendt inn, men gå til «avsluttet» dersom søknaden blir trukket/slettet.\nEn overgang må du gi et navn og en beskrivelse. I «til tilstand» skriver du inn navnet på tilstanden som tjensten skal havne i etter at overgangen har funnet sted. Navnet du skriver her må være navnet på en annen tilstand. I «hendelse» forteller du hvilke kriterie som må inntreffe for at overgangen skal tre i kraft. Det finnes to ulike typer hendelser du kan bruke her, forhåndsdefinerte eller egendefinerte.\nAltinn har fem forhåndsdefinerte hendelser som du kan finne i Figur 63. Disse skal skrives inn på følgende måte [Ekstern tjenestekode]:[Ekstern utgavekode]:[hendelse], for eksempel «3374:1:Submitted». Kodene du legger inn her refererer til de(n) tjenesteutgaven(e) som skal utløse hendelsen.\nI «hendelse» kan du bruke regulære uttrykk (regular expression/regex). Regulære uttrykk er en måte å finne ut om en tekst oppfyller definerte kriterier. Hvordan du lager slike uttrykk vil ikke bli forklart i denne brukerguiden. Du vil finne mange guider om dette på nettet. For hendelse kan du for eksempel bruke «3314:[0-9]:Instantiated» for å fange opp alle instantiated-hendelser for utgaver med ekstern kode fra 0 til 9 for tjeneste med ekstern kode 3314.\nForhåndsdefinerte hendelser:\n   Hendelsekode Hendelse Tjenestetype     Instantiated Utføres når tjenesteutgaven blir instansiert Alle   Submitted Utføres når tjenesteutgaven sendes inn Innsendingstjeneste   Archived Utføres når tjenesteutgaven blir arkivert Innsendingstjeneste   Opened Utføres når tjenesteutgaven åpnes Meldingstjeneste Innsynstjeneste (må kodes inn i bestilt proxy-tjeneste)   Confirmed Utføres når tjenesteutgaven bekreftes lest Meldingstjeneste    Egendefinerte hendelser er hendelser som tjenesteeier utløser og sender til Altinn. Disse må da bli implementert av sluttbrukersystemet. Det er da opp til implementasjonen å avgjøre når dette skjer. Det er ingen bestemt syntaks for navngiving av egendefinerte hendelser, eksem­pel­vis «DeadlineExpired».\nDialogsider kan ha en webdel som viser hendelser. Du kan bestemme om en overgang skal vises i denne listen eller ikke ved å bruke avkryssingsboksen «Vis i hendelsesliste».\n Figur 64 - Lage overgang   For at overgangen skal fungere, må du også lage tilstanden som den skal føre til. Denne fyller du ut på samme måte som starttilstanden. Det er viktig at du gir den samme navn som du brukte i «Til tilstand» i overgangen.\n Figur 65 - Ny tilstand   Rolledefinerte dialogsider kan du bruke dersom du har dialogsider som bare skal vises til brukere med bestemte roller. De dialogsidene du velger her vil bli vist i stedet for den som er valgt for tilstanden dersom en bruker har en bestemt rolle. For å sette opp hvilken rolle dette skal være, må du overstyre rettigheter for dialogsiden. Bruk sekvensnummer for å avgjøre hvilken rekkefølge SBL vil sjekke dialogsidene for rollekrav. Du bør sette den dialogsiden med mest spesifikke rollekrav først.\nGjenbruk av data Gjenbruk av data kan defineres innenfor en samhandlingstjeneste. En gjenbruksdefinisjon angir hvilke felter som skal kopieres fra en tjenesteutgave til en annen. Det kan bare gjøres for innsendings- og meldingstjenester, og den tjenesten som skal avgi data må være lagret i sluttbrukers meldingsboks. Når sluttbruker starter en tjenesteutgave som skal gjenbruke data fra en annen, vil data kunne hentes – enten automatisk, eller etter at sluttbruker har bekreftet, eventuelt også valgt hvilken tjenesteinstans data skal hentes fra.\nFor å gjenbruke data må det lages en XSLT-fil som mapper datafelt mellom XML for avgivende tjeneste (produsent) og XML for tjenesten som mottar data (konsument). Hver XSL-transformasjon må resultere i en «transformert XML» som er gyldig iht. skjema­format/XSD for konsumenten. For meldingstjenester som inneholder flere Infopath-vedlegg, er det aktuelt å lage flere XSLT-filer, der hver fil mapper fra ett produsentskjemas XML til konsument­skjemaets XML. Når gjenbruksdefinisjonen behandles i Sluttbrukerløsningen, vil XLS-transformasjonene kjøres på hvert enkelt produsentskjema i vilkårlig rekkefølge. For hver påfølgende transformasjon vil de resulterende «transformerte XMLene» slås sammen i en «felles, transformert (merged) XML», som importeres i konsument-skjema ved instansiering.\nHvis preutfylling benyttes for konsumenten, finner dette sted etter at eventuelle gjenbruks­definisjoner er behandlet. Preutfylling vil dermed kunne overskrive gjenbruk av data.\nI TUL lager du en gjenbruksdefinisjon ved å velge hvilke utgaver som avgir/mottar data, og bla deg fram til og laste opp XSLT-filen. For en meldingstjeneste må du også velge hvilket skjema det gjelder, siden samme tjeneste kan ha flere skjema. Hvis du definerer gjenbruk av datafelter fra flere skjema innenfor samme meldingstjeneste, må du sørge for at feltene ikke overskriver hverandre i konsument-tjenesten. Hvis sluttbrukers tjenesteinstans i praksis kan inneholde flere vedleggsskjema, må felter fra disse skjemaene derfor ikke mappes til samme felt i konsumenten.\n Figur 66 - Gjenbruk av data   Skal du endre en gjenbruksdefinisjon, sletter du den i listen ved å klikke på Slett-lenken, og laster opp på nytt.\nMerknadsliste En merknad er en beskjed som kan sendes fra tjenesteeier og vises til sluttbruker i SBL. En merknad kan sendes fra tjenesteeiers systemer til sluttbrukers samhandlingstjeneste i Altinn, eller til en underliggende tjeneste. Det kan defineres et sett med merknader som kan brukes innenfor en samhandlingstjeneste. Hver merknad får tildelt en ID og kan oversettes, som andre parametre i TUL.\n Figur 67 – Merknadsliste   Du skriver inn en merknadstekst i tekstfeltet øverst på *Merknadsliste-*siden i TUL. Merknadsteksten kan inneholde variable på følgende format: \u0026ldquo;merknadstekst $$variabelnavn$$ mer tekst\u0026rdquo;. Trykk deretter på knappen Legg til for å legge den til i listen over merknader. I listen ser du hvilken ID merknaden er tildelt. Merknadene kan endres eller slettes i etterkant ved å klikke på lenkene Endre eller Slett knyttet til hvert innslag i listen.\nMerknader kan vises i dialogkomponentene Min meldingsboks eller Status i en dialogside. Dialogkomponentene må være konfigurert til å kunne vise merknad for at disse skal vises i SBL.\n Figur 68 – Dialogkomponenten “Status”    Figur 69 – Dialogkomponenten “Min meldingsboks”   Innhold - samhandlingstjeneste Dialogsider Ved å utvikle dialogsider bestemmer du hvordan samhandlingstjenesten skal presenteres i SBL for hver enkelt tilstand av tjenesten. For hver tilstand kobler du til en dialogside. Tilstandene kan ikke ferdigdefineres før dialogsidene er opprettet.\n Figur 70 - Dialogsider   Dialogsider defineres ved hvilke dialogkomponenter de skal inneholde. For hver dialogside og -komponent angis parametre som styrer innhold og presentasjon for sluttbruker. Utvikling av dialogsider er også en designoppgave der kunnskap om brukerinteraksjon og visuell design er nyttig.\nDet vi i TUL/Altinn kaller dialogkomponent og dialogside vil i grensesnittet i TUL enkelte steder omtales som henholdsvis webdel og webdel-side. Dette er fordi TUL er bygget på standard SharePoint-komponenter, og dialogsidene er bygget opp av SharePoints standard webdel-komponenter.\nEn dialogside kan lages ny, eller ved å kopiere en eksisterende dialogside.\n Figur 71 - Kopi av dialogside   Hvis du velger å opprette en ny dialogside, vil en parameterside Ny dialogside åpnes. Her kan du skrive inn et navn på dialogsiden og velge en oppsettsmal. Navnet er et filnavn som brukes i TUL.\nTUL inneholder 6 oppsettsmaler som tjenesteutvikler kan velge mellom når dialogsiden lages. Du velger hvilken mal du vil bruke til dialogsiden fra en liste med beskrivende navn for malen. Legg merke til figuren som illustrerer sideinndelingen.\n Figur 72 – Opprette dialogside   Når template er valgt kan du legge til webdeler/dialogkomponenter ved å trykke på Legg til en webdel.\n Figur 73 – Dialogside i redigeringsmoduse   Dialogkomponenter Det eksisterer 10 tilgjengelige webdeler/dialogkomponenter:\n Aktiv innsynstjeneste Aktører Grafikk Hendelser Informasjon Kommentarfelt Lenker Status Utvalg fra Min meldingsboks Utvalg fra Tjenestekatalogen  Når du har valgt å legge til en webdel på en dialogside vil ribbon endre seg til en liste over de 10 tilgjengelige dialogkomponentene.\n Figur 74 – Ribbon-meny for å velge dialogkomponent   Tilpass utseende og innhold Du kan endre overskrift og tilpasse utseende til dialogkomponentene i SBL. I tillegg kan du tilpasse innholdet i de fleste dialogkomponentene ved å sette parametre knyttet til innholdet.\nFor å endre en webdel må du åpne den i editeringsmodus. Dette gjør du ved å klikke på pillenken til høyre og deretter Rediger webdel i webdelens header:\n Figur 75 – Endre dialogkomponent    Figur 76 – Dialogkomponent i redigeringsmodus   Tabellen under viser en oversikt over parametrene knyttet til dialogkomponentenes utseende. Disse parametrene er felles for alle dialogkomponentene. Verdiene i fet skrift representerer standard-utseende (default-verdier).\n   Overskriftsvisning Ramme Bakgrunn Ekstra avstand Skillelinje Høyde     Ingen Ingen tekst Ingen Ingen ramme, kun strek under tittel Ingen Ingen bakgrunn Ingen 25px Ingen Ingen skillelinje Dynamisk   Diskret  12px Diskret 1px blå ramme + skygge Diskret Lys blå, #f2f6f8 Over 45px Over 3px blå-hvit-blå skillelinje Fast   Markant 12px med blå gradert bakgrunn Markant 3px blå-hvit-blå ramme + skygge Markant Medium blå,\n#d0e0e7   Under 3px blå-hvit-blå skillelinje     Parametrene som gjelder innholdet i dialogkomponentene vil variere fra komponent til komponent.\nFor dialogkomponenten Aktiv innsynstjeneste kan du bare velge hvilken innsynstjeneste som skal vises i komponenten. Utover dette er det ingen innholdsparametre du kan sette. Det er en forutsetning at innsynstjenesten er definert i samhandlingstjenestenes tjenesteutvalg for at den skal listes i nedtrekkslisten hvor du velger tjenester.\n Figur 77 – Aktiv innsynstjeneste   Dialogkomponenten Aktører lister tjenesteeiere og sluttbrukere som er involvert i samhandlingstjenesten. Du kan tilpasse innholdet i dialogkomponenten ved å sette eller ta bort haker i sjekkboksene Vis sluttbrukere som har endret tjenesten, Vis sluttbrukere med overstryrte rettigheter og Vis tjenesteeiere.\n Figur 78 – Aktører   I dialogkomponenten Grafikk kan du velge et bilde fra grafikkbiblioteket på arbeidsflaten for samhandlingstjenesten. Det anbefales i tillegg å legge inn en alternativ tekst og eventuelt en tooltip. Alternativ tekst vil vises i tilfeller der bildet ikke vises, for eksempel hvis sluttbruker har valgt å ikke vise bilder i nettleseren. Om sluttbruker benytter Jaws (skjermoppleser som brukes av blinde) vil alt-teksten leses opp. Tooltip er teksten som kommer opp i en gul liten boks når du holder musepekeren over bildet, den vil kunne gi sluttbruker tilleggsinformasjon om bildet. Jaws vil lese både alt-teksten og tooltip-teksten.\n Figur 79 – Grafikk   Dialogkomponenten Hendelser brukes for å liste hendelser som kan føre til overgang til en ny tilstand innen samhandlingstjenesten. Ved å sette eller ta bort haken i sjekkboksen Vis tidligere hendelser kan du velge hvorvidt hendelser fra tidligere dialogsider skal vises. På parametersiden Tilstander kan du gi hendelsene som listes i denne dialogkomponenten gode, brukervennlige navn. På denne siden kan du også velge hvorvidt en hendelse skal listes i denne dialogkomponenten eller ikke.\n Figur 80 – Hendelser   Dialogkomponenten Informasjon gir mulighet til å skrive inn en informasjonstekst i en WYSIWYG-editor. Utover dette er det ingen parametre som kan settes for innholdet i komponenten.\n Figur 81 – Informasjon   For dialogkomponenten Kommentarfelt er det ingen parameter som kan settes for innholdet. Denne dialogkomponenten gir sluttbruker mulighet til å legge inn egne kommentarer på siden.\n Figur 82 – Kommentarfelt   Dialogkomponenten Lenker gir deg mulighet til å legge til egendefinerte lenker på dialogsiden. Du kan velge å ha en overskrift som grupperer en eller flere lenker, legge til en lenketekst, URL, tooltip og definere hvorvidt du vil at lenken skal åpnes i et nytt nettleservindu. Hvis du legger til flere lenker kan du i etterkant endre rekkefølgen på lenkene.\n Figur 83 – Lenker   I dialogkomponenten Status er det tenkt at du kan legge inn en statusmelding til sluttbruker. Du kan velge å vise tilstandsnavn og merknad sammen med statusen ved å sette eller ta bort haker i sjekkboksene Vis tilstandsnavn og Vis merknad.\n Figur 84 – Status   Dialogkomponenten Utvalg fra Min meldingsboks lister alle instanser av tjenester som er definer i tjenesteutvalget for samhandlingstjenesten. Dialogkomponenten vil liste alle instansene av tjenesten uavhengig av tilstand, men filtrert ut i fra parametrene du kan sette for dialogkomponenten. Du setter filtrene ved å sette eller ta bort haker i sjekkboksene Til min behandling, Venter på andre og Arkivert.\nDu kan også tilpasse innholdet i dialogkomponenten ved å velge hvilke kolonner fra Min meldingsboks som skal vises. Dette gjør du også ved å sette eller ta bort haker for disse kolonnene (Tittel, Status, Dato etc.).\n Figur 85 – Utvalg fra Min meldingsboks   Dialogkomponenten Utvalg fra Tjenestekatalogen kan liste tjenester som er definer i tjenesteutvalget for samhandlingstjenesten. Du må aktivt legge til tjenestene fra nedtrekkslisten og legge de til dialogkomponenten. Du kan tilpasse innholdet ved å sette eller ta bort haker i sjekkboksene Vis tjenesteeier, Skjul kolonneoverskrifter og Vis bare tjenester som sluttbruker har rettighet til.\n Figur 86 – Utvalg fra tjenestekatalogen   Egendefinerte dialogkomponenter Dersom tjenesteutvikler ønsker andre dialogkomponenter, kan disse utvikles separat og tilgjengeliggjøres i SBL og TUL slik at de kan velges som del av en dialogside.\nDette består da av flere prosesser, som ikke tjenesteutvikler kan gjøre helt på egenhånd, siden dette inkluderer tilpassning av allerede eksisterende Altinn kildekode. For at komponentene skal bli tilgjengelige, kreves det bistand både fra leverandør og driftsleverandør. Noen av forutsetningene vil være tilgang til Altinn-kode for integrasjon/test – herunder et fullt Altinn utviklingsmiljø med Sharepoint installert. \u0026ldquo;Andre dialogkomponenter\u0026rdquo; vil kunne være komponenter som viser et helt annet innhold – typisk fra tjenesteeier selv.\nFølgende må gjøres ifm utvikling og tilgjengeliggjøring av dialogkomponenter:\n Tjenesteeier (IKT/tekniker) utvikler web parts (én for TUL og én for SBL) i sitt utviklingsmiljø/Visual Studio. For GUI bør User Controls benyttes. Leverandør legger på arv fra korrekte baseklasser, før Leverandør og Driftsleverandør kvalitetssikrer i Altinn utviklings-/testmiljø og deployer til TUL og SBL. Hvis data skal hentes eksternt må infrastruktur tilrettelegges (f.eks. åpning av brannmurer) eksternt, samt i TUL og SBL. Fagperson finner komponenten i TUL og jobber som vanlig.  Grafikkbibliotek Grafikkbiblioteket brukes til å laste opp bilder som skal brukes i dialogkomponenten Grafikk. Dette er bare relevant hvis du bruker denne komponenten i en eller flere dialogsider.\n"
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/diverse/sletting/",
	"title": "Slette tjeneste og utgave",
	"tags": [],
	"description": "Det er mulig å slette en tjeneste eller en tjenesteutgave fra TUL dersom du skulle ønske det.",
	"content": " Det er mulig å slette en tjeneste eller en tjenesteutgave fra TUL dersom du skulle ønske dette. Det kan være fordi tjenesten ikke lenger skal være i bruk og dermed skal slettes både fra TUL og fra sluttbrukerløsningen. Det kan også skyldes at en tjeneste erstatter en annen eller at det er startet arbeid på en tjeneste eller utgave som ikke er korrekt.\nSletting av tjenester og utgaver i TUL blir gjort i to separate steg. Den første slette­operasjonen kan gjøres av brukeren selv. Dette er en operasjon som bare vil gjøre at tjenesten eller utgaven ikke lenger vil bli vist, men den er ikkje fjernet. Dermed er den mulig å gjenopprette. En administrator vil kunne permanent slette en slik tjeneste eller utgave som har blitt slettet.\nGjenopprettbar sletting av tjeneste Når du har slettet en tjeneste eller tjenesteutgave vil den ikke lenger være synlig i TUL eller SBL. Den vil ikke fjernes fysisk fra TUL SharePoint, men vil bli merket som slettet. Utgaven da bare kunne sees av en administrator.\nSlette tjeneste For å slette en tjeneste fra TUL starter du med å slette eventuelle utgaver først. Du får ikke lov å slette en tjeneste som har aktive utgaver. Deretter går du til tjenesteeiers arbeidsflate og velger alternativet Slett i kontekstmenyen til tjenesten du ønsker å slette.\n Figur 112 - Slett tjeneste   Du kommer da til et eget skjermbilde der du kan slette tjenesten.\n Figur 113 - Det er kun mulig å slette tjenester som ikke har noen utgaver   Når du har bekreftet slettingen vil tjenesten fjernes fra alle steder den tidligere har vært tilgjengelig. Det er verdt å merke seg, at tjenesten vil være synlig for administratorer, men da ville være markert i rødt. I skjermbildet over er slett-knappen deaktivert pga at tjenesten har utgaver.\nHvordan slette utgave For å slette en tjenesteutgave fra TUL starter du på tjenestens arbeidsflate og velger alternativet Slett i kontekstmenyen til utgaven du ønsker å slette. Du kommer da til et skjermbilde der du kan slette tjenesteutgaven. Sletting er bare mulig dersom ingen deler av utgaven er sjekket ut for editering.\n Figur 114 - Slett tjenesteutgave   Når du har bekreftet slettingen vil prosessen videre være avhengig av om utgaven er produksjonssatt eller ikke.\nHvis utgaven er produksjonssatt vil det bli sendt melding til applikasjonsforvalter om at utgaven skal deaktiveres i produksjon. Utgaven blir liggende i TUL med status deaktivering bestilt, inntil bekreftelse kommer fra driftsoperatøren om at deaktivering er utført. Først da blir utgaven slettet, og det gjøres manuelt av en bruker med administratorrettigheter i TUL. Bare brukere med administratorrettighet får lov å velge Slett på en utgave som har status deaktivering bestilt status.\nHvis utgaven ikke er produksjonssatt blir den slettet i TUL SharePoint straks, samtidig som eventuelle versjoner som er migrert til testmiljø blir deaktivert der.\nDet er verdt å merke seg, er at tjenesteutgaven vil kunne vises for administratorer, men da ville være markert i rødt.\nGjenopprette slettede tjenester og utgaver Dette er en operasjon som utføres sjelden, og det er derfor ikke et eget brukergrensesnitt for dette i TUL, men en manuell jobb som gjøres i databasen av driftsleverandør. Det vil avhenge av tjenesteeier sin prosess mot driftsleverandør, men det oppfordres til at gjennopprettelse av slettede utgaver og tjenester bestilles enkeltvis ved behov.\nPermanent slette tjenester og utgaver Tjenester og utgaver som har blitt slettet ved hjelp av metoden beskrevet under gjenopprettbar sletting av tjeneste kan bli permanent slettet fra TUL. Dette må gjøres av en bruker som har administratorrettigheter (såkalt «administrator for områdesamling» / «site collection administrator» i SharePoint) for den tjenesteeieren tjenesten ligger i. Dersom du kan se slettede tjenester og utgaver (markert med rød bakgrunn) skal du også kunne permanent slette de.\nTjenester og utgaver som er permanent sletting vil bli helt og holdent fjernet fra databasen og SharePoint, og det vil ikke være mulig å gjenopprette de. Også alt innhold, som for eksempel skjema og migreringspakker, vil bli slettet. Innholdet kan heller ikke gjenopprettes etter permanent sletting.\nPermanent slette tjeneste For å permanent slette en tjeneste må du logge inn med en administratorbruker og gå til tjenesteeierarbeidsflaten. Tjenester markert med rød bakgrunn er slettet og er dermed mulig å permanent slette. For å permanent slette en tjeneste velger du menyvalget «Slett tjenesten permanent» som du får opp ved å trykke ved siden av tjenestelenken i kolonnen «Tjenestenavn». Dette menyvalget er bare tilgjengelig for tjenester som allerede er markert med rødt.\nFor å kunne slette tjenesten må også alle utgavene være slettet (markert med rødt). Dersom en eller flere utgaver ikke er slettet vil du få feilmelding når du prøver å slette permanent. Har tjenesten utgaver, og alle disse er slettet, så vil «Slett tjenesten permanent» slette både tjenesten og alle utgavene permanent. Du vil få opp en bekreftelsesdialog med liste over alle utgaver som vil bli slettet.\n Figur 115 – Menyvalg for å permanent slette tjeneste   Permanent slette utgave For å permanent slette en utgave må du logge inn med en administratorbruker og gå til tjenestearbeidsflaten. Utgaver markert med rød bakgrunn er slettet, og kan dermed permanent slettes. Bruk menyvalget «Slett utgaven permanent» for å permanent slette utgaven. Dette valget får du ved å klikke på aktuell utgave i «Kortnavn»-kolonnen. Merk at menyvalget bare vil være tilgjengelig for utgaver som er markert med rød bakgrunn. Utgaver som er del av et skjemasett kan ikke slettes.\n Figur 116 – Menyvalg for å permanent slette utgave   "
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/diverse/utgavesok-oversending/",
	"title": "Søk på tjenesteutgaver for gitt overføringsmetode",
	"tags": [],
	"description": "Søkeside hvor tjenesteeier kan søke på utgaver som benytter gitt overføringsmetode ved innsending",
	"content": "For innsending-, innsyn- og meldingtjenester kan Metode for oversending av tjenesteutgaves data settes på utgavenivå (se oversikt over utgaveparametere). Hver enkelt tjenesteeier kan søke på hvilke tjenesteutgaver som benytter en gitt metode for oversending ved å gå inn på egen søkeside fra tjenesteeier-arbeidsflaten. Søkesiden kan nås via lenke under Felles ressurser for tjenesteeier.\n Lenke til søkeside   Søk gjøres ved å velge ønsket metode for overføring fra nedtrekksliste. Metodene som vises i nedtrekkslisten er alle de aktive metodene som er tilgjengelige for tjenesteeieren. Dersom det er utgaver som benytter valgt metode vises disse i en liste, med lenke direkte til utgaven.\n Søkeresultat   Dersom ingen metode er valgt, eller det ikke er noen utgaver som bruker den valgte metoden, vises en tom liste.\n Ingen metode valgt/tomt søkeresultat   "
},
{
	"uri": "https://altinn.github.io/docs/tags/todo/",
	"title": "TODO",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://altinn.github.io/docs/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://altinn.github.io/docs/guides/tul/tjenestetyper/innsending/vedleggstyper/",
	"title": "Vedleggstyper",
	"tags": [],
	"description": "En vedleggstype kan du bruke til å definere et sett med vilkår som må følges for å laste opp filvedlegg.",
	"content": " En vedleggstype kan du bruke til å definere et sett med vilkår som må følges for å laste opp filvedlegg. Disse vilkårene vil bli brukt av sluttbrukerløsningen for å godkjenne filer som blir lastet opp. På denne måten kan du definere et sett med regler for filer som skal lastes opp, som kan bli brukt av flere tjenester.\nVedleggstyper blir opprettet og vedlikeholdt av hver enkelt tjenesteeier. Alle vedleggstyper som blir opprettet av tjenesteeier vil være tilgjengelig for alle innsendingstjenester hos denne tjenesteeieren. Vedleggstyper fra andre tjenesteeiere vil ikke være tilgjengelig. For å opprette, endre eller se på vedleggstyper går tjenesteeier inn på siden «Definer vedleggstyper». Denne siden finnes det link til på tjenesteeierarbeidsflaten.\nEtter at du har sjekket ut, kan du lage en ny vedleggstype ved å fylle ut feltene i \u0026ldquo;Legg til vedleggstype\u0026rdquo;-seksjonen, og trykke \u0026ldquo;Legg til vedleggstype\u0026rdquo;-knappen når du er ferdig. Da vil den nye vedleggstypen bli lagt i listen over vedleggstyper. Den vil derimot ikke bli lagret før du sjekker inn. Dersom du ikke sjekker inn, vil endringen din ikke bli lagret. Du kan gjøre endringer på flere forskjellige vedleggstyper før du sjekker inn, og på den måten lagre flere samtidig.\nDefinere vedleggstyper   Figur 134a Definere vedleggstyper-siden    Figur 134b Definere vedleggstyper-siden   Navn Navnet du gir vedleggstypen er navnet tjenesteutviklere vil se når de skal velge vedleggstypen for en tjenesteutgave. Dette navnet blir også brukt av sluttbrukersystemet for å identifisere vedleggstype ved opplasting. Navnet må derfor være unikt innenfor hver tjenesteeier. Små og store bokstaver vil bli betraktet som like, det vil si at «ABC» vil være identisk med «abc». Du vil ikke få lov til å bruke et navn som allerede er i bruk. Bare små og store bokstaver mellom a og z er tillatt. I tillegg kan du bruke tall og _ (understrek). Navnet kan ikke starte med «xml».\nForetrukket navngiving skal baserest på at flere ledd blir skilt med understrek (_) som for eksempel «skd_lonnslipp».\nNavnet kan du bare endre på dersom vedleggstypen ikke er i bruk av tjenesteutgaver. Dersom du endrer navn eller sletter en vedleggstype så vil navnet den hadde kunne brukes av en ny vedleggstype.\nVisningsnavn Visningsnavnet er navnet som vil bli vist til sluttbruker når han skal velge hvilken vedleggstype han ønsker å laste opp. Dette er basert på brukerens språk, og må derfor oversettes.\nMinimum/Maksimum antall filvedlegg Minimum/Maksimum antall filvedlegg kan du bruke dersom du vil begrense hvor mange filvedlegg av denne typen som kan bli lastet opp. Verdien for minimum antall er forhåndsutfylt til 0, noe som betyr at det ikke er noen begrensing. Minimum antall filvedlegg kan du bruke til å kreve at brukeren må laste opp minst et visst antall filvedlegg. Dersom du ikke ønsker å kreve et minimums- /maksimum antall kan du la feltet stå blankt.\nMaks filstørrelse Maks filstørrelse brukes for å begrense størrelsen på filvedleggene som lastes opp. Filopplastingstjenesten har en begrensing på 200 MB, og du kan derfor ikke tillate større filer enn det.\nValgene om lagring i tjenesteeierarkivet og sluttbrukerarkivet avgjør om filvedleggene vil bli lagret i de respektive arkivene. Valget du gjør her vil ikke påvirke lagring av selve tjenesteutgaven, bare filvedleggene. Dersom tjenesteutgaven ikke tillater lagring i arkivene, så vil heller ikke filvedleggene bli lagret, selv om du har satt dem til \u0026ldquo;ja\u0026rdquo; på vedleggstypen.\nFiltyper Filtyper som kan lastes opp defineres dersom du vil begrense filene som kan bli lastet opp basert på filendelser. Dersom du vil sette begrensinger fjerner du haken for \u0026ldquo;Godta alle filtyper\u0026rdquo; og fyller inn filendelsene for filtypene du vil tillate. Vil du fylle inn mer enn en filendelse, bruker du komma til å skille mellom dem. Du trenger ikke punktum eller stjerne framfor filendelsene.\nEksempel: \u0026ldquo;doc, xls, xml\u0026rdquo;\nXsd-validering Valideringsfil i xsd-format vil bli brukt til å validere xml-filer som lastes opp. Last opp valideringsfil ved å klikke på filvalgsknappen og last opp filen du vil bruke. Dersom du har fjernet \u0026ldquo;godta alle filtyper\u0026rdquo;, vil du ikke kunne laste opp en slik fil før du har fylt inn \u0026ldquo;xml\u0026rdquo; som en gyldig filtype.\nDersom du har lastet opp en valideringsfil, betyr dette at denne vil bli brukt til å validere alle xml-filer som blir lastet opp. Det er bare xml-filer som vil bli validert. Andre filtyper kan ikke valideres. Ønsker du å fjerne valideringen, må du fjerne xsd-filen fra vedleggstypen.\nGenerer sjekksum Generer sjekksum avgjør om det skal genereres sjekksummer for filvedleggene ved opplasting. Dette kan brukes til å forsikre seg om at filen som er lastet opp har samme innhold som filen sjekksummen er generert fra. Vær oppmerksom på at generering av sjekksum kan være tidkrevende for store filer.\nEndring av vedleggstype For å endre en eksisterende vedleggstype må du finne den i lista og trykke på \u0026ldquo;Endre\u0026rdquo;-knappen. Dette forutsetter at siden er sjekket ut. Verdiene til den valgte vedleggstypen vil da bli fylt ut i de samme feltene du bruker til å lage en ny vedleggstype. Du kan så endre verdiene du vil. Legg merke til at navnet ikke kan endres på dersom vedleggstypen er tatt i bruk av en eller flere utgaver. For å lagre endringene, må du klikke på \u0026ldquo;Oppdater\u0026rdquo;-knappen. Vil du avbryte endringene dine, trykker du på \u0026ldquo;Forkast endringer\u0026rdquo;.\nDersom vedleggstypen er i bruk vil du få en advarsel om dette. For å finne ut hvilke tjenesteutgaver som bruker vedleggstypen kan du enten trykke på \u0026ldquo;Se hvilke tjenesteutgaver\u0026rdquo; bak advarselen, eller trykke på linken i \u0026ldquo;Brukt av\u0026rdquo;-kolonnen i listen. Endringene du gjør vil bli del av framtidige migreringer for alle tjenesteutgaver som bruker vedleggstypen. Tjenesteutgaver som allerede har blitt migrert med gamle innstillinger vil fortsette å bruke disse inntile utgaven eventuelt blir migrert på nytt. Utviklerene av tjenesteutgavene vil ikke få noen advarsel om at vedleggstypen har blitt endret. Det er derfor tjenesteeier sitt ansvar å vurdere om endringene er noe tjenesteutviklerene bør gjøres oppmerksomme på.\n"
}]